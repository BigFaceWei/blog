(function(bx,cb){var bB=bx.document,cc=bx.navigator,bC=bx.location,a4=(function(){var b0=function(b,a){return new b0.fn.init(b,a,cp)},co=bx.jQuery,cj=bx.$,cp,v=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,cq=/\S/,u=/^\s+/,s=/\s+$/,r=/\d/,ck=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,a0=/^[\],:{}\s]*$/,cr=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,q=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,cs=/(webkit)[ \/]([\w.]+)/,cl=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,ct=/(mozilla)(?:.*? rv:([\w.]+))?/,y=/-([a-z])/ig,n=function(a,b){return b.toUpperCase()},o=cc.userAgent,p,l,j,cm=Object.prototype.toString,x=Object.prototype.hasOwnProperty,k=Array.prototype.push,t=Array.prototype.slice,cn=String.prototype.trim,cu=Array.prototype.indexOf,g={};b0.fn=b0.prototype={constructor:b0,init:function(G,F,H){var d,a,c,b;if(!G){return this}if(G.nodeType){this.context=this[0]=G;this.length=1;return this}if(G==="body"&&!F&&bB.body){this.context=bB;this[0]=bB.body;this.selector=G;this.length=1;return this}if(typeof G==="string"){if(G.charAt(0)==="<"&&G.charAt(G.length-1)===">"&&G.length>=3){d=[null,G,null]}else{d=v.exec(G)}if(d&&(d[1]||!F)){if(d[1]){F=F instanceof b0?F[0]:F;b=(F?F.ownerDocument||F:bB);c=ck.exec(G);if(c){if(b0.isPlainObject(F)){G=[bB.createElement(c[1])];b0.fn.attr.call(G,F,true)}else{G=[b.createElement(c[1])]}}else{c=b0.buildFragment([d[1]],[b]);G=(c.cacheable?b0.clone(c.fragment):c.fragment).childNodes}return b0.merge(this,G)}else{a=bB.getElementById(d[2]);if(a&&a.parentNode){if(a.id!==d[2]){return H.find(G)}this.length=1;this[0]=a}this.context=bB;this.selector=G;return this}}else{if(!F||F.jquery){return(F||H).find(G)}else{return this.constructor(F).find(G)}}}else{if(b0.isFunction(G)){return H.ready(G)}}if(G.selector!==cb){this.selector=G.selector;this.context=G.context}return b0.makeArray(G,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return t.call(this,0)},get:function(a){return a==null?this.toArray():(a<0?this[this.length+a]:this[a])},pushStack:function(b,d,c){var a=this.constructor();if(b0.isArray(b)){k.apply(a,b)}else{b0.merge(a,b)}a.prevObject=this;a.context=this.context;if(d==="find"){a.selector=this.selector+(this.selector?" ":"")+c}else{if(d){a.selector=this.selector+"."+d+"("+c+")"}}return a},each:function(b,a){return b0.each(this,b,a)},ready:function(a){b0.bindReady();l.done(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(t.apply(this,arguments),"slice",t.call(arguments).join(","))},map:function(a){return this.pushStack(b0.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:k,sort:[].sort,splice:[].splice};b0.fn.init.prototype=b0.fn;b0.extend=b0.fn.extend=function(){var J,L,b,c,M,a,d=arguments[0]||{},H=1,K=arguments.length,N=false;if(typeof d==="boolean"){N=d;d=arguments[1]||{};H=2}if(typeof d!=="object"&&!b0.isFunction(d)){d={}}if(K===H){d=this;--H}for(;H<K;H++){if((J=arguments[H])!=null){for(L in J){b=d[L];c=J[L];if(d===c){continue}if(N&&c&&(b0.isPlainObject(c)||(M=b0.isArray(c)))){if(M){M=false;a=b&&b0.isArray(b)?b:[]}else{a=b&&b0.isPlainObject(b)?b:{}}d[L]=b0.extend(N,a,c)}else{if(c!==cb){d[L]=c}}}}}return d};b0.extend({noConflict:function(a){if(bx.$===b0){bx.$=cj}if(a&&bx.jQuery===b0){bx.jQuery=co}return b0},isReady:false,readyWait:1,holdReady:function(a){if(a){b0.readyWait++}else{b0.ready(true)}},ready:function(a){if((a===true&&!--b0.readyWait)||(a!==true&&!b0.isReady)){if(!bB.body){return setTimeout(b0.ready,1)}b0.isReady=true;if(a!==true&&--b0.readyWait>0){return}l.resolveWith(bB,[b0]);if(b0.fn.trigger){b0(bB).trigger("ready").unbind("ready")}}},bindReady:function(){if(l){return}l=b0._Deferred();if(bB.readyState==="complete"){return setTimeout(b0.ready,1)}if(bB.addEventListener){bB.addEventListener("DOMContentLoaded",j,false);bx.addEventListener("load",b0.ready,false)}else{if(bB.attachEvent){bB.attachEvent("onreadystatechange",j);bx.attachEvent("onload",b0.ready);var b=false;try{b=bx.frameElement==null}catch(a){}if(bB.documentElement.doScroll&&b){z()}}}},isFunction:function(a){return b0.type(a)==="function"},isArray:Array.isArray||function(a){return b0.type(a)==="array"},isWindow:function(a){return a&&typeof a==="object"&&"setInterval" in a},isNaN:function(a){return a==null||!r.test(a)||isNaN(a)},type:function(a){return a==null?String(a):g[cm.call(a)]||"object"},isPlainObject:function(a){if(!a||b0.type(a)!=="object"||a.nodeType||b0.isWindow(a)){return false}if(a.constructor&&!x.call(a,"constructor")&&!x.call(a.constructor.prototype,"isPrototypeOf")){return false}var b;for(b in a){}return b===cb||x.call(a,b)},isEmptyObject:function(b){for(var a in b){return false}return true},error:function(a){throw a},parseJSON:function(a){if(typeof a!=="string"||!a){return null}a=b0.trim(a);if(bx.JSON&&bx.JSON.parse){return bx.JSON.parse(a)}if(a0.test(a.replace(cr,"@").replace(q,"]").replace(f,""))){return(new Function("return "+a))()}b0.error("Invalid JSON: "+a)},parseXML:function(b,a,c){if(bx.DOMParser){c=new DOMParser();a=c.parseFromString(b,"text/xml")}else{a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b)}c=a.documentElement;if(!c||!c.nodeName||c.nodeName==="parsererror"){b0.error("Invalid XML: "+b)}return a},noop:function(){},globalEval:function(a){if(a&&cq.test(a)){(bx.execScript||function(b){bx["eval"].call(bx,b)})(a)}},camelCase:function(a){return a.replace(y,n)},nodeName:function(b,a){return b.nodeName&&b.nodeName.toUpperCase()===a.toUpperCase()},each:function(b,a,F){var d,c=0,G=b.length,H=G===cb||b0.isFunction(b);if(F){if(H){for(d in b){if(a.apply(b[d],F)===false){break}}}else{for(;c<G;){if(a.apply(b[c++],F)===false){break}}}}else{if(H){for(d in b){if(a.call(b[d],d,b[d])===false){break}}}else{for(;c<G;){if(a.call(b[c],c,b[c++])===false){break}}}}return b},trim:cn?function(a){return a==null?"":cn.call(a)}:function(a){return a==null?"":a.toString().replace(u,"").replace(s,"")},makeArray:function(d,a){var b=a||[];if(d!=null){var c=b0.type(d);if(d.length==null||c==="string"||c==="function"||c==="regexp"||b0.isWindow(d)){k.call(b,d)}else{b0.merge(b,d)}}return b},inArray:function(a,c){if(cu){return cu.call(c,a)}for(var b=0,d=c.length;b<d;b++){if(c[b]===a){return b}}return -1},merge:function(a,d){var c=a.length,b=0;if(typeof d.length==="number"){for(var D=d.length;b<D;b++){a[c++]=d[b]}}else{while(d[b]!==cb){a[c++]=d[b++]}}a.length=c;return a},grep:function(F,b,H){var d=[],a;H=!!H;for(var c=0,G=F.length;c<G;c++){a=!!b(F[c],c);if(H!==a){d.push(F[c])}}return d},map:function(L,b,d){var c,H,K=[],I=0,a=L.length,J=L instanceof b0||a!==cb&&typeof a==="number"&&((a>0&&L[0]&&L[a-1])||a===0||b0.isArray(L));if(J){for(;I<a;I++){c=b(L[I],I,d);if(c!=null){K[K.length]=c}}}else{for(H in L){c=b(L[H],H,d);if(c!=null){K[K.length]=c}}}return K.concat.apply([],K)},guid:1,proxy:function(d,a){if(typeof a==="string"){var c=d[a];a=d;d=c}if(!b0.isFunction(d)){return cb}var b=t.call(arguments,2),D=function(){return d.apply(a,b.concat(t.call(arguments)))};D.guid=d.guid=d.guid||D.guid||b0.guid++;return D},access:function(L,H,c,b,J,K){var a=L.length;if(typeof H==="object"){for(var d in H){b0.access(L,d,H[d],b,J,c)}return L}if(c!==cb){b=!K&&b&&b0.isFunction(c);for(var I=0;I<a;I++){J(L[I],H,b?c.call(L[I],I,J(L[I],H)):c,K)}return L}return a?J(L[0],H):cb},now:function(){return(new Date()).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=cs.exec(a)||cl.exec(a)||w.exec(a)||a.indexOf("compatible")<0&&ct.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function b(B,d){return new b.fn.init(B,d)}b0.extend(true,b,this);b.superclass=this;b.fn=b.prototype=this();b.fn.constructor=b;b.sub=this.sub;b.fn.init=function c(A,d){if(d&&d instanceof b0&&!(d instanceof b)){d=b(d)}return b0.fn.init.call(this,A,d,a)};b.fn.init.prototype=b.fn;var a=b(bB);return b},browser:{}});b0.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b,a){g["[object "+a+"]"]=a.toLowerCase()});p=b0.uaMatch(o);if(p.browser){b0.browser[p.browser]=true;b0.browser.version=p.version}if(b0.browser.webkit){b0.browser.safari=true}if(cq.test("\xa0")){u=/^[\s\xA0]+/;s=/[\s\xA0]+$/}cp=b0(bB);if(bB.addEventListener){j=function(){bB.removeEventListener("DOMContentLoaded",j,false);b0.ready()}}else{if(bB.attachEvent){j=function(){if(bB.readyState==="complete"){bB.detachEvent("onreadystatechange",j);b0.ready()}}}}function z(){if(b0.isReady){return}try{bB.documentElement.doScroll("left")}catch(a){setTimeout(z,1);return}b0.ready()}return b0})(),am="done fail isResolved isRejected promise then always pipe".split(" "),bG=[].slice;a4.extend({_Deferred:function(){var a=[],d,f,b,c={done:function(){if(!b){var j=arguments,o,k,n,l,g;if(d){g=d;d=0}for(o=0,k=j.length;o<k;o++){n=j[o];l=a4.type(n);if(l==="array"){c.done.apply(c,n)}else{if(l==="function"){a.push(n)}}}if(g){c.resolveWith(g[0],g[1])}}return this},resolveWith:function(j,g){if(!b&&!d&&!f){g=g||[];f=1;while(a[0]){a.shift().apply(j,g)}d=[j,g];f=0}return this},resolve:function(){c.resolveWith(this,arguments);return this},isResolved:function(){return !!(f||d)},cancel:function(){b=1;a=[];return this}};return c},Deferred:function(d){var c=a4._Deferred(),a=a4._Deferred(),b;a4.extend(c,{then:function(g,f){c.done(g).fail(f);return this},always:function(){return c.done.apply(c,arguments).fail.apply(this,arguments)},fail:a.done,rejectWith:a.resolveWith,reject:a.resolve,isRejected:a.isResolved,pipe:function(g,f){return a4.Deferred(function(j){a4.each({done:[g,"resolve"],fail:[f,"reject"]},function(k,p){var n=p[0],l=p[1],o;if(a4.isFunction(n)){c[k](function(){o=n.apply(this,arguments);if(o&&a4.isFunction(o.promise)){o.promise().then(j.resolve,j.reject)}else{j[l](o)}})}else{c[k](j[l])}})}).promise()},promise:function(g){if(g==null){if(b){return b}b=g={}}var f=am.length;while(f--){g[am[f]]=c[am[f]]}return g}});c.done(a.cancel).fail(c.cancel);delete c.cancel;if(d){d.call(c,c)}return c},when:function(j){var f=arguments,b=0,g=f.length,d=g,c=g<=1&&j&&a4.isFunction(j.promise)?j:a4.Deferred();function a(k){return function(l){f[k]=arguments.length>1?bG.call(arguments,0):l;if(!(--d)){c.resolveWith(c,bG.call(f,0))}}}if(g>1){for(;b<g;b++){if(f[b]&&a4.isFunction(f[b].promise)){f[b].promise().then(a(b),c.reject)}else{--d}}if(!d){c.resolveWith(c,f)}}else{if(c!==j){c.resolveWith(c,g?[j]:[])}}return c.promise()}});a4.support=(function(){var o=bB.createElement("div"),u=bB.documentElement,k,n,r,j,x,g,d,l,c,s,w,t,v,a,f,q,p;o.setAttribute("className","t");o.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";k=o.getElementsByTagName("*");n=o.getElementsByTagName("a")[0];if(!k||!k.length||!n){return{}}r=bB.createElement("select");j=r.appendChild(bB.createElement("option"));x=o.getElementsByTagName("input")[0];d={leadingWhitespace:(o.firstChild.nodeType===3),tbody:!o.getElementsByTagName("tbody").length,htmlSerialize:!!o.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:(n.getAttribute("href")==="/a"),opacity:/^0.55$/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:(x.value==="on"),optSelected:j.selected,getSetAttribute:o.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};x.checked=true;d.noCloneChecked=x.cloneNode(true).checked;r.disabled=true;d.optDisabled=!j.disabled;try{delete o.test}catch(b){d.deleteExpando=false}if(!o.addEventListener&&o.attachEvent&&o.fireEvent){o.attachEvent("onclick",function(){d.noCloneEvent=false});o.cloneNode(true).fireEvent("onclick")}x=bB.createElement("input");x.value="t";x.setAttribute("type","radio");d.radioValue=x.value==="t";x.setAttribute("checked","checked");o.appendChild(x);l=bB.createDocumentFragment();l.appendChild(o.firstChild);d.checkClone=l.cloneNode(true).cloneNode(true).lastChild.checked;o.innerHTML="";o.style.width=o.style.paddingLeft="1px";c=bB.getElementsByTagName("body")[0];w=bB.createElement(c?"div":"body");t={visibility:"hidden",width:0,height:0,border:0,margin:0};if(c){a4.extend(t,{position:"absolute",left:-1000,top:-1000})}for(q in t){w.style[q]=t[q]}w.appendChild(o);s=c||u;s.insertBefore(w,s.firstChild);d.appendChecked=x.checked;d.boxModel=o.offsetWidth===2;if("zoom" in o.style){o.style.display="inline";o.style.zoom=1;d.inlineBlockNeedsLayout=(o.offsetWidth===2);o.style.display="";o.innerHTML="<div style='width:4px;'></div>";d.shrinkWrapBlocks=(o.offsetWidth!==2)}o.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";v=o.getElementsByTagName("td");p=(v[0].offsetHeight===0);v[0].style.display="";v[1].style.display="none";d.reliableHiddenOffsets=p&&(v[0].offsetHeight===0);o.innerHTML="";if(bB.defaultView&&bB.defaultView.getComputedStyle){g=bB.createElement("div");g.style.width="0";g.style.marginRight="0";o.appendChild(g);d.reliableMarginRight=(parseInt((bB.defaultView.getComputedStyle(g,null)||{marginRight:0}).marginRight,10)||0)===0}w.innerHTML="";s.removeChild(w);if(o.attachEvent){for(q in {submit:1,change:1,focusin:1}){f="on"+q;p=(f in o);if(!p){o.setAttribute(f,"return;");p=(typeof o[f]==="function")}d[q+"Bubbles"]=p}}w=l=r=j=c=g=o=x=null;return d})();a4.boxModel=a4.support.boxModel;var al=/^(?:\{.*\}|\[.*\])$/,ao=/([a-z])([A-Z])/g;a4.extend({cache:{},uuid:0,expando:"jQuery"+(a4.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(a){a=a.nodeType?a4.cache[a[a4.expando]]:a[a4.expando];return !!a&&!cf(a)},data:function(c,k,n,j){if(!a4.acceptData(c)){return}var a=a4.expando,l=typeof k==="string",d,b=c.nodeType,f=b?a4.cache:c,g=b?c[a4.expando]:c[a4.expando]&&a4.expando;if((!g||(j&&g&&!f[g][a]))&&l&&n===cb){return}if(!g){if(b){c[a4.expando]=g=++a4.uuid}else{g=a4.expando}}if(!f[g]){f[g]={};if(!b){f[g].toJSON=a4.noop}}if(typeof k==="object"||typeof k==="function"){if(j){f[g][a]=a4.extend(f[g][a],k)}else{f[g]=a4.extend(f[g],k)}}d=f[g];if(j){if(!d[a]){d[a]={}}d=d[a]}if(n!==cb){d[a4.camelCase(k)]=n}if(k==="events"&&!d[k]){return d[a]&&d[a].events}return l?d[a4.camelCase(k)]||d[k]:d},removeData:function(b,k,d){if(!a4.acceptData(b)){return}var l=a4.expando,a=b.nodeType,f=a?a4.cache:b,j=a?b[a4.expando]:a4.expando;if(!f[j]){return}if(k){var c=d?f[j][l]:f[j];if(c){delete c[k];if(!cf(c)){return}}}if(d){delete f[j][l];if(!cf(f[j])){return}}var g=f[j][l];if(a4.support.deleteExpando||f!=bx){delete f[j]}else{f[j]=null}if(g){f[j]={};if(!a){f[j].toJSON=a4.noop}f[j][l]=g}else{if(a){if(a4.support.deleteExpando){delete b[a4.expando]}else{if(b.removeAttribute){b.removeAttribute(a4.expando)}else{b[a4.expando]=null}}}}},_data:function(c,a,b){return a4.data(c,a,b,true)},acceptData:function(a){if(a.nodeName){var b=a4.noData[a.nodeName.toLowerCase()];if(b){return !(b===true||a.getAttribute("classid")!==b)}}return true}});a4.fn.extend({data:function(b,k){var j=null;if(typeof b==="undefined"){if(this.length){j=a4.data(this[0]);if(this[0].nodeType===1){var g=this[0].attributes,c;for(var a=0,f=g.length;a<f;a++){c=g[a].name;if(c.indexOf("data-")===0){c=a4.camelCase(c.substring(5));aa(this[0],c,j[c])}}}}return j}else{if(typeof b==="object"){return this.each(function(){a4.data(this,b)})}}var d=b.split(".");d[1]=d[1]?"."+d[1]:"";if(k===cb){j=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(j===cb&&this.length){j=a4.data(this[0],b);j=aa(this[0],b,j)}return j===cb&&d[1]?this.data(d[0]):j}else{return this.each(function(){var n=a4(this),l=[d[0],k];n.triggerHandler("setData"+d[1]+"!",l);a4.data(this,b,k);n.triggerHandler("changeData"+d[1]+"!",l)})}},removeData:function(a){return this.each(function(){a4.removeData(this,a)})}});function aa(b,c,a){if(a===cb&&b.nodeType===1){var f="data-"+c.replace(ao,"$1-$2").toLowerCase();a=b.getAttribute(f);if(typeof a==="string"){try{a=a==="true"?true:a==="false"?false:a==="null"?null:!a4.isNaN(a)?parseFloat(a):al.test(a)?a4.parseJSON(a):a}catch(d){}a4.data(b,c,a)}else{a=cb}}return a}function cf(b){for(var a in b){if(a!=="toJSON"){return false}}return true}function bM(d,b,j){var c=b+"defer",g=b+"queue",a=b+"mark",f=a4.data(d,c,cb,true);if(f&&(j==="queue"||!a4.data(d,g,cb,true))&&(j==="mark"||!a4.data(d,a,cb,true))){setTimeout(function(){if(!a4.data(d,g,cb,true)&&!a4.data(d,a,cb,true)){a4.removeData(d,c,true);f.resolve()}},0)}}a4.extend({_mark:function(b,a){if(b){a=(a||"fx")+"mark";a4.data(b,a,(a4.data(b,a,cb,true)||0)+1,true)}},_unmark:function(f,b,a){if(f!==true){a=b;b=f;f=false}if(b){a=a||"fx";var c=a+"mark",d=f?0:((a4.data(b,c,cb,true)||1)-1);if(d){a4.data(b,c,d,true)}else{a4.removeData(b,c,true);bM(b,a,"mark")}}},queue:function(c,b,a){if(c){b=(b||"fx")+"queue";var d=a4.data(c,b,cb,true);if(a){if(!d||a4.isArray(a)){d=a4.data(c,b,a4.makeArray(a),true)}else{d.push(a)}}return d||[]}},dequeue:function(c,b){b=b||"fx";var a=a4.queue(c,b),d=a.shift(),f;if(d==="inprogress"){d=a.shift()}if(d){if(b==="fx"){a.unshift("inprogress")}d.call(c,function(){a4.dequeue(c,b)})}if(!a.length){a4.removeData(c,b+"queue",true);bM(c,b,"queue")}}});a4.fn.extend({queue:function(b,a){if(typeof b!=="string"){a=b;b="fx"}if(a===cb){return a4.queue(this[0],b)}return this.each(function(){var c=a4.queue(this,b,a);if(b==="fx"&&c[0]!=="inprogress"){a4.dequeue(this,b)}})},dequeue:function(a){return this.each(function(){a4.dequeue(this,a)})},delay:function(a,b){a=a4.fx?a4.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var c=this;setTimeout(function(){a4.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(c,k){if(typeof c!=="string"){k=c;c=cb}c=c||"fx";var g=a4.Deferred(),j=this,f=j.length,o=1,l=c+"defer",n=c+"queue",b=c+"mark",d;function a(){if(!(--o)){g.resolveWith(j,[j])}}while(f--){if((d=a4.data(j[f],l,cb,true)||(a4.data(j[f],n,cb,true)||a4.data(j[f],b,cb,true))&&a4.data(j[f],l,a4._Deferred(),true))){o++;d.done(a)}}a();return g.promise()}});var bu=/[\n\t\r]/g,ap=/\s+/,b9=/\r/g,a2=/^(?:button|input)$/i,b7=/^(?:button|input|object|select|textarea)$/i,b8=/^a(?:rea)?$/i,cd=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bE=/\:|^on/,aF,bU;a4.fn.extend({attr:function(a,b){return a4.access(this,a,b,true,a4.attr)},removeAttr:function(a){return this.each(function(){a4.removeAttr(this,a)})},prop:function(a,b){return a4.access(this,a,b,true,a4.prop)},removeProp:function(a){a=a4.propFix[a]||a;return this.each(function(){try{this[a]=cb;delete this[a]}catch(b){}})},addClass:function(j){var k,f,d,a,c,g,b;if(a4.isFunction(j)){return this.each(function(l){a4(this).addClass(j.call(this,l,this.className))})}if(j&&typeof j==="string"){k=j.split(ap);for(f=0,d=this.length;f<d;f++){a=this[f];if(a.nodeType===1){if(!a.className&&k.length===1){a.className=j}else{c=" "+a.className+" ";for(g=0,b=k.length;g<b;g++){if(!~c.indexOf(" "+k[g]+" ")){c+=k[g]+" "}}a.className=a4.trim(c)}}}}return this},removeClass:function(j){var k,f,c,a,d,g,b;if(a4.isFunction(j)){return this.each(function(l){a4(this).removeClass(j.call(this,l,this.className))})}if((j&&typeof j==="string")||j===cb){k=(j||"").split(ap);for(f=0,c=this.length;f<c;f++){a=this[f];if(a.nodeType===1&&a.className){if(j){d=(" "+a.className+" ").replace(bu," ");for(g=0,b=k.length;g<b;g++){d=d.replace(" "+k[g]+" "," ")}a.className=a4.trim(d)}else{a.className=""}}}}return this},toggleClass:function(c,a){var b=typeof c,d=typeof a==="boolean";if(a4.isFunction(c)){return this.each(function(f){a4(this).toggleClass(c.call(this,f,this.className,a),a)})}return this.each(function(){if(b==="string"){var f,l=0,j=a4(this),g=a,k=c.split(ap);while((f=k[l++])){g=d?g:!j.hasClass(f);j[g?"addClass":"removeClass"](f)}}else{if(b==="undefined"||b==="boolean"){if(this.className){a4._data(this,"__className__",this.className)}this.className=this.className||c===false?"":a4._data(this,"__className__")||""}}})},hasClass:function(b){var a=" "+b+" ";for(var c=0,d=this.length;c<d;c++){if((" "+this[c].className+" ").replace(bu," ").indexOf(a)>-1){return true}}return false},val:function(b){var a,f,c=this[0];if(!arguments.length){if(c){a=a4.valHooks[c.nodeName.toLowerCase()]||a4.valHooks[c.type];if(a&&"get" in a&&(f=a.get(c,"value"))!==cb){return f}f=c.value;return typeof f==="string"?f.replace(b9,""):f==null?"":f}return cb}var d=a4.isFunction(b);return this.each(function(k){var j=a4(this),g;if(this.nodeType!==1){return}if(d){g=b.call(this,k,j.val())}else{g=b}if(g==null){g=""}else{if(typeof g==="number"){g+=""}else{if(a4.isArray(g)){g=a4.map(g,function(l){return l==null?"":l+""})}}}a=a4.valHooks[this.nodeName.toLowerCase()]||a4.valHooks[this.type];if(!a||!("set" in a)||a.set(this,g,"value")===cb){this.value=g}})}});a4.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(b){var c,f=b.selectedIndex,l=[],j=b.options,d=b.type==="select-one";if(f<0){return null}for(var g=d?f:0,k=d?f+1:j.length;g<k;g++){var a=j[g];if(a.selected&&(a4.support.optDisabled?!a.disabled:a.getAttribute("disabled")===null)&&(!a.parentNode.disabled||!a4.nodeName(a.parentNode,"optgroup"))){c=a4(a).val();if(d){return c}l.push(c)}}if(d&&!l.length&&j.length){return a4(j[f]).val()}return l},set:function(b,c){var a=a4.makeArray(c);a4(b).find("option").each(function(){this.selected=a4.inArray(a4(this).val(),a)>=0});if(!a.length){b.selectedIndex=-1}return a}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(b,c,f,j){var d=b.nodeType;if(!b||d===3||d===8||d===2){return cb}if(j&&c in a4.attrFn){return a4(b)[c](f)}if(!("getAttribute" in b)){return a4.prop(b,c,f)}var g,a,k=d!==1||!a4.isXMLDoc(b);if(k){c=a4.attrFix[c]||c;a=a4.attrHooks[c];if(!a){if(cd.test(c)){a=bU}else{if(aF&&c!=="className"&&(a4.nodeName(b,"form")||bE.test(c))){a=aF}}}}if(f!==cb){if(f===null){a4.removeAttr(b,c);return cb}else{if(a&&"set" in a&&k&&(g=a.set(b,f,c))!==cb){return g}else{b.setAttribute(c,""+f);return f}}}else{if(a&&"get" in a&&k&&(g=a.get(b,c))!==null){return g}else{g=b.getAttribute(c);return g===null?cb:g}}},removeAttr:function(c,a){var b;if(c.nodeType===1){a=a4.attrFix[a]||a;if(a4.support.getSetAttribute){c.removeAttribute(a)}else{a4.attr(c,a,"");c.removeAttributeNode(c.getAttributeNode(a))}if(cd.test(a)&&(b=a4.propFix[a]||a) in c){c[b]=false}}},attrHooks:{type:{set:function(a,b){if(a2.test(a.nodeName)&&a.parentNode){a4.error("type property can't be changed")}else{if(!a4.support.radioValue&&b==="radio"&&a4.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);if(c){a.value=c}return b}}}},tabIndex:{get:function(a){var b=a.getAttributeNode("tabIndex");return b&&b.specified?parseInt(b.value,10):b7.test(a.nodeName)||b8.test(a.nodeName)&&a.href?0:cb}},value:{get:function(b,a){if(aF&&a4.nodeName(b,"button")){return aF.get(b,a)}return a in b?b.value:null},set:function(b,c,a){if(aF&&a4.nodeName(b,"button")){return aF.set(b,c,a)}b.value=c}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b,d,c){var f=b.nodeType;if(!b||f===3||f===8||f===2){return cb}var g,a,j=f!==1||!a4.isXMLDoc(b);if(j){d=a4.propFix[d]||d;a=a4.propHooks[d]}if(c!==cb){if(a&&"set" in a&&(g=a.set(b,c,d))!==cb){return g}else{return(b[d]=c)}}else{if(a&&"get" in a&&(g=a.get(b,d))!==cb){return g}else{return b[d]}}},propHooks:{}});bU={get:function(b,a){return a4.prop(b,a)?a.toLowerCase():cb},set:function(b,c,d){var a;if(c===false){a4.removeAttr(b,d)}else{a=a4.propFix[d]||d;if(a in b){b[a]=true}b.setAttribute(d,d.toLowerCase())}return d}};if(!a4.support.getSetAttribute){a4.attrFix=a4.propFix;aF=a4.attrHooks.name=a4.attrHooks.title=a4.valHooks.button={get:function(c,a){var b;b=c.getAttributeNode(a);return b&&b.nodeValue!==""?b.nodeValue:cb},set:function(b,c,d){var a=b.getAttributeNode(d);if(a){a.nodeValue=c;return c}}};a4.each(["width","height"],function(b,a){a4.attrHooks[a]=a4.extend(a4.attrHooks[a],{set:function(c,d){if(d===""){c.setAttribute(a,"auto");return d}}})})}if(!a4.support.hrefNormalized){a4.each(["href","src","width","height"],function(b,a){a4.attrHooks[a]=a4.extend(a4.attrHooks[a],{get:function(d){var c=d.getAttribute(a,2);return c===null?cb:c}})})}if(!a4.support.style){a4.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||cb},set:function(a,b){return(a.style.cssText=""+b)}}}if(!a4.support.optSelected){a4.propHooks.selected=a4.extend(a4.propHooks.selected,{get:function(b){var a=b.parentNode;if(a){a.selectedIndex;if(a.parentNode){a.parentNode.selectedIndex}}}})}if(!a4.support.checkOn){a4.each(["radio","checkbox"],function(){a4.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}})}a4.each(["radio","checkbox"],function(){a4.valHooks[this]=a4.extend(a4.valHooks[this],{set:function(a,b){if(a4.isArray(b)){return(a.checked=a4.inArray(a4(a).val(),b)>=0)}}})});var ai=/\.(.*)$/,bX=/^(?:textarea|input|select)$/i,bT=/\./g,bb=/ /g,ac=/[^\w\s.|`]/g,bF=function(a){return a.replace(ac,"\\$&")};a4.event={add:function(o,c,d,g){if(o.nodeType===3||o.nodeType===8){return}if(d===false){d=bJ}else{if(!d){return}}var j,q;if(d.handler){j=d;d=j.handler}if(!d.guid){d.guid=a4.guid++}var n=a4._data(o);if(!n){return}var f=n.events,b=n.handle;if(!f){n.events=f={}}if(!b){n.handle=b=function(s){return typeof a4!=="undefined"&&(!s||a4.event.triggered!==s.type)?a4.event.handle.apply(b.elem,arguments):cb}}b.elem=o;c=c.split(" ");var r,l=0,p;while((r=c[l++])){q=j?a4.extend({},j):{handler:d,data:g};if(r.indexOf(".")>-1){p=r.split(".");r=p.shift();q.namespace=p.slice(0).sort().join(".")}else{p=[];q.namespace=""}q.type=r;if(!q.guid){q.guid=d.guid}var k=f[r],a=a4.event.special[r]||{};if(!k){k=f[r]=[];if(!a.setup||a.setup.call(o,g,p,b)===false){if(o.addEventListener){o.addEventListener(r,b,false)}else{if(o.attachEvent){o.attachEvent("on"+r,b)}}}}if(a.add){a.add.call(o,q);if(!q.handler.guid){q.handler.guid=d.guid}}k.push(q);a4.event.global[r]=true}o=null},global:{},remove:function(u,s,t,j){if(u.nodeType===3||u.nodeType===8){return}if(t===false){t=bJ}var c,q,l,f,k=0,g,o,w,r,b,p,d,n=a4.hasData(u)&&a4._data(u),v=n&&n.events;if(!n||!v){return}if(s&&s.type){t=s.handler;s=s.type}if(!s||typeof s==="string"&&s.charAt(0)==="."){s=s||"";for(q in v){a4.event.remove(u,q+s)}return}s=s.split(" ");while((q=s[k++])){d=q;p=null;g=q.indexOf(".")<0;o=[];if(!g){o=q.split(".");q=o.shift();w=new RegExp("(^|\\.)"+a4.map(o.slice(0).sort(),bF).join("\\.(?:.*\\.)?")+"(\\.|$)")}b=v[q];if(!b){continue}if(!t){for(f=0;f<b.length;f++){p=b[f];if(g||w.test(p.namespace)){a4.event.remove(u,d,p.handler,f);b.splice(f--,1)}}continue}r=a4.event.special[q]||{};for(f=j||0;f<b.length;f++){p=b[f];if(t.guid===p.guid){if(g||w.test(p.namespace)){if(j==null){b.splice(f--,1)}if(r.remove){r.remove.call(u,p)}}if(j!=null){break}}}if(b.length===0||j!=null&&b.length===1){if(!r.teardown||r.teardown.call(u,o)===false){a4.removeEvent(u,q,n.handle)}c=null;delete v[q]}}if(a4.isEmptyObject(v)){var a=n.handle;if(a){a.elem=null}delete n.events;delete n.handle;if(a4.isEmptyObject(n)){a4.removeData(u,cb,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(j,k,n,l){var d=j.type||j,p=[],a;if(d.indexOf("!")>=0){d=d.slice(0,-1);a=true}if(d.indexOf(".")>=0){p=d.split(".");d=p.shift();p.sort()}if((!n||a4.event.customEvent[d])&&!a4.event.global[d]){return}j=typeof j==="object"?j[a4.expando]?j:new a4.Event(d,j):new a4.Event(d);j.type=d;j.exclusive=a;j.namespace=p.join(".");j.namespace_re=new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.)?")+"(\\.|$)");if(l||!n){j.preventDefault();j.stopPropagation()}if(!n){a4.each(a4.cache,function(){var r=a4.expando,s=this[r];if(s&&s.events&&s.events[d]){a4.event.trigger(j,k,s.handle.elem)}});return}if(n.nodeType===3||n.nodeType===8){return}j.result=cb;j.target=n;k=k!=null?a4.makeArray(k):[];k.unshift(j);var b=n,g=d.indexOf(":")<0?"on"+d:"";do{var f=a4._data(b,"handle");j.currentTarget=b;if(f){f.apply(b,k)}if(g&&a4.acceptData(b)&&b[g]&&b[g].apply(b,k)===false){j.result=false;j.preventDefault()}b=b.parentNode||b.ownerDocument||b===j.target.ownerDocument&&bx}while(b&&!j.isPropagationStopped());if(!j.isDefaultPrevented()){var o,c=a4.event.special[d]||{};if((!c._default||c._default.call(n.ownerDocument,j)===false)&&!(d==="click"&&a4.nodeName(n,"a"))&&a4.acceptData(n)){try{if(g&&n[d]){o=n[g];if(o){n[g]=null}a4.event.triggered=d;n[d]()}}catch(q){}if(o){n[g]=o}a4.event.triggered=cb}}return j.result},handle:function(j){j=a4.event.fix(j||bx.event);var f=((a4._data(this,"events")||{})[j.type]||[]).slice(0),c=!j.exclusive&&!j.namespace,b=Array.prototype.slice.call(arguments,0);b[0]=j;j.currentTarget=this;for(var k=0,d=f.length;k<d;k++){var a=f[k];if(c||j.namespace_re.test(a.namespace)){j.handler=a.handler;j.data=a.data;j.handleObj=a;var g=a.handler.apply(this,b);if(g!==cb){j.result=g;if(g===false){j.preventDefault();j.stopPropagation()}}if(j.isImmediatePropagationStopped()){break}}}return j.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(f){if(f[a4.expando]){return f}var g=f;f=a4.Event(g);for(var b=this.props.length,a;b;){a=this.props[--b];f[a]=g[a]}if(!f.target){f.target=f.srcElement||bB}if(f.target.nodeType===3){f.target=f.target.parentNode}if(!f.relatedTarget&&f.fromElement){f.relatedTarget=f.fromElement===f.target?f.toElement:f.fromElement}if(f.pageX==null&&f.clientX!=null){var j=f.target.ownerDocument||bB,d=j.documentElement,c=j.body;f.pageX=f.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0);f.pageY=f.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0)}if(f.which==null&&(f.charCode!=null||f.keyCode!=null)){f.which=f.charCode!=null?f.charCode:f.keyCode}if(!f.metaKey&&f.ctrlKey){f.metaKey=f.ctrlKey}if(!f.which&&f.button!==cb){f.which=(f.button&1?1:(f.button&2?3:(f.button&4?2:0)))}return f},guid:100000000,proxy:a4.proxy,special:{ready:{setup:a4.bindReady,teardown:a4.noop},live:{add:function(a){a4.event.add(this,aW(a.origType,a.selector),a4.extend({},a,{handler:bv,guid:a.handler.guid}))},remove:function(a){a4.event.remove(this,aW(a.origType,a.selector),a)}},beforeunload:{setup:function(b,a,c){if(a4.isWindow(this)){this.onbeforeunload=c}},teardown:function(a,b){if(this.onbeforeunload===b){this.onbeforeunload=null}}}}};a4.removeEvent=bB.removeEventListener?function(b,a,c){if(b.removeEventListener){b.removeEventListener(a,c,false)}}:function(b,a,c){if(b.detachEvent){b.detachEvent("on"+a,c)}};a4.Event=function(a,b){if(!this.preventDefault){return new a4.Event(a,b)}if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=(a.defaultPrevented||a.returnValue===false||a.getPreventDefault&&a.getPreventDefault())?aV:bJ}else{this.type=a}if(b){a4.extend(this,b)}this.timeStamp=a4.now();this[a4.expando]=true};function bJ(){return false}function aV(){return true}a4.Event.prototype={preventDefault:function(){this.isDefaultPrevented=aV;var a=this.originalEvent;if(!a){return}if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=aV;var a=this.originalEvent;if(!a){return}if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=aV;this.stopPropagation()},isDefaultPrevented:bJ,isPropagationStopped:bJ,isImmediatePropagationStopped:bJ};var ca=function(b){var d=b.relatedTarget,c=false,a=b.type;b.type=b.data;if(d!==this){if(d){c=a4.contains(this,d)}if(!c){a4.event.handle.apply(this,arguments);b.type=a}}},aH=function(a){a.type=a.data;a4.event.handle.apply(this,arguments)};a4.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){a4.event.special[a]={setup:function(c){a4.event.add(this,b,c&&c.selector?aH:ca,a)},teardown:function(c){a4.event.remove(this,b,c&&c.selector?aH:ca)}}});if(!a4.support.submitBubbles){a4.event.special.submit={setup:function(b,a){if(!a4.nodeName(this,"form")){a4.event.add(this,"click.specialSubmit",function(c){var f=c.target,d=f.type;if((d==="submit"||d==="image")&&a4(f).closest("form").length){ba("submit",this,arguments)}});a4.event.add(this,"keypress.specialSubmit",function(c){var f=c.target,d=f.type;if((d==="text"||d==="password")&&a4(f).closest("form").length&&c.keyCode===13){ba("submit",this,arguments)}})}else{return false}},teardown:function(a){a4.event.remove(this,".specialSubmit")}}}if(!a4.support.changeBubbles){var bY,ci=function(b){var a=b.type,c=b.value;if(a==="radio"||a==="checkbox"){c=b.checked}else{if(a==="select-multiple"){c=b.selectedIndex>-1?a4.map(b.options,function(d){return d.selected}).join("-"):""}else{if(a4.nodeName(b,"select")){c=b.selectedIndex}}}return c},bL=function bL(d){var b=d.target,a,c;if(!bX.test(b.nodeName)||b.readOnly){return}a=a4._data(b,"_change_data");c=ci(b);if(d.type!=="focusout"||b.type!=="radio"){a4._data(b,"_change_data",c)}if(a===cb||c===a){return}if(a!=null||c){d.type="change";d.liveFired=cb;a4.event.trigger(d,arguments[1],b)}};a4.event.special.change={filters:{focusout:bL,beforedeactivate:bL,click:function(a){var c=a.target,b=a4.nodeName(c,"input")?c.type:"";if(b==="radio"||b==="checkbox"||a4.nodeName(c,"select")){bL.call(this,a)}},keydown:function(a){var c=a.target,b=a4.nodeName(c,"input")?c.type:"";if((a.keyCode===13&&!a4.nodeName(c,"textarea"))||(a.keyCode===32&&(b==="checkbox"||b==="radio"))||b==="select-multiple"){bL.call(this,a)}},beforeactivate:function(a){var b=a.target;a4._data(b,"_change_data",ci(b))}},setup:function(b,a){if(this.type==="file"){return false}for(var c in bY){a4.event.add(this,c+".specialChange",bY[c])}return bX.test(this.nodeName)},teardown:function(a){a4.event.remove(this,".specialChange");return bX.test(this.nodeName)}};bY=a4.event.special.change.filters;bY.focus=bY.beforeactivate}function ba(b,c,a){var d=a4.extend({},a[0]);d.type=b;d.originalEvent={};d.liveFired=cb;a4.event.handle.call(c,d);if(d.isDefaultPrevented()){a[0].preventDefault()}}if(!a4.support.focusinBubbles){a4.each({focus:"focusin",blur:"focusout"},function(d,b){var a=0;a4.event.special[b]={setup:function(){if(a++===0){bB.addEventListener(d,c,true)}},teardown:function(){if(--a===0){bB.removeEventListener(d,c,true)}}};function c(g){var f=a4.event.fix(g);f.type=b;f.originalEvent={};a4.event.trigger(f,null,f.target);if(f.isDefaultPrevented()){g.preventDefault()}}})}a4.each(["bind","one"],function(b,a){a4.fn[a]=function(k,j,d){var l;if(typeof k==="object"){for(var g in k){this[a](g,j,k[g],d)}return this}if(arguments.length===2||j===false){d=j;j=cb}if(a==="one"){l=function(n){a4(this).unbind(n,l);return d.apply(this,arguments)};l.guid=d.guid||a4.guid++}else{l=d}if(k==="unload"&&a!=="one"){this.one(k,j,d)}else{for(var c=0,f=this.length;c<f;c++){a4.event.add(this[c],k,l,j)}}return this}});a4.fn.extend({unbind:function(a,d){if(typeof a==="object"&&!a.preventDefault){for(var c in a){this.unbind(c,a[c])}}else{for(var b=0,f=this.length;b<f;b++){a4.event.remove(this[b],a,d)}}return this},delegate:function(b,c,a,d){return this.live(c,a,d,b)},undelegate:function(b,c,a){if(arguments.length===0){return this.unbind("live")}else{return this.die(c,null,a,b)}},trigger:function(b,a){return this.each(function(){a4.event.trigger(b,a,this)})},triggerHandler:function(b,a){if(this[0]){return a4.event.trigger(b,a,this[0],true)}},toggle:function(d){var a=arguments,f=d.guid||a4.guid++,c=0,b=function(j){var g=(a4.data(this,"lastToggle"+d.guid)||0)%c;a4.data(this,"lastToggle"+d.guid,g+1);j.preventDefault();return a[g].apply(this,arguments)||false};b.guid=f;while(c<a.length){a[c++].guid=f}return this.click(b)},hover:function(b,a){return this.mouseenter(b).mouseleave(a||b)}});var an={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};a4.each(["live","die"],function(b,a){a4.fn[a]=function(j,n,s,o){var f,p=0,r,c,d,g=o||this.selector,l=o?this:a4(this.context);if(typeof j==="object"&&!j.preventDefault){for(var q in j){l[a](q,n,j[q],g)}return this}if(a==="die"&&!j&&o&&o.charAt(0)==="."){l.unbind(o);return this}if(n===false||a4.isFunction(n)){s=n||bJ;n=cb}j=(j||"").split(" ");while((f=j[p++])!=null){r=ai.exec(f);c="";if(r){c=r[0];f=f.replace(ai,"")}if(f==="hover"){j.push("mouseenter"+c,"mouseleave"+c);continue}d=f;if(an[f]){j.push(an[f]+c);f=f+c}else{f=(an[f]||f)+c}if(a==="live"){for(var k=0,t=l.length;k<t;k++){a4.event.add(l[k],"live."+aW(f,g),{data:n,selector:g,handler:s,origType:f,origHandler:s,preType:d})}}else{l.unbind("live."+aW(f,g),s)}}return this}});function bv(d){var k,n,p,l,s,u,c,j,q,f,t,a,b,g=[],o=[],v=a4._data(this,"events");if(d.liveFired===this||!v||!v.live||d.target.disabled||d.button&&d.type==="click"){return}if(d.namespace){a=new RegExp("(^|\\.)"+d.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}d.liveFired=this;var r=v.live.slice(0);for(c=0;c<r.length;c++){s=r[c];if(s.origType.replace(ai,"")===d.type){o.push(s.selector)}else{r.splice(c--,1)}}l=a4(d.target).closest(o,d.currentTarget);for(j=0,q=l.length;j<q;j++){t=l[j];for(c=0;c<r.length;c++){s=r[c];if(t.selector===s.selector&&(!a||a.test(s.namespace))&&!t.elem.disabled){u=t.elem;p=null;if(s.preType==="mouseenter"||s.preType==="mouseleave"){d.type=s.preType;p=a4(d.relatedTarget).closest(s.selector)[0];if(p&&a4.contains(u,p)){p=u}}if(!p||p!==u){g.push({elem:u,handleObj:s,level:t.level})}}}}for(j=0,q=g.length;j<q;j++){l=g[j];if(n&&l.level>n){break}d.currentTarget=l.elem;d.data=l.handleObj.data;d.handleObj=l.handleObj;b=l.handleObj.origHandler.apply(l.elem,arguments);if(b===false||d.isPropagationStopped()){n=l.level;if(b===false){k=false}if(d.isImmediatePropagationStopped()){break}}}return k}function aW(a,b){return(a&&a!=="*"?a+".":"")+b.replace(bT,"`").replace(bb,"&")}a4.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(b,a){a4.fn[a]=function(d,c){if(c==null){c=d;d=null}return arguments.length>0?this.bind(a,d,c):this.trigger(a)};if(a4.attrFn){a4.attrFn[a]=true}});(function(){var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=0,s=Object.prototype.toString,b=false,v=true,d=/\\/g,u=/\W/;[0,0].sort(function(){v=false;return 0});var a=function(y,N,b0,I){b0=b0||[];N=N||bB;var D=N;if(N.nodeType!==1&&N.nodeType!==9){return[]}if(!y||typeof y!=="string"){return b0}var X,W,H,ck,K,x,J,Y,cj=true,Z=a.isXML(N),a0=[],z=y;do{n.exec("");X=n.exec(z);if(X){z=X[3];a0.push(X[1]);if(X[2]){ck=X[3];break}}}while(X);if(a0.length>1&&l.exec(y)){if(a0.length===2&&f.relative[a0[0]]){W=k(a0[0]+a0[1],N)}else{W=f.relative[a0[0]]?[N]:a(a0.shift(),N);while(a0.length){y=a0.shift();if(f.relative[y]){y+=a0.shift()}W=k(y,W)}}}else{if(!I&&a0.length>1&&N.nodeType===9&&!Z&&f.match.ID.test(a0[0])&&!f.match.ID.test(a0[a0.length-1])){K=a.find(a0.shift(),N,Z);N=K.expr?a.filter(K.expr,K.set)[0]:K.set[0]}if(N){K=I?{expr:a0.pop(),set:o(I)}:a.find(a0.pop(),a0.length===1&&(a0[0]==="~"||a0[0]==="+")&&N.parentNode?N.parentNode:N,Z);W=K.expr?a.filter(K.expr,K.set):K.set;if(a0.length>0){H=o(W)}else{cj=false}while(a0.length){x=a0.pop();J=x;if(!f.relative[x]){x=""}else{J=a0.pop()}if(J==null){J=N}f.relative[x](H,J,Z)}}else{H=a0=[]}}if(!H){H=W}if(!H){a.error(x||y)}if(s.call(H)==="[object Array]"){if(!cj){b0.push.apply(b0,H)}else{if(N&&N.nodeType===1){for(Y=0;H[Y]!=null;Y++){if(H[Y]&&(H[Y]===true||H[Y].nodeType===1&&a.contains(N,H[Y]))){b0.push(W[Y])}}}else{for(Y=0;H[Y]!=null;Y++){if(H[Y]&&H[Y].nodeType===1){b0.push(W[Y])}}}}}else{o(H,b0)}if(ck){a(ck,D,b0,I);a.uniqueSort(b0)}return b0};a.uniqueSort=function(x){if(p){b=v;x.sort(p);if(b){for(var y=1;y<x.length;y++){if(x[y]===x[y-1]){x.splice(y--,1)}}}}return x};a.matches=function(y,x){return a(y,null,null,x)};a.matchesSelector=function(x,y){return a(y,null,null,[x]).length>0};a.find=function(H,M,K){var x;if(!H){return[]}for(var J=0,L=f.order.length;J<L;J++){var I,z=f.order[J];if((I=f.leftMatch[z].exec(H))){var y=I[1];I.splice(1,1);if(y.substr(y.length-1)!=="\\"){I[1]=(I[1]||"").replace(d,"");x=f.find[z](I,M,K);if(x!=null){H=H.replace(f.match[z],"");break}}}}if(!x){x=typeof M.getElementsByTagName!=="undefined"?M.getElementsByTagName("*"):[]}return{set:x,expr:H}};a.filter=function(Y,U,cj,y){var b0,R,X=Y,T=[],S=U,W=U&&U[0]&&a.isXML(U[0]);while(Y&&U.length){for(var N in f.filter){if((b0=f.leftMatch[N].exec(Y))!=null&&b0[2]){var x,a0,ck=f.filter[N],V=b0[1];R=false;b0.splice(1,1);if(V.substr(V.length-1)==="\\"){continue}if(S===T){T=[]}if(f.preFilter[N]){b0=f.preFilter[N](b0,S,cj,T,y,W);if(!b0){R=x=true}else{if(b0===true){continue}}}if(b0){for(var Z=0;(a0=S[Z])!=null;Z++){if(a0){x=ck(a0,b0,Z,S);var z=y^!!x;if(cj&&x!=null){if(z){R=true}else{S[Z]=false}}else{if(z){T.push(a0);R=true}}}}}if(x!==cb){if(!cj){S=T}Y=Y.replace(f.match[N],"");if(!R){return[]}break}}}if(Y===X){if(R==null){a.error(Y)}else{break}}X=Y}return S};a.error=function(x){throw"Syntax error, unrecognized expression: "+x};var f=a.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(x){return x.getAttribute("href")},type:function(x){return x.getAttribute("type")}},relative:{"+":function(z,I){var L=typeof I==="string",J=L&&!u.test(I),y=L&&!J;if(J){I=I.toLowerCase()}for(var x=0,B=z.length,K;x<B;x++){if((K=z[x])){while((K=K.previousSibling)&&K.nodeType!==1){}z[x]=y||K&&K.nodeName.toLowerCase()===I?K||false:K===I}}if(y){a.filter(I,z,true)}},">":function(B,I){var J,x=typeof I==="string",y=0,H=B.length;if(x&&!u.test(I)){I=I.toLowerCase();for(;y<H;y++){J=B[y];if(J){var z=J.parentNode;B[y]=z.nodeName.toLowerCase()===I?z:false}}}else{for(;y<H;y++){J=B[y];if(J){B[y]=x?J.parentNode:J.parentNode===I}}if(x){a.filter(I,B,true)}}},"":function(E,x,z){var y,F=r++,B=q;if(typeof x==="string"&&!u.test(x)){x=x.toLowerCase();y=x;B=j}B("parentNode",x,F,E,y,z)},"~":function(E,x,z){var y,F=r++,B=q;if(typeof x==="string"&&!u.test(x)){x=x.toLowerCase();y=x;B=j}B("previousSibling",x,F,E,y,z)}},find:{ID:function(z,x,C){if(typeof x.getElementById!=="undefined"&&!C){var y=x.getElementById(z[1]);return y&&y.parentNode?[y]:[]}},NAME:function(z,x){if(typeof x.getElementsByName!=="undefined"){var G=[],E=x.getElementsByName(z[1]);for(var y=0,F=E.length;y<F;y++){if(E[y].getAttribute("name")===z[1]){G.push(E[y])}}return G.length===0?null:G}},TAG:function(y,x){if(typeof x.getElementsByTagName!=="undefined"){return x.getElementsByTagName(y[1])}}},preFilter:{CLASS:function(y,H,G,J,I,z){y=" "+y[1].replace(d,"")+" ";if(z){return y}for(var x=0,K;(K=H[x])!=null;x++){if(K){if(I^(K.className&&(" "+K.className+" ").replace(/[\t\n\r]/g," ").indexOf(y)>=0)){if(!G){J.push(K)}}else{if(G){H[x]=false}}}}return false},ID:function(x){return x[1].replace(d,"")},TAG:function(y,x){return y[1].replace(d,"").toLowerCase()},CHILD:function(y){if(y[1]==="nth"){if(!y[2]){a.error(y[0])}y[2]=y[2].replace(/^\+|\s*/g,"");var x=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(y[2]==="even"&&"2n"||y[2]==="odd"&&"2n+1"||!/\D/.test(y[2])&&"0n+"+y[2]||y[2]);y[2]=(x[1]+(x[2]||1))-0;y[3]=x[3]-0}else{if(y[2]){a.error(y[0])}}y[0]=r++;return y},ATTR:function(y,H,F,x,I,z){var G=y[1]=y[1].replace(d,"");if(!z&&f.attrMap[G]){y[1]=f.attrMap[G]}y[4]=(y[4]||y[5]||"").replace(d,"");if(y[2]==="~="){y[4]=" "+y[4]+" "}return y},PSEUDO:function(x,z,y,H,F){if(x[1]==="not"){if((n.exec(x[3])||"").length>1||/^\w/.test(x[3])){x[3]=a(x[3],null,null,z)}else{var G=a.filter(x[3],z,y,true^F);if(!y){H.push.apply(H,G)}return false}}else{if(f.match.POS.test(x[0])||f.match.CHILD.test(x[0])){return true}}return x},POS:function(x){x.unshift(true);return x}},filters:{enabled:function(x){return x.disabled===false&&x.type!=="hidden"},disabled:function(x){return x.disabled===true},checked:function(x){return x.checked===true},selected:function(x){if(x.parentNode){x.parentNode.selectedIndex}return x.selected===true},parent:function(x){return !!x.firstChild},empty:function(x){return !x.firstChild},has:function(z,x,y){return !!a(y[3],z).length},header:function(x){return(/h\d/i).test(x.nodeName)},text:function(z){var x=z.getAttribute("type"),y=z.type;return z.nodeName.toLowerCase()==="input"&&"text"===y&&(x===y||x===null)},radio:function(x){return x.nodeName.toLowerCase()==="input"&&"radio"===x.type},checkbox:function(x){return x.nodeName.toLowerCase()==="input"&&"checkbox"===x.type},file:function(x){return x.nodeName.toLowerCase()==="input"&&"file"===x.type},password:function(x){return x.nodeName.toLowerCase()==="input"&&"password"===x.type},submit:function(y){var x=y.nodeName.toLowerCase();return(x==="input"||x==="button")&&"submit"===y.type},image:function(x){return x.nodeName.toLowerCase()==="input"&&"image"===x.type},reset:function(y){var x=y.nodeName.toLowerCase();return(x==="input"||x==="button")&&"reset"===y.type},button:function(y){var x=y.nodeName.toLowerCase();return x==="input"&&"button"===y.type||x==="button"},input:function(x){return(/input|select|textarea|button/i).test(x.nodeName)},focus:function(x){return x===x.ownerDocument.activeElement}},setFilters:{first:function(x,y){return y===0},last:function(x,y,z,C){return y===C.length-1},even:function(x,y){return y%2===0},odd:function(x,y){return y%2===1},lt:function(x,y,z){return y<z[3]-0},gt:function(x,y,z){return y>z[3]-0},nth:function(x,y,z){return z[3]-0===y},eq:function(x,y,z){return z[3]-0===y}},filter:{PSEUDO:function(y,I,z,J){var L=I[1],K=f.filters[L];if(K){return K(y,z,I,J)}else{if(L==="contains"){return(y.textContent||y.innerText||a.getText([y])||"").indexOf(I[3])>=0}else{if(L==="not"){var N=I[3];for(var x=0,M=N.length;x<M;x++){if(N[x]===y){return false}}return true}else{a.error(L)}}}},CHILD:function(I,J){var z=J[1],y=I;switch(z){case"only":case"first":while((y=y.previousSibling)){if(y.nodeType===1){return false}}if(z==="first"){return true}y=I;case"last":while((y=y.nextSibling)){if(y.nodeType===1){return false}}return true;case"nth":var x=J[2],L=J[3];if(x===1&&L===0){return true}var O=J[0],K=I.parentNode;if(K&&(K.sizcache!==O||!I.nodeIndex)){var M=0;for(y=K.firstChild;y;y=y.nextSibling){if(y.nodeType===1){y.nodeIndex=++M}}K.sizcache=O}var N=I.nodeIndex-L;if(x===0){return N===0}else{return(N%x===0&&N/x>=0)}}},ID:function(x,y){return x.nodeType===1&&x.getAttribute("id")===y},TAG:function(x,y){return(y==="*"&&x.nodeType===1)||x.nodeName.toLowerCase()===y},CLASS:function(x,y){return(" "+(x.className||x.getAttribute("class"))+" ").indexOf(y)>-1},ATTR:function(x,F){var z=F[1],H=f.attrHandle[z]?f.attrHandle[z](x):x[z]!=null?x[z]:x.getAttribute(z),y=H+"",I=F[2],G=F[4];return H==null?I==="!=":I==="="?y===G:I==="*="?y.indexOf(G)>=0:I==="~="?(" "+y+" ").indexOf(G)>=0:!G?y&&H!==false:I==="!="?y!==G:I==="^="?y.indexOf(G)===0:I==="$="?y.substr(y.length-G.length)===G:I==="|="?y===G||y.substr(0,G.length+1)===G+"-":false},POS:function(G,y,x,E){var F=y[2],z=f.setFilters[F];if(z){return z(G,x,y,E)}}}},l=f.match.POS,g=function(x,y){return"\\"+(y-0+1)};for(var t in f.match){f.match[t]=new RegExp(f.match[t].source+(/(?![^\[]*\])(?![^\(]*\))/.source));f.leftMatch[t]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[t].source.replace(/\\(\d+)/g,g))}var o=function(x,y){x=Array.prototype.slice.call(x,0);if(y){y.push.apply(y,x);return y}return x};try{Array.prototype.slice.call(bB.documentElement.childNodes,0)[0].nodeType}catch(c){o=function(D,E){var z=0,y=E||[];if(s.call(D)==="[object Array]"){Array.prototype.push.apply(y,D)}else{if(typeof D.length==="number"){for(var x=D.length;z<x;z++){y.push(D[z])}}else{for(;D[z];z++){y.push(D[z])}}}return y}}var p,w;if(bB.documentElement.compareDocumentPosition){p=function(y,x){if(y===x){b=true;return 0}if(!y.compareDocumentPosition||!x.compareDocumentPosition){return y.compareDocumentPosition?-1:1}return y.compareDocumentPosition(x)&4?-1:1}}else{p=function(x,L){if(x===L){b=true;return 0}else{if(x.sourceIndex&&L.sourceIndex){return x.sourceIndex-L.sourceIndex}}var J,O,y=[],M=[],z=x.parentNode,N=L.parentNode,P=z;if(z===N){return w(x,L)}else{if(!z){return -1}else{if(!N){return 1}}}while(P){y.unshift(P);P=P.parentNode}P=N;while(P){M.unshift(P);P=P.parentNode}J=y.length;O=M.length;for(var K=0;K<J&&K<O;K++){if(y[K]!==M[K]){return w(y[K],M[K])}}return K===J?w(x,M[K],-1):w(y[K],L,1)};w=function(z,C,x){if(z===C){return x}var y=z.nextSibling;while(y){if(y===C){return -1}y=y.nextSibling}return 1}}a.getText=function(D){var z="",x;for(var y=0;D[y];y++){x=D[y];if(x.nodeType===3||x.nodeType===4){z+=x.nodeValue}else{if(x.nodeType!==8){z+=a.getText(x.childNodes)}}}return z};(function(){var z=bB.createElement("div"),x="script"+(new Date()).getTime(),y=bB.documentElement;z.innerHTML="<a name='"+x+"'/>";y.insertBefore(z,y.firstChild);if(bB.getElementById(x)){f.find.ID=function(E,C,F){if(typeof C.getElementById!=="undefined"&&!F){var D=C.getElementById(E[1]);return D?D.id===E[1]||typeof D.getAttributeNode!=="undefined"&&D.getAttributeNode("id").nodeValue===E[1]?[D]:cb:[]}};f.filter.ID=function(C,D){var B=typeof C.getAttributeNode!=="undefined"&&C.getAttributeNode("id");return C.nodeType===1&&B&&B.nodeValue===D}}y.removeChild(z);y=z=null})();(function(){var x=bB.createElement("div");x.appendChild(bB.createComment(""));if(x.getElementsByTagName("*").length>0){f.find.TAG=function(D,F){var E=F.getElementsByTagName(D[1]);if(D[1]==="*"){var y=[];for(var z=0;E[z];z++){if(E[z].nodeType===1){y.push(E[z])}}E=y}return E}}x.innerHTML="<a href='#'></a>";if(x.firstChild&&typeof x.firstChild.getAttribute!=="undefined"&&x.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(y){return y.getAttribute("href",2)}}x=null})();if(bB.querySelectorAll){(function(){var y=a,x=bB.createElement("div"),z="__sizzle__";x.innerHTML="<p class='TEST'></p>";if(x.querySelectorAll&&x.querySelectorAll(".TEST").length===0){return}a=function(S,R,W,Q){R=R||bB;if(!Q&&!a.isXML(R)){var U=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(S);if(U&&(R.nodeType===1||R.nodeType===9)){if(U[1]){return o(R.getElementsByTagName(S),W)}else{if(U[2]&&f.find.CLASS&&R.getElementsByClassName){return o(R.getElementsByClassName(U[2]),W)}}}if(R.nodeType===9){if(S==="body"&&R.body){return o([R.body],W)}else{if(U&&U[3]){var H=R.getElementById(U[3]);if(H&&H.parentNode){if(H.id===U[3]){return o([H],W)}}else{return o([],W)}}}try{return o(R.querySelectorAll(S),W)}catch(Z){}}else{if(R.nodeType===1&&R.nodeName.toLowerCase()!=="object"){var C=R,T=R.getAttribute("id"),Y=T||z,X=R.parentNode,V=/^\s*[+~]/.test(S);if(!T){R.setAttribute("id",Y)}else{Y=Y.replace(/'/g,"\\$&")}if(V&&X){R=R.parentNode}try{if(!V||X){return o(R.querySelectorAll("[id='"+Y+"'] "+S),W)}}catch(N){}finally{if(!T){C.removeAttribute("id")}}}}}return y(S,R,W,Q)};for(var D in y){a[D]=y[D]}x=null})()}(function(){var z=bB.documentElement,E=z.matchesSelector||z.mozMatchesSelector||z.webkitMatchesSelector||z.msMatchesSelector;if(E){var x=!E.call(bB.createElement("div"),"div"),F=false;try{E.call(bB.documentElement,"[test!='']:sizzle")}catch(y){F=true}a.matchesSelector=function(G,A){A=A.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!a.isXML(G)){try{if(F||!f.match.PSEUDO.test(A)&&!/!=/.test(A)){var C=E.call(G,A);if(C||!x||G.document&&G.document.nodeType!==11){return C}}}catch(B){}}return a(A,null,null,[G]).length>0}}})();(function(){var x=bB.createElement("div");x.innerHTML="<div class='test e'></div><div class='test'></div>";if(!x.getElementsByClassName||x.getElementsByClassName("e").length===0){return}x.lastChild.className="e";if(x.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(B,z,y){if(typeof z.getElementsByClassName!=="undefined"&&!y){return z.getElementsByClassName(B[1])}};x=null})();function j(M,y,x,N,I,K){for(var L=0,O=N.length;L<O;L++){var z=N[L];if(z){var J=false;z=z[M];while(z){if(z.sizcache===x){J=N[z.sizset];break}if(z.nodeType===1&&!K){z.sizcache=x;z.sizset=L}if(z.nodeName.toLowerCase()===y){J=z;break}z=z[M]}N[L]=J}}}function q(M,x,P,N,z,K){for(var J=0,O=N.length;J<O;J++){var y=N[J];if(y){var L=false;y=y[M];while(y){if(y.sizcache===P){L=N[y.sizset];break}if(y.nodeType===1){if(!K){y.sizcache=P;y.sizset=J}if(typeof x!=="string"){if(y===x){L=true;break}}else{if(a.filter(x,[y]).length>0){L=y;break}}}y=y[M]}N[J]=L}}}if(bB.documentElement.contains){a.contains=function(y,x){return y!==x&&(y.contains?y.contains(x):true)}}else{if(bB.documentElement.compareDocumentPosition){a.contains=function(y,x){return !!(y.compareDocumentPosition(x)&16)}}else{a.contains=function(){return false}}}a.isXML=function(y){var x=(y?y.ownerDocument||y:0).documentElement;return x?x.nodeName!=="HTML":false};var k=function(J,I){var y,K=[],L="",H=I.nodeType?[I]:I;while((y=f.match.PSEUDO.exec(J))){L+=y[0];J=J.replace(f.match.PSEUDO,"")}J=f.relative[J]?J+"*":J;for(var x=0,z=H.length;x<z;x++){a(J,H[x],K)}return a.filter(L,K)};a4.find=a;a4.expr=a.selectors;a4.expr[":"]=a4.expr.filters;a4.unique=a.uniqueSort;a4.text=a.getText;a4.isXMLDoc=a.isXML;a4.contains=a.contains})();var aN=/Until$/,bI=/^(?:parents|prevUntil|prevAll)/,b1=/,/,bg=/^.[^:#\[\.,]*$/,aA=Array.prototype.slice,bf=a4.expr.match.POS,aB={children:true,contents:true,next:true,prev:true};a4.fn.extend({find:function(b){var k=this,f,c;if(typeof b!=="string"){return a4(b).filter(function(){for(f=0,c=k.length;f<c;f++){if(a4.contains(k[f],this)){return true}}})}var g=this.pushStack("","find",b),j,d,a;for(f=0,c=this.length;f<c;f++){j=g.length;a4.find(b,this[f],g);if(f>0){for(d=j;d<g.length;d++){for(a=0;a<j;a++){if(g[a]===g[d]){g.splice(d--,1);break}}}}}return g},has:function(b){var a=a4(b);return this.filter(function(){for(var d=0,c=a.length;d<c;d++){if(a4.contains(this,a[d])){return true}}})},not:function(a){return this.pushStack(a7(this,a,false),"not",a)},filter:function(a){return this.pushStack(a7(this,a,true),"filter",a)},is:function(a){return !!a&&(typeof a==="string"?a4.filter(a,this).length>0:this.filter(a).length>0)},closest:function(g,n){var l=[],d,j,o=this[0];if(a4.isArray(g)){var k,b,c={},f=1;if(o&&g.length){for(d=0,j=g.length;d<j;d++){b=g[d];if(!c[b]){c[b]=bf.test(b)?a4(b,n||this.context):b}}while(o&&o.ownerDocument&&o!==n){for(b in c){k=c[b];if(k.jquery?k.index(o)>-1:a4(o).is(k)){l.push({selector:b,elem:o,level:f})}}o=o.parentNode;f++}}return l}var a=bf.test(g)||typeof g!=="string"?a4(g,n||this.context):0;for(d=0,j=this.length;d<j;d++){o=this[d];while(o){if(a?a.index(o)>-1:a4.find.matchesSelector(o,g)){l.push(o);break}else{o=o.parentNode;if(!o||!o.ownerDocument||o===n||o.nodeType===11){break}}}}l=l.length>1?a4.unique(l):l;return this.pushStack(l,"closest",g)},index:function(a){if(!a||typeof a==="string"){return a4.inArray(this[0],a?a4(a):this.parent().children())}return a4.inArray(a.jquery?a[0]:a,this)},add:function(c,a){var b=typeof c==="string"?a4(c,a):a4.makeArray(c&&c.nodeType?[c]:c),d=a4.merge(this.get(),b);return this.pushStack(aI(b[0])||aI(d[0])?d:a4.unique(d))},andSelf:function(){return this.add(this.prevObject)}});function aI(a){return !a||!a.parentNode||a.parentNode.nodeType===11}a4.each({parent:function(b){var a=b.parentNode;return a&&a.nodeType!==11?a:null},parents:function(a){return a4.dir(a,"parentNode")},parentsUntil:function(a,b,c){return a4.dir(a,"parentNode",c)},next:function(a){return a4.nth(a,2,"nextSibling")},prev:function(a){return a4.nth(a,2,"previousSibling")},nextAll:function(a){return a4.dir(a,"nextSibling")},prevAll:function(a){return a4.dir(a,"previousSibling")},nextUntil:function(a,b,c){return a4.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return a4.dir(a,"previousSibling",c)},siblings:function(a){return a4.sibling(a.parentNode.firstChild,a)},children:function(a){return a4.sibling(a.firstChild)},contents:function(a){return a4.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:a4.makeArray(a.childNodes)}},function(b,a){a4.fn[b]=function(c,g){var d=a4.map(this,a,c),f=aA.call(arguments);if(!aN.test(b)){g=c}if(g&&typeof g==="string"){d=a4.filter(g,d)}d=this.length>1&&!aB[b]?a4.unique(d):d;if((this.length>1||b1.test(g))&&bI.test(b)){d=d.reverse()}return this.pushStack(d,b,f.join(","))}});a4.extend({filter:function(c,b,a){if(a){c=":not("+c+")"}return b.length===1?a4.find.matchesSelector(b[0],c)?[b[0]]:[]:a4.find.matches(c,b)},dir:function(b,d,c){var a=[],f=b[d];while(f&&f.nodeType!==9&&(c===cb||f.nodeType!==1||!a4(f).is(c))){if(f.nodeType===1){a.push(f)}f=f[d]}return a},nth:function(f,a,d,b){a=a||1;var c=0;for(;f;f=f[d]){if(f.nodeType===1&&++c===a){break}}return f},sibling:function(a,c){var b=[];for(;a;a=a.nextSibling){if(a.nodeType===1&&a!==c){b.push(a)}}return b}});function a7(c,a,b){a=a||0;if(a4.isFunction(a)){return a4.grep(c,function(j,f){var g=!!a.call(j,f,j);return g===b})}else{if(a.nodeType){return a4.grep(c,function(g,f){return(g===a)===b})}else{if(typeof a==="string"){var d=a4.grep(c,function(f){return f.nodeType===1});if(bg.test(a)){return a4.filter(a,d,!b)}else{a=a4.filter(a,d)}}}}return a4.grep(c,function(g,f){return(a4.inArray(g,a)>=0)===b})}var aE=/ jQuery\d+="(?:\d+|null)"/g,bN=/^\s+/,aT=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,af=/<([\w:]+)/,be=/<tbody/i,az=/<|&#?\w+;/,aD=/<(?:script|object|embed|option|style)/i,aQ=/checked\s*(?:[^=]|=\s*.checked.)/i,bO=/\/(java|ecma)script/i,aC=/^\s*<!(?:\[CDATA\[|\-\-)/,a6={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};a6.optgroup=a6.option;a6.tbody=a6.tfoot=a6.colgroup=a6.caption=a6.thead;a6.th=a6.td;if(!a4.support.htmlSerialize){a6._default=[1,"div<div>","</div>"]}a4.fn.extend({text:function(a){if(a4.isFunction(a)){return this.each(function(c){var b=a4(this);b.text(a.call(this,c,b.text()))})}if(typeof a!=="object"&&a!==cb){return this.empty().append((this[0]&&this[0].ownerDocument||bB).createTextNode(a))}return a4.text(this)},wrapAll:function(b){if(a4.isFunction(b)){return this.each(function(c){a4(this).wrapAll(b.call(this,c))})}if(this[0]){var a=a4(b,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){a.insertBefore(this[0])}a.map(function(){var c=this;while(c.firstChild&&c.firstChild.nodeType===1){c=c.firstChild}return c}).append(this)}return this},wrapInner:function(a){if(a4.isFunction(a)){return this.each(function(b){a4(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=a4(this),c=b.contents();if(c.length){c.wrapAll(a)}else{b.append(a)}})},wrap:function(a){return this.each(function(){a4(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){if(!a4.nodeName(this,"body")){a4(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(a){if(this.nodeType===1){this.appendChild(a)}})},prepend:function(){return this.domManip(arguments,true,function(a){if(this.nodeType===1){this.insertBefore(a,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)})}else{if(arguments.length){var a=a4(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling)})}else{if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,a4(arguments[0]).toArray());return a}}},remove:function(d,a){for(var c=0,b;(b=this[c])!=null;c++){if(!d||a4.filter(d,[b]).length){if(!a&&b.nodeType===1){a4.cleanData(b.getElementsByTagName("*"));a4.cleanData([b])}if(b.parentNode){b.parentNode.removeChild(b)}}}return this},empty:function(){for(var b=0,a;(a=this[b])!=null;b++){if(a.nodeType===1){a4.cleanData(a.getElementsByTagName("*"))}while(a.firstChild){a.removeChild(a.firstChild)}}return this},clone:function(a,b){a=a==null?false:a;b=b==null?a:b;return this.map(function(){return a4.clone(this,a,b)})},html:function(b){if(b===cb){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aE,""):null}else{if(typeof b==="string"&&!aD.test(b)&&(a4.support.leadingWhitespace||!bN.test(b))&&!a6[(af.exec(b)||["",""])[1].toLowerCase()]){b=b.replace(aT,"<$1></$2>");try{for(var c=0,a=this.length;c<a;c++){if(this[c].nodeType===1){a4.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=b}}}catch(d){this.empty().append(b)}}else{if(a4.isFunction(b)){this.each(function(g){var f=a4(this);f.html(b.call(this,g,f.html()))})}else{this.empty().append(b)}}}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(a4.isFunction(a)){return this.each(function(c){var d=a4(this),b=d.html();d.replaceWith(a.call(this,c,b))})}if(typeof a!=="string"){a=a4(a).detach()}return this.each(function(){var c=this.nextSibling,b=this.parentNode;a4(this).remove();if(c){a4(c).before(a)}else{a4(b).append(a)}})}else{return this.length?this.pushStack(a4(a4.isFunction(a)?a():a),"replaceWith",a):this}},detach:function(a){return this.remove(a,true)},domManip:function(c,f,k){var o,b,j,g,l=c[0],d=[];if(!a4.support.checkClone&&arguments.length===3&&typeof l==="string"&&aQ.test(l)){return this.each(function(){a4(this).domManip(c,f,k,true)})}if(a4.isFunction(l)){return this.each(function(q){var r=a4(this);c[0]=l.call(this,q,f?r.html():cb);r.domManip(c,f,k)})}if(this[0]){g=l&&l.parentNode;if(a4.support.parentNode&&g&&g.nodeType===11&&g.childNodes.length===this.length){o={fragment:g}}else{o=a4.buildFragment(c,this,d)}j=o.fragment;if(j.childNodes.length===1){b=j=j.firstChild}else{b=j.firstChild}if(b){f=f&&a4.nodeName(b,"tr");for(var n=0,p=this.length,a=p-1;n<p;n++){k.call(f?bD(this[n],b):this[n],o.cacheable||(p>1&&n<a)?a4.clone(j,true,true):j)}}if(d.length){a4.each(d,aU)}}return this}});function bD(b,a){return a4.nodeName(b,"table")?(b.getElementsByTagName("tbody")[0]||b.appendChild(b.ownerDocument.createElement("tbody"))):b}function aS(l,j){if(j.nodeType!==1||!a4.hasData(l)){return}var c=a4.expando,d=a4.data(l),a=a4.data(j,d);if((d=d[c])){var g=d.events;a=a[c]=a4.extend({},d);if(g){delete a.handle;a.events={};for(var b in g){for(var f=0,k=g[b].length;f<k;f++){a4.event.add(j,b+(g[b][f].namespace?".":"")+g[b][f].namespace,g[b][f],g[b][f].data)}}}}}function b4(b,a){var c;if(a.nodeType!==1){return}if(a.clearAttributes){a.clearAttributes()}if(a.mergeAttributes){a.mergeAttributes(b)}c=a.nodeName.toLowerCase();if(c==="object"){a.outerHTML=b.outerHTML}else{if(c==="input"&&(b.type==="checkbox"||b.type==="radio")){if(b.checked){a.defaultChecked=a.checked=b.checked}if(a.value!==b.value){a.value=b.value}}else{if(c==="option"){a.selected=b.defaultSelected}else{if(c==="input"||c==="textarea"){a.defaultValue=b.defaultValue}}}}a.removeAttribute(a4.expando)}a4.buildFragment=function(g,d,a){var j,f,b,c;if(d&&d[0]){c=d[0].ownerDocument||d[0]}if(!c.createDocumentFragment){c=bB}if(g.length===1&&typeof g[0]==="string"&&g[0].length<512&&c===bB&&g[0].charAt(0)==="<"&&!aD.test(g[0])&&(a4.support.checkClone||!aQ.test(g[0]))){f=true;b=a4.fragments[g[0]];if(b&&b!==1){j=b}}if(!j){j=c.createDocumentFragment();a4.clean(g,c,j,a)}if(f){a4.fragments[g[0]]=b?j:1}return{fragment:j,cacheable:f}};a4.fragments={};a4.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){a4.fn[a]=function(l){var g=[],j=a4(l),d=this.length===1&&this[0].parentNode;if(d&&d.nodeType===11&&d.childNodes.length===1&&j.length===1){j[b](this[0]);return this}else{for(var c=0,f=j.length;c<f;c++){var k=(c>0?this.clone(true):this).get();a4(j[c])[b](k);g=g.concat(k)}return this.pushStack(g,a,j.selector)}}});function ag(a){if("getElementsByTagName" in a){return a.getElementsByTagName("*")}else{if("querySelectorAll" in a){return a.querySelectorAll("*")}else{return[]}}}function bS(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function aY(a){if(a4.nodeName(a,"input")){bS(a)}else{if("getElementsByTagName" in a){a4.grep(a.getElementsByTagName("input"),bS)}}}a4.extend({clone:function(a,c,d){var f=a.cloneNode(true),g,j,b;if((!a4.support.noCloneEvent||!a4.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!a4.isXMLDoc(a)){b4(a,f);g=ag(a);j=ag(f);for(b=0;g[b];++b){b4(g[b],j[b])}}if(c){aS(a,f);if(d){g=ag(a);j=ag(f);for(b=0;g[b];++b){aS(g[b],j[b])}}}g=j=null;return f},clean:function(n,l,o,b){var a;l=l||bB;if(typeof l.createElement==="undefined"){l=l.ownerDocument||l[0]&&l[0].ownerDocument||bB}var g=[],j;for(var q=0,c;(c=n[q])!=null;q++){if(typeof c==="number"){c+=""}if(!c){continue}if(typeof c==="string"){if(!az.test(c)){c=l.createTextNode(c)}else{c=c.replace(aT,"<$1></$2>");var k=(af.exec(c)||["",""])[1].toLowerCase(),t=a6[k]||a6._default,u=t[0],p=l.createElement("div");p.innerHTML=t[1]+c+t[2];while(u--){p=p.lastChild}if(!a4.support.tbody){var s=be.test(c),f=k==="table"&&!s?p.firstChild&&p.firstChild.childNodes:t[1]==="<table>"&&!s?p.childNodes:[];for(j=f.length-1;j>=0;--j){if(a4.nodeName(f[j],"tbody")&&!f[j].childNodes.length){f[j].parentNode.removeChild(f[j])}}}if(!a4.support.leadingWhitespace&&bN.test(c)){p.insertBefore(l.createTextNode(bN.exec(c)[0]),p.firstChild)}c=p.childNodes}}var d;if(!a4.support.appendChecked){if(c[0]&&typeof(d=c.length)==="number"){for(j=0;j<d;j++){aY(c[j])}}else{aY(c)}}if(c.nodeType){g.push(c)}else{g=a4.merge(g,c)}}if(o){a=function(v){return !v.type||bO.test(v.type)};for(q=0;g[q];q++){if(b&&a4.nodeName(g[q],"script")&&(!g[q].type||g[q].type.toLowerCase()==="text/javascript")){b.push(g[q].parentNode?g[q].parentNode.removeChild(g[q]):g[q])}else{if(g[q].nodeType===1){var r=a4.grep(g[q].getElementsByTagName("script"),a);g.splice.apply(g,[q+1,0].concat(r))}o.appendChild(g[q])}}}return g},cleanData:function(l){var n,g,f=a4.cache,c=a4.expando,a=a4.event.special,k=a4.support.deleteExpando;for(var j=0,d;(d=l[j])!=null;j++){if(d.nodeName&&a4.noData[d.nodeName.toLowerCase()]){continue}g=d[a4.expando];if(g){n=f[g]&&f[g][c];if(n&&n.events){for(var b in n.events){if(a[b]){a4.event.remove(d,b)}else{a4.removeEvent(d,b,n.handle)}}if(n.handle){n.handle.elem=null}}if(k){delete d[a4.expando]}else{if(d.removeAttribute){d.removeAttribute(a4.expando)}}delete f[g]}}}});function aU(b,a){if(a.src){a4.ajax({url:a.src,async:false,dataType:"script"})}else{a4.globalEval((a.text||a.textContent||a.innerHTML||"").replace(aC,"/*$0*/"))}if(a.parentNode){a.parentNode.removeChild(a)}}var a8=/alpha\([^)]*\)/i,ce=/opacity=([^)]*)/,a1=/([A-Z]|^ms)/g,aj=/^-?\d+(?:px)?$/i,aL=/^-?\d/,ad=/^[+\-]=/,by=/[^+\-\.\de]+/g,bA={position:"absolute",visibility:"hidden",display:"block"},aP=["Left","Right"],aq=["Top","Bottom"],au,ax,bR;a4.fn.css=function(a,b){if(arguments.length===2&&b===cb){return this}return a4.access(this,a,b,true,function(d,c,f){return f!==cb?a4.style(d,c,f):a4.css(d,c)})};a4.extend({cssHooks:{opacity:{get:function(c,a){if(a){var b=au(c,"opacity","opacity");return b===""?"1":b}else{return c.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":a4.support.cssFloat?"cssFloat":"styleFloat"},style:function(j,k,f,b){if(!j||j.nodeType===3||j.nodeType===8||!j.style){return}var l,d,n=a4.camelCase(k),a=j.style,c=a4.cssHooks[n];k=a4.cssProps[n]||n;if(f!==cb){d=typeof f;if(d==="number"&&isNaN(f)||f==null){return}if(d==="string"&&ad.test(f)){f=+f.replace(by,"")+parseFloat(a4.css(j,k));d="number"}if(d==="number"&&!a4.cssNumber[n]){f+="px"}if(!c||!("set" in c)||(f=c.set(j,f))!==cb){try{a[k]=f}catch(g){}}}else{if(c&&"get" in c&&(l=c.get(j,false,b))!==cb){return l}return a[k]}},css:function(c,d,a){var f,b;d=a4.camelCase(d);b=a4.cssHooks[d];d=a4.cssProps[d]||d;if(d==="cssFloat"){d="float"}if(b&&"get" in b&&(f=b.get(c,true,a))!==cb){return f}else{if(au){return au(c,d)}}},swap:function(b,d,c){var a={};for(var f in d){a[f]=b.style[f];b.style[f]=d[f]}c.call(b);for(f in d){b.style[f]=a[f]}}});a4.curCSS=a4.css;a4.each(["height","width"],function(b,a){a4.cssHooks[a]={get:function(c,f,g){var d;if(f){if(c.offsetWidth!==0){return bc(c,a,g)}else{a4.swap(c,bA,function(){d=bc(c,a,g)})}return d}},set:function(c,d){if(aj.test(d)){d=parseFloat(d);if(d>=0){return d+"px"}}else{return d}}}});if(!a4.support.opacity){a4.cssHooks.opacity={get:function(b,a){return ce.test((a&&b.currentStyle?b.currentStyle.filter:b.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":a?"1":""},set:function(a,b){var d=a.style,g=a.currentStyle;d.zoom=1;var f=a4.isNaN(b)?"":"alpha(opacity="+b*100+")",c=g&&g.filter||d.filter||"";d.filter=a8.test(c)?c.replace(a8,f):c+" "+f}}}a4(function(){if(!a4.support.reliableMarginRight){a4.cssHooks.marginRight={get:function(c,a){var b;a4.swap(c,{display:"inline-block"},function(){if(a){b=au(c,"margin-right","marginRight")}else{b=c.style.marginRight}});return b}}}});if(bB.defaultView&&bB.defaultView.getComputedStyle){ax=function(c,f){var a,d,b;f=f.replace(a1,"-$1").toLowerCase();if(!(d=c.ownerDocument.defaultView)){return cb}if((b=d.getComputedStyle(c,null))){a=b.getPropertyValue(f);if(a===""&&!a4.contains(c.ownerDocument.documentElement,c)){a=a4.style(c,f)}}return a}}if(bB.documentElement.currentStyle){bR=function(b,d){var a,f=b.currentStyle&&b.currentStyle[d],c=b.runtimeStyle&&b.runtimeStyle[d],g=b.style;if(!aj.test(f)&&aL.test(f)){a=g.left;if(c){b.runtimeStyle.left=b.currentStyle.left}g.left=d==="fontSize"?"1em":(f||0);f=g.pixelLeft+"px";g.left=a;if(c){b.runtimeStyle.left=c}}return f===""?"auto":f}}au=ax||bR;function bc(b,d,f){var c=d==="width"?b.offsetWidth:b.offsetHeight,a=d==="width"?aP:aq;if(c>0){if(f!=="border"){a4.each(a,function(){if(!f){c-=parseFloat(a4.css(b,"padding"+this))||0}if(f==="margin"){c+=parseFloat(a4.css(b,f+this))||0}else{c-=parseFloat(a4.css(b,"border"+this+"Width"))||0}})}return c+"px"}c=au(b,d,d);if(c<0||c==null){c=b.style[d]||0}c=parseFloat(c)||0;if(f){a4.each(a,function(){c+=parseFloat(a4.css(b,"padding"+this))||0;if(f!=="padding"){c+=parseFloat(a4.css(b,"border"+this+"Width"))||0}if(f==="margin"){c+=parseFloat(a4.css(b,f+this))||0}})}return c+"px"}if(a4.expr&&a4.expr.filters){a4.expr.filters.hidden=function(c){var b=c.offsetWidth,a=c.offsetHeight;return(b===0&&a===0)||(!a4.support.reliableHiddenOffsets&&(c.style.display||a4.css(c,"display"))==="none")};a4.expr.filters.visible=function(a){return !a4.expr.filters.hidden(a)}}var bi=/%20/g,bV=/\[\]$/,bn=/\r?\n/g,ch=/#.*$/,ay=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bZ=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bk=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,bt=/^(?:GET|HEAD)$/,b2=/^\/\//,bz=/\?/,ab=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bm=/^(?:select|textarea)/i,ae=/\s+/,ak=/([?&])_=[^&]*/,br=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,aG=a4.fn.load,bw={},bQ={},a9,aK;try{a9=bC.href}catch(bh){a9=bB.createElement("a");a9.href="";a9=a9.href}aK=br.exec(a9.toLowerCase())||[];function bj(a){return function(g,j){if(typeof g!=="string"){j=g;g="*"}if(a4.isFunction(j)){var d=g.toLowerCase().split(ae),b=0,k=d.length,l,c,f;for(;b<k;b++){l=d[b];f=/^\+/.test(l);if(f){l=l.substr(1)||"*"}c=a[l]=a[l]||[];c[f?"unshift":"push"](j)}}}}function bl(l,g,c,k,a,b){a=a||g.dataTypes[0];b=b||{};b[a]=true;var f=l[a],d=0,o=f?f.length:0,j=(l===bw),n;for(;d<o&&(j||!n);d++){n=f[d](g,c,k);if(typeof n==="string"){if(!j||b[n]){n=cb}else{g.dataTypes.unshift(n);n=bl(l,g,c,k,n,b)}}}if((j||!n)&&!b["*"]){n=bl(l,g,c,k,"*",b)}return n}a4.fn.extend({load:function(f,g,d){if(typeof f!=="string"&&aG){return aG.apply(this,arguments)}else{if(!this.length){return this}}var c=f.indexOf(" ");if(c>=0){var b=f.slice(c,f.length);f=f.slice(0,c)}var j="GET";if(g){if(a4.isFunction(g)){d=g;g=cb}else{if(typeof g==="object"){g=a4.param(g,a4.ajaxSettings.traditional);j="POST"}}}var a=this;a4.ajax({url:f,type:j,dataType:"html",data:g,complete:function(n,l,k){k=n.responseText;if(n.isResolved()){n.done(function(o){k=o});a.html(b?a4("<div>").append(k.replace(ab,"")).find(b):k)}if(d){a.each(d,[k,l,n])}}});return this},serialize:function(){return a4.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?a4.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bm.test(this.nodeName)||bZ.test(this.type))}).map(function(b,a){var c=a4(this).val();return c==null?null:a4.isArray(c)?a4.map(c,function(d,f){return{name:a.name,value:d.replace(bn,"\r\n")}}):{name:a.name,value:c.replace(bn,"\r\n")}}).get()}});a4.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){a4.fn[b]=function(c){return this.bind(b,c)}});a4.each(["get","post"],function(b,a){a4[a]=function(f,g,d,c){if(a4.isFunction(g)){c=c||d;d=g;g=cb}return a4.ajax({type:a,url:f,data:g,success:d,dataType:c})}});a4.extend({getScript:function(a,b){return a4.get(a,cb,b,"script")},getJSON:function(a,b,c){return a4.get(a,b,c,"json")},ajaxSetup:function(b,c){if(!c){c=b;b=a4.extend(true,a4.ajaxSettings,c)}else{a4.extend(true,b,a4.ajaxSettings,c)}for(var a in {context:1,url:1}){if(a in c){b[a]=c[a]}else{if(a in a4.ajaxSettings){b[a]=a4.ajaxSettings[a]}}}return b},ajaxSettings:{url:a9,isLocal:bk.test(aK[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bx.String,"text html":true,"text json":a4.parseJSON,"text xml":a4.parseXML}},ajaxPrefilter:bj(bw),ajaxTransport:bj(bQ),ajax:function(r,d){if(typeof r==="object"){d=r;r=cb}d=d||{};var q=a4.ajaxSetup({},d),j=q.context||q,S=j!==q&&(j.nodeType||j instanceof a4)?a4(j):a4.event,o=a4.Deferred(),z=a4._Deferred(),p=q.statusCode||{},s,l={},B={},f,v,w,x,k,c=0,g,u,n={readyState:0,setRequestHeader:function(A,a){if(!c){var b=A.toLowerCase();A=B[b]=B[b]||A;l[A]=a}return this},getAllResponseHeaders:function(){return c===2?f:null},getResponseHeader:function(a){var b;if(c===2){if(!v){v={};while((b=ay.exec(f))){v[b[1].toLowerCase()]=b[2]}}b=v[a.toLowerCase()]}return b===cb?null:b},overrideMimeType:function(a){if(!c){q.mimeType=a}return this},abort:function(a){a=a||"abort";if(w){w.abort(a)}y(0,a);return this}};function y(P,a,F,b){if(c===2){return}c=2;if(x){clearTimeout(x)}w=cb;f=b||"";n.readyState=P?4:0;var C,M,N,J=F?cg(q,n,F):cb,T,L;if(P>=200&&P<300||P===304){if(q.ifModified){if((T=n.getResponseHeader("Last-Modified"))){a4.lastModified[s]=T}if((L=n.getResponseHeader("Etag"))){a4.etag[s]=L}}if(P===304){a="notmodified";C=true}else{try{M=bs(q,J);a="success";C=true}catch(E){a="parsererror";N=E}}}else{N=a;if(!a||P){a="error";if(P<0){P=0}}}n.status=P;n.statusText=a;if(C){o.resolveWith(j,[M,a,n])}else{o.rejectWith(j,[n,a,N])}n.statusCode(p);p=cb;if(g){S.trigger("ajax"+(C?"Success":"Error"),[n,q,C?M:N])}z.resolveWith(j,[n,a]);if(g){S.trigger("ajaxComplete",[n,q]);if(!(--a4.active)){a4.event.trigger("ajaxStop")}}}o.promise(n);n.success=n.done;n.error=n.fail;n.complete=z.done;n.statusCode=function(a){if(a){var b;if(c<2){for(b in a){p[b]=[p[b],a[b]]}}else{b=a[n.status];n.then(b,b)}}return this};q.url=((r||q.url)+"").replace(ch,"").replace(b2,aK[1]+"//");q.dataTypes=a4.trim(q.dataType||"*").toLowerCase().split(ae);if(q.crossDomain==null){k=br.exec(q.url.toLowerCase());q.crossDomain=!!(k&&(k[1]!=aK[1]||k[2]!=aK[2]||(k[3]||(k[1]==="http:"?80:443))!=(aK[3]||(aK[1]==="http:"?80:443))))}if(q.data&&q.processData&&typeof q.data!=="string"){q.data=a4.param(q.data,q.traditional)}bl(bw,q,d,n);if(c===2){return false}g=q.global;q.type=q.type.toUpperCase();q.hasContent=!bt.test(q.type);if(g&&a4.active++===0){a4.event.trigger("ajaxStart")}if(!q.hasContent){if(q.data){q.url+=(bz.test(q.url)?"&":"?")+q.data}s=q.url;if(q.cache===false){var t=a4.now(),Q=q.url.replace(ak,"$1_="+t);q.url=Q+((Q===q.url)?(bz.test(q.url)?"&":"?")+"_="+t:"")}}if(q.data&&q.hasContent&&q.contentType!==false||d.contentType){n.setRequestHeader("Content-Type",q.contentType)}if(q.ifModified){s=s||q.url;if(a4.lastModified[s]){n.setRequestHeader("If-Modified-Since",a4.lastModified[s])}if(a4.etag[s]){n.setRequestHeader("If-None-Match",a4.etag[s])}}n.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+(q.dataTypes[0]!=="*"?", */*; q=0.01":""):q.accepts["*"]);for(u in q.headers){n.setRequestHeader(u,q.headers[u])}if(q.beforeSend&&(q.beforeSend.call(j,n,q)===false||c===2)){n.abort();return false}for(u in {success:1,error:1,complete:1}){n[u](q[u])}w=bl(bQ,q,d,n);if(!w){y(-1,"No Transport")}else{n.readyState=1;if(g){S.trigger("ajaxSend",[n,q])}if(q.async&&q.timeout>0){x=setTimeout(function(){n.abort("timeout")},q.timeout)}try{c=1;w.send(l,y)}catch(O){if(status<2){y(-1,O)}else{a4.error(O)}}}return n},param:function(a,c){var d=[],b=function(j,g){g=a4.isFunction(g)?g():g;d[d.length]=encodeURIComponent(j)+"="+encodeURIComponent(g)};if(c===cb){c=a4.ajaxSettings.traditional}if(a4.isArray(a)||(a.jquery&&!a4.isPlainObject(a))){a4.each(a,function(){b(this.name,this.value)})}else{for(var f in a){aR(f,a[f],c,b)}}return d.join("&").replace(bi,"+")}});function aR(f,a,c,b){if(a4.isArray(a)){a4.each(a,function(g,j){if(c||bV.test(f)){b(f,j)}else{aR(f+"["+(typeof j==="object"||a4.isArray(j)?g:"")+"]",j,c,b)}})}else{if(!c&&a!=null&&typeof a==="object"){for(var d in a){aR(f+"["+d+"]",a[d],c,b)}}else{b(f,a)}}}a4.extend({active:0,lastModified:{},etag:{}});function cg(k,d,j){var f=k.contents,n=k.dataTypes,a=k.responseFields,l,c,b,g;for(c in a){if(c in j){d[a[c]]=j[c]}}while(n[0]==="*"){n.shift();if(l===cb){l=k.mimeType||d.getResponseHeader("content-type")}}if(l){for(c in f){if(f[c]&&f[c].test(l)){n.unshift(c);break}}}if(n[0] in j){b=n[0]}else{for(c in j){if(!n[0]||k.converters[c+" "+n[0]]){b=c;break}if(!g){g=c}}b=b||g}if(b){if(b!==n[0]){n.unshift(b)}return j[b]}}function bs(j,r){if(j.dataFilter){r=j.dataFilter(r,j.dataType)}var a=j.dataTypes,o={},p,q,d=a.length,n,f=a[0],l,g,c,k,b;for(p=1;p<d;p++){if(p===1){for(q in j.converters){if(typeof q==="string"){o[q.toLowerCase()]=j.converters[q]}}}l=f;f=a[p];if(f==="*"){f=l}else{if(l!=="*"&&l!==f){g=l+" "+f;c=o[g]||o["* "+f];if(!c){b=cb;for(k in o){n=k.split(" ");if(n[0]===l||n[0]==="*"){b=o[n[1]+" "+f];if(b){k=o[k];if(k===true){c=b}else{if(b===true){c=k}}break}}}}if(!(c||b)){a4.error("No conversion from "+g.replace(" "," to "))}if(c!==true){r=c?c(r):b(k(r))}}}}return r}var bd=a4.now(),aO=/(\=)\?(&|$)|\?\?/i;a4.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return a4.expando+"_"+(bd++)}});a4.ajaxPrefilter("json jsonp",function(g,c,f){var j=g.contentType==="application/x-www-form-urlencoded"&&(typeof g.data==="string");if(g.dataTypes[0]==="jsonp"||g.jsonp!==false&&(aO.test(g.url)||j&&aO.test(g.data))){var d,k=g.jsonpCallback=a4.isFunction(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,a=bx[k],n=g.url,b=g.data,l="$1"+k+"$2";if(g.jsonp!==false){n=n.replace(aO,l);if(g.url===n){if(j){b=b.replace(aO,l)}if(g.data===b){n+=(/\?/.test(n)?"&":"?")+g.jsonp+"="+k}}}g.url=n;g.data=b;bx[k]=function(o){d=[o]};f.always(function(){bx[k]=a;if(d&&a4.isFunction(a)){bx[k](d[0])}});g.converters["script json"]=function(){if(!d){a4.error(k+" was not called")}return d[0]};g.dataTypes[0]="json";return"script"}});a4.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){a4.globalEval(a);return a}}});a4.ajaxPrefilter("script",function(a){if(a.cache===cb){a.cache=false}if(a.crossDomain){a.type="GET";a.global=false}});a4.ajaxTransport("script",function(a){if(a.crossDomain){var c,b=bB.head||bB.getElementsByTagName("head")[0]||bB.documentElement;return{send:function(d,f){c=bB.createElement("script");c.async="async";if(a.scriptCharset){c.charset=a.scriptCharset}c.src=a.url;c.onload=c.onreadystatechange=function(j,g){if(g||!c.readyState||/loaded|complete/.test(c.readyState)){c.onload=c.onreadystatechange=null;if(b&&c.parentNode){b.removeChild(c)}c=cb;if(!g){f(200,"success")}}};b.insertBefore(c,b.firstChild)},abort:function(){if(c){c.onload(0,1)}}}}});var bH=bx.ActiveXObject?function(){for(var a in aZ){aZ[a](0,1)}}:false,a5=0,aZ;function b6(){try{return new bx.XMLHttpRequest()}catch(a){}}function aw(){try{return new bx.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}a4.ajaxSettings.xhr=bx.ActiveXObject?function(){return !this.isLocal&&b6()||aw()}:b6;(function(a){a4.extend(a4.support,{ajax:!!a,cors:!!a&&("withCredentials" in a)})})(a4.ajaxSettings.xhr());if(a4.support.ajax){a4.ajaxTransport(function(a){if(!a.crossDomain||a4.support.cors){var b;return{send:function(g,d){var j=a.xhr(),c,k;if(a.username){j.open(a.type,a.url,a.async,a.username,a.password)}else{j.open(a.type,a.url,a.async)}if(a.xhrFields){for(k in a.xhrFields){j[k]=a.xhrFields[k]}}if(a.mimeType&&j.overrideMimeType){j.overrideMimeType(a.mimeType)}if(!a.crossDomain&&!g["X-Requested-With"]){g["X-Requested-With"]="XMLHttpRequest"}try{for(k in g){j.setRequestHeader(k,g[k])}}catch(f){}j.send((a.hasContent&&a.data)||null);b=function(s,l){var r,u,o,n,q;try{if(b&&(l||j.readyState===4)){b=cb;if(c){j.onreadystatechange=a4.noop;if(bH){delete aZ[c]}}if(l){if(j.readyState!==4){j.abort()}}else{r=j.status;o=j.getAllResponseHeaders();n={};q=j.responseXML;if(q&&q.documentElement){n.xml=q}n.text=j.responseText;try{u=j.statusText}catch(p){u=""}if(!r&&a.isLocal&&!a.crossDomain){r=n.text?200:404}else{if(r===1223){r=204}}}}}catch(t){if(!l){d(-1,t)}}if(n){d(r,u,n,o)}};if(!a.async||j.readyState===4){b()}else{c=++a5;if(bH){if(!aZ){aZ={};a4(bx).unload(bH)}aZ[c]=b}j.onreadystatechange=b}},abort:function(){if(b){b(0,1)}}}}})}var bq={},a3,bP,aX=/^(?:toggle|show|hide)$/,aM=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,at,aJ=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ar,av=bx.webkitRequestAnimationFrame||bx.mozRequestAnimationFrame||bx.oRequestAnimationFrame;a4.fn.extend({show:function(a,d,g){var j,c;if(a||a===0){return this.animate(bK("show",3),a,d,g)}else{for(var b=0,f=this.length;b<f;b++){j=this[b];if(j.style){c=j.style.display;if(!a4._data(j,"olddisplay")&&c==="none"){c=j.style.display=""}if(c===""&&a4.css(j,"display")==="none"){a4._data(j,"olddisplay",b3(j.nodeName))}}}for(b=0;b<f;b++){j=this[b];if(j.style){c=j.style.display;if(c===""||c==="none"){j.style.display=a4._data(j,"olddisplay")||""}}}return this}},hide:function(a,d,g){if(a||a===0){return this.animate(bK("hide",3),a,d,g)}else{for(var b=0,f=this.length;b<f;b++){if(this[b].style){var c=a4.css(this[b],"display");if(c!=="none"&&!a4._data(this[b],"olddisplay")){a4._data(this[b],"olddisplay",c)}}}for(b=0;b<f;b++){if(this[b].style){this[b].style.display="none"}}return this}},_toggle:a4.fn.toggle,toggle:function(d,b,c){var a=typeof d==="boolean";if(a4.isFunction(d)&&a4.isFunction(b)){this._toggle.apply(this,arguments)}else{if(d==null||a){this.each(function(){var f=a?d:a4(this).is(":hidden");a4(this)[f?"show":"hide"]()})}else{this.animate(bK("toggle",3),d,b,c)}}return this},fadeTo:function(b,c,d,a){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},b,d,a)},animate:function(a,c,f,b){var d=a4.speed(c,f,b);if(a4.isEmptyObject(a)){return this.each(d.complete,[false])}a=a4.extend({},a);return this[d.queue===false?"each":"queue"](function(){if(d.queue===false){a4._mark(this)}var o=a4.extend({},d),g=this.nodeType===1,p=g&&a4(this).is(":hidden"),n,j,r,k,l,q,u,s,t;o.animatedProperties={};for(r in a){n=a4.camelCase(r);if(r!==n){a[n]=a[r];delete a[r]}j=a[n];if(a4.isArray(j)){o.animatedProperties[n]=j[1];j=a[n]=j[0]}else{o.animatedProperties[n]=o.specialEasing&&o.specialEasing[n]||o.easing||"swing"}if(j==="hide"&&p||j==="show"&&!p){return o.complete.call(this)}if(g&&(n==="height"||n==="width")){o.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(a4.css(this,"display")==="inline"&&a4.css(this,"float")==="none"){if(!a4.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{k=b3(this.nodeName);if(k==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(o.overflow!=null){this.style.overflow="hidden"}for(r in a){l=new a4.fx(this,o,r);j=a[r];if(aX.test(j)){l[j==="toggle"?p?"show":"hide":j]()}else{q=aM.exec(j);u=l.cur();if(q){s=parseFloat(q[2]);t=q[3]||(a4.cssNumber[r]?"":"px");if(t!=="px"){a4.style(this,r,(s||1)+t);u=((s||1)/l.cur())*u;a4.style(this,r,u+t)}if(q[1]){s=((q[1]==="-="?-1:1)*s)+u}l.custom(u,s,t)}else{l.custom(u,j,"")}}}return true})},stop:function(b,a){if(b){this.queue([])}this.each(function(){var c=a4.timers,d=c.length;if(!a){a4._unmark(true,this)}while(d--){if(c[d].elem===this){if(a){c[d](true)}c.splice(d,1)}}});if(!a){this.dequeue()}return this}});function b5(){setTimeout(bW,0);return(ar=a4.now())}function bW(){ar=cb}function bK(a,c){var b={};a4.each(aJ.concat.apply([],aJ.slice(0,c)),function(){b[this]=a});return b}a4.each({slideDown:bK("show",1),slideUp:bK("hide",1),slideToggle:bK("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){a4.fn[a]=function(d,f,c){return this.animate(b,d,f,c)}});a4.extend({speed:function(c,a,d){var b=c&&typeof c==="object"?a4.extend({},c):{complete:d||!d&&a||a4.isFunction(c)&&c,duration:c,easing:d&&a||a&&!a4.isFunction(a)&&a};b.duration=a4.fx.off?0:typeof b.duration==="number"?b.duration:b.duration in a4.fx.speeds?a4.fx.speeds[b.duration]:a4.fx.speeds._default;b.old=b.complete;b.complete=function(f){if(a4.isFunction(b.old)){b.old.call(this)}if(b.queue!==false){a4.dequeue(this)}else{if(f!==false){a4._unmark(this)}}};return b},easing:{linear:function(b,a,c,d){return c+d*b},swing:function(b,a,c,d){return((-Math.cos(b*Math.PI)/2)+0.5)*d+c}},timers:[],fx:function(c,a,b){this.options=a;this.elem=c;this.prop=b;a.orig=a.orig||{}}});a4.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(a4.fx.step[this.prop]||a4.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=a4.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(d,b,g){var j=this,a=a4.fx,c;this.startTime=ar||b5();this.start=d;this.end=b;this.unit=g||this.unit||(a4.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function f(k){return j.step(k)}f.elem=this.elem;if(f()&&a4.timers.push(f)&&!at){if(av){at=true;c=function(){if(at){av(c);a.tick()}};av(c)}else{at=setInterval(a.tick,a.interval)}}},show:function(){this.options.orig[this.prop]=a4.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());a4(this.elem).show()},hide:function(){this.options.orig[this.prop]=a4.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(g){var k=ar||b5(),a=true,b=this.elem,c=this.options,f,d;if(g||k>=c.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();c.animatedProperties[this.prop]=true;for(f in c.animatedProperties){if(c.animatedProperties[f]!==true){a=false}}if(a){if(c.overflow!=null&&!a4.support.shrinkWrapBlocks){a4.each(["","X","Y"],function(n,l){b.style["overflow"+l]=c.overflow[n]})}if(c.hide){a4(b).hide()}if(c.hide||c.show){for(var j in c.animatedProperties){a4.style(b,j,c.orig[j])}}c.complete.call(b)}return false}else{if(c.duration==Infinity){this.now=k}else{d=k-this.startTime;this.state=d/c.duration;this.pos=a4.easing[c.animatedProperties[this.prop]](this.state,d,0,1,c.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};a4.extend(a4.fx,{tick:function(){for(var a=a4.timers,b=0;b<a.length;++b){if(!a[b]()){a.splice(b--,1)}}if(!a.length){a4.fx.stop()}},interval:13,stop:function(){clearInterval(at);at=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){a4.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null){a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit}else{a.elem[a.prop]=a.now}}}});if(a4.expr&&a4.expr.filters){a4.expr.filters.animated=function(a){return a4.grep(a4.timers,function(b){return a===b.elem}).length}}function b3(a){if(!bq[a]){var d=bB.body,b=a4("<"+a+">").appendTo(d),c=b.css("display");b.remove();if(c==="none"||c===""){if(!a3){a3=bB.createElement("iframe");a3.frameBorder=a3.width=a3.height=0}d.appendChild(a3);if(!bP||!a3.createElement){bP=(a3.contentWindow||a3.contentDocument).document;bP.write((bB.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");bP.close()}b=bP.createElement(a);bP.body.appendChild(b);c=a4.css(b,"display");d.removeChild(a3)}bq[a]=c}return bq[a]}var bp=/^t(?:able|d|h)$/i,bo=/^(?:body|html)$/i;if("getBoundingClientRect" in bB.documentElement){a4.fn.offset=function(p){var f=this[0],b;if(p){return this.each(function(s){a4.offset.setOffset(this,p,s)})}if(!f||!f.ownerDocument){return null}if(f===f.ownerDocument.body){return a4.offset.bodyOffset(f)}try{b=f.getBoundingClientRect()}catch(g){}var n=f.ownerDocument,o=n.documentElement;if(!b||!a4.contains(o,f)){return b?{top:b.top,left:b.left}:{top:0,left:0}}var k=n.body,j=ah(n),r=o.clientTop||k.clientTop||0,d=o.clientLeft||k.clientLeft||0,q=j.pageYOffset||a4.support.boxModel&&o.scrollTop||k.scrollTop,a=j.pageXOffset||a4.support.boxModel&&o.scrollLeft||k.scrollLeft,c=b.top+q-r,l=b.left+a-d;return{top:c,left:l}}}else{a4.fn.offset=function(p){var f=this[0];if(p){return this.each(function(q){a4.offset.setOffset(this,p,q)})}if(!f||!f.ownerDocument){return null}if(f===f.ownerDocument.body){return a4.offset.bodyOffset(f)}a4.offset.initialize();var d,k=f.offsetParent,a=f,o=f.ownerDocument,l=o.documentElement,j=o.body,g=o.defaultView,b=g?g.getComputedStyle(f,null):f.currentStyle,c=f.offsetTop,n=f.offsetLeft;while((f=f.parentNode)&&f!==j&&f!==l){if(a4.offset.supportsFixedPosition&&b.position==="fixed"){break}d=g?g.getComputedStyle(f,null):f.currentStyle;c-=f.scrollTop;n-=f.scrollLeft;if(f===k){c+=f.offsetTop;n+=f.offsetLeft;if(a4.offset.doesNotAddBorder&&!(a4.offset.doesAddBorderForTableAndCells&&bp.test(f.nodeName))){c+=parseFloat(d.borderTopWidth)||0;n+=parseFloat(d.borderLeftWidth)||0}a=k;k=f.offsetParent}if(a4.offset.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"){c+=parseFloat(d.borderTopWidth)||0;n+=parseFloat(d.borderLeftWidth)||0}b=d}if(b.position==="relative"||b.position==="static"){c+=j.offsetTop;n+=j.offsetLeft}if(a4.offset.supportsFixedPosition&&b.position==="fixed"){c+=Math.max(l.scrollTop,j.scrollTop);n+=Math.max(l.scrollLeft,j.scrollLeft)}return{top:c,left:n}}}a4.offset={initialize:function(){var c=bB.body,k=bB.createElement("div"),a,g,b,f,d=parseFloat(a4.css(c,"marginTop"))||0,j="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";a4.extend(k.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});k.innerHTML=j;c.insertBefore(k,c.firstChild);a=k.firstChild;g=a.firstChild;f=a.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(g.offsetTop!==5);this.doesAddBorderForTableAndCells=(f.offsetTop===5);g.style.position="fixed";g.style.top="20px";this.supportsFixedPosition=(g.offsetTop===20||g.offsetTop===15);g.style.position=g.style.top="";a.style.overflow="hidden";a.style.position="relative";this.subtractsBorderForOverflowNotVisible=(g.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(c.offsetTop!==d);c.removeChild(k);a4.offset.initialize=a4.noop},bodyOffset:function(a){var c=a.offsetTop,b=a.offsetLeft;a4.offset.initialize();if(a4.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(a4.css(a,"marginTop"))||0;b+=parseFloat(a4.css(a,"marginLeft"))||0}return{top:c,left:b}},setOffset:function(n,p,l){var c=a4.css(n,"position");if(c==="static"){n.style.position="relative"}var f=a4(n),k=f.offset(),g=a4.css(n,"top"),a=a4.css(n,"left"),o=(c==="absolute"||c==="fixed")&&a4.inArray("auto",[g,a])>-1,d={},q={},j,b;if(o){q=f.position();j=q.top;b=q.left}else{j=parseFloat(g)||0;b=parseFloat(a)||0}if(a4.isFunction(p)){p=p.call(n,l,k)}if(p.top!=null){d.top=(p.top-k.top)+j}if(p.left!=null){d.left=(p.left-k.left)+b}if("using" in p){p.using.call(n,d)}else{f.css(d)}}};a4.fn.extend({position:function(){if(!this[0]){return null}var c=this[0],b=this.offsetParent(),d=this.offset(),a=bo.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(a4.css(c,"marginTop"))||0;d.left-=parseFloat(a4.css(c,"marginLeft"))||0;a.top+=parseFloat(a4.css(b[0],"borderTopWidth"))||0;a.left+=parseFloat(a4.css(b[0],"borderLeftWidth"))||0;return{top:d.top-a.top,left:d.left-a.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||bB.body;while(a&&(!bo.test(a.nodeName)&&a4.css(a,"position")==="static")){a=a.offsetParent}return a})}});a4.each(["Left","Top"],function(c,b){var a="scroll"+b;a4.fn[a]=function(d){var g,f;if(d===cb){g=this[0];if(!g){return null}f=ah(g);return f?("pageXOffset" in f)?f[c?"pageYOffset":"pageXOffset"]:a4.support.boxModel&&f.document.documentElement[a]||f.document.body[a]:g[a]}return this.each(function(){f=ah(this);if(f){f.scrollTo(!c?d:a4(f).scrollLeft(),c?d:a4(f).scrollTop())}else{this[a]=d}})}});function ah(a){return a4.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:false}a4.each(["Height","Width"],function(c,a){var b=a.toLowerCase();a4.fn["inner"+a]=function(){var d=this[0];return d&&d.style?parseFloat(a4.css(d,b,"padding")):null};a4.fn["outer"+a]=function(d){var f=this[0];return f&&f.style?parseFloat(a4.css(f,b,d?"margin":"border")):null};a4.fn[b]=function(f){var d=this[0];if(!d){return f==null?null:this}if(a4.isFunction(f)){return this.each(function(n){var l=a4(this);l[b](f.call(this,n,l[b]()))})}if(a4.isWindow(d)){var j=d.document.documentElement["client"+a];return d.document.compatMode==="CSS1Compat"&&j||d.document.body["client"+a]||j}else{if(d.nodeType===9){return Math.max(d.documentElement["client"+a],d.body["scroll"+a],d.documentElement["scroll"+a],d.body["offset"+a],d.documentElement["offset"+a])}else{if(f===cb){var k=a4.css(d,b),g=parseFloat(k);return a4.isNaN(g)?k:g}else{return this.css(b,typeof f==="string"?f:f+"px")}}}}});bx.jQuery=bx.$=a4})(window);mini={components:{},uids:{},ux:{},doc:document,window:window,isReady:false,createTime:new Date(),byClass:function(a,b){if(typeof b=="string"){b=mini.byId(b)}return jQuery("."+a,b)[0]},getComponents:function(){var a=[];for(var d in mini.components){var b=mini.components[d];if(b.isControl){a.push(b)}}return a},get:function(b){if(!b){return null}if(mini.isControl(b)){return b}if(typeof b=="string"){if(b.charAt(0)=="#"){b=b.substr(1)}}if(typeof b=="string"){return mini.components[b]}else{var a=mini.uids[b.uid];if(a&&a.el==b){return a}}return null},getbyUID:function(a){return mini.uids[a]},findControls:function(f,d){if(!f){return[]}d=d||mini;var a=[];var g=mini.uids;for(var c in g){var j=g[c];var b=f.call(d,j);if(b===true||b===1){a.push(j);if(b===1){break}}}return a},getChildControls:function(b){var c=b.el?b.el:b;var a=mini.findControls(function(d){if(!d.el||b==d){return false}if(mini.isAncestor(c,d.el)&&d.within){return true}return false});return a},emptyFn:function(){},createNameControls:function(k,j){if(!k||!k.el){return}if(!j){j="_"}var g=k.el;var b=mini.findControls(function(c){if(!c.el||!c.name){return false}if(mini.isAncestor(g,c.el)){return true}return false});for(var f=0,a=b.length;f<a;f++){var n=b[f];var d=j+n.name;if(j===true){d=n.name[0].toUpperCase()+n.name.substring(1,n.name.length)}k[d]=n}},getsbyName:function(d,a){var b=mini.isControl(a);var f=a;if(a&&b){a=a.el}a=mini.byId(a);a=a||document.body;var c=mini.findControls(function(j){if(!j.el){return false}if(j.name==d&&mini.isAncestor(a,j.el)){return true}return false},this);if(b&&c.length==0&&f&&f.getbyName){var g=f.getbyName(d);if(g){c.push(g)}}return c},getbyName:function(b,a){return mini.getsbyName(b,a)[0]},getParams:function(b){if(!b){b=location.href}b=b.split("?")[1];var j={};if(b){var f=b.split("&");for(var d=0,a=f.length;d<a;d++){var g=f[d].split("=");try{j[g[0]]=decodeURIComponent(unescape(g[1]))}catch(c){}}}return j},reg:function(a){this.components[a.id]=a;this.uids[a.uid]=a},unreg:function(a){delete mini.components[a.id];delete mini.uids[a.uid]},classes:{},uiClasses:{},getClass:function(a){if(!a){return null}return this.classes[a.toLowerCase()]},getClassByUICls:function(a){return this.uiClasses[a.toLowerCase()]},idPre:"mini-",idIndex:1,newId:function(a){return(a||this.idPre)+this.idIndex++},copyTo:function(c,b){if(c&&b){for(var a in b){c[a]=b[a]}}return c},copyIf:function(c,b){if(c&&b){for(var a in b){if(mini.isNull(c[a])){c[a]=b[a]}}}return c},createDelegate:function(b,a){if(!b){return function(){}}return function(){return b.apply(a,arguments)}},isControl:function(a){return !!(a&&a.isControl)},isElement:function(a){return a&&a.appendChild},isDate:function(a){return !!(a&&a.getFullYear)},isArray:function(a){return !!(a&&!!a.unshift)},isNull:function(a){return a===null||a===undefined},isNumber:function(a){return !isNaN(a)&&typeof a=="number"},isEquals:function(d,c){if(d!==0&&c!==0){if((mini.isNull(d)||d=="")&&(mini.isNull(c)||c=="")){return true}}if(d&&c&&d.getFullYear&&c.getFullYear){return d.getTime()===c.getTime()}if(typeof d=="object"&&typeof c=="object"){return d===c}return String(d)===String(c)},forEach:function(j,g,c){var d=j.clone();for(var b=0,a=d.length;b<a;b++){var f=d[b];if(g.call(c,f,b,j)===false){break}}},sort:function(d,c,b){b=b||d;function a(o,g){var l=0,n=o.length,k,p;for(;l<n;l++){for(k=l;k<n;k++){var s=o[l],q=o[k];var f=g(s,q);if(f>0){o.removeAt(k);o.insert(l,q)}}}return o}a(d,c)},removeNode:function(a){jQuery(a).remove()},elWarp:document.createElement("div")};if(typeof mini_debugger=="undefined"){mini_debugger=true}if(typeof mini_useShims=="undefined"){mini_useShims=false}mini_regClass=function(a,b){b=b.toLowerCase();if(!mini.classes[b]){mini.classes[b]=a;a.prototype.type=b}var c=a.prototype.uiCls;if(!mini.isNull(c)&&!mini.uiClasses[c]){mini.uiClasses[c]=a}};mini_extend=function(f,b,g){if(typeof b!="function"){return this}var j=f,d=j.prototype,a=b.prototype;if(j.superclass==a){return}j.superclass=a;j.superclass.constructor=b;for(var c in a){d[c]=a[c]}if(g){for(var c in g){d[c]=g[c]}}return j};mini.copyTo(mini,{extend:mini_extend,regClass:mini_regClass,debug:false});mini.namespace=function(g){if(typeof g!="string"){return}g=g.split(".");var d=window;for(var c=0,a=g.length;c<a;c++){var b=g[c];var f=d[b];if(!f){f=d[b]={}}d=f}};mini._BindCallbacks=[];mini._BindEvents=function(b,a){mini._BindCallbacks.push([b,a]);if(!mini._EventTimer){mini._EventTimer=setTimeout(function(){mini._FireBindEvents()},50)}};mini._FireBindEvents=function(){for(var b=0,a=mini._BindCallbacks.length;b<a;b++){var c=mini._BindCallbacks[b];c[0].call(c[1])}mini._BindCallbacks=[];mini._EventTimer=null};mini._getFunctoin=function(g){if(typeof g!="string"){return null}var f=g.split(".");var d=null;for(var c=0,a=f.length;c<a;c++){var b=f[c];if(!d){d=window[b]}else{d=d[b]}if(!d){break}}return d};mini._getMap=function(name,obj){if(!name){return null}var index=name.indexOf(".");if(index==-1&&name.indexOf("[")==-1){return obj[name]}if(index==(name.length-1)){return obj[name]}var s="obj."+name;try{var v=eval(s)}catch(e){return null}return v};mini._setMap=function(a,p,f){if(!f){return}if(typeof a!="string"){return}var o=a.split(".");function j(u,s,r,q){var l=u[s];if(!l){l=u[s]=[]}for(var t=0;t<=r;t++){var v=l[t];if(!v){if(q===null||q===undefined){v=l[t]={}}else{v=l[t]=q}}}return u[s][r]}var c=null;for(var g=0,d=o.length;g<=d-1;g++){var a=o[g];if(g==d-1){if(a.indexOf("]")==-1){f[a]=p}else{var b=a.split("[");var n=b[0],k=parseInt(b[1]);j(f,n,k,"");f[n][k]=p}break}if(a.indexOf("]")==-1){c=f[a];if(g<=d-2&&c==null){f[a]=c={}}f=c}else{var b=a.split("[");var n=b[0],k=parseInt(b[1]);f=j(f,n,k)}}return p};mini.getAndCreate=function(a){if(!a){return null}if(typeof a=="string"){return mini.components[a]}if(typeof a=="object"){if(mini.isControl(a)){return a}else{if(mini.isElement(a)){return mini.uids[a.uid]}else{return mini.create(a)}}}return null};mini.create=function(a){if(!a){return null}if(mini.get(a.id)===a){return a}var b=this.getClass(a.type);if(!b){return null}var c=new b();c.set(a);return c};mini.Component=function(){this._events={};this.uid=mini.newId(this._idPre);this._id=this.uid;if(!this.id){this.id=this.uid}mini.reg(this)};mini.Component.prototype={isControl:true,id:null,_idPre:"mini-",_idSet:false,_canFire:true,set:function(f){if(typeof f=="string"){return this}var d=this._allowLayout;this._allowLayout=false;var g=f.renderTo||f.render;delete f.renderTo;delete f.render;for(var b in f){if(b.toLowerCase().indexOf("on")==0){if(this["_$"+b]){continue}var c=f[b];this.on(b.substring(2,b.length).toLowerCase(),c);delete f[b]}}for(var b in f){var a=f[b];var k="set"+b.charAt(0).toUpperCase()+b.substring(1,b.length);var j=this[k];if(j){j.call(this,a)}else{this[b]=a}}if(g&&this.render){this.render(g)}this._allowLayout=d;if(this.doLayout){this.doLayout()}return this},fire:function(d,f){if(this._canFire==false){return}d=d.toLowerCase();var b=this._events[d];if(b){if(!f){f={}}if(f&&f!=this){f.source=f.sender=this;if(!f.type){f.type=d}}for(var c=0,a=b.length;c<a;c++){var g=b[c];if(g){g[0].apply(g[1],[f])}}}},on:function(type,fn,scope){if(typeof fn=="string"){var f=mini._getFunctoin(fn);if(!f){var id=mini.newId("__str_");window[id]=fn;eval("fn = function(e){var s = "+id+";var fn = mini._getFunctoin(s); if(fn) {fn.call(this, e)}else{eval(s);}}")}else{fn=f}}if(typeof fn!="function"||!type){return false}type=type.toLowerCase();var event=this._events[type];if(!event){event=this._events[type]=[]}scope=scope||this;if(!this.findListener(type,fn,scope)){event.push([fn,scope])}return this},un:function(c,b,a){if(typeof b!="function"){return false}c=c.toLowerCase();var d=this._events[c];if(d){a=a||this;var f=this.findListener(c,b,a);if(f){d.remove(f)}}return this},findListener:function(g,f,d){g=g.toLowerCase();d=d||this;var b=this._events[g];if(b){for(var c=0,a=b.length;c<a;c++){var j=b[c];if(j[0]===f&&j[1]===d){return j}}}},setId:function(a){if(!a){throw new Error("id not null")}if(this._idSet){throw new Error("id just set only one")}mini.unreg(this);this.id=a;if(this.el){this.el.id=a}if(this._valueEl){this._valueEl.id=a+"$value"}if(this._textEl){this._textEl.id=a+"$text"}this._idSet=true;mini.reg(this)},getId:function(){return this.id},destroy:function(){mini.unreg(this);this.fire("destroy")}};mini.Control=function(a){mini.Control.superclass.constructor.apply(this,arguments);this._create();this.el.uid=this.uid;this._initEvents();if(this._clearBorder){this.el.style.borderWidth="0"}this.addCls(this.uiCls);this.setWidth(this.width);this.setHeight(this.height);this.el.style.display=this.visible?this._displayStyle:"none";if(a){mini.applyTo.call(this,a)}};mini.extend(mini.Control,mini.Component,{jsName:null,width:"",height:"",visible:true,readOnly:false,enabled:true,tooltip:"",_readOnlyCls:"mini-readonly",_disabledCls:"mini-disabled",_create:function(){this.el=document.createElement("div")},_initEvents:function(){},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}return false},name:"",setName:function(a){this.name=a},getName:function(){return this.name},isAutoHeight:function(){var a=this.el.style.height;return a=="auto"||a==""},isAutoWidth:function(){var a=this.el.style.width;return a=="auto"||a==""},isFixedSize:function(){var b=this.width;var a=this.height;if(parseInt(b)+"px"==b&&parseInt(a)+"px"==a){return true}return false},isRender:function(a){return !!(this.el&&this.el.parentNode&&this.el.parentNode.tagName)},render:function(b,a){if(typeof b==="string"){if(b=="#body"){b=document.body}else{b=mini.byId(b)}}if(!b){return}if(!a){a="append"}a=a.toLowerCase();if(a=="before"){jQuery(b).before(this.el)}else{if(a=="preend"){jQuery(b).preend(this.el)}else{if(a=="after"){jQuery(b).after(this.el)}else{b.appendChild(this.el)}}}this.el.id=this.id;this.doLayout();this.fire("render")},getEl:function(){return this.el},setJsName:function(a){this.jsName=a;window[a]=this},getJsName:function(){return this.jsName},setTooltip:function(a){this.tooltip=a;this.el.title=a;if(this.tooltipPlacement){jQuery(this.el).attr("data-placement",this.tooltipPlacement)}},getTooltip:function(){return this.tooltip},_sizeChanged:function(){this.doLayout()},setWidth:function(a){if(parseInt(a)==a){a+="px"}this.width=a;this.el.style.width=a;this._sizeChanged()},getWidth:function(d){var c=this.el;var a=d?jQuery(c).width():jQuery(c).outerWidth();if(d&&this._borderEl){var b=mini.getBorders(this._borderEl);a=a-b.left-b.right}return a},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;this.el.style.height=a;this._sizeChanged()},getHeight:function(c){var b=c?jQuery(this.el).height():jQuery(this.el).outerHeight();if(c&&this._borderEl){var a=mini.getBorders(this._borderEl);b=b-a.top-a.bottom}return b},getBox:function(){return mini.getBox(this.el)},setBorderStyle:function(b){var a=this._borderEl||this.el;mini.setStyle(a,b);this.doLayout()},getBorderStyle:function(){return this.borderStyle},_clearBorder:true,setStyle:function(a){this.style=a;mini.setStyle(this.el,a);if(this._clearBorder){this.el.style.borderWidth="0";this.el.style.padding="0px"}this.width=this.el.style.width;this.height=this.el.style.height;this._sizeChanged()},getStyle:function(){return this.style},setCls:function(a){this.addCls(a)},getCls:function(){return this.cls},addCls:function(a){mini.addClass(this.el,a)},removeCls:function(a){mini.removeClass(this.el,a)},_doReadOnly:function(){if(this.readOnly){this.addCls(this._readOnlyCls)}else{this.removeCls(this._readOnlyCls)}},setReadOnly:function(a){this.readOnly=a;this._doReadOnly()},getReadOnly:function(){return this.readOnly},getParent:function(d){var b=document;var a=this.el.parentNode;while(a!=b&&a!=null){var c=mini.get(a);if(c){if(!mini.isControl(c)){return null}if(!d||c.uiCls==d){return c}}a=a.parentNode}return null},isReadOnly:function(){if(this.readOnly||!this.enabled){return true}var a=this.getParent();if(a){return a.isReadOnly()}return false},setEnabled:function(a){this.enabled=a;if(this.enabled){this.removeCls(this._disabledCls)}else{this.addCls(this._disabledCls)}this._doReadOnly()},getEnabled:function(){return this.enabled},enable:function(){this.setEnabled(true)},disable:function(){this.setEnabled(false)},_displayStyle:"",setVisible:function(a){this.visible=a;if(this.el){this.el.style.display=a?this._displayStyle:"none";this.doLayout()}},getVisible:function(){return this.visible},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},isDisplay:function(c){if(mini.WindowVisible==false||!this.el){return false}var b=document.body;var a=this.el;while(1){if(a==null||!a.style){return false}if(a&&a.style&&a.style.display=="none"){if(c){if(c(a)!==true){return false}}else{return false}}if(a==b){return true}a=a.parentNode}return true},_allowUpdate:true,beginUpdate:function(){this._allowUpdate=false},endUpdate:function(){this._allowUpdate=true;this.doUpdate()},doUpdate:function(){},canLayout:function(){if(!mini.enableLayout){return false}if(this._allowLayout==false){return false}return this.isDisplay()},doLayout:function(){},layoutChanged:function(){if(this.canLayout()==false){return}this.doLayout()},_destroyChildren:function(d){if(this.el){var c=mini.getChildControls(this);for(var b=0,a=c.length;b<a;b++){var f=c[b];if(f.destroyed!==true){f.destroy(d)}}}},destroy:function(a){if(this.destroyed!==true){this._destroyChildren(a)}if(this.el){mini.clearEvent(this.el);if(a!==false){var b=this.el.parentNode;if(b){b.removeChild(this.el)}}}this._borderEl=null;this.el=null;mini.unreg(this);this.destroyed=true;this.fire("destroy")},focus:function(){try{var a=this;a.el.focus()}catch(b){}},blur:function(){try{var a=this;a.el.blur()}catch(b){}},allowAnim:true,setAllowAnim:function(a){this.allowAnim=a},getAllowAnim:function(){return this.allowAnim},_getMaskWrapEl:function(){return this.el},mask:function(a){if(typeof a=="string"){a={html:a}}a=a||{};a.el=this._getMaskWrapEl();if(!a.cls){a.cls=this._maskCls}mini.mask(a)},unmask:function(){mini.unmask(this._getMaskWrapEl());this.isLoading=false},_maskCls:"mini-mask-loading",loadingMsg:"Loading...",loading:function(a){this.mask(a||this.loadingMsg)},setLoadingMsg:function(a){this.loadingMsg=a},getLoadingMsg:function(){return this.loadingMsg},_getContextMenu:function(b){var a=b;if(typeof b=="string"){a=mini.get(b);if(!a){mini.parse(b);a=mini.get(b)}}else{if(mini.isArray(b)){a={type:"menu",items:b}}else{if(!mini.isControl(b)){a=mini.create(b)}}}return a},__OnHtmlContextMenu:function(b){var a={popupEl:this.el,htmlEvent:b,cancel:false};this.contextMenu.fire("BeforeOpen",a);if(a.cancel==true){return}this.contextMenu.fire("opening",a);if(a.cancel==true){return}this.contextMenu.showAtPos(b.pageX,b.pageY);this.contextMenu.fire("Open",a);return false},contextMenu:null,setContextMenu:function(b){var a=this._getContextMenu(b);if(!a){return}if(this.contextMenu!==a){this.contextMenu=a;this.contextMenu.owner=this;mini.on(this.el,"contextmenu",this.__OnHtmlContextMenu,this)}},getContextMenu:function(){return this.contextMenu},setDefaultValue:function(a){this.defaultValue=a},getDefaultValue:function(){return this.defaultValue},setValue:function(a){this.value=a},getValue:function(){return this.value},ajaxData:null,ajaxType:"",setAjaxData:function(a){this.ajaxData=a},getAjaxData:function(){return this.ajaxData},setAjaxType:function(a){this.ajaxType=a},getAjaxType:function(){return this.ajaxType},_afterApply:function(a){},dataField:"",setDataField:function(a){this.dataField=a},getDataField:function(){return this.dataField},tabIndex:0,setTabIndex:function(b){var a=this._textEl||this.el;a.tabIndex=b;this.tabIndex=b},getTabIndex:function(){return this.tabIndex},getAttrs:function(el){var attrs={};var cls=el.className;if(cls){attrs.cls=cls}if(el.value){attrs.value=el.value}mini._ParseString(el,attrs,["id","name","width","height","borderStyle","value","defaultValue","tabIndex","contextMenu","tooltip","ondestroy","data-options","ajaxData","ajaxType","dataField","ajaxOptions","data-placement"]);if(attrs["data-placement"]){this.tooltipPlacement=attrs["data-placement"]}mini._ParseBool(el,attrs,["visible","enabled","readOnly"]);if(el.readOnly&&el.readOnly!="false"){attrs.readOnly=true}var style=el.style.cssText;if(style){attrs.style=style}if(isIE9){var bg=el.style.background;if(bg){if(!attrs.style){attrs.style=""}attrs.style+=";background:"+bg}}if(this.style){if(attrs.style){attrs.style=this.style+";"+attrs.style}else{attrs.style=this.style}}if(this.borderStyle){if(attrs.borderStyle){attrs.borderStyle=this.borderStyle+";"+attrs.borderStyle}else{attrs.borderStyle=this.borderStyle}}if(typeof attrs.ajaxOptions=="string"){attrs.ajaxOptions=eval("("+attrs.ajaxOptions+")")}var ts=mini._attrs;if(ts){for(var i=0,l=ts.length;i<l;i++){var t=ts[i];var name=t[0];var type=t[1];if(!type){type="string"}if(type=="string"){mini._ParseString(el,attrs,[name])}else{if(type=="bool"){mini._ParseBool(el,attrs,[name])}else{if(type=="int"){mini._ParseInt(el,attrs,[name])}}}}}var options=attrs["data-options"];if(options){options=eval("("+options+")");if(options){mini.copyTo(attrs,options)}}return attrs}});mini._attrs=null;mini.regHtmlAttr=function(a,b){if(!a){return}if(!b){b="string"}if(!mini._attrs){mini._attrs=[]}mini._attrs.push([a,b])};__mini_setControls=function(b,g,f){g=g||this._contentEl;f=f||this;if(!b){b=[]}if(!mini.isArray(b)){b=[b]}for(var d=0,a=b.length;d<a;d++){var j=b[d];if(typeof j=="string"){if(j.indexOf("#")==0){j=mini.byId(j)}}else{if(mini.isElement(j)){}else{j=mini.getAndCreate(j);j=j.el}}if(!j){continue}mini.append(g,j)}mini.parse(g);f.doLayout();return f};mini.Container=function(){mini.Container.superclass.constructor.apply(this,arguments);this._contentEl=this.el};mini.extend(mini.Container,mini.Control,{setControls:__mini_setControls,getContentEl:function(){return this._contentEl},getBodyEl:function(){return this._contentEl},within:function(f){if(mini.isAncestor(this.el,f.target)){return true}var b=mini.getChildControls(this);for(var d=0,a=b.length;d<a;d++){var g=b[d];if(g.within(f)){return true}}return false}});mini.ValidatorBase=function(){mini.ValidatorBase.superclass.constructor.apply(this,arguments)};mini.extend(mini.ValidatorBase,mini.Control,{required:false,requiredErrorText:"This field is required.",_requiredCls:"mini-required",errorText:"",_errorCls:"mini-error",_invalidCls:"mini-invalid",errorMode:"icon",validateOnChanged:true,validateOnLeave:true,_IsValid:true,indentSpace:false,_indentCls:"mini-indent",setIndentSpace:function(a){if(a){this.addCls(this._indentCls)}else{this.removeCls(this._indentCls)}this.indentSpace=a},getIndentSpace:function(){return this.indentSpace},isEditable:function(){if(this.readOnly||!this.allowInput||!this.enabled){return false}return true},_tryValidate:function(){if(this._tryValidateTimer){clearTimeout(this._tryValidateTimer)}var a=this;this._tryValidateTimer=setTimeout(function(){a.validate()},30)},validate:function(){if(this.enabled==false){this.setIsValid(true);return true}var a={value:this.getValue(),errorText:"",isValid:true};if(this.required){if(mini.isNull(a.value)||String(a.value).trim()===""){a.isValid=false;a.errorText=this.requiredErrorText}}this.fire("validation",a);this.errorText=a.errorText;this.setIsValid(a.isValid);return this.isValid()},isValid:function(){return this._IsValid},setIsValid:function(a){this._IsValid=a;this.doUpdateValid()},getIsValid:function(){return this._IsValid},setValidateOnChanged:function(a){this.validateOnChanged=a},getValidateOnChanged:function(a){return this.validateOnChanged},setValidateOnLeave:function(a){this.validateOnLeave=a},getValidateOnLeave:function(a){return this.validateOnLeave},setErrorMode:function(a){if(!a){a="none"}this.errorMode=a.toLowerCase();if(this._IsValid==false){this.doUpdateValid()}},getErrorMode:function(){return this.errorMode},setErrorText:function(a){this.errorText=a;if(this._IsValid==false){this.doUpdateValid()}},getErrorText:function(){return this.errorText},setRequired:function(a){this.required=a;if(this.required){this.addCls(this._requiredCls)}else{this.removeCls(this._requiredCls)}},getRequired:function(){return this.required},setRequiredErrorText:function(a){this.requiredErrorText=a},getRequiredErrorText:function(){return this.requiredErrorText},errorIconEl:null,getErrorIconEl:function(){return this._errorIconEl},_RemoveErrorIcon:function(){},doUpdateValid:function(){var a=this;a.__doUpdateValid()},errorTooltipPlacement:"right",__doUpdateValid:function(){if(!this.el){return}this.removeCls(this._errorCls);this.removeCls(this._invalidCls);if(this._IsValid==false){switch(this.errorMode){case"icon":this.addCls(this._errorCls);var a=this.getErrorIconEl();if(a){a.title=this.errorText;jQuery(a).attr("data-placement",this.errorTooltipPlacement)}break;case"border":this.addCls(this._invalidCls);this.el.title=this.errorText;default:this._RemoveErrorIcon();break}}else{this._RemoveErrorIcon()}this.doLayout()},doValueChanged:function(){this._OnValueChanged()},_OnValueChanged:function(){if(this.validateOnChanged){this._tryValidate()}this.fire("valuechanged",{value:this.getValue()})},onValueChanged:function(b,a){this.on("valuechanged",b,a)},onValidation:function(b,a){this.on("validation",b,a)},getAttrs:function(b){var a=mini.ValidatorBase.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["onvaluechanged","onvalidation","label","labelStyle","requiredErrorText","errorMode","errorTooltipPlacement"]);mini._ParseBool(b,a,["validateOnChanged","validateOnLeave","labelField","indentSpace"]);var d=b.getAttribute("required");if(!d){d=b.required}if(!d){var c=b.attributes.required;if(c){d=c.value=="null"?null:"true"}}if(d){a.required=d!="false"?true:false}return a},_labelLayout:function(){var b=this._borderEl;if(!b){return}this._labelLayouted=true;if(this.labelField){var a=this._labelEl.offsetWidth;b.style.marginLeft=a+"px";this._doLabelLayout=a===0}else{b.style.marginLeft=0}},_labelFieldCls:"mini-labelfield",labelField:false,label:"",labelStyle:"",setLabelField:function(a){if(this.labelField!=a){this.labelField=a;if(!this._borderEl){return}if(!this._labelEl){this._labelEl=mini.append(this.el,'<label class="mini-labelfield-label"></label>');this._labelEl.innerHTML=this.label;mini.setStyle(this._labelEl,this.labelStyle)}this._labelEl.style.display=a?"block":"none";if(a){mini.addClass(this.el,this._labelFieldCls)}else{mini.removeClass(this.el,this._labelFieldCls)}this._labelLayout()}},getLabelField:function(){this.labelField},setLabel:function(a){if(this.label!=a){this.label=a;if(this._labelEl){this._labelEl.innerHTML=a}this._labelLayout()}},getLabel:function(){this.label},setLabelStyle:function(a){if(this.labelStyle!=a){this.labelStyle=a;if(this._labelEl){mini.setStyle(this._labelEl,a)}this._labelLayout()}},getLabelStyle:function(){this.labelStyle}});mini.ListControl=function(a){this.data=[];this._selecteds=[];mini.ListControl.superclass.constructor.call(this,null);this.doUpdate();if(a){mini.applyTo.call(this,a)}};mini.ListControl.ajaxType="get";mini.extend(mini.ListControl,mini.ValidatorBase,{defaultValue:"",value:"",valueField:"id",textField:"text",dataField:"",delimiter:",",data:null,url:"",valueInCheckOrder:true,setValueInCheckOrder:function(a){this.valueInCheckOrder=a},getValueInCheckOrder:function(){return this.valueInCheckOrder},_itemCls:"mini-list-item",_itemHoverCls:"mini-list-item-hover",_itemSelectedCls:"mini-list-item-selected",set:function(d){if(typeof d=="string"){return this}var c=d.value;delete d.value;var a=d.url;delete d.url;var b=d.data;delete d.data;mini.ListControl.superclass.set.call(this,d);if(!mini.isNull(b)){this.setData(b)}if(!mini.isNull(a)){this.setUrl(a)}if(!mini.isNull(c)){this.setValue(c)}return this},uiCls:"mini-list",_create:function(){},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"click",this.__OnClick,this);mini_onOne(this.el,"dblclick",this.__OnDblClick,this);mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);mini_onOne(this.el,"mouseup",this.__OnMouseUp,this);mini_onOne(this.el,"mousemove",this.__OnMouseMove,this);mini_onOne(this.el,"mouseover",this.__OnMouseOver,this);mini_onOne(this.el,"mouseout",this.__OnMouseOut,this);mini_onOne(this.el,"keydown",this.__OnKeyDown,this);mini_onOne(this.el,"keyup",this.__OnKeyUp,this);mini_onOne(this.el,"contextmenu",this.__OnContextMenu,this)},this)},destroy:function(a){if(this.el){this.el.onclick=null;this.el.ondblclick=null;this.el.onmousedown=null;this.el.onmouseup=null;this.el.onmousemove=null;this.el.onmouseover=null;this.el.onmouseout=null;this.el.onkeydown=null;this.el.onkeyup=null;this.el.oncontextmenu=null}mini.ListControl.superclass.destroy.call(this,a)},name:"",setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},getItemByEvent:function(c){var b=mini.findParent(c.target,this._itemCls);if(b){var a=parseInt(mini.getAttr(b,"index"));return this.data[a]}},addItemCls:function(c,a){var b=this.getItemEl(c);if(b){mini.addClass(b,a)}},removeItemCls:function(c,a){var b=this.getItemEl(c);if(b){mini.removeClass(b,a)}},getItemEl:function(b){b=this.getItem(b);var a=this.data.indexOf(b);var c=this._createItemId(a);return document.getElementById(c)},_focusItem:function(b,a){b=this.getItem(b);if(!b){return}var c=this.getItemEl(b);if(a&&c){this.scrollIntoView(b)}if(this._focusedItem==b){if(c){mini.addClass(c,this._itemHoverCls)}return}this._blurItem();this._focusedItem=b;if(c){mini.addClass(c,this._itemHoverCls)}},_blurItem:function(){if(!this._focusedItem){return}var a=this.getItemEl(this._focusedItem);if(a){mini.removeClass(a,this._itemHoverCls)}this._focusedItem=null},getFocusedItem:function(){var a=this._focusedItem;return this.indexOf(a)==-1?null:a},getFocusedIndex:function(){return this.data.indexOf(this._focusedItem)},_scrollViewEl:null,scrollIntoView:function(c){try{var b=this.getItemEl(c);var a=this._scrollViewEl||this.el;mini.scrollIntoView(b,a,false)}catch(d){}},getItem:function(a){if(typeof a=="object"){return a}if(typeof a=="number"){return this.data[a]}return this.findItems(a)[0]},getCount:function(){return this.data.length},indexOf:function(a){return this.data.indexOf(a)},getAt:function(a){return this.data[a]},updateItem:function(b,a){b=this.getItem(b);if(!b){return}mini.copyTo(b,a);this.doUpdate()},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setData(a)}},loadData:function(a){this.setData(a)},setData:function(data){if(typeof data=="string"){data=eval(data)}if(!mini.isArray(data)){data=[]}this.data=data;this.doUpdate();if(this.value!=""){this.deselectAll();var records=this.findItems(this.value);this.selects(records)}},getData:function(){return this.data.clone()},setUrl:function(a){this.url=a;this._doLoad({})},getUrl:function(){return this.url},ajaxData:null,_doLoad:function(params){try{var url=eval(this.url);if(url!=undefined){this.url=url}}catch(e){}var url=this.url;var ajaxMethod=mini.ListControl.ajaxType;if(url){if(url.indexOf(".txt")!=-1||url.indexOf(".json")!=-1){ajaxMethod="get"}}var obj=mini._evalAjaxData(this.ajaxData,this);mini.copyTo(params,obj);var e={url:this.url,async:false,type:this.ajaxType?this.ajaxType:ajaxMethod,data:params,params:params,cache:false,cancel:false};this.fire("beforeload",e);if(e.data!=e.params&&e.params!=params){e.data=e.params}if(e.cancel==true){return}var sf=me=this;var url=e.url;mini.copyTo(e,{success:function(text,textStatus,xhr){delete e.params;var obj={text:text,result:null,sender:me,options:e,xhr:xhr};var result=null;try{mini_doload(obj);result=obj.result;if(!result){result=mini.decode(text)}}catch(ex){if(mini_debugger==true){alert(url+"\njson is error.")}}if(mini.isArray(result)){result={data:result}}if(sf.dataField){result.data=mini._getMap(sf.dataField,result)}if(!result.data){result.data=[]}var ex={data:result.data,cancel:false,result:result};sf.fire("preload",ex);if(ex.cancel==true){return}sf.setData(ex.data);delete ex.cancel;sf.fire("load",ex);setTimeout(function(){sf.doLayout()},100)},error:function(xhr,textStatus,errorThrown){var e={xhr:xhr,text:xhr.responseText,textStatus:textStatus,errorMsg:xhr.responseText,errorCode:xhr.status};if(mini_debugger==true){alert(url+"\n"+e.errorCode+"\n"+e.errorMsg)}sf.fire("loaderror",e)}});this._ajaxer=mini.ajax(e)},setValue:function(b){if(mini.isNull(b)){b=""}if(this.value!==b){this.deselectAll();this.value=b;if(this._valueEl){this._valueEl.value=b}var a=this.findItems(this.value);this.selects(a);this.setSelected(a[0])}},getValue:function(){return this.value},getFormValue:function(){return this.value},setValueField:function(a){this.valueField=a},getValueField:function(){return this.valueField},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},getItemValue:function(a){return String(mini._getMap(this.valueField,a))},getItemText:function(b){var a=mini._getMap(this.textField,b);return mini.isNull(a)?"":String(a)},getValueAndText:function(d){if(mini.isNull(d)){d=[]}if(!mini.isArray(d)){d=this.findItems(d)}if(this.valueInCheckOrder){var j=this.getData();mini.sort(d,function(l,k){var o=j.indexOf(l);var n=j.indexOf(k);if(o>n){return 1}if(o<n){return -1}return 0})}var c=[];var g=[];for(var f=0,b=d.length;f<b;f++){var a=d[f];if(a){c.push(this.getItemValue(a));g.push(this.getItemText(a))}}return[c.join(this.delimiter),g.join(this.delimiter)]},findItems:function(r){if(mini.isNull(r)||r===""){return[]}if(typeof r=="function"){var q=r;var o=[];var g=this.data;for(var d=0,c=g.length;d<c;d++){var n=g[d];if(q(n,d)===true){o.push(n)}}return o}var t=String(r).split(this.delimiter);var g=this.data;var p={};for(var d=0,c=g.length;d<c;d++){var n=g[d];var s=n[this.valueField];p[s]=n}var a=[];for(var f=0,b=t.length;f<b;f++){var s=t[f];var n=p[s];if(n){a.push(n)}}return a},removeAll:function(){var a=this.getData();this.removeItems(a)},addItems:function(a,b){if(!mini.isArray(a)){return}if(mini.isNull(b)){b=this.data.length}this.data.insertRange(b,a);this.doUpdate()},addItem:function(b,a){if(!b){return}if(this.data.indexOf(b)!=-1){return}if(mini.isNull(a)){a=this.data.length}this.data.insert(a,b);this.doUpdate()},removeItems:function(a){if(!mini.isArray(a)){return}this.data.removeRange(a);this._checkSelecteds();this.doUpdate()},removeItem:function(b){var a=this.data.indexOf(b);if(a!=-1){this.data.removeAt(a);this._checkSelecteds();this.doUpdate()}},moveItem:function(b,a){if(!b||!mini.isNumber(a)){return}if(a<0){a=0}if(a>this.data.length){a=this.data.length}this.data.remove(b);this.data.insert(a,b);this.doUpdate()},_selected:null,_selecteds:[],multiSelect:false,_checkSelecteds:function(){for(var b=this._selecteds.length-1;b>=0;b--){var a=this._selecteds[b];if(this.data.indexOf(a)==-1){this._selecteds.removeAt(b)}}var c=this.getValueAndText(this._selecteds);this.value=c[0];if(this._valueEl){this._valueEl.value=this.value}},setMultiSelect:function(a){this.multiSelect=a},getMultiSelect:function(){return this.multiSelect},isSelected:function(a){if(!a){return false}return this._selecteds.indexOf(a)!=-1},getSelecteds:function(){var a=this._selecteds.clone();var b=this;if(this.valueInCheckOrder){mini.sort(a,function(d,c){var g=b.indexOf(d);var f=b.indexOf(c);if(g>f){return 1}if(g<f){return -1}return 0})}return a},setSelected:function(a){if(a){this._selected=a;this.select(a)}},getSelected:function(){return this._selected},select:function(a){a=this.getItem(a);if(!a){return}if(this.isSelected(a)){return}this.selects([a])},deselect:function(a){a=this.getItem(a);if(!a){return}if(!this.isSelected(a)){return}this.deselects([a])},selectAll:function(){var a=this.data.clone();this.selects(a)},deselectAll:function(){this.deselects(this._selecteds)},clearSelect:function(){this.deselectAll()},selects:function(c){if(!c||c.length==0){return}c=c.clone();if(this.multiSelect==false&&c.length>1){c.length=1}for(var d=0,b=c.length;d<b;d++){var a=c[d];if(!this.isSelected(a)){this._selecteds.push(a)}}var f=this;f._doSelects()},deselects:function(b){if(!b||b.length==0){return}b=b.clone();for(var c=b.length-1;c>=0;c--){var a=b[c];if(this.isSelected(a)){this._selecteds.remove(a)}}var d=this;d._doSelects()},_doSelects:function(){var j=this.getValueAndText(this._selecteds);this.value=j[0];if(this._valueEl){this._valueEl.value=this.value}for(var f=0,c=this.data.length;f<c;f++){var b=this.data[f];var a=this.isSelected(b);if(a){this.addItemCls(b,this._itemSelectedCls)}else{this.removeItemCls(b,this._itemSelectedCls)}var d=this.data.indexOf(b);var k=this._createCheckId(d);var g=mini.byId(k,this.el);if(g){g.checked=!!a}}},_OnSelectionChanged:function(b,a){var c=this.getValueAndText(this._selecteds);this.value=c[0];if(this._valueEl){this._valueEl.value=this.value}var d={selecteds:this.getSelecteds(),selected:this.getSelected(),value:this.getValue()};this.fire("SelectionChanged",d)},_createCheckId:function(a){return this.uid+"$ck$"+a},_createItemId:function(a){return this.uid+"$"+a},__OnClick:function(a){this._fireEvent(a,"Click")},__OnDblClick:function(a){this._fireEvent(a,"Dblclick")},__OnMouseDown:function(a){this._fireEvent(a,"MouseDown")},__OnMouseUp:function(a){this._fireEvent(a,"MouseUp")},__OnMouseMove:function(a){this._fireEvent(a,"MouseMove")},__OnMouseOver:function(a){this._fireEvent(a,"MouseOver")},__OnMouseOut:function(a){this._fireEvent(a,"MouseOut")},__OnKeyDown:function(a){this._fireEvent(a,"KeyDown")},__OnKeyUp:function(a){this._fireEvent(a,"KeyUp")},__OnContextMenu:function(a){this._fireEvent(a,"ContextMenu")},_fireEvent:function(f,a){if(!this.enabled){return}var d=this.getItemByEvent(f);if(!d){return}var c=this["_OnItem"+a];if(c){c.call(this,d,f)}else{var b={item:d,htmlEvent:f};this.fire("item"+a,b)}},_OnItemClick:function(b,d){if(this.isReadOnly()||this.enabled==false||b.enabled===false){d.preventDefault();return}var c=this.getValue();var a={item:b,htmlEvent:d,cancel:false};this.fire("beforeselect",a);if(a.cancel==false){if(this.multiSelect){if(this.isSelected(b)){this.deselect(b);if(this._selected==b){this._selected=null}}else{this.select(b);this._selected=b}this._OnSelectionChanged()}else{if(!this.isSelected(b)){this.deselectAll();this.select(b);this._selected=b;this._OnSelectionChanged()}}if(c!=this.getValue()){this._OnValueChanged()}}var d={item:b,htmlEvent:d};this.fire("itemclick",d)},_blurOnOut:true,_OnItemMouseOut:function(a,b){if(!this.enabled){return}if(this._blurOnOut){this._blurItem()}var b={item:a,htmlEvent:b};this.fire("itemmouseout",b)},_OnItemMouseMove:function(a,b){if(!this.enabled||a.enabled===false){return}this._focusItem(a);var b={item:a,htmlEvent:b};this.fire("itemmousemove",b)},onItemClick:function(b,a){this.on("itemclick",b,a)},onItemMouseDown:function(b,a){this.on("itemmousedown",b,a)},onBeforeLoad:function(b,a){this.on("beforeload",b,a)},onLoad:function(b,a){this.on("load",b,a)},onLoadError:function(b,a){this.on("loaderror",b,a)},onPreLoad:function(b,a){this.on("preload",b,a)},getAttrs:function(b){var k=mini.ListControl.superclass.getAttrs.call(this,b);mini._ParseString(b,k,["url","data","value","textField","valueField","onitemclick","onitemmousemove","onselectionchanged","onitemdblclick","onbeforeload","onload","onloaderror","ondataload","onbeforeselect"]);mini._ParseBool(b,k,["multiSelect","valueInCheckOrder"]);var n=k.valueField||this.valueField;var c=k.textField||this.textField;if(b.nodeName.toLowerCase()=="select"){var f=[];for(var g=0,d=b.length;g<d;g++){var j=b.options[g];var a={};a[c]=j.text;a[n]=j.value;f.push(a)}if(f.length>0){k.data=f}}return k}});mini._Layouts={};mini.layout=function(b,a){if(!document.body){return}function c(k){if(!k){return}var n=mini.get(k);if(n){if(n.doLayout){if(!mini._Layouts[n.uid]){mini._Layouts[n.uid]=n;if(a!==false||n.isFixedSize()==false){n.doLayout(false)}delete mini._Layouts[n.uid]}}}else{var j=k.childNodes;if(j){for(var f=0,d=j.length;f<d;f++){var g=j[f];c(g)}}}}if(!b){b=document.body}c(b);if(b==document.body){mini.layoutIFrames()}};mini.applyTo=function(b){b=mini.byId(b);if(!b){return this}if(mini.get(b)){throw new Error("not applyTo a mini control")}var a=this.getAttrs(b);delete a._applyTo;if(mini.isNull(a.defaultValue)&&!mini.isNull(a.value)){a.defaultValue=a.value}if(mini.isNull(a.defaultText)&&!mini.isNull(a.text)){a.defaultText=a.text}var c=b.parentNode;if(c&&this.el!=b){c.replaceChild(this.el,b)}this.set(a);this._afterApply(b);return this};mini._doParse=function(b){if(!b){return}var p=b.nodeName.toLowerCase();if(!p){return}var n=String(b.className);if(n){var g=mini.get(b);if(!g){var d=n.split(" ");for(var j=0,f=d.length;j<f;j++){var q=d[j];var k=mini.getClassByUICls(q);if(k){mini.removeClass(b,q);var o=new k();mini.applyTo.call(o,b);b=o.el;break}}}}if(p=="select"||mini.hasClass(b,"mini-menu")||mini.hasClass(b,"mini-datagrid")||mini.hasClass(b,"mini-treegrid")||mini.hasClass(b,"mini-tree")||mini.hasClass(b,"mini-button")||mini.hasClass(b,"mini-textbox")||mini.hasClass(b,"mini-buttonedit")){return}var a=mini.getChildNodes(b,true);for(var j=0,f=a.length;j<f;j++){var c=a[j];if(c.nodeType==1){if(c.parentNode==b){mini._doParse(c)}}}};mini._Removes=[];mini._firstParse=true;mini.parse=function(f,n){if(mini._firstParse){mini._firstParse=false;var p=document.getElementsByTagName("iframe");var c=[];for(var k=0,j=p.length;k<j;k++){var o=p[k];c.push(o)}for(var k=0,j=c.length;k<j;k++){var o=c[k];var a=$(o).attr("src");if(!a){continue}o.loaded=false;o._onload=o.onload;o._src=a;o.onload=function(){};o.src=""}setTimeout(function(){for(var r=0,q=c.length;r<q;r++){var s=c[r];if(s._src&&$(s).attr("src")==""){s.loaded=true;s.onload=s._onload;s.src=s._src;s._src=s._onload=null}}},20)}if(typeof f=="string"){var b=f;f=mini.byId(b);if(!f){f=document.body}}if(f&&!mini.isElement(f)){f=f.el}if(!f){f=document.body}var g=mini.WindowVisible;if(isIE){mini.WindowVisible=false}mini._doParse(f);mini.WindowVisible=g;if(n!==false){mini.layout(f)}};mini._ParseString=function(f,c,b){for(var d=0,a=b.length;d<a;d++){var j=b[d];var g=mini.getAttr(f,j);if(g){c[j]=g}}};mini._ParseBool=function(f,c,b){for(var d=0,a=b.length;d<a;d++){var j=b[d];var g=mini.getAttr(f,j);if(g){c[j]=g=="true"?true:false}}};mini._ParseInt=function(f,c,b){for(var d=0,a=b.length;d<a;d++){var j=b[d];var g=parseInt(mini.getAttr(f,j));if(!isNaN(g)){c[j]=g}}};mini._ParseColumns=function(el){var columns=[];var cs=mini.getChildNodes(el);for(var i=0,l=cs.length;i<l;i++){var node=cs[i];var jq=jQuery(node);var column={};var editor=null,filter=null;var subCs=mini.getChildNodes(node);if(subCs){for(var ii=0,li=subCs.length;ii<li;ii++){var subNode=subCs[ii];var property=jQuery(subNode).attr("property");if(!property){continue}property=property.toLowerCase();if(property=="columns"){column.columns=mini._ParseColumns(subNode);jQuery(subNode).remove()}if(property=="editor"||property=="filter"){var className=subNode.className;var classes=className.split(" ");for(var i3=0,l3=classes.length;i3<l3;i3++){var cls=classes[i3];var clazz=mini.getClassByUICls(cls);if(clazz){var ui=new clazz();if(property=="filter"){filter=ui.getAttrs(subNode);filter.type=ui.type}else{editor=ui.getAttrs(subNode);editor.type=ui.type}break}}jQuery(subNode).remove()}}}column.header=node.innerHTML;mini._ParseString(node,column,["name","header","field","editor","filter","renderer","width","type","renderer","headerAlign","align","headerCls","cellCls","headerStyle","cellStyle","displayField","dateFormat","listFormat","mapFormat","numberFormat","trueValue","falseValue","dataType","vtype","currencyUnit","summaryType","summaryRenderer","groupSummaryType","groupSummaryRenderer","defaultValue","defaultText","decimalPlaces","data-options","sortField","sortType"]);mini._ParseBool(node,column,["visible","readOnly","allowSort","allowResize","allowMove","allowDrag","autoShowPopup","unique","autoEscape","enabled","hideable","showCellTip"]);if(editor){column.editor=editor}if(filter){column.filter=filter}if(column.dataType){column.dataType=column.dataType.toLowerCase()}if(column.defaultValue==="true"){column.defaultValue=true}if(column.defaultValue==="false"){column.defaultValue=false}columns.push(column);var options=column["data-options"];if(options){options=eval("("+options+")");if(options){mini.copyTo(column,options)}}}return columns};mini._Columns={};mini._getColumn=function(b){var a=mini._Columns[b.toLowerCase()];if(!a){return{}}return a()};mini.IndexColumn=function(a){return mini.copyTo({width:30,cellCls:"",align:"center",draggable:false,allowDrag:true,hideable:true,init:function(b){b.on("addrow",this.__OnIndexChanged,this);b.on("removerow",this.__OnIndexChanged,this);b.on("moverow",this.__OnIndexChanged,this);if(b.isTree){b.on("addnode",this.__OnIndexChanged,this);b.on("removenode",this.__OnIndexChanged,this);b.on("movenode",this.__OnIndexChanged,this);b.on("loadnode",this.__OnIndexChanged,this);this._gridUID=b.uid;this._rowIdField="_id"}},getNumberId:function(b){return this._gridUID+"$number$"+b[this._rowIdField]},createNumber:function(b,c){if(mini.isNull(b.pageIndex)){return c+1}else{return(b.pageIndex*b.pageSize)+c+1}},renderer:function(d){var b=d.sender;if(this.draggable){if(!d.cellStyle){d.cellStyle=""}d.cellStyle+=";cursor:move;"}var c='<div id="'+this.getNumberId(d.record)+'">';if(mini.isNull(b.getPageIndex)){c+=d.rowIndex+1}else{c+=(b.getPageIndex()*b.getPageSize())+d.rowIndex+1}c+="</div>";return c},__OnIndexChanged:function(k){var j=k.sender;var f=j.getDataView();for(var g=0,c=f.length;g<c;g++){var b=f[g];var n=this.getNumberId(b);var d=document.getElementById(n);if(d){d.innerHTML=this.createNumber(j,g)}}}},a)};mini._Columns.indexcolumn=mini.IndexColumn;mini.CheckColumn=function(a){return mini.copyTo({width:30,cellCls:"mini-checkcolumn",headerCls:"mini-checkcolumn",hideable:true,_multiRowSelect:true,header:function(c){var d=this.uid+"checkall";var b='<input type="checkbox" id="'+d+'" />';if(this.multiSelect==false){b=""}return b},getCheckId:function(b,c){return this._gridUID+"$checkcolumn$"+b[this._rowIdField]+"$"+c._id},init:function(b){b.on("selectionchanged",this.__OnSelectionChanged,this);b.on("HeaderCellClick",this.__OnHeaderCellClick,this)},renderer:function(g){var j=this.getCheckId(g.record,g.column);var f=g.sender.isSelected?g.sender.isSelected(g.record):false;var d="checkbox";var c=g.sender;if(c.getMultiSelect()==false){d="radio"}var b='<input type="'+d+'" id="'+j+'" '+(f?"checked":"")+' hidefocus style="outline:none;" onclick="return false"/>';b+='<div class="mini-grid-radio-mask"></div>';return b},__OnHeaderCellClick:function(f){var c=f.sender;if(f.column!=this){return}var g=c.uid+"checkall";var b=document.getElementById(g);if(b){if(c.getMultiSelect()){if(b.checked){var d=c.getDataView();c.selects(d)}else{c.deselectAll()}}else{c.deselectAll();if(b.checked){c.select(0)}}c.fire("checkall")}},__OnSelectionChanged:function(r){var b=r.sender;var j=b.toArray();var s=this;var g=b.isVirtualScroll(),t=b._viewRegion,f=g?t.start:-1,n=g?t.end:-1,c={};if(f!=-1){var p=b.getVisibleRows();for(var o=f,k=n;o<k;o++){var w=p[o];if(w){c[w._id]=true}}}for(var o=0,k=j.length;o<k;o++){var q=j[o];if(f!=-1){if(!c[q._id]){continue}}var u=b.isSelected(q);var d=s.getCheckId(q,s);var v=document.getElementById(d);if(v){v.checked=u}}if(!this._timer){this._timer=setTimeout(function(){s._doCheckState(b);s._timer=null},10)}},_doCheckState:function(c){var d=c.uid+"checkall";var b=document.getElementById(d)}},a)};mini._Columns.checkcolumn=mini.CheckColumn;mini.ExpandColumn=function(a){return mini.copyTo({width:30,headerAlign:"center",align:"center",draggable:false,cellStyle:"padding:0",cellCls:"mini-grid-expandCell",hideable:true,renderer:function(b){return'<a class="mini-grid-ecIcon" href="javascript:#" onclick="return false"></a>'},init:function(b){b.on("cellclick",this.__OnCellClick,this)},__OnCellClick:function(d){var c=d.sender;if(d.column==this&&c.isShowRowDetail){if(mini.findParent(d.htmlEvent.target,"mini-grid-ecIcon")){var b=c.isShowRowDetail(d.record);if(!b){d.cancel=false;c.fire("beforeshowrowdetail",d);if(d.cancel===true){return}}else{d.cancel=false;c.fire("beforehiderowdetail",d);if(d.cancel===true){return}}if(c.autoHideRowDetail){c.hideAllRowDetail()}if(b){c.hideRowDetail(d.record)}else{c.showRowDetail(d.record)}}}}},a)};mini._Columns.expandcolumn=mini.ExpandColumn;mini.CheckBoxColumn=function(a){return mini.copyTo({_type:"checkboxcolumn",editMode:"inline",header:"",headerAlign:"center",cellCls:"mini-checkcolumn",trueValue:true,falseValue:false,readOnly:false,getCheckId:function(b,c){return this._gridUID+"$checkbox$"+b[this._rowIdField]+"$"+c._id},getCheckBoxEl:function(b,c){return document.getElementById(this.getCheckId(b,c))},renderer:function(f){var g=this.getCheckId(f.record,f.column);var b=mini._getMap(f.field,f.record);var d=b==this.trueValue?true:false;var c="checkbox";return'<input type="'+c+'" id="'+g+'" '+(d?"checked":"")+' hidefocus style="outline:none;" onclick="return false;"/>'},init:function(f){this.grid=f;function b(l){if(f.isReadOnly()||this.readOnly){return}l.value=mini._getMap(l.field,l.record);f.fire("cellbeginedit",l);if(l.cancel!==true){var j=mini._getMap(l.column.field,l.record);var k=j==this.trueValue?this.falseValue:this.trueValue;if(f._OnCellCommitEdit){f._OnCellCommitEdit(l.record,l.column,k);f._OnCellEndEdit(l.record,l.column)}}}function d(k){if(k.column==this){var l=this.getCheckId(k.record,k.column);var j=k.htmlEvent.target;if(j.id==l){if(f.allowCellEdit){k.cancel=false;b.call(this,k)}else{if(this.readOnly){return}k.value=mini._getMap(k.column.field,k.record);f.fire("cellbeginedit",k);if(k.cancel==true){return}if(f.isEditingRow&&f.isEditingRow(k.record)){setTimeout(function(){j.checked=!j.checked},1)}}}}}f.on("cellclick",d,this);mini.on(this.grid.el,"keydown",function(k){if(k.keyCode==32&&f.allowCellEdit){var l=f.getCurrentCell();if(!l){return}if(l[1]!=this){return}var j={record:l[0],column:l[1]};j.field=j.column.field;b.call(this,j);k.preventDefault()}},this);var c=parseInt(this.trueValue),g=parseInt(this.falseValue);if(!isNaN(c)){this.trueValue=c}if(!isNaN(g)){this.falseValue=g}}},a)};mini._Columns.checkboxcolumn=mini.CheckBoxColumn;mini.RadioButtonColumn=function(a){return mini.copyTo({_type:"radiobuttoncolumn",editMode:"inline",header:"",headerAlign:"center",cellCls:"mini-checkcolumn",trueValue:true,falseValue:false,readOnly:false,getCheckId:function(b,c){return this._gridUID+"$radio$"+b[this._rowIdField]+"$"+c._id},getCheckBoxEl:function(b,c){return document.getElementById(this.getCheckId(b,c))},renderer:function(g){var b=g.sender;var d=this.getCheckId(g.record,g.column);var l=mini._getMap(g.field,g.record);var k=l==this.trueValue?true:false;var j="radio";var c=b._id+g.column.field;var f="";var n='<div style="position:relative;">';n+='<input name="'+c+'" type="'+j+'" id="'+d+'" '+(k?"checked":"")+' hidefocus style="outline:none;" onclick="return false;" style="position:relative;z-index:1;"/>';if(!b.allowCellEdit){if(!b.isEditingRow(g.record)){n+='<div class="mini-grid-radio-mask"></div>'}}n+="</div>";return n},init:function(f){this.grid=f;function b(q){if(f.isReadOnly()||this.readOnly){return}q.value=mini._getMap(q.field,q.record);f.fire("cellbeginedit",q);if(q.cancel!==true){var k=mini._getMap(q.column.field,q.record);if(k==this.trueValue){return}var p=k==this.trueValue?this.falseValue:this.trueValue;var o=f.getData();for(var n=0,j=o.length;n<j;n++){var r=o[n];if(r==q.record){continue}var k=mini._getMap(q.column.field,r);if(k!=this.falseValue){f.updateRow(r,q.column.field,this.falseValue)}}if(f._OnCellCommitEdit){f._OnCellCommitEdit(q.record,q.column,p);f._OnCellEndEdit(q.record,q.column)}}}function d(l){if(l.column==this){var n=this.getCheckId(l.record,l.column);var j=l.htmlEvent.target;if(j.id==n){if(f.allowCellEdit){l.cancel=false;b.call(this,l)}else{if(f.isEditingRow&&f.isEditingRow(l.record)){var k=this;setTimeout(function(){j.checked=true;var s=f.getData();for(var r=0,p=s.length;r<p;r++){var w=s[r];if(w==l.record){continue}var t=l.column.field;var q=mini._getMap(t,w);if(q!=k.falseValue){if(w!=l.record){if(f._dataSource){mini._setMap(l.column.field,k.falseValue,w);f._dataSource._setModified(w,t,q)}else{var u={};mini._setMap(t,k.falseValue,u);f._doUpdateRow(w,u)}}}}},1)}}}}}f.on("cellclick",d,this);mini.on(this.grid.el,"keydown",function(k){if(k.keyCode==32&&f.allowCellEdit){var l=f.getCurrentCell();if(!l){return}if(l[1]!=this){return}var j={record:l[0],column:l[1]};j.field=j.column.field;b.call(this,j);k.preventDefault()}},this);var c=parseInt(this.trueValue),g=parseInt(this.falseValue);if(!isNaN(c)){this.trueValue=c}if(!isNaN(g)){this.falseValue=g}}},a)};mini._Columns.radiobuttoncolumn=mini.RadioButtonColumn;mini.ComboBoxColumn=function(a){return mini.copyTo({renderer:function(r){var s=!mini.isNull(r.value)?String(r.value):"";var t=s.split(",");var v="id",j="text";var k={};var q=r.column.editor;if(q&&q.type=="combobox"){var d=this.__editor;if(!d){if(mini.isControl(q)){d=q}else{q=mini.clone(q);d=mini.create(q)}this.__editor=d}v=d.getValueField();j=d.getTextField();var p=d.getData();k=this._valueMaps;if(!k||p!==this._data){k={};for(var n=0,g=p.length;n<g;n++){var c=p[n];k[c[v]]=c}this._valueMaps=k;this._data=p}}var f=[];for(var n=0,g=t.length;n<g;n++){var b=t[n];var c=k[b];if(c){var u=c[j];if(u===null||u===undefined){u=""}f.push(u)}}return f.join(",")}},a)};mini._Columns.comboboxcolumn=mini.ComboBoxColumn;mini._Resizer=function(a){this.owner=a;mini.on(this.owner.el,"mousedown",this.__OnMouseDown,this)};mini._Resizer.prototype={__OnMouseDown:function(c){var a=mini.hasClass(c.target,"mini-resizer-trigger");if(a&&this.owner.allowResize){var b=this._getResizeDrag();b.start(c)}},_getResizeDrag:function(){if(!this._resizeDragger){this._resizeDragger=new mini.Drag({capture:true,onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this._resizeDragger},_OnDragStart:function(a){this.mask=mini.append(document.body,'<div class="mini-resizer-mask mini-fixed"></div>');this.proxy=mini.append(document.body,'<div class="mini-resizer-proxy"></div>');this.proxy.style.cursor="se-resize";this.elBox=mini.getBox(this.owner.el);mini.setBox(this.proxy,this.elBox)},_OnDragMove:function(f){var b=this.owner;var d=f.now[0]-f.init[0];var g=f.now[1]-f.init[1];var a=this.elBox.width+d;var c=this.elBox.height+g;if(a<b.minWidth){a=b.minWidth}if(c<b.minHeight){c=b.minHeight}if(a>b.maxWidth){a=b.maxWidth}if(c>b.maxHeight){c=b.maxHeight}mini.setSize(this.proxy,a,c)},_OnDragStop:function(a,c){if(!this.proxy){return}var b=mini.getBox(this.proxy);jQuery(this.mask).remove();jQuery(this.proxy).remove();this.proxy=null;this.elBox=null;if(c){this.owner.setWidth(b.width);this.owner.setHeight(b.height);this.owner.fire("resize")}}};mini._topWindow=null;mini._getTopWindow=function(a){if(mini._topWindow){return mini._topWindow}var c=[];function b(f){try{f.___try=1;c.push(f)}catch(d){}if(f.parent&&f.parent!=f){b(f.parent)}}b(window);mini._topWindow=c[c.length-1];return mini._topWindow};var __ps=mini.getParams();if(__ps._winid){try{window.Owner=mini._getTopWindow()[__ps._winid]}catch(ex){}}mini._WindowID="w"+Math.floor(Math.random()*10000);mini._getTopWindow()[mini._WindowID]=window;mini.__IFrameCreateCount=1;mini.createIFrame=function(d,o,b){var f="__iframe_onload"+mini.__IFrameCreateCount++;window[f]=g;if(!d){d=""}var n=d.split("#");d=n[0];var q="";if(b!==true){q="_t="+Math.floor(Math.random()*1000000);if(d.indexOf("?")==-1){d+="?"+q}else{d+="&"+q}}if(d&&d.indexOf("_winid")==-1){var q="_winid="+mini._WindowID;if(d.indexOf("?")==-1){d+="?"+q}else{d+="&"+q}}if(n[1]){d=d+"#"+n[1]}var p=d.indexOf(".mht")!=-1;var a=p?d:"";var r='<iframe src="'+a+'" style="width:100%;height:100%;" onload="'+f+'()"  frameborder="0"></iframe>';var c=document.createElement("div");var k=mini.append(c,r);var j=false;if(p){j=true}else{setTimeout(function(){if(k){k.src=d;j=true}},5)}var l=true;function g(){if(j==false){return}setTimeout(function(){if(o){o(k,l)}l=false},1)}k._ondestroy=function(){window[f]=mini.emptyFn;k.src="";try{k.contentWindow.document.write("");k.contentWindow.document.close()}catch(s){}k._ondestroy=null;k=null};return k};mini._doOpen=function(c){if(typeof c=="string"){c={url:c}}c=mini.copyTo({width:700,height:400,allowResize:true,allowModal:true,closeAction:"destroy",title:"",titleIcon:"",iconCls:"",iconStyle:"",bodyStyle:"padding: 0",url:"",showCloseButton:true,showFooter:false},c);c.closeAction="destroy";var k=c.onload;delete c.onload;var j=c.ondestroy;delete c.ondestroy;var b=c.url;delete c.url;var f=mini.getViewportBox();if(c.width&&String(c.width).indexOf("%")!=-1){var a=parseInt(c.width);c.width=parseInt(f.width*(a/100))}if(c.height&&String(c.height).indexOf("%")!=-1){var d=parseInt(c.height);c.height=parseInt(f.height*(d/100))}var g=new mini.Window();g.set(c);g.load(b,k,j);g.show();return g};mini.open=function(b){if(!b){return}var a=b.url;if(!a){a=""}var g=a.split("#");var a=g[0];if(a&&a.indexOf("_winid")==-1){var c="_winid="+mini._WindowID;if(a.indexOf("?")==-1){a+="?"+c}else{a+="&"+c}if(g[1]){a=a+"#"+g[1]}}b.url=a;b.Owner=window;var j=[];function d(l){try{if(l.mini){j.push(l)}if(l.parent&&l.parent!=l){d(l.parent)}}catch(k){}}d(window);var f=j[j.length-1];return f.mini._doOpen(b)};mini.openTop=mini.open;mini._getResult=function(a,b,j,g,f,o){var l=null;var k=mini.getText(a,b,function(q,p){l=p;if(j){if(j){j(q,p)}}},g,f);var c={text:k,result:null,sender:{type:""},options:{url:a,data:b,type:f},xhr:l};var n=null;try{mini_doload(c);n=c.result;if(!n){n=mini.decode(k)}}catch(d){if(mini_debugger==true){alert(a+"\njson is error")}}if(!mini.isArray(n)&&o){n=mini._getMap(o,n)}if(mini.isArray(n)){n={data:n}}return n?n.data:null};mini.getData=function(b,j,g,a,c){var f=mini.getText(b,j,g,a,c);var d=mini.decode(f);return d};mini.getText=function(b,g,f,a,c){var d=null;mini.ajax({url:b,data:g,async:false,type:c?c:"get",cache:false,dataType:"text",success:function(k,l,j){d=k;if(f){f(k,j)}},error:a});return d};if(!window.mini_RootPath){mini_RootPath="/"}mini_CreateJSPath=function(j){var a=document.getElementsByTagName("script");var g="";for(var f=0,b=a.length;f<b;f++){var k=a[f].src;if(k.indexOf(j)!=-1){var d=k.split(j);g=d[0];break}}var c=location.href;c=c.split("#")[0];c=c.split("?")[0];var d=c.split("/");d.length=d.length-1;c=d.join("/");if(g.indexOf("http:")==-1&&g.indexOf("file:")==-1){g=c+"/"+g}return g};if(!window.mini_JSPath){mini_JSPath=mini_CreateJSPath("miniui.js")}mini.update=function(a,c){if(typeof a=="string"){a={url:a}}if(c){a.el=c}var b=mini.loadText(a.url);mini.innerHTML(a.el,b);mini.parse(a.el)};mini.createSingle=function(a){if(typeof a=="string"){a=mini.getClass(a)}if(typeof a!="function"){return}var b=a.single;if(!b){b=a.single=new a()}return b};mini.createTopSingle=function(b){if(typeof b!="function"){return}var a=b.prototype.type;if(top&&top!=window&&top.mini&&top.mini.getClass(a)){return top.mini.createSingle(a)}else{return mini.createSingle(b)}};mini.sortTypes={string:function(a){return String(a).toUpperCase()},date:function(a){if(!a){return 0}if(mini.isDate(a)){return a.getTime()}return mini.parseDate(String(a))},"float":function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},"int":function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b},currency:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b}};mini._ValidateVType=function(b,n,d,r){var k=b.split(";");for(var c=0,a=k.length;c<a;c++){var b=k[c].trim();var o=b.split(":");var p=o[0];var g=b.substr(p.length+1,1000);if(g){g=g.split(",")}else{g=[]}var j=mini.VTypes[p];if(j){var q=j(n,g);if(q!==true){d.isValid=false;var f=o[0]+"ErrorText";d.errorText=r[f]||mini.VTypes[f]||"";d.errorText=String.format(d.errorText,g[0],g[1],g[2],g[3],g[4]);break}}}};mini._getErrorText=function(b,a){if(b&&b[a]){return b[a]}else{return mini.VTypes[a]}};mini.VTypes={minDateErrorText:"Date can not be less than {0}",maxDateErrorText:"Date can not be greater than {0}",uniqueErrorText:"This field is unique.",requiredErrorText:"This field is required.",emailErrorText:"Please enter a valid email address.",urlErrorText:"Please enter a valid URL.",floatErrorText:"Please enter a valid number.",intErrorText:"Please enter only digits",dateErrorText:"Please enter a valid date. Date format is {0}",maxLengthErrorText:"Please enter no more than {0} characters.",minLengthErrorText:"Please enter at least {0} characters.",maxErrorText:"Please enter a value less than or equal to {0}.",minErrorText:"Please enter a value greater than or equal to {0}.",rangeLengthErrorText:"Please enter a value between {0} and {1} characters long.",rangeCharErrorText:"Please enter a value between {0} and {1} characters long.",rangeErrorText:"Please enter a value between {0} and {1}.",required:function(a,b){if(mini.isNull(a)||a===""){return false}return true},email:function(a,b){if(mini.isNull(a)||a===""){return true}if(a.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!=-1){return true}else{return false}},url:function(a,b){if(mini.isNull(a)||a===""){return true}function c(g){g=g.toLowerCase().split("?")[0];var f="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,5})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";var d=new RegExp(f);if(d.test(g)){return(true)}else{return(false)}}return c(a)},"int":function(a,b){if(mini.isNull(a)||a===""){return true}function c(d){if(d<0){d=-d}var f=String(d);return f.length>0&&!(/[^0-9]/).test(f)}return c(a)},"float":function(b,c){if(mini.isNull(b)||b===""){return true}function a(d){if(d<0){d=-d}var f=String(d);if(f.split(".").length>2){return false}return f.length>0&&!(/[^0-9.]/).test(f)}return a(b)},date:function(a,b){if(mini.isNull(a)||a===""){return true}if(!a){return false}var f=null;var c=b[0];if(c){f=mini.parseDate(a,c);if(f&&f.getFullYear){if(mini.formatDate(f,c)==a){return true}}}else{f=mini.parseDate(a,"yyyy-MM-dd");if(!f){f=mini.parseDate(a,"yyyy/MM/dd")}if(!f){f=mini.parseDate(a,"MM/dd/yyyy")}if(f&&f.getFullYear){return true}}return false},maxLength:function(a,b){if(mini.isNull(a)||a===""){return true}var c=parseInt(b);if(!a||isNaN(c)){return true}if(a.length<=c){return true}else{return false}},minLength:function(a,b){if(mini.isNull(a)||a===""){return true}var c=parseInt(b);if(isNaN(c)){return true}if(a.length>=c){return true}else{return false}},rangeLength:function(b,c){if(mini.isNull(b)||b===""){return true}if(!b){return false}var d=parseFloat(c[0]),a=parseFloat(c[1]);if(isNaN(d)||isNaN(a)){return true}if(d<=b.length&&b.length<=a){return true}return false},rangeChar:function(k,f){if(mini.isNull(k)||k===""){return true}var b=parseFloat(f[0]),g=parseFloat(f[1]);if(isNaN(b)||isNaN(g)){return true}function j(l){var o=new RegExp("^[\u4e00-\u9fa5]+$");if(o.test(l)){return true}return false}var d=0;var n=String(k).split("");for(var c=0,a=n.length;c<a;c++){if(j(n[c])){d+=2}else{d+=1}}if(b<=d&&d<=g){return true}return false},range:function(b,c){if(mini.VTypes["float"](b,c)==false){return false}if(mini.isNull(b)||b===""){return true}b=parseFloat(b);if(isNaN(b)){return false}var d=parseFloat(c[0]),a=parseFloat(c[1]);if(isNaN(d)||isNaN(a)){return true}if(d<=b&&b<=a){return true}return false},min:function(a,b){if(mini.VTypes["float"](a,b)==false){return false}if(mini.isNull(a)||a===""){return true}a=parseFloat(a);if(isNaN(a)){return false}var c=parseFloat(b[0]);if(isNaN(c)){return true}if(c<=a){return true}return false},max:function(b,c){if(mini.VTypes["float"](b,c)==false){return false}if(mini.isNull(b)||b===""){return true}b=parseFloat(b);if(isNaN(b)){return false}var a=parseFloat(c[0]);if(isNaN(a)){return true}if(b<=a){return true}return false}};mini.summaryTypes={count:function(a){if(!a){a=[]}return a.length},max:function(f,g){if(!f){f=[]}var a=null;for(var c=0,b=f.length;c<b;c++){var j=f[c];var d=parseFloat(j[g]);if(d===null||d===undefined||isNaN(d)){continue}if(a==null||a<d){a=d}}return a},min:function(f,g){if(!f){f=[]}var c=null;for(var b=0,a=f.length;b<a;b++){var j=f[b];var d=parseFloat(j[g]);if(d===null||d===undefined||isNaN(d)){continue}if(c==null||c>d){c=d}}return c},avg:function(g,j){if(!g){g=[]}if(g.length==0){return 0}var d=0;for(var c=0,a=g.length;c<a;c++){var k=g[c];var f=parseFloat(k[j]);if(f===null||f===undefined||isNaN(f)){continue}d+=f}var b=d/g.length;return b},sum:function(f,g){if(!f){f=[]}var c=0;for(var b=0,a=f.length;b<a;b++){var j=f[b];var d=parseFloat(j[g]);if(d===null||d===undefined||isNaN(d)){continue}c+=d}return c}};mini.formatCurrency=function(a,c){if(a===null||a===undefined){null==""}a=String(a).replace(/\$|\,/g,"");if(isNaN(a)){a="0"}sign=(a==(a=Math.abs(a)));a=Math.floor(a*100+0.50000000001);cents=a%100;a=Math.floor(a/100).toString();if(cents<10){cents="0"+cents}for(var b=0;b<Math.floor((a.length-(1+b))/3);b++){a=a.substring(0,a.length-(4*b+3))+","+a.substring(a.length-(4*b+3))}c=c||"";return c+(((sign)?"":"-")+a+"."+cents)};mini.emptyFn=function(){};mini.Drag=function(a){mini.copyTo(this,a)};mini.Drag.prototype={onStart:mini.emptyFn,onMove:mini.emptyFn,onStop:mini.emptyFn,capture:false,fps:20,event:null,delay:80,start:function(b){b.preventDefault();if(b){this.event=b}this.now=this.init=[this.event.pageX,this.event.pageY];var a=document;mini.on(a,"mousemove",this.move,this);mini.on(a,"mouseup",this.stop,this);mini.on(a,"contextmenu",this.contextmenu,this);if(this.context){mini.on(this.context,"contextmenu",this.contextmenu,this)}this.trigger=b.target;mini.selectable(this.trigger,false);mini.selectable(a.body,false);if(this.capture){if(isIE){this.trigger.setCapture(true)}else{if(document.captureEvents){document.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP|Event.MOUSEDOWN)}}}this.started=false;this.startTime=new Date()},contextmenu:function(a){if(this.context){mini.un(this.context,"contextmenu",this.contextmenu,this)}mini.un(document,"contextmenu",this.contextmenu,this);a.preventDefault();a.stopPropagation()},move:function(b){if(this.delay){if(new Date()-this.startTime<this.delay){return}}var a=this;if(!this.timer){this.timer=setTimeout(function(){if(!a.started){a.started=true;a.onStart(a)}a.now=[b.pageX,b.pageY];a.event=b;a.onMove(a);a.timer=null},5)}},stop:function(c){this.now=[c.pageX,c.pageY];this.event=c;if(this.timer){clearTimeout(this.timer);this.timer=null}var b=document;mini.selectable(this.trigger,true);mini.selectable(b.body,true);if(isIE){this.trigger.setCapture(false);this.trigger.releaseCapture()}var d=mini.MouseButton.Right!=c.button;if(d==false){c.preventDefault()}mini.un(b,"mousemove",this.move,this);mini.un(b,"mouseup",this.stop,this);var a=this;setTimeout(function(){mini.un(document,"contextmenu",a.contextmenu,a);if(a.context){mini.un(a.context,"contextmenu",a.contextmenu,a)}},1);if(this.started){this.onStop(this,d)}}};mini.JSON=new (function(){var sb=[];var _dateFormat=null;var useHasOwn=!!{}.hasOwnProperty,replaceString=function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)},doEncode=function(o,field){if(o===null){sb[sb.length]="null";return}var t=typeof o;if(t=="undefined"){sb[sb.length]="null";return}else{if(o.push){sb[sb.length]="[";var b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];t=typeof v;if(t=="undefined"||t=="function"||t=="unknown"){}else{if(b){sb[sb.length]=","}doEncode(v);b=true}}sb[sb.length]="]";return}else{if(o.getFullYear){if(_dateFormat){sb[sb.length]='"';if(typeof _dateFormat=="function"){sb[sb.length]=_dateFormat(o,field)}else{sb[sb.length]=mini.formatDate(o,_dateFormat)}sb[sb.length]='"'}else{var n;sb[sb.length]='"';sb[sb.length]=o.getFullYear();sb[sb.length]="-";n=o.getMonth()+1;sb[sb.length]=n<10?"0"+n:n;sb[sb.length]="-";n=o.getDate();sb[sb.length]=n<10?"0"+n:n;sb[sb.length]="T";n=o.getHours();sb[sb.length]=n<10?"0"+n:n;sb[sb.length]=":";n=o.getMinutes();sb[sb.length]=n<10?"0"+n:n;sb[sb.length]=":";n=o.getSeconds();sb[sb.length]=n<10?"0"+n:n;sb[sb.length]='"'}return}else{if(t=="string"){if(strReg1.test(o)){sb[sb.length]='"';sb[sb.length]=o.replace(strReg2,replaceString);sb[sb.length]='"';return}sb[sb.length]='"'+o+'"';return}else{if(t=="number"){sb[sb.length]=o;return}else{if(t=="boolean"){sb[sb.length]=String(o);return}else{sb[sb.length]="{";var b,i,v;for(i in o){if(!useHasOwn||Object.prototype.hasOwnProperty.call(o,i)){v=o[i];t=typeof v;if(t=="undefined"||t=="function"||t=="unknown"){}else{if(b){sb[sb.length]=","}doEncode(i);sb[sb.length]=":";doEncode(v,i);b=true}}}sb[sb.length]="}";return}}}}}}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},strReg1=/["\\\x00-\x1f]/,strReg2=/([\x00-\x1f\\"])/g;this.encode=function(){var ec;return function(o,dateFormat){sb=[];_dateFormat=dateFormat;doEncode(o);_dateFormat=null;return sb.join("")}}();this.decode=function(){var dateRe1=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2}(?:\.*\d*)?)Z*$/;var dateRe2=new RegExp("^/+Date\\((-?[0-9]+).*\\)/+$","g");var re=/[\"\'](\d{4})-(\d{1,2})-(\d{1,2})[T ](\d{1,2}):(\d{1,2}):(\d{1,2})(\.*\d*)[\"\']/g;return function(json,parseDate){if(json===""||json===null||json===undefined){return json}if(typeof json=="object"){json=this.encode(json)}function evalParse(json){if(parseDate!==false){json=json.replace(__js_dateRegEx,"$1new Date($2)");json=json.replace(re,"new Date($1,$2-1,$3,$4,$5,$6)");json=json.replace(__js_dateRegEx2,"new Date($1)")}return eval("("+json+")")}var data=null;if(window.JSON&&window.JSON.parse){var dateReviver=function(key,value){if(typeof value==="string"&&parseDate!==false){dateRe1.lastIndex=0;var a=dateRe1.exec(value);if(a){value=new Date(a[1],a[2]-1,a[3],a[4],a[5],a[6]);return value}dateRe2.lastIndex=0;var a=dateRe2.exec(value);if(a){value=new Date(parseInt(a[1]));return value}}return value};try{var json2=json.replace(__js_dateRegEx,'$1"/Date($2)/"');data=window.JSON.parse(json2,dateReviver)}catch(ex){data=evalParse(json)}}else{data=evalParse(json)}return data}}()})();__js_dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");__js_dateRegEx2=new RegExp("[\"']/Date\\(([0-9]+)\\)/[\"']","g");mini.encode=mini.JSON.encode;mini.decode=mini.JSON.decode;mini.clone=function(f,c){if(f===null||f===undefined){return f}var b=mini.encode(f);var d=mini.decode(b);function a(g){for(var n=0,j=g.length;n<j;n++){var r=g[n];delete r._state;delete r._id;delete r._pid;delete r._uid;for(var q in r){var k=r[q];if(k instanceof Array){a(k)}}}}if(c!==false){a(d instanceof Array?d:[d])}return d};var DAY_MS=86400000,HOUR_MS=3600000,MINUTE_MS=60000;mini.copyTo(mini,{clearTime:function(a){if(!a){return null}return new Date(a.getFullYear(),a.getMonth(),a.getDate())},maxTime:function(a){if(!a){return null}return new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59)},cloneDate:function(a){if(!a){return null}return new Date(a.getTime())},addDate:function(b,a,c){if(!c){c="D"}b=new Date(b.getTime());switch(c.toUpperCase()){case"Y":b.setFullYear(b.getFullYear()+a);break;case"MO":b.setMonth(b.getMonth()+a);break;case"D":b.setDate(b.getDate()+a);break;case"H":b.setHours(b.getHours()+a);break;case"M":b.setMinutes(b.getMinutes()+a);break;case"S":b.setSeconds(b.getSeconds()+a);break;case"MS":b.setMilliseconds(b.getMilliseconds()+a);break}return b},getWeek:function(g,d,k){var l=Math.floor((14-(d))/12);var j=g+4800-l;var c=(d)+(12*l)-3;var n=k+Math.floor(((153*c)+2)/5)+(365*j)+Math.floor(j/4)-Math.floor(j/100)+Math.floor(j/400)-32045;var o=(n+31741-(n%7))%146097%36524%1461;var f=Math.floor(o/1460);var b=((o-f)%365)+f;NumberOfWeek=Math.floor(b/7)+1;return NumberOfWeek},getWeekStartDate:function(c,f){if(!f){f=0}if(f>6||f<0){throw new Error("out of weekday")}var a=c.getDay();var b=f-a;if(a<f){b-=7}var g=new Date(c.getFullYear(),c.getMonth(),c.getDate()+b);return g},getShortWeek:function(a){var b=this.dateInfo.daysShort;return b[a]},getLongWeek:function(a){var b=this.dateInfo.daysLong;return b[a]},getShortMonth:function(b){var a=this.dateInfo.monthsShort;return a[b]},getLongMonth:function(b){var a=this.dateInfo.monthsLong;return a[b]},dateInfo:{monthsLong:["January","Febraury","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],quarterLong:["Q1","Q2","Q3","Q4"],quarterShort:["Q1","Q2","Q3","Q4"],halfYearLong:["first half","second half"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy H:mm tt",F:"dddd, MMMM dd, yyyy H:mm:ss tt",g:"M/d/yyyy H:mm tt",G:"M/d/yyyy H:mm:ss tt",m:"MMMM dd",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm tt",T:"H:mm:ss tt",U:"dddd, MMMM dd, yyyy HH:mm:ss tt",y:"MMM, yyyy"},tt:{AM:"AM",PM:"PM"},ten:{Early:"Early",Mid:"Mid",Late:"Late"},today:"Today",clockType:24}});Date.prototype.getHalfYear=function(){if(!this.getMonth){return null}var a=this.getMonth();if(a<6){return 0}return 1};Date.prototype.getQuarter=function(){if(!this.getMonth){return null}var a=this.getMonth();if(a<3){return 0}if(a<6){return 1}if(a<9){return 2}return 3};mini.formatDate=function(f,u,s){if(!f||!f.getFullYear||isNaN(f)){return""}var b=f.toString();var a=mini.dateInfo;if(!a){a=mini.dateInfo}if(typeof(a)!=="undefined"){var n=typeof(a.patterns[u])!=="undefined"?a.patterns[u]:u;var o=f.getFullYear();var l=f.getMonth();var p=f.getDate();if(u=="yyyy-MM-dd"){l=l+1<10?"0"+(l+1):l+1;p=p<10?"0"+p:p;return o+"-"+l+"-"+p}if(u=="MM/dd/yyyy"){l=l+1<10?"0"+(l+1):l+1;p=p<10?"0"+p:p;return l+"/"+p+"/"+o}b=n.replace(/yyyy/g,o);b=b.replace(/yy/g,(o+"").substring(2));var r=f.getHalfYear();b=b.replace(/hy/g,a.halfYearLong[r]);var c=f.getQuarter();b=b.replace(/Q/g,a.quarterLong[c]);b=b.replace(/q/g,a.quarterShort[c]);b=b.replace(/MMMM/g,a.monthsLong[l].escapeDateTimeTokens());b=b.replace(/MMM/g,a.monthsShort[l].escapeDateTimeTokens());b=b.replace(/MM/g,l+1<10?"0"+(l+1):l+1);b=b.replace(/(\\)?M/g,function(w,v){return v?w:l+1});var d=f.getDay();b=b.replace(/dddd/g,a.daysLong[d].escapeDateTimeTokens());b=b.replace(/ddd/g,a.daysShort[d].escapeDateTimeTokens());b=b.replace(/dd/g,p<10?"0"+p:p);b=b.replace(/(\\)?d/g,function(w,v){return v?w:p});var j=f.getHours();var q=j>12?j-12:j;if(a.clockType==12){if(j>12){j-=12}}b=b.replace(/HH/g,j<10?"0"+j:j);b=b.replace(/(\\)?H/g,function(w,v){return v?w:j});b=b.replace(/hh/g,q<10?"0"+q:q);b=b.replace(/(\\)?h/g,function(w,v){return v?w:q});var g=f.getMinutes();b=b.replace(/mm/g,g<10?"0"+g:g);b=b.replace(/(\\)?m/g,function(w,v){return v?w:g});var t=f.getSeconds();b=b.replace(/ss/g,t<10?"0"+t:t);b=b.replace(/(\\)?s/g,function(w,v){return v?w:t});b=b.replace(/fff/g,f.getMilliseconds());b=b.replace(/tt/g,f.getHours()>12||f.getHours()==0?a.tt.PM:a.tt.AM);var f=f.getDate();var k="";if(f<=10){k=a.ten.Early}else{if(f<=20){k=a.ten.Mid}else{k=a.ten.Late}}b=b.replace(/ten/g,k)}return b.replace(/\\/g,"")};String.prototype.escapeDateTimeTokens=function(){return this.replace(/([dMyHmsft])/g,"\\$1")};mini.fixDate=function(b,a){if(+b){while(b.getDate()!=a.getDate()){b.setTime(+b+(b<a?1:-1)*HOUR_MS)}}};mini.parseDate=function(s,ignoreTimezone){try{var d=eval(s);if(d&&d.getFullYear){return d}}catch(ex){}if(typeof s=="object"){return isNaN(s)?null:s}if(typeof s=="number"){var d=new Date(s*1000);if(d.getTime()!=s){return null}return isNaN(d)?null:d}if(typeof s=="string"){m=s.match(/^([0-9]{4})([0-9]{2})([0-9]{2})$/);if(m){var date=new Date(m[1],m[2]-1,m[3]);return date}m=s.match(/^([0-9]{4}).([0-9]*)$/);if(m){var date=new Date(m[1],m[2]-1);return date}if(s.match(/^\d+(\.\d+)?$/)){var d=new Date(parseFloat(s)*1000);if(d.getTime()!=s){return null}else{return d}}if(ignoreTimezone===undefined){ignoreTimezone=true}var d=mini.parseISO8601(s,ignoreTimezone)||(s?new Date(s):null);return isNaN(d)?null:d}return null};mini.parseISO8601=function(f,b){var a=f.match(/^([0-9]{4})([-\/]([0-9]{1,2})([-\/]([0-9]{1,2})([T ]([0-9]{1,2}):([0-9]{1,2})(:([0-9]{1,2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!a){a=f.match(/^([0-9]{4})[-\/]([0-9]{2})[-\/]([0-9]{2})[T ]([0-9]{1,2})/);if(a){var d=new Date(a[1],a[2]-1,a[3],a[4]);return d}a=f.match(/^([0-9]{4}).([0-9]*)/);if(a){var d=new Date(a[1],a[2]-1);return d}a=f.match(/^([0-9]{4}).([0-9]*).([0-9]*)/);if(a){var d=new Date(a[1],a[2]-1,a[3]);return d}a=f.match(/^([0-9]{2})-([0-9]{2})-([0-9]{4})$/);if(!a){return null}else{var d=new Date(a[3],a[1]-1,a[2]);return d}}var d=new Date(a[1],0,1);if(b||!a[14]){var c=new Date(a[1],0,1,9,0);if(a[3]){d.setMonth(a[3]-1);c.setMonth(a[3]-1)}if(a[5]){d.setDate(a[5]);c.setDate(a[5])}mini.fixDate(d,c);if(a[7]){d.setHours(a[7])}if(a[8]){d.setMinutes(a[8])}if(a[10]){d.setSeconds(a[10])}if(a[12]){d.setMilliseconds(Number("0."+a[12])*1000)}mini.fixDate(d,c)}else{d.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);d.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1000:0);var g=Number(a[16])*60+(a[18]?Number(a[18]):0);g*=a[15]=="-"?1:-1;d=new Date(+d+(g*60*1000))}return d};mini.parseTime=function(f,j){if(!f){return null}var l=parseInt(f);if(l==f&&j){k=new Date(0);if(j[0]=="H"){k.setHours(l)}else{if(j[0]=="m"){k.setMinutes(l)}else{if(j[0]=="s"){k.setSeconds(l)}}}if(isNaN(k)){k=null}return k}var k=mini.parseDate(f);if(!k){var b=f.split(":");var g=parseInt(parseFloat(b[0]));var c=parseInt(parseFloat(b[1]));var a=parseInt(parseFloat(b[2]));if(!isNaN(g)&&!isNaN(c)&&!isNaN(a)){k=new Date(0);k.setHours(g);k.setMinutes(c);k.setSeconds(a)}if(!isNaN(g)&&(j=="H"||j=="HH")){k=new Date(0);k.setHours(g)}else{if(!isNaN(g)&&!isNaN(c)&&(j=="H:mm"||j=="HH:mm")){k=new Date(0);k.setHours(g);k.setMinutes(c)}else{if(!isNaN(g)&&!isNaN(c)&&j=="mm:ss"){k=new Date(0);k.setMinutes(g);k.setSeconds(c)}}}}return k};mini.dateInfo={monthsLong:["","","","","","","","","","","",""],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],daysLong:["","","","","","",""],daysShort:["","","","","","",""],quarterLong:["","","",""],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["",""],patterns:{d:"yyyy-M-d",D:"yyyyMd",f:"yyyyMd H:mm",F:"yyyyMd H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyyMd HH:mm:ss",y:"yyyyMM"},tt:{AM:"",PM:""},ten:{Early:"",Mid:"",Late:""},today:"",clockType:24};(function(n){var s=n.mini;if(!s){s=n.mini={}}var b=s.cultures={},k="en";s.cultures[k]={name:k,numberFormat:{number:{pattern:["n","-n"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3]},percent:{pattern:["n %","-n %"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:"%"},currency:{pattern:["$n","($n)"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:"$"}}};function g(z){return s.cultures[z]}function q(z){if(z&&z.name){return z}return g(z)||s.cultures.current}s.getCulture=q;s.culture=function(z){if(z!==undefined){s.cultures.current=g(z)}else{return b.current}};s.culture(k);var r="string",t="number",p=function(z){return z&&!!z.unshift},f={2:/^\d{1,2}/,4:/^\d{4}/};function x(B,C,z){B=B+"";C=typeof C==t?C:2;var D=C-B.length;if(D>0){var A=o(D,"0");return z?B+A:A+B}return B}function o(B,A){var z="";while(B){B-=1;z+=A}return z}var d=/^(n|c|p)(\d*)$/i,c=/^(e)(\d*)$/i,u=/[^0#]/g,w=/[eE][\-+]?[0-9]+/;function y(A,Q,D){A=Math.abs(A);var H=Q.indexOf(",")!=-1,E=Q.split("."),O=(E[0]||"").replace(u,""),N=(E[1]||"").replace(u,""),B=String(A).split("."),J=B[0],I=B[1]||"",M="",C=D.groupSize[0],K=D.decimalsSeparator,R=D.groupSeparator;var F=O.indexOf("0");O=F==-1?"0":(O.substr(F)||"0");var S=N.length;var z=N.substr(0,N.lastIndexOf("0")+1).length;if(J){J=x(J,O.length);if(H){for(var P=0;P<Math.floor((J.length-(1+P))/3);P++){J=J.substring(0,J.length-(4*P+3))+R+J.substring(J.length-(4*P+3))}}M+=J}if(S>0){M+=K;var L=parseInt(I.charAt(S));if(!isNaN(L)&&L>4){var G=I.split("");G[S-1]=parseInt(G[S-1])+1;I=G.join("")}M+=x(I.substr(0,S),z,true)}return M}function j(G,H,C,F){var I=C.numberFormat.number;var z=d.exec(G);if(z!=null){var D=z[1],B=z[2];if(D=="p"){I=C.numberFormat.percent}else{if(D=="c"){I=C.numberFormat.currency}}var A=B?parseInt(B):I.decimals;var E=I.pattern[H<0?1:0];E=E.replace("n","#,#"+(A>0?"."+o(A,"0"):""));G=G.replace(D+B,E).replace("$",C.numberFormat.currency.symbol).replace("%",C.numberFormat.percent.symbol)}else{if(a(G)){if(H<0&&!F[1]){G="-"+G}}}return G}function a(z){return z.indexOf("0")!=-1||z.indexOf("#")!=-1}function v(C){if(!C){return null}function B(I){var H=I.indexOf("0");var G=I.indexOf("#");if(H==-1||(G!=-1&&G<H)){H=G}var F=I.lastIndexOf("0");var E=I.lastIndexOf("#");if(F==-1||(E!=-1&&E>F)){F=E}return[H,F]}var D=B(C);var A=D[0],z=D[1];return A>-1?{begin:A,end:z,format:C.substring(A,z+1)}:null}function l(F,N,G){if(typeof F!=t){return""}if(!N){return String(F)}var L=N.split(";");N=L[0];if(F<0&&L.length>=2){N=L[1]}if(F==0&&L.length>=3){N=L[2]}var G=q(G),J=G.numberFormat.number,I=G.numberFormat.percent,B=G.numberFormat.currency,N=j(N,F,G,L),C=N.indexOf(B.symbol)!=-1,A=N.indexOf(I.symbol)!=-1,K=N.indexOf(".")!=-1,H=a(N),O=C?B:(A?B:J),F=A?F*100:F;var z=c.exec(N);if(z){var D=parseInt(z[2]);return isNaN(D)?F.toExponential():F.toExponential(D)}if(!H){return N}var M="",E=v(N);if(E!=null){M=y(F,E.format,O);M=N.substr(0,E.begin)+M+N.substr(E.end+1)}else{M=N}return M}s.parseInt=function(B,A,C){var z=s.parseFloat(B,A,C);if(z){z=z|0}return z};s.parseFloat=function(I,M,K){if(!I&&I!==0){return null}if(typeof I===t){return I}if(K&&K.split(";")[2]==I){return 0}if(w.test(I)){I=parseFloat(I);if(isNaN(I)){I=null}return I}I=I.toString();M=s.getCulture(M);var L=M.numberFormat,B=L.number,A=L.percent,D=L.currency,z=I.indexOf(A.symbol)!=-1,F=I.indexOf(D.symbol)!=-1,B=F?D:(z?A:B),N=B.pattern[1],Q=B.decimals,G=B.decimalsSeparator,P=B.groupSeparator,J=I.indexOf("-")>-1;function C(U,V,S){var T=v(V);if(T){var R=V.substr(0,T.begin),W=V.substr(T.end+1);if(U.indexOf(R)==0&&U.indexOf(W)>-1){U=U.replace(R,"").replace(W,"");J=S}}return U}if(!K){if(J==false){K=N.replace("n","#,#"+(Q>0?"."+o(Q,"0"):"")).replace("$",D.symbol).replace("%",A.symbol);I=C(I,K,true)}}else{var E=K.split(";");if(E[1]){K=E[1];I=C(I,K,true)}else{K=E[0];var O=I;I=C(O,K,false);if(O==I){I=C(O,"-"+K,true)}}}I=I.split(P).join("").replace(G,".");var H=I.match(/([0-9,.]+)/g);if(H==null){return null}I=H[0];I=parseFloat(I);if(isNaN(I)){I=null}else{if(J){I*=-1}}if(I&&z){I/=100}return I};s.formatNumber=l})(this);mini.append=function(c,a){c=mini.byId(c);if(!a||!c){return}if(typeof a=="string"){if(a.charAt(0)=="#"){a=mini.byId(a);if(!a){return}c.appendChild(a);return a}else{if(a.indexOf("<tr")==0){return jQuery(c).append(a)[0].lastChild;return}var b=document.createElement("div");b.innerHTML=a;a=b.firstChild;while(b.firstChild){c.appendChild(b.firstChild)}return a}}else{c.appendChild(a);return a}};mini.prepend=function(c,a){if(typeof a=="string"){if(a.charAt(0)=="#"){a=mini.byId(a)}else{var b=document.createElement("div");b.innerHTML=a;a=b.firstChild}}return jQuery(c).prepend(a)[0].firstChild};mini.after=function(c,a){if(typeof a=="string"){if(a.charAt(0)=="#"){a=mini.byId(a)}else{var b=document.createElement("div");b.innerHTML=a;a=b.firstChild}}if(!a||!c){return}c.nextSibling?c.parentNode.insertBefore(a,c.nextSibling):c.parentNode.appendChild(a);return a};mini.before=function(c,a){if(typeof a=="string"){if(a.charAt(0)=="#"){a=mini.byId(a)}else{var b=document.createElement("div");b.innerHTML=a;a=b.firstChild}}if(!a||!c){return}c.parentNode.insertBefore(a,c);return a};mini.__wrap=document.createElement("div");mini.createElements=function(b){mini.removeChilds(mini.__wrap);var a=b.indexOf("<tr")==0;if(a){b="<table>"+b+"</table>"}mini.__wrap.innerHTML=b;return a?mini.__wrap.firstChild.rows:mini.__wrap.childNodes};mini_byId=function(g,d){if(typeof g=="string"){if(g.charAt(0)=="#"){g=g.substr(1)}var f=document.getElementById(g);if(f){return f}if(d&&!mini.isAncestor(document.body,d)){var c=d.getElementsByTagName("*");for(var b=0,a=c.length;b<a;b++){var f=c[b];if(f.id==g){return f}}f=null}return f}else{return g}};mini_hasClass=function(c,b){c=mini.byId(c);if(!c){return}if(!c.className){return false}var a=String(c.className).split(" ");return a.indexOf(b)!=-1};mini_addClass=function(b,a){if(!a){return}if(mini.hasClass(b,a)==false){jQuery(b).addClass(a)}};mini_removeClass=function(b,a){if(!a){return}jQuery(b).removeClass(a)};mini_getMargins=function(a){a=mini.byId(a);var b=jQuery(a);return{top:parseInt(b.css("margin-top"),10)||0,left:parseInt(b.css("margin-left"),10)||0,bottom:parseInt(b.css("margin-bottom"),10)||0,right:parseInt(b.css("margin-right"),10)||0}};mini_getBorders=function(a){a=mini.byId(a);var b=jQuery(a);return{top:parseInt(b.css("border-top-width"),10)||0,left:parseInt(b.css("border-left-width"),10)||0,bottom:parseInt(b.css("border-bottom-width"),10)||0,right:parseInt(b.css("border-right-width"),10)||0}};mini_getPaddings=function(a){a=mini.byId(a);var b=jQuery(a);return{top:parseInt(b.css("padding-top"),10)||0,left:parseInt(b.css("padding-left"),10)||0,bottom:parseInt(b.css("padding-bottom"),10)||0,right:parseInt(b.css("padding-right"),10)||0}};mini_setWidth=function(d,c){d=mini.byId(d);c=parseInt(c);if(isNaN(c)||!d){return}if(jQuery.boxModel){var f=mini.getPaddings(d);var a=mini.getBorders(d);c=c-f.left-f.right-a.left-a.right}if(c<0){c=0}d.style.width=c+"px"};mini_setHeight=function(d,c){d=mini.byId(d);c=parseInt(c);if(isNaN(c)||!d){return}if(jQuery.boxModel){var f=mini.getPaddings(d);var a=mini.getBorders(d);c=c-f.top-f.bottom-a.top-a.bottom}if(c<0){c=0}d.style.height=c+"px"};mini_getWidth=function(a,b){a=mini.byId(a);if(a.style.display=="none"||a.type=="text/javascript"){return 0}return b?jQuery(a).width():jQuery(a).outerWidth()};mini_getHeight=function(a,b){a=mini.byId(a);if(a.style.display=="none"||a.type=="text/javascript"){return 0}return b?jQuery(a).height():jQuery(a).outerHeight()};mini_setBox=function(d,b,f,c,a){if(f===undefined){f=b.y;c=b.width;a=b.height;b=b.x}mini.setXY(d,b,f);mini.setWidth(d,c);mini.setHeight(d,a)};mini_getBox=function(a){var c=mini.getXY(a);var b={x:c[0],y:c[1],width:mini.getWidth(a),height:mini.getHeight(a)};b.left=b.x;b.top=b.y;b.right=b.x+b.width;b.bottom=b.y+b.height;return b};mini_setStyle=function(b,a){b=mini.byId(b);if(!b||typeof a!="string"){return}var c=jQuery(b);var k=a.toLowerCase().split(";");for(var f=0,d=k.length;f<d;f++){var n=k[f];var o=n.split(":");if(o.length>1){if(o.length>2){var j=o[0].trim();o.removeAt(0);var g=o.join(":").trim();c.css(j,g)}else{c.css(o[0].trim(),o[1].trim())}}}};mini_getStyle=function(){var a=document.defaultView;return new Function("el","style",["style.indexOf('-')>-1 && (style=style.replace(/-(\\w)/g,function(m,a){return a.toUpperCase()}));","style=='float' && (style='",a?"cssFloat":"styleFloat","');return el.style[style] || ",a?"window.getComputedStyle(el, null)[style]":"el.currentStyle[style]"," || null;"].join(""))}();mini_isAncestor=function(d,f){var a=false;d=mini.byId(d);f=mini.byId(f);if(d===f){return true}if(d&&f){if(d.contains){try{return d.contains(f)}catch(b){return false}}else{if(d.compareDocumentPosition){return !!(d.compareDocumentPosition(f)&16)}else{while(f=f.parentNode){a=f==d||a}}}}return a};mini_findParent=function(f,c,j){f=mini.byId(f);var a=document.body,g=0,d;j=j||50;if(typeof j!="number"){d=mini.byId(j);j=10}while(f&&f.nodeType==1&&g<j&&f!=a&&f!=d){if(mini.hasClass(f,c)){return f}g++;f=f.parentNode}return null};mini.copyTo(mini,{byId:mini_byId,hasClass:mini_hasClass,addClass:mini_addClass,removeClass:mini_removeClass,getMargins:mini_getMargins,getBorders:mini_getBorders,getPaddings:mini_getPaddings,setWidth:mini_setWidth,setHeight:mini_setHeight,getWidth:mini_getWidth,getHeight:mini_getHeight,setBox:mini_setBox,getBox:mini_getBox,setStyle:mini_setStyle,getStyle:mini_getStyle,repaint:function(a){if(!a){a=document.body}mini.addClass(a,"mini-repaint");setTimeout(function(){mini.removeClass(a,"mini-repaint")},1)},getSize:function(a,b){return{width:mini.getWidth(a,b),height:mini.getHeight(a,b)}},setSize:function(c,b,a){mini.setWidth(c,b);mini.setHeight(c,a)},setX:function(b,a){a=parseInt(a);var c=jQuery(b).offset();var d=parseInt(c.top);if(d===undefined){d=c[1]}mini.setXY(b,a,d)},setY:function(b,d){d=parseInt(d);var c=jQuery(b).offset();var a=parseInt(c.left);if(a===undefined){a=c[0]}mini.setXY(b,a,d)},setXY:function(b,a,d){var c={left:parseInt(a),top:parseInt(d)};jQuery(b).offset(c);jQuery(b).offset(c)},getXY:function(a){var b=jQuery(a).offset();return[parseInt(b.left),parseInt(b.top)]},getViewportBox:function(){var b=jQuery(window).width(),c=jQuery(window).height();var a=jQuery(document).scrollLeft(),d=jQuery(document.body).scrollTop();if(d==0&&document.documentElement){d=document.documentElement.scrollTop}return{x:a,y:d,top:d,left:a,width:b,height:c,right:a+b,bottom:d+c}},showAt:function(p){var g=jQuery;p=g.extend({el:null,x:"center",y:"center",offset:[0,0],fixed:false,zindex:mini.zindex(),timeout:0,timeoutHandler:null,animation:false},p);var c=g(p.el)[0],k=p.x,j=p.y,b=p.offset[0],a=p.offset[1],l=p.zindex,f=p.fixed,d=p.animation;if(!c){return}if(p.timeout){setTimeout(function(){if(p.timeoutHandler){p.timeoutHandler()}},p.timeout)}var o=";position:absolute;display:block;left:auto;top:auto;right:auto;bottom:auto;margin:0;z-index:"+l+";";mini.setStyle(c,o);var o="";if(p&&mini.isNumber(p.x)&&mini.isNumber(p.y)){if(p.fixed&&!mini.isIE6){o+=";position:fixed;"}mini.setStyle(c,o);mini.setXY(p.el,p.x,p.y);return}if(k=="left"){o+="left:"+b+"px;"}else{if(k=="right"){o+="right:"+b+"px;"}else{var n=mini.getSize(c);o+="left:50%;margin-left:"+(-n.width*0.5)+"px;"}}if(j=="top"){o+="top:"+a+"px;"}else{if(j=="bottom"){o+="bottom:"+a+"px;"}else{var n=mini.getSize(c);o+="top:50%;margin-top:"+(-n.height*0.5)+"px;"}}if(f&&!mini.isIE6){o+="position:fixed"}mini.setStyle(c,o)},getChildNodes:function(j,g){j=mini.byId(j);if(!j){return}var b=j.childNodes;var f=[];for(var d=0,a=b.length;d<a;d++){var k=b[d];if(k.nodeType==1||g===true){f.push(k)}}return f},removeChilds:function(g,a){g=mini.byId(g);if(!g){return}var f=mini.getChildNodes(g,true);for(var d=0,b=f.length;d<b;d++){var j=f[d];if(a&&j==a){}else{g.removeChild(f[d])}}},isAncestor:mini_isAncestor,findParent:mini_findParent,findChild:function(f,b){f=mini.byId(f);var d=f.getElementsByTagName("*");for(var c=0,a=d.length;c<a;c++){var f=d[c];if(mini.hasClass(f,b)){return f}}},isAncestor:function(d,f){var a=false;d=mini.byId(d);f=mini.byId(f);if(d===f){return true}if(d&&f){if(d.contains){try{return d.contains(f)}catch(b){return false}}else{if(d.compareDocumentPosition){return !!(d.compareDocumentPosition(f)&16)}else{while(f=f.parentNode){a=f==d||a}}}}return a},getOffsetsTo:function(a,c){var d=this.getXY(a),b=this.getXY(c);return[d[0]-b[0],d[1]-b[1]]},scrollIntoView:function(j,f,k){var u=mini.byId(f)||document.body,g=this.getOffsetsTo(j,u),p=g[0]+u.scrollLeft,x=g[1]+u.scrollTop,v=x+j.offsetHeight,d=p+j.offsetWidth,a=u.clientHeight,q=parseInt(u.scrollTop,10),w=parseInt(u.scrollLeft,10),n=q+a,s=w+u.clientWidth;if(j.offsetHeight>a||x<q){u.scrollTop=x}else{if(v>n){u.scrollTop=v-a}}u.scrollTop=u.scrollTop;if(k!==false){if(j.offsetWidth>u.clientWidth||p<w){u.scrollLeft=p}else{if(d>s){u.scrollLeft=d-u.clientWidth}}u.scrollLeft=u.scrollLeft}return this},setOpacity:function(b,a){jQuery(b).css({opacity:a})},selectable:function(b,a){b=mini.byId(b);if(!!a){jQuery(b).removeClass("mini-unselectable");if(isIE){b.unselectable="off"}else{b.style.MozUserSelect="";b.style.KhtmlUserSelect="";b.style.UserSelect=""}}else{jQuery(b).addClass("mini-unselectable");if(isIE){b.unselectable="on"}else{b.style.MozUserSelect="none";b.style.UserSelect="none";b.style.KhtmlUserSelect="none"}}},selectRange:function(c,b,a){if(c.createTextRange){var f=c.createTextRange();f.moveStart("character",b);f.moveEnd("character",a-c.value.length);f.select()}else{if(c.setSelectionRange){c.setSelectionRange(b,a)}}try{c.focus()}catch(d){}},getSelectRange:function(b){b=mini.byId(b);if(!b){return}try{b.focus()}catch(d){}var f=0,a=0;if(b.createTextRange&&document.selection){var c=document.selection.createRange().duplicate();c.moveEnd("character",b.value.length);if(c.text===""){f=b.value.length}else{f=b.value.lastIndexOf(c.text)}var c=document.selection.createRange().duplicate();c.moveStart("character",-b.value.length);a=c.text.length}else{f=b.selectionStart;a=b.selectionEnd}return[f,a]}});(function(){var a={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var c=document.createElement("div");c.setAttribute("class","t");var b=c.className==="t";mini.setAttr=function(f,d,g){f.setAttribute(b?d:(a[d]||d),g)};mini.getAttr=function(j,g){if(g=="value"&&(isIE6||isIE7)){var d=j.attributes[g];return d?d.value:null}var f=j.getAttribute(b?g:(a[g]||g));if(typeof f=="function"||g=="maxLength"){var l=j.attributes[g];if(l){f=l.value}}if(!f&&g=="onload"){var k=j.getAttributeNode?j.getAttributeNode(g):null;if(k){f=k.nodeValue}}return f}})();mini_preventDefault=function(){if(window.event){window.event.returnValue=false}};mini_stopPropogation=function(){if(window.event){window.event.cancelBubble=true}};mini_onOne=function(f,d,c,b){if(!f){return}var a="on"+d.toLowerCase();f[a]=function(j){j=j||window.event;if(!j.target){j.target=j.srcElement}if(!j.preventDefault){j.preventDefault=mini_preventDefault}if(!j.stopPropogation){j.stopPropogation=mini_stopPropogation}var g=c.call(b,j);if(g===false){return false}}};mini_on=function(d,c,b,a){d=mini.byId(d);a=a||d;if(!d||!c||!b||!a){return false}var f=mini.findListener(d,c,b,a);if(f){return false}var g=mini.createDelegate(b,a);mini.listeners.push([d,c,b,a,g]);if(mini.isFirefox&&c=="mousewheel"){c="DOMMouseScroll"}jQuery(d).bind(c,g)};mini_un=function(d,c,b,a){d=mini.byId(d);a=a||d;if(!d||!c||!b||!a){return false}var f=mini.findListener(d,c,b,a);if(!f){return false}mini.listeners.remove(f);if(mini.isFirefox&&c=="mousewheel"){c="DOMMouseScroll"}jQuery(d).unbind(c,f[4])};mini.copyTo(mini,{listeners:[],on:mini_on,un:mini_un,_getListeners:function(){var d=mini.listeners;for(var c=d.length-1;c>=0;c--){var f=d[c];try{if(f[0]==1&&f[1]==1&&f[2]==1&&f[3]==1){var a=1}}catch(b){d.removeAt(c)}}return d},findListener:function(j,g,f,d){j=mini.byId(j);d=d||j;if(!j||!g||!f||!d){return false}var c=mini._getListeners();for(var b=c.length-1;b>=0;b--){var k=c[b];try{if(k[0]==j&&k[1]==g&&k[2]==f&&k[3]==d){return k}}catch(a){}}},clearEvent:function(d,c){d=mini.byId(d);if(!d){return false}var b=mini._getListeners();for(var a=b.length-1;a>=0;a--){var f=b[a];if(f[0]==d){if(!c||c==f[1]){mini.un(d,f[1],f[2],f[3])}}}d.onmouseover=d.onmousedown=null}});mini.__windowResizes=[];mini.onWindowResize=function(b,a){mini.__windowResizes.push([b,a])};mini.on(window,"resize",function(f){var c=mini.__windowResizes;for(var b=0,a=c.length;b<a;b++){var d=c[b];d[0].call(d[1],f)}});mini.htmlEncode=function(b){if(typeof b!=="string"){return b}var a="";if(b.length==0){return""}a=b;a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/ /g,"&nbsp;");a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&quot;");return a};mini.htmlDecode=function(b){if(typeof b!=="string"){return b}var a="";if(b.length==0){return""}a=b.replace(/&gt;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&nbsp;/g," ");a=a.replace(/&#39;/g,"'");a=a.replace(/&quot;/g,'"');return a};mini.copyTo(Array.prototype,{add:Array.prototype.enqueue=function(a){this[this.length]=a;return this},getRange:function(f,b){var a=[];for(var c=f;c<=b;c++){var d=this[c];if(d){a[a.length]=d}}return a},addRange:function(c){for(var b=0,a=c.length;b<a;b++){this[this.length]=c[b]}return this},clear:function(){this.length=0;return this},clone:function(){if(this.length===1){return[this[0]]}else{return Array.apply(null,this)}},contains:function(a){return(this.indexOf(a)>=0)},indexOf:function(c,d){var a=this.length;for(var b=(d<0)?Math.max(0,a+d):d||0;b<a;b++){if(this[b]===c){return b}}return -1},dequeue:function(){return this.shift()},insert:function(a,b){this.splice(a,0,b);return this},insertRange:function(b,a){for(var c=a.length-1;c>=0;c--){var d=a[c];this.splice(b,0,d)}return this},remove:function(b){var a=this.indexOf(b);if(a>=0){this.splice(a,1)}return(a>=0)},removeAt:function(a){var b=this[a];this.splice(a,1);return b},removeRange:function(b){b=b.clone();for(var c=0,a=b.length;c<a;c++){this.remove(b[c])}}});mini.Keyboard={Left:37,Top:38,Right:39,Bottom:40,PageUp:33,PageDown:34,End:35,Home:36,Enter:13,ESC:27,Space:32,Tab:9,Del:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};var ua=navigator.userAgent.toLowerCase(),check=function(a){return a.test(ua)},DOC=document,isStrict=document.compatMode=="CSS1Compat",version=function(c,b){var a;return(c&&(a=b.exec(ua)))?parseFloat(a[1]):0},docMode=document.documentMode,isOpera=check(/opera/),isOpera10_5=isOpera&&check(/version\/10\.5/),isChrome=check(/\bchrome\b/),isWebKit=check(/webkit/),isSafari=!isChrome&&check(/safari/),isSafari2=isSafari&&check(/applewebkit\/4/),isSafari3=isSafari&&check(/version\/3/),isSafari4=isSafari&&check(/version\/4/),isSafari5_0=isSafari&&check(/version\/5\.0/),isSafari5=isSafari&&check(/version\/5/),isIE=!isOpera&&check(/msie/),isIE7=isIE&&((check(/msie 7/)&&docMode!=8&&docMode!=9&&docMode!=10)||docMode==7),isIE8=isIE&&((check(/msie 8/)&&docMode!=7&&docMode!=9&&docMode!=10)||docMode==8),isIE9=isIE&&((check(/msie 9/)&&docMode!=7&&docMode!=8&&docMode!=10)||docMode==9),isIE10=isIE&&((check(/msie 10/)&&docMode!=7&&docMode!=8&&docMode!=9)||docMode==10),isIE6=isIE&&!isIE7&&!isIE8&&!isIE9&&!isIE10,isIE11=(ua.indexOf("trident")>-1&&ua.indexOf("rv")>-1),IE_V=isIE?parseInt($.browser.version):-1,isFirefox=navigator.userAgent.indexOf("Firefox")>0,isGecko=!isWebKit&&check(/gecko/),isGecko3=isGecko&&check(/rv:1\.9/),isGecko4=isGecko&&check(/rv:2\.0/),isGecko5=isGecko&&check(/rv:5\./),isGecko10=isGecko&&check(/rv:10\./),isFF3_0=isGecko3&&check(/rv:1\.9\.0/),isFF3_5=isGecko3&&check(/rv:1\.9\.1/),isFF3_6=isGecko3&&check(/rv:1\.9\.2/),isWindows=check(/windows|win32/),isMac=check(/macintosh|mac os x/),isAir=check(/adobeair/),isLinux=check(/linux/),scrollbarSize=null,chromeVersion=version(true,/\bchrome\/(\d+\.\d+)/),firefoxVersion=version(true,/\bfirefox\/(\d+\.\d+)/),ieVersion=version(isIE,/msie (\d+\.\d+)/),operaVersion=version(isOpera,/version\/(\d+\.\d+)/),safariVersion=version(isSafari,/version\/(\d+\.\d+)/),webKitVersion=version(isWebKit,/webkit\/(\d+\.\d+)/),isSecure=/^https/i.test(window.location.protocol),isBorderBox=isIE&&!isStrict;if(isIE6){try{DOC.execCommand("BackgroundImageCache",false,true)}catch(e){}}mini.boxModel=!isBorderBox;mini.isIE=isIE;mini.isIE6=isIE6;mini.isIE7=isIE7;mini.isIE8=isIE8;mini.isIE9=isIE9;mini.isIE10=isIE10;mini.isIE11=isIE11;mini.IE_V=IE_V;mini.isFirefox=isFirefox;mini.isOpera=isOpera;mini.isSafari=isSafari;mini.isChrome=isChrome;if(jQuery){jQuery.boxModel=mini.boxModel}mini.noBorderBox=false;if(jQuery.boxModel==false&&isIE&&isIE9==false){mini.noBorderBox=true}mini.MouseButton={Left:0,Middle:1,Right:2};if(isIE&&!isIE9&&!isIE10){mini.MouseButton={Left:1,Middle:4,Right:2}}mini._MaskID=1;mini._MaskObjects={};mini.mask=function(c){var d=mini.byId(c);if(mini.isElement(d)){c={el:d}}else{if(typeof c=="string"){c={html:c}}}c=mini.copyTo({html:"",cls:"",style:"",backStyle:""},c);c.el=mini.byId(c.el);if(!c.el){c.el=document.body}var d=c.el;mini.unmask(c.el);d._maskid=mini._MaskID++;mini._MaskObjects[d._maskid]=c;var f=mini.append(d,'<div class="mini-mask"><div class="mini-mask-background" style="'+c.backStyle+'"></div><div class="mini-mask-msg '+c.cls+'" style="'+c.style+'">'+c.html+"</div></div>");if(d==document.body){mini.addClass(f,"mini-fixed")}c.maskEl=f;if(!mini.isNull(c.opacity)){mini.setOpacity(f.firstChild,c.opacity)}function a(){b.style.display="block";var g=mini.getSize(b);b.style.marginLeft=-g.width/2+"px";b.style.marginTop=-g.height/2+"px"}var b=f.lastChild;b.style.display="none";setTimeout(function(){a()},0)};mini.unmask=function(b){b=mini.byId(b);if(!b){b=document.body}var a=mini._MaskObjects[b._maskid];if(!a){return}delete mini._MaskObjects[b._maskid];var c=a.maskEl;a.maskEl=null;if(c&&c.parentNode){c.parentNode.removeChild(c)}};mini.Cookie={get:function(f){var c=document.cookie.split("; ");var g=null;for(var d=0;d<c.length;d++){var a=c[d].split("=");if(f==a[0]){g=a}}if(g){var b=g[1];if(b===undefined){return b}return unescape(b)}return null},set:function(b,f,a,d){var c=new Date();if(a!=null){c=new Date(c.getTime()+(a*1000*3600*24))}document.cookie=b+"="+escape(f)+((a==null)?"":("; expires="+c.toGMTString()))+";path=/"+(d?"; domain="+d:"")},del:function(a,b){this.set(a,null,-100,b)}};mini.copyTo(mini,{treeToArray:function(a,p,c,n,k){if(!p){p="children"}var o=[];for(var g=0,f=a.length;g<f;g++){var d=a[g];o[o.length]=d;if(n){d[n]=k}var q=d[p];if(q&&q.length>0){var b=d[c];var j=this.treeToArray(q,p,c,n,b);o.addRange(j)}}return o},arrayToTree:function(k,s,d,r){if(!s){s="children"}d=d||"_id";r=r||"_pid";var a=[];var g={};for(var n=0,j=k.length;n<j;n++){var f=k[n];if(!f){continue}var c=mini._getMap(d,f);if(c!==null&&c!==undefined){g[c]=f}delete f[s]}for(var n=0,j=k.length;n<j;n++){var f=k[n];var q=mini._getMap(r,f);var b=g[q];if(!b){a.push(f);continue}if(!b[s]){b[s]=[]}b[s].push(f)}return a}});mini.treeToList=mini.treeToArray;mini.listToTree=mini.arrayToTree;function UUID(){var b=[],c="0123456789ABCDEF".split("");for(var a=0;a<36;a++){b[a]=Math.floor(Math.random()*16)}b[14]=4;b[19]=(b[19]&3)|8;for(var a=0;a<36;a++){b[a]=c[b[a]]}b[8]=b[13]=b[18]=b[23]="-";return b.join("")}String.format=function(b){var a=Array.prototype.slice.call(arguments,1);b=b||"";return b.replace(/\{(\d+)\}/g,function(c,d){return a[d]})};String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return this.replace(a,"")}}();mini.copyTo(mini,{measureText:function(b,j,a){if(!this.measureEl){this.measureEl=mini.append(document.body,"<div></div>")}this.measureEl.style.cssText="position:absolute;left:-1000px;top:-1000px;visibility:hidden;";if(typeof b=="string"){this.measureEl.className=b}else{this.measureEl.className="";var n=jQuery(b);var k=jQuery(this.measureEl);var c=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(var f=0,d=c.length;f<d;f++){var g=c[f];k.css(g,n.css(g))}}if(a){mini.setStyle(this.measureEl,a)}this.measureEl.innerHTML=j;return mini.getSize(this.measureEl)}});if(typeof mini_layoutOnParse=="undefined"){mini_layoutOnParse=true}mini.enableLayout=true;jQuery(function(){var a=new Date();mini.isReady=true;mini.parse(null,mini_layoutOnParse);mini._FireBindEvents();if((mini.getStyle(document.body,"overflow")=="hidden"||mini.getStyle(document.documentElement,"overflow")=="hidden")&&(isIE6||isIE7)){jQuery(document.body).css("overflow","visible");jQuery(document.documentElement).css("overflow","visible")}mini.__LastWindowWidth=document.documentElement.clientWidth;mini.__LastWindowHeight=document.documentElement.clientHeight});mini_onload=function(a){mini.enableLayout=true;mini.layout(null,mini_layoutOnParse?false:true);mini.on(window,"resize",mini_onresize)};mini.on(window,"load",mini_onload);mini.__LastWindowWidth=document.documentElement.clientWidth;mini.__LastWindowHeight=document.documentElement.clientHeight;mini.doWindowResizeTimer=null;mini.allowLayout=true;mini_onresize=function(c){if(mini.doWindowResizeTimer){clearTimeout(mini.doWindowResizeTimer)}mini.WindowVisible=mini.isWindowDisplay();if(mini.WindowVisible==false||mini.allowLayout==false){return}if(typeof Ext!="undefined"){mini.doWindowResizeTimer=setTimeout(function(){var f=document.documentElement.clientWidth;var d=document.documentElement.clientHeight;if(mini.__LastWindowWidth==f&&mini.__LastWindowHeight==d){}else{mini.__LastWindowWidth=f;mini.__LastWindowHeight=d;mini.layout(null,false)}mini.doWindowResizeTimer=null},300)}else{var a=100;try{if(parent&&parent!=window&&parent.mini){a=0}}catch(b){}mini.doWindowResizeTimer=setTimeout(function(){var f=document.documentElement.clientWidth;var d=document.documentElement.clientHeight;if(mini.__LastWindowWidth==f&&mini.__LastWindowHeight==d){}else{mini.__LastWindowWidth=f;mini.__LastWindowHeight=d;mini.layout(null,false)}mini.doWindowResizeTimer=null},a)}};mini.isDisplay=function(c,a){var b=a||document.body;while(1){if(c==null||!c.style){return false}if(c&&c.style&&c.style.display=="none"){return false}if(c==b){return true}c=c.parentNode}return true};mini.isWindowDisplay=function(){try{var c=window.parent;var o=c!=window;if(o){var g=c.document.getElementsByTagName("iframe");var a=c.document.getElementsByTagName("frame");var k=[];for(var j=0,d=g.length;j<d;j++){k.push(g[j])}for(var j=0,d=a.length;j<d;j++){k.push(a[j])}var f=null;for(var j=0,d=k.length;j<d;j++){var b=k[j];if(b.contentWindow==window){f=b;break}}if(!f){return false}return mini.isDisplay(f,c.document.body)}else{return true}}catch(n){return true}};mini.WindowVisible=mini.isWindowDisplay();mini.layoutIFrames=function(a){if(!document.body){return}if(!a){a=document.body}var b=a.getElementsByTagName("iframe");setTimeout(function(){for(var f=0,c=b.length;f<c;f++){var g=b[f];try{if(mini.isDisplay(g)&&mini.isAncestor(a,g)){if(g.contentWindow.mini){if(g.contentWindow.mini.WindowVisible==false){g.contentWindow.mini.WindowVisible=g.contentWindow.mini.isWindowDisplay();g.contentWindow.mini.layout()}else{g.contentWindow.mini.layout(null,false)}}g.contentWindow.mini.layoutIFrames()}}catch(d){}}},30)};$.ajaxSetup({cache:false});if(isIE){setInterval(function(){},20000)}mini_unload=function(n){try{var k=mini._getTopWindow();k[mini._WindowID]="";delete k[mini._WindowID]}catch(o){}var g=document.body.getElementsByTagName("iframe");if(g.length>0){var f=[];for(var d=0,a=g.length;d<a;d++){f.push(g[d])}for(var d=0,a=f.length;d<a;d++){try{var b=f[d];b._ondestroy=null;b.onload=function(){};jQuery(b).unbind("load");b.src="";try{b.contentWindow.document.write("");b.contentWindow.document.close()}catch(o){}if(b.parentNode){b.parentNode.removeChild(b)}}catch(n){}}}var j=mini.getComponents();for(var d=0,a=j.length;d<a;d++){var c=j[d];if(c.destroyed!==true){c.destroy(false)}}j.length=0;j=null;mini.un(window,"unload",mini_unload);mini.un(window,"load",mini_onload);mini.un(window,"resize",mini_onresize);mini.components={};mini.classes={};mini.uiClasses={};mini.uids={};mini._topWindow=null;window.mini=null;window.Owner=null;window.CloseOwnerWindow=null;try{}catch(n){}};mini.on(window,"unload",mini_unload);function __OnIFrameMouseDown(){jQuery(document).trigger("mousedown")}function __BindIFrames(){if(mini.isIE10){return}var g=document.getElementsByTagName("iframe");for(var b=0,a=g.length;b<a;b++){var c=g[b];try{if(c.contentWindow&&c.contentWindow.document&&!c.contentWindow.__mousedownbinded){c.contentWindow.__mousedownbinded=true;var f=c.contentWindow.document}}catch(d){}}}setInterval(function(){__BindIFrames()},1500);mini.zIndex=1000;mini.zindex=mini.getMaxZIndex=function(){return mini.zIndex++};function js_isTouchDevice(){try{document.createEvent("TouchEvent");return true}catch(a){return false}}function js_touchScroll(c){if(js_isTouchDevice()){var a=typeof c=="string"?document.getElementById(c):c;var b=0;a.addEventListener("touchstart",function(d){b=this.scrollTop+d.touches[0].pageY;d.preventDefault()},false);a.addEventListener("touchmove",function(d){this.scrollTop=b-d.touches[0].pageY;d.preventDefault()},false)}}mini._placeholder=function(b){b=mini.byId(b);if(!b||!isIE||isIE10||isIE11){return}function c(){var d=b._placeholder_label;if(!d){return}var f=b.getAttribute("placeholder");if(!f){f=b.placeholder}if(!b.value&&!b.disabled){d.innerHTML=f;d.style.display=""}else{d.style.display="none"}}if(b._placeholder){c();return}b._placeholder=true;var a=document.createElement("label");a.className="mini-placeholder-label";b.parentNode.appendChild(a);b._placeholder_label=a;a.onmousedown=function(){b.focus()};b.onpropertychange=function(d){d=d||window.event;if(d.propertyName=="value"){c()}};c();mini.on(b,"focus",function(d){if(!b.readOnly){a.style.display="none"}});mini.on(b,"blur",function(d){c()})};mini.ajax=function(a){if(!a.dataType){a.dataType="text"}return window.jQuery.ajax(a)};mini._evalAjaxData=function(ajaxData,scope){var obj=ajaxData;var t=typeof ajaxData;if(t=="string"){obj=eval("("+ajaxData+")");if(typeof obj=="function"){obj=obj.call(scope)}}return obj};if(!jQuery.fn.on){jQuery.fn.on=function(c,a,d,b){return this.delegate(a,c,d,b)}}if(typeof window.rootpath=="undefined"){rootpath="/"}mini.loadJS=function(a,b){if(!a){return}if(typeof b=="function"){return loadJS._async(a,b)}else{return loadJS._sync(a)}};mini.loadJS._js={};mini.loadJS._async=function(f,g){var c=mini.loadJS._js[f];if(!c){c=mini.loadJS._js[f]={create:false,loaded:false,callbacks:[]}}if(c.loaded){setTimeout(function(){g()},1);return}else{c.callbacks.push(g);if(c.create){return}}c.create=true;var a=document.getElementsByTagName("head")[0];var d=document.createElement("script");d.src=f;d.type="text/javascript";function b(){for(var j=0;j<c.callbacks.length;j++){var k=c.callbacks[j];if(k){k()}}c.callbacks.length=0}setTimeout(function(){if(document.all){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){b();c.loaded=true}}}else{d.onload=function(){b();c.loaded=true}}a.appendChild(d)},1);return d};mini.loadJS._sync=function(c){if(loadJS._js[c]){return}loadJS._js[c]={create:true,loaded:true,callbacks:[]};var a=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.type="text/javascript";b.text=loadText(c);a.appendChild(b);return b};mini.loadText=function(a){var j="";var c=document.all&&location.protocol=="file:";var b=null;if(c){b=new ActiveXObject("Microsoft.XMLHTTP")}else{if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLHTTP")}}}b.onreadystatechange=f;var g="_t="+new Date().getTime();if(a.indexOf("?")==-1){g="?"+g}else{g="&"+g}a+=g;b.open("GET",a,false);b.send(null);function f(){if(b.readyState==4){var d=c?0:200;if(b.status==d){j=b.responseText}else{}}}return j};mini.loadJSON=function(url){var text=loadText(url);var o=eval("("+text+")");return o};mini.loadCSS=function(c,d){if(!c){return}if(loadCSS._css[c]){return}var a=document.getElementsByTagName("head")[0];var b=document.createElement("link");if(d){b.id=d}b.href=c;b.rel="stylesheet";b.type="text/css";a.appendChild(b);return b};mini.loadCSS._css={};mini.innerHTML=function(b,a){if(typeof b=="string"){b=document.getElementById(b)}if(!b){return}a='<div style="display:none">&nbsp;</div>'+a;b.innerHTML=a;mini.__executeScripts(b);var c=b.firstChild};mini.__executeScripts=function(k){var a=k.getElementsByTagName("script");for(var c=0,b=a.length;c<b;c++){var j=a[c];var g=j.src;if(g){mini.loadJS(g)}else{var f=document.createElement("script");f.type="text/javascript";f.text=j.text;k.appendChild(f)}}for(var c=a.length-1;c>=0;c--){var j=a[c];j.parentNode.removeChild(j)}};mini.Hidden=function(){mini.Hidden.superclass.constructor.apply(this,arguments)};mini.extend(mini.Hidden,mini.Control,{_clearBorder:false,formField:true,value:"",uiCls:"mini-hidden",_create:function(){this.el=document.createElement("input");this.el.type="hidden";this.el.className="mini-hidden"},setName:function(a){this.name=a;this.el.name=a},setValue:function(b){if(b===null||b===undefined){b=""}this.value=b;if(mini.isDate(b)){var f=b.getFullYear();var a=b.getMonth()+1;var c=b.getDate();a=a<10?"0"+a:a;c=c<10?"0"+c:c;this.el.value=f+"-"+a+"-"+c}else{this.el.value=b}},getValue:function(){return this.value},getFormValue:function(){return this.el.value}});mini.regClass(mini.Hidden,"hidden");mini.Popup=function(){mini.Popup.superclass.constructor.apply(this,arguments);this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};mini.extend(mini.Popup,mini.Container,{_clearBorder:false,uiCls:"mini-popup",_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-popup";this._contentEl=this.el},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mouseover",this.__OnMouseOver,this)},this)},doLayout:function(){if(!this.canLayout()){return}mini.Popup.superclass.doLayout.call(this);this._doShadow();var d=this.el.childNodes;if(d){for(var b=0,a=d.length;b<a;b++){var c=d[b];mini.layout(c)}}},destroy:function(a){if(this.el){this.el.onmouseover=null}mini.un(document,"mousedown",this.__OnBodyMouseDown,this);mini.un(window,"resize",this.__OnWindowResize,this);if(this._modalEl){jQuery(this._modalEl).remove();this._modalEl=null}if(this.shadowEl){jQuery(this.shadowEl).remove();this.shadowEl=null}if(this._shim){jQuery(this._shim).remove();this._shim=null}mini.Popup.superclass.destroy.call(this,a)},setWidth:function(a){if(parseInt(a)==a){a+="px"}this.width=a;if(a.indexOf("px")!=-1){mini.setWidth(this.el,a)}else{this.el.style.width=a}this._sizeChanged()},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;if(a.indexOf("px")!=-1){mini.setHeight(this.el,a)}else{this.el.style.height=a}this._sizeChanged()},setBody:function(c){if(!c){return}if(!mini.isArray(c)){c=[c]}for(var b=0,a=c.length;b<a;b++){mini.append(this._contentEl,c[b])}},getAttrs:function(c){var a=mini.Popup.superclass.getAttrs.call(this,c);mini._ParseString(c,a,["popupEl","popupCls","showAction","hideAction","xAlign","yAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose"]);mini._ParseBool(c,a,["showModal","showShadow","allowDrag","allowResize"]);mini._ParseInt(c,a,["showDelay","hideDelay","xOffset","yOffset","minWidth","minHeight","maxWidth","maxHeight"]);var b=mini.getChildNodes(c,true);a.body=b;return a}});mini.regClass(mini.Popup,"popup");mini.Popup_prototype={isPopup:false,popupEl:null,popupCls:"",showAction:"mouseover",hideAction:"outerclick",showDelay:300,hideDelay:500,xAlign:"left",yAlign:"below",xOffset:0,yOffset:0,minWidth:50,minHeight:25,maxWidth:2000,maxHeight:2000,showModal:false,showShadow:true,modalStyle:"opacity:0.2",_dragCls:"mini-popup-drag",_resizeCls:"mini-popup-resize",allowDrag:false,allowResize:false,_unbindPopupEl:function(){if(!this.popupEl){return}mini.un(this.popupEl,"click",this.__OnLeftClick,this);mini.un(this.popupEl,"contextmenu",this.__OnRightClick,this);mini.un(this.popupEl,"mouseover",this.__OnMouseOver,this)},_bindPopupEl:function(){if(!this.popupEl){return}mini.on(this.popupEl,"click",this.__OnLeftClick,this);mini.on(this.popupEl,"contextmenu",this.__OnRightClick,this);mini.on(this.popupEl,"mouseover",this.__OnMouseOver,this)},doShow:function(c){var b={popupEl:this.popupEl,htmlEvent:c,cancel:false};this.fire("BeforeOpen",b);if(b.cancel==true){return}this.fire("opening",b);if(b.cancel==true){return}if(!this.popupEl){this.show()}else{var a={};if(c){a.xy=[c.pageX,c.pageY]}this.showAtEl(this.popupEl,a)}},doHide:function(b){var a={popupEl:this.popupEl,htmlEvent:b,cancel:false};this.fire("BeforeClose",a);if(a.cancel==true){return}this.close()},show:function(b,a){this.showAtPos(b,a)},showAtPos:function(a,d){this.render(document.body);if(!a){a="center"}if(!d){d="middle"}this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this._measureSize();var b=mini.getViewportBox();var c=mini.getBox(this.el);if(a=="left"){a=0}if(a=="center"){a=b.width/2-c.width/2}if(a=="right"){a=b.width-c.width}if(d=="top"){d=0}if(d=="middle"){d=b.y+b.height/2-c.height/2}if(d=="bottom"){d=b.height-c.height}if(a+c.width>b.right){a=b.right-c.width}if(d+c.height>b.bottom){d=b.bottom-c.height-20}this._Show(a,d)},_doModal:function(){jQuery(this._modalEl).remove();if(!this.showModal){return}if(this.visible==false){return}var b=document.documentElement;var c=parseInt(Math.max(document.body.scrollWidth,b?b.scrollWidth:0));var g=parseInt(Math.max(document.body.scrollHeight,b?b.scrollHeight:0));var d=mini.getViewportBox();var a=d.height;if(a<g){a=g}var f=d.width;if(f<c){f=c}this._modalEl=mini.append(document.body,'<div class="mini-modal"></div>');this._modalEl.style.height=a+"px";this._modalEl.style.width=f+"px";this._modalEl.style.zIndex=mini.getStyle(this.el,"zIndex")-1;mini.setStyle(this._modalEl,this.modalStyle)},_doShim:function(){if(!mini.isIE||!mini_useShims){return}if(!this._shimEl){var b="<iframe frameborder='0' style='position: absolute; z-index: -1; width: 0; height: 0; top: 0;left:0;scrolling:no;'></iframe>";this._shimEl=mini.append(document.body,b)}function a(){this._shimEl.style.display="";var g=mini.getBox(this.el);var f=this._shimEl.style;f.width=g.width+"px";f.height=g.height+"px";f.left=g.x+"px";f.top=g.y+"px";var d=mini.getStyle(this.el,"zIndex");if(!isNaN(d)){this._shimEl.style.zIndex=d-3}}this._shimEl.style.display="none";if(this._doShimTimer){clearTimeout(this._doShimTimer);this._doShimTimer=null}var c=this;this._doShimTimer=setTimeout(function(){c._doShimTimer=null;a.call(c)},20)},_doShadow:function(){if(!this.shadowEl){this.shadowEl=mini.append(document.body,'<div class="mini-shadow"></div>')}this.shadowEl.style.display=this.showShadow?"":"none";if(this.showShadow){function b(){this.shadowEl.style.display="";var f=mini.getBox(this.el);var d=this.shadowEl.style;d.width=f.width+"px";d.height=f.height+"px";d.left=f.x+"px";d.top=f.y+"px";var c=mini.getStyle(this.el,"zIndex");if(!isNaN(c)){this.shadowEl.style.zIndex=c-2}}this.shadowEl.style.display="none";if(this._doShadowTimer){clearTimeout(this._doShadowTimer);this._doShadowTimer=null}var a=this;this._doShadowTimer=setTimeout(function(){a._doShadowTimer=null;b.call(a)},20)}},_measureSize:function(){this.el.style.display="";var a=mini.getBox(this.el);if(a.width>this.maxWidth){mini.setWidth(this.el,this.maxWidth);a=mini.getBox(this.el)}if(a.height>this.maxHeight){mini.setHeight(this.el,this.maxHeight);a=mini.getBox(this.el)}if(a.width<this.minWidth){mini.setWidth(this.el,this.minWidth);a=mini.getBox(this.el)}if(a.height<this.minHeight){mini.setHeight(this.el,this.minHeight);a=mini.getBox(this.el)}},_getWindowOffset:function(a){return[0,0]},showAtEl:function(b,u){b=mini.byId(b);if(!b){return}if(!this.isRender()||this.el.parentNode!=document.body){this.render(document.body)}var k={atEl:b,popupEl:this.el,xAlign:this.xAlign,yAlign:this.yAlign,xOffset:this.xOffset,yOffset:this.yOffset,popupCls:this.popupCls};mini.copyTo(k,u);mini.addClass(b,k.popupCls);b.popupCls=k.popupCls;this._popupEl=b;this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.doLayout();this._measureSize();var l=mini.getViewportBox();var g=mini.getBox(this.el);var f=mini.getBox(b);var t=k.xy;var j=k.xAlign,s=k.yAlign;var p=l.width/2-g.width/2,o=0;if(t){p=t[0];o=t[1]}switch(k.xAlign){case"outleft":p=f.x-g.width;break;case"left":p=f.x;break;case"center":p=f.x+f.width/2-g.width/2;break;case"right":p=f.right-g.width;break;case"outright":p=f.right;break;default:break}switch(k.yAlign){case"above":o=f.y-g.height;break;case"top":o=f.y;break;case"middle":o=f.y+f.height/2-g.height/2;break;case"bottom":o=f.bottom-g.height;break;case"below":o=f.bottom;break;default:break}p=parseInt(p);o=parseInt(o);var q=this._getWindowOffset(u);if(k.outYAlign||k.outXAlign){if(k.outYAlign=="above"){if(o+g.height>l.bottom){var n=f.y-l.y;var a=l.bottom-f.bottom;if(n>a){o=f.y-g.height}}}if(k.outYAlign=="below"){if(o+g.height>l.bottom){var n=f.y-l.y;var a=l.bottom-f.bottom;if(n>a){o=f.y-g.height}}}if(k.outXAlign=="outleft"){if(p+g.width>l.right){var d=f.x-l.x;var r=l.right-f.right;if(d>r){p=f.x-g.width}}}if(k.outXAlign=="right"){if(p+g.width>l.right){p=f.right-g.width}}this._Show(p+q[0],o+q[1])}else{this.showAtPos(p+k.xOffset+q[0],o+k.yOffset+q[1])}},_Show:function(a,c){this.el.style.display="";this.el.style.zIndex=mini.getMaxZIndex();mini.setX(this.el,a);mini.setY(this.el,c);this.setVisible(true);if(this.hideAction=="mouseout"){mini.on(document,"mousemove",this.__OnBodyMouseMove,this)}var b=this;this._doShadow();this._doModal();this._doShim();mini.layoutIFrames(this.el);this.isPopup=true;mini.on(document,"mousedown",this.__OnBodyMouseDown,this);mini.on(window,"resize",this.__OnWindowResize,this);this.fire("Open")},open:function(){this.show()},close:function(){this.hide()},hide:function(){if(!this.el){return}if(this.popupEl){mini.removeClass(this.popupEl,this.popupEl.popupCls)}if(this._popupEl){mini.removeClass(this._popupEl,this._popupEl.popupCls)}this._popupEl=null;jQuery(this._modalEl).remove();if(this.shadowEl){this.shadowEl.style.display="none"}if(this._shimEl){this._shimEl.style.display="none"}mini.un(document,"mousemove",this.__OnBodyMouseMove,this);mini.un(document,"mousedown",this.__OnBodyMouseDown,this);mini.un(window,"resize",this.__OnWindowResize,this);this.setVisible(false);this.isPopup=false;this.fire("Close")},setPopupEl:function(a){a=mini.byId(a);if(!a){return}this._unbindPopupEl();this.popupEl=a;this._bindPopupEl()},setPopupCls:function(a){this.popupCls=a},setShowAction:function(a){this.showAction=a},setHideAction:function(a){this.hideAction=a},setShowDelay:function(a){this.showDelay=a},setHideDelay:function(a){this.hideDelay=a},setXAlign:function(a){this.xAlign=a},setYAlign:function(a){this.yAlign=a},setxOffset:function(a){a=parseInt(a);if(isNaN(a)){a=0}this.xOffset=a},setyOffset:function(a){a=parseInt(a);if(isNaN(a)){a=0}this.yOffset=a},setShowModal:function(a){this.showModal=a},setShowShadow:function(a){this.showShadow=a},setMinWidth:function(a){if(isNaN(a)){return}this.minWidth=a},setMinHeight:function(a){if(isNaN(a)){return}this.minHeight=a},setMaxWidth:function(a){if(isNaN(a)){return}this.maxWidth=a},setMaxHeight:function(a){if(isNaN(a)){return}this.maxHeight=a},setAllowDrag:function(a){this.allowDrag=a;mini.removeClass(this.el,this._dragCls);if(a){mini.addClass(this.el,this._dragCls)}},setAllowResize:function(a){this.allowResize=a;mini.removeClass(this.el,this._resizeCls);if(a){mini.addClass(this.el,this._resizeCls)}},__OnLeftClick:function(b){if(this._inAniming){return}if(this.showAction!="leftclick"){return}var a=jQuery(this.popupEl).attr("allowPopup");if(String(a)=="false"){return}this.doShow(b)},__OnRightClick:function(b){if(this._inAniming){return}if(this.showAction!="rightclick"){return}var a=jQuery(this.popupEl).attr("allowPopup");if(String(a)=="false"){return}b.preventDefault();this.doShow(b)},__OnMouseOver:function(c){if(this._inAniming){return}if(this.showAction!="mouseover"){return}var a=jQuery(this.popupEl).attr("allowPopup");if(String(a)=="false"){return}clearTimeout(this._hideTimer);this._hideTimer=null;if(this.isPopup){return}var b=this;this._showTimer=setTimeout(function(){b.doShow(c)},this.showDelay)},__OnBodyMouseMove:function(a){if(this.hideAction!="mouseout"){return}this._tryHide(a)},__OnBodyMouseDown:function(a){if(this.hideAction!="outerclick"){return}if(!this.isPopup){return}if(this.within(a)||(this.popupEl&&mini.isAncestor(this.popupEl,a.target))){}else{this.doHide(a)}},_tryHide:function(b){if(mini.isAncestor(this.el,b.target)||(this.popupEl&&mini.isAncestor(this.popupEl,b.target))){}else{clearTimeout(this._showTimer);this._showTimer=null;if(this._hideTimer){return}var a=this;this._hideTimer=setTimeout(function(){a.doHide(b)},this.hideDelay)}},__OnWindowResize:function(a){if(this.isDisplay()&&!mini.isIE6){this._doModal()}},within:function(f){if(mini.isAncestor(this.el,f.target)){return true}var b=mini.getChildControls(this);for(var d=0,a=b.length;d<a;d++){var g=b[d];if(g.within(f)){return true}}return false}};mini.copyTo(mini.Popup.prototype,mini.Popup_prototype);mini.Button=function(){mini.Button.superclass.constructor.apply(this,arguments)};mini.extend(mini.Button,mini.Control,{text:"",iconCls:"",iconStyle:"",plain:false,checkOnClick:false,checked:false,groupName:"",img:"",_plainCls:"mini-button-plain",_hoverCls:"mini-button-hover",_pressedCls:"mini-button-pressed",_checkedCls:"mini-button-checked",_disabledCls:"mini-button-disabled",allowCls:"",_clearBorder:false,set:function(a){if(typeof a=="string"){return this}this._allowUpdate=a.text||a.iconStyle||a.iconCls||a.iconPosition;mini.Button.superclass.set.call(this,a);if(this._allowUpdate===false){this._allowUpdate=true;this.doUpdate()}return this},uiCls:"mini-button",_create:function(){this.el=document.createElement("a");this.el.className="mini-button";this.el.hideFocus=true;this.el.href="javascript:void(0)";this.doUpdate()},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);mini_onOne(this.el,"click",this.__OnClick,this)},this)},destroy:function(a){if(this.el){this.el.onclick=null;this.el.onmousedown=null}if(this.menu){this.menu.owner=null}this.menu=null;mini.Button.superclass.destroy.call(this,a)},doUpdate:function(){if(this._allowUpdate===false){return}var b="",f=this.text;var a=this.iconStyle||this.iconCls||this.img;if(a&&f){b=" mini-button-icon "+this.iconCls}else{if(a&&f===""){b=" mini-button-iconOnly "+this.iconCls;f="&nbsp;"}else{if(f==""){f="&nbsp;"}}}var d=this.iconStyle||"";if(!d&&this.img){d="background-image:url("+this.img+")"}var c='<span class="mini-button-text '+b+'" style="'+d+'">'+f+"</span>";if(this.allowCls){c=c+'<span class="mini-button-allow '+this.allowCls+'"></span>'}this.el.innerHTML=c},href:"",setHref:function(b){this.href=b;this.el.href=b;var a=this.el;setTimeout(function(){a.onclick=null},100)},getHref:function(){return this.href},target:"",setTarget:function(a){this.target=a;this.el.target=a},getTarget:function(){return this.target},setText:function(a){if(this.text!=a){this.text=a;this.doUpdate()}},getText:function(){return this.text},setIconCls:function(a){this.iconCls=a;this.doUpdate()},getIconCls:function(){return this.iconCls},setIconStyle:function(a){this.iconStyle=a;this.doUpdate()},getIconStyle:function(){return this.iconStyle},setImg:function(a){this.img=a;this.doUpdate()},getImg:function(){return this.img},setIconPosition:function(a){this.iconPosition="left";this.doUpdate()},getIconPosition:function(){return this.iconPosition},setPlain:function(a){this.plain=a;if(a){this.addCls(this._plainCls)}else{this.removeCls(this._plainCls)}},getPlain:function(){return this.plain},setGroupName:function(a){this.groupName=a},getGroupName:function(){return this.groupName},setCheckOnClick:function(a){this.checkOnClick=a},getCheckOnClick:function(){return this.checkOnClick},setChecked:function(b){var a=this.checked!=b;this.checked=b;if(b){this.addCls(this._checkedCls)}else{this.removeCls(this._checkedCls)}if(a){this.fire("CheckedChanged")}},getChecked:function(){return this.checked},doClick:function(){this.__OnClick(null)},__OnClick:function(f){if(!this.href&&f){f.preventDefault()}if(this.readOnly||this.enabled==false){return}this.focus();if(this.checkOnClick){if(this.groupName){var g=this.groupName;var d=mini.findControls(function(j){if(j.type=="button"&&j.groupName==g){return true}});if(d.length>0){for(var c=0,a=d.length;c<a;c++){var b=d[c];if(b!=this){b.setChecked(false)}}this.setChecked(true)}else{this.setChecked(!this.checked)}}else{this.setChecked(!this.checked)}}this.fire("click",{htmlEvent:f})},__OnMouseDown:function(a){if(this.isReadOnly()){return}this.addCls(this._pressedCls);mini.on(document,"mouseup",this.__OnDocMouseUp,this)},__OnDocMouseUp:function(a){this.removeCls(this._pressedCls);mini.un(document,"mouseup",this.__OnDocMouseUp,this)},onClick:function(b,a){this.on("click",b,a)},getAttrs:function(b){var a=mini.Button.superclass.getAttrs.call(this,b);a.text=b.innerHTML;mini._ParseString(b,a,["text","href","iconCls","iconStyle","iconPosition","groupName","menu","onclick","oncheckedchanged","target","img"]);mini._ParseBool(b,a,["plain","checkOnClick","checked"]);return a}});mini.regClass(mini.Button,"button");mini.MenuButton=function(){mini.MenuButton.superclass.constructor.apply(this,arguments)};mini.extend(mini.MenuButton,mini.Button,{uiCls:"mini-menubutton",allowCls:"mini-button-menu",setMenu:function(b){if(mini.isArray(b)){b={type:"menu",items:b}}if(typeof b=="string"){var a=mini.byId(b);if(!a){return}mini.parse(b);b=mini.get(b)}if(this.menu!==b){this.menu=mini.getAndCreate(b);this.menu.setPopupEl(this.el);this.menu.setPopupCls("mini-button-popup");this.menu.setShowAction("leftclick");this.menu.setHideAction("outerclick");this.menu.setXAlign("left");this.menu.setYAlign("below");this.menu.hide();this.menu.owner=this}},setEnabled:function(a){this.enabled=a;if(a){this.removeCls(this._disabledCls)}else{this.addCls(this._disabledCls)}jQuery(this.el).attr("allowPopup",!!a)}});mini.regClass(mini.MenuButton,"menubutton");mini.SplitButton=function(){mini.SplitButton.superclass.constructor.apply(this,arguments)};mini.extend(mini.SplitButton,mini.MenuButton,{uiCls:"mini-splitbutton",allowCls:"mini-button-split"});mini.regClass(mini.SplitButton,"splitbutton");mini.CheckBox=function(){mini.CheckBox.superclass.constructor.apply(this,arguments)};mini.extend(mini.CheckBox,mini.Control,{formField:true,_clearText:false,text:"",checked:false,defaultValue:false,trueValue:true,falseValue:false,uiCls:"mini-checkbox",_create:function(){var a=this.uid+"$check";this.el=document.createElement("span");this.el.className="mini-checkbox";this.el.innerHTML='<input id="'+a+'" name="'+this.id+'" type="checkbox" class="mini-checkbox-check"><label for="'+a+'" onclick="return false;">'+this.text+"</label>";this._checkEl=this.el.firstChild;this._labelEl=this.el.lastChild},destroy:function(a){if(this._checkEl){this._checkEl.onmouseup=null;this._checkEl.onclick=null;this._checkEl=null}mini.CheckBox.superclass.destroy.call(this,a)},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"click",this.__onClick,this);this._checkEl.onmouseup=function(){return false};var a=this;this._checkEl.onclick=function(){if(a.isReadOnly()){return false}}},this)},setName:function(a){this.name=a;mini.setAttr(this._checkEl,"name",this.name)},setText:function(a){if(this.text!==a){this.text=a;this._labelEl.innerHTML=a}},getText:function(){return this.text},setChecked:function(a){if(a===true){a=true}else{if(a==this.trueValue){a=true}else{if(a=="true"){a=true}else{if(a===1){a=true}else{if(a=="Y"){a=true}else{a=false}}}}}if(this.checked!==a){this.checked=!!a;this._checkEl.checked=this.checked;this.value=this.getValue()}},getChecked:function(){return this.checked},setValue:function(a){if(this.checked!==a){this.setChecked(a);this.value=this.getValue()}},getValue:function(){return String(this.checked==true?this.trueValue:this.falseValue)},getFormValue:function(){return this.getValue()},setTrueValue:function(a){this._checkEl.value=a;this.trueValue=a},getTrueValue:function(){return this.trueValue},setFalseValue:function(a){this.falseValue=a},getFalseValue:function(){return this.falseValue},__onClick:function(a){if(this.isReadOnly()){return}this.setChecked(!this.checked);this.fire("checkedchanged",{checked:this.checked});this.fire("valuechanged",{value:this.getValue()});this.fire("click",a,this)},getAttrs:function(c){var b=mini.CheckBox.superclass.getAttrs.call(this,c);var g=jQuery(c);b.text=c.innerHTML;mini._ParseString(c,b,["text","oncheckedchanged","onclick","onvaluechanged"]);mini._ParseBool(c,b,["enabled"]);var f=mini.getAttr(c,"checked");if(f){b.checked=(f=="true"||f=="checked")?true:false}var a=g.attr("trueValue");if(a){b.trueValue=a;a=parseInt(a);if(!isNaN(a)){b.trueValue=a}}var d=g.attr("falseValue");if(d){b.falseValue=d;d=parseInt(d);if(!isNaN(d)){b.falseValue=d}}return b}});mini.regClass(mini.CheckBox,"checkbox");mini.ButtonEdit=function(){mini.ButtonEdit.superclass.constructor.apply(this,arguments);var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}if(this.enabled==false){this.addCls(this._disabledCls)}if(a){this.addCls(this._readOnlyCls)}if(this.required){this.addCls(this._requiredCls)}};mini.extend(mini.ButtonEdit,mini.ValidatorBase,{name:"",formField:true,selectOnFocus:false,showButton:true,showClose:false,emptyText:"",defaultValue:"",defaultText:"",value:"",text:"",maxLength:1000,minLength:0,height:21,inputAsValue:false,allowInput:true,_noInputCls:"mini-buttonedit-noInput",_readOnlyCls:"mini-buttonedit-readOnly",_disabledCls:"mini-buttonedit-disabled",_emptyCls:"mini-buttonedit-empty",_focusCls:"mini-buttonedit-focus",_buttonCls:"mini-buttonedit-button",_buttonHoverCls:"mini-buttonedit-button-hover",_buttonPressedCls:"mini-buttonedit-button-pressed",_closeCls:"mini-buttonedit-close",set:function(b){if(typeof b=="string"){return this}var a=b.value;delete b.value;var c=b.text;delete b.text;this._allowUpdate=!(b.enabled==false||b.allowInput==false||b.readOnly);mini.ButtonEdit.superclass.set.call(this,b);if(this._allowUpdate===false){this._allowUpdate=true;this.doUpdate()}if(!mini.isNull(c)){this.setText(c)}if(!mini.isNull(a)){this.setValue(a)}return this},uiCls:"mini-buttonedit",_getButtonsHTML:function(){var a='<span class="mini-buttonedit-close"></span>'+this._getButtonHtml();return'<span class="mini-buttonedit-buttons">'+a+"</span>"},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-buttonedit-icon"></span></span>'},_create:function(){this.el=document.createElement("span");this.el.className="mini-buttonedit";var a=this._getButtonsHTML();this.el.innerHTML='<span class="mini-buttonedit-border"><input type="input" class="mini-buttonedit-input" autocomplete="off"/>'+a+'</span><input name="'+this.name+'" type="hidden"/>';this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this.el.lastChild;this._buttonsEl=this._borderEl.lastChild;this._buttonEl=this._buttonsEl.lastChild;this._closeEl=this._buttonEl.previousSibling;this._doEmpty()},destroy:function(a){if(this.el){this.el.onmousedown=null;this.el.onmousewheel=null;this.el.onmouseover=null;this.el.onmouseout=null}if(this._textEl){this._textEl.onchange=null;this._textEl.onfocus=null;mini.clearEvent(this._textEl);this._textEl=null}mini.ButtonEdit.superclass.destroy.call(this,a)},_deferSetText:true,_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);mini_onOne(this._textEl,"focus",this.__OnFocus,this);mini_onOne(this._textEl,"change",this.__OnInputTextChanged,this);var a=this.text;this.text=null;if(this.el){if(this._deferSetText){this.setText(a)}}},this)},_inputEventsInited:false,_initInputEvents:function(){if(this._inputEventsInited){return}this._inputEventsInited=true;mini.on(this.el,"click",this.__OnClick,this);mini.on(this._textEl,"blur",this.__OnBlur,this);mini.on(this._textEl,"keydown",this.__OnInputKeyDown,this);mini.on(this._textEl,"keyup",this.__OnInputKeyUp,this);mini.on(this._textEl,"keypress",this.__OnInputKeyPress,this)},_buttonWidth:20,_closeWidth:20,_doInputLayout:function(b){this._buttonEl.style.display=this.showButton?"inline-block":"none";if(this._closeEl){this._closeEl.style.display=this.showClose?"inline-block":"none"}var a=this._buttonsEl.offsetWidth+2;if(a==2){this._noLayout=true}else{this._noLayout=false}this._borderEl.style.paddingRight=a+"px";if(b!==false){this.doLayout()}},doLayout:function(){if(this._noLayout){this._doInputLayout(false)}if(this._doLabelLayout){this._labelLayout()}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a},focus:function(){try{this._textEl.focus();var a=this;setTimeout(function(){if(a._focused){a._textEl.focus()}},10)}catch(b){}},blur:function(){try{this._textEl.blur()}catch(a){}},selectText:function(){this._textEl.select()},getTextEl:function(){return this._textEl},setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},setText:function(b){if(b===null||b===undefined){b=""}var a=this.text!==b;this.text=b;this._textEl.value=b;this._doEmpty()},getText:function(){var a=this._textEl.value;return a},setValue:function(b){if(b===null||b===undefined){b=""}var a=this.value!==b;this.value=b;this._valueEl.value=this.getFormValue()},getValue:function(){return this.value},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},_doEmpty:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){mini._placeholder(this._textEl)}},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this._doEmpty()}},getEmptyText:function(){return this.emptyText},setMaxLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.maxLength=a;this._textEl.maxLength=a},getMaxLength:function(){return this.maxLength},setMinLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.minLength=a},getMinLength:function(){return this.minLength},setEnabled:function(a){mini.ButtonEdit.superclass.setEnabled.call(this,a)},_doReadOnly:function(){var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}else{this._textEl.readOnly=false}if(a){this.addCls(this._readOnlyCls)}else{this.removeCls(this._readOnlyCls)}if(this.allowInput){this.removeCls(this._noInputCls)}else{this.addCls(this._noInputCls)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},setAllowInput:function(a){this.allowInput=a;this._doReadOnly()},getAllowInput:function(){return this.allowInput},setInputAsValue:function(a){this.inputAsValue=a},getInputAsValue:function(){return this.inputAsValue},_errorIconEl:null,getErrorIconEl:function(){if(!this._errorIconEl){this._errorIconEl=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){var a=this._errorIconEl;jQuery(a).remove()}this._errorIconEl=null},__OnClick:function(b){if(this.enabled==false){return}this.fire("click",{htmlEvent:b});if(this.isReadOnly()){return}if(!mini.isAncestor(this._borderEl,b.target)){return}var a=new Date();if(mini.isAncestor(this._buttonEl,b.target)){this._OnButtonClick(b)}if(mini.findParent(b.target,this._closeCls)){this.fire("closeclick",{htmlEvent:b})}},__OnMouseDown:function(c){if(this.isReadOnly()||this.enabled==false){return}if(!mini.isAncestor(this._borderEl,c.target)){return}if(!mini.isAncestor(this._textEl,c.target)){this._clickTarget=c.target;var b=this;setTimeout(function(){b.focus();mini.selectRange(b._textEl,1000,1000)},1);if(mini.isAncestor(this._buttonEl,c.target)){var a=mini.findParent(c.target,"mini-buttonedit-up");var d=mini.findParent(c.target,"mini-buttonedit-down");if(a){mini.addClass(a,this._buttonPressedCls);this._OnButtonMouseDown(c,"up")}else{if(d){mini.addClass(d,this._buttonPressedCls);this._OnButtonMouseDown(c,"down")}else{mini.addClass(this._buttonEl,this._buttonPressedCls);this._OnButtonMouseDown(c)}}mini.on(document,"mouseup",this.__OnDocMouseUp,this)}}},__OnDocMouseUp:function(b){this._clickTarget=null;var a=this;setTimeout(function(){var f=a._buttonEl.getElementsByTagName("*");for(var d=0,c=f.length;d<c;d++){mini.removeClass(f[d],a._buttonPressedCls)}mini.removeClass(a._buttonEl,a._buttonPressedCls);mini.removeClass(a.el,a._pressedCls)},80);mini.un(document,"mouseup",this.__OnDocMouseUp,this)},__OnFocus:function(a){this.doUpdate();this._initInputEvents();if(this.isReadOnly()){return}this._focused=true;this.addCls(this._focusCls);if(this.selectOnFocus){this.selectText()}this.fire("focus",{htmlEvent:a})},__doFocusCls:function(){if(this._focused==false){this.removeCls(this._focusCls)}},__fireBlur:function(c){var a=this;function b(){if(a._focused==false){a.removeCls(a._focusCls);if(a.validateOnLeave&&a.isEditable()){a._tryValidate()}this.fire("blur",{htmlEvent:c})}}setTimeout(function(){b.call(a)},2)},__OnBlur:function(b){var a=this;a._focused=false;setTimeout(function(){a.__fireBlur(b)},10)},__OnInputKeyDown:function(d){var a={htmlEvent:d};this.fire("keydown",a);if(d.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(d.keyCode==27||d.keyCode==13||d.keyCode==9){var c=this;c.__OnInputTextChanged(null);if(d.keyCode==13){var b=this;b.fire("enter",a)}}if(d.keyCode==27){d.preventDefault()}},__OnInputTextChanged:function(){var a=this._textEl.value;if(a==this.text){return}var b=this.getValue();this.setText(a);this.setValue(a);if(b!==this.getFormValue()){this._OnValueChanged()}},__OnInputKeyUp:function(a){this.fire("keyup",{htmlEvent:a})},__OnInputKeyPress:function(a){this.fire("keypress",{htmlEvent:a})},_OnButtonClick:function(a){var b={htmlEvent:a,cancel:false};this.fire("beforebuttonclick",b);if(b.cancel==true){return}this.fire("buttonclick",b)},_OnButtonMouseDown:function(a,b){this.focus();this.addCls(this._focusCls);this.fire("buttonmousedown",{htmlEvent:a,spinType:b})},onButtonClick:function(b,a){this.on("buttonclick",b,a)},onButtonMouseDown:function(b,a){this.on("buttonmousedown",b,a)},onTextChanged:function(b,a){this.on("textchanged",b,a)},textName:"",setTextName:function(a){this.textName=a;if(this._textEl){mini.setAttr(this._textEl,"name",this.textName)}},getTextName:function(){return this.textName},setSelectOnFocus:function(a){this.selectOnFocus=a},getSelectOnFocus:function(a){return this.selectOnFocus},setShowClose:function(a){this.showClose=a;this._doInputLayout()},getShowClose:function(a){return this.showClose},setShowButton:function(a){this.showButton=a;this._doInputLayout()},getShowButton:function(){return this.showButton},inputStyle:"",setInputStyle:function(a){this.inputStyle=a;mini.setStyle(this._textEl,a)},getAttrs:function(b){var a=mini.ButtonEdit.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["value","text","textName","emptyText","inputStyle","defaultText","onenter","onkeydown","onkeyup","onkeypress","onbuttonclick","onbuttonmousedown","ontextchanged","onfocus","onblur","oncloseclick","onclick"]);mini._ParseBool(b,a,["allowInput","inputAsValue","selectOnFocus","showClose","showButton"]);mini._ParseInt(b,a,["maxLength","minLength"]);return a}});mini.regClass(mini.ButtonEdit,"buttonedit");mini.TextBox=function(){mini.TextBox.superclass.constructor.apply(this,arguments)};mini.extend(mini.TextBox,mini.ValidatorBase,{name:"",formField:true,selectOnFocus:false,allowInput:true,minWidth:10,minHeight:15,maxLength:5000,emptyText:"",text:"",value:"",defaultValue:"",height:21,_emptyCls:"mini-textbox-empty",_focusCls:"mini-textbox-focus",_disabledCls:"mini-textbox-disabled",uiCls:"mini-textbox",_InputType:"text",_create:function(){var a='<input  type="'+this._InputType+'" class="mini-textbox-input" autocomplete="off"/>';if(this._InputType=="textarea"){a='<textarea  class="mini-textbox-input" autocomplete="off"/></textarea>'}a='<span class="mini-textbox-border">'+a+"</span>";a+='<input type="hidden"/>';this.el=document.createElement("span");this.el.className="mini-textbox";this.el.innerHTML=a;this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this._borderEl.lastChild;this._doEmpty()},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this._textEl,"drop",this.__OnDropText,this);mini_onOne(this._textEl,"change",this.__OnInputTextChanged,this);mini_onOne(this._textEl,"focus",this.__OnFocus,this);mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);var a=this.value;this.value=null;if(this.el){this.setValue(a)}},this);this.on("validation",this.__OnValidation,this)},_inputEventsInited:false,_initInputEvents:function(){if(this._inputEventsInited){return}this._inputEventsInited=true;mini.on(this._textEl,"blur",this.__OnBlur,this);mini.on(this._textEl,"keydown",this.__OnInputKeyDown,this);mini.on(this._textEl,"keyup",this.__OnInputKeyUp,this);mini.on(this._textEl,"keypress",this.__OnInputKeyPress,this);mini_onOne(this.el,"click",this.__OnClick,this);mini_onOne(this.el,"dblclick",this.__OndblClick,this)},destroy:function(a){if(this.el){this.el.onmousedown=null}if(this._textEl){this._textEl.ondrop=null;this._textEl.onchange=null;this._textEl.onfocus=null;mini.clearEvent(this._textEl);this._textEl=null}if(this._valueEl){mini.clearEvent(this._valueEl);this._valueEl=null}mini.TextBox.superclass.destroy.call(this,a)},doLayout:function(){if(this._doLabelLayout){this._labelLayout()}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a;if(this._InputType=="textarea"){this.el.style.height=a;this.doLayout()}},setName:function(a){if(this.name!=a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}}},setValue:function(a){if(a===null||a===undefined){a=""}a=String(a);if(a.length>this.maxLength){a=a.substring(0,this.maxLength)}if(this.value!==a){this.value=a;this._valueEl.value=this._textEl.value=a;this._doEmpty()}},getValue:function(){return this.value},setDictType:function(a){this.dictType=a},getDictType:function(){return this.dictType},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},setAllowInput:function(a){if(this.allowInput!=a){this.allowInput=a;this.doUpdate()}},getAllowInput:function(){return this.allowInput},_placeholdered:false,_doEmpty:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){mini._placeholder(this._textEl)}},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this._doEmpty()}},getEmptyText:function(){return this.emptyText},setMaxLength:function(a){this.maxLength=a;mini.setAttr(this._textEl,"maxLength",a);if(this._InputType=="textarea"&&mini.isIE){mini.on(this._textEl,"keyup",this.__OnMaxLengthKeyUp,this);mini.on(this._textEl,"keypress",this.__OnMaxLengthKeyUp,this);mini.on(this._textEl,"paste",this.__OnPaste,this)}},__OnPaste:function(b){var a=this;setTimeout(function(){var c=a._textEl.value;if(c.length>a.maxLength){a._textEl.value=c.substring(0,a.maxLength)}},0)},__OnMaxLengthKeyUp:function(a){if(this._textEl.value.length>=this.maxLength){this.__OnPaste(a);a.preventDefault()}},getMaxLength:function(){return this.maxLength},setReadOnly:function(a){if(this.readOnly!=a){this.readOnly=a;this.doUpdate()}},setEnabled:function(a){if(this.enabled!=a){this.enabled=a;this.doUpdate()}},doUpdate:function(){if(this.enabled){this.removeCls(this._disabledCls)}else{this.addCls(this._disabledCls)}if(this.isReadOnly()||this.allowInput==false){this._textEl.readOnly=true;mini.addClass(this.el,"mini-textbox-readOnly")}else{this._textEl.readOnly=false;mini.removeClass(this.el,"mini-textbox-readOnly")}if(this.required){this.addCls(this._requiredCls)}else{this.removeCls(this._requiredCls)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},focus:function(){var a=this;setTimeout(function(){try{a._textEl.focus();if(mini.isIE){var c=a._textEl.createTextRange();c.collapse(false);c.select()}}catch(b){}},10)},blur:function(){try{this._textEl.blur()}catch(a){}},selectText:function(){var b=this;function a(){try{b._textEl.select()}catch(c){}}a();setTimeout(function(){a()},30)},getTextEl:function(){return this._textEl},getInputText:function(){return this._textEl.value},setSelectOnFocus:function(a){this.selectOnFocus=a},getSelectOnFocus:function(a){return this.selectOnFocus},_errorIconEl:null,getErrorIconEl:function(){if(!this._errorIconEl){this._errorIconEl=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){var a=this._errorIconEl;jQuery(a).remove()}this._errorIconEl=null},__OnClick:function(a){this.fire("click",{htmlEvent:a})},__OndblClick:function(a){this.fire("dblclick",{htmlEvent:a})},__OnMouseDown:function(b){var a=this;if(!mini.isAncestor(this._textEl,b.target)){setTimeout(function(){a.focus();mini.selectRange(a._textEl,1000,1000)},1)}else{setTimeout(function(){try{a._textEl.focus()}catch(c){}},1)}},__OnInputTextChanged:function(c,a){var b=this.value;this.setValue(this._textEl.value);if(b!==this.getValue()||a===true){this._OnValueChanged()}},__OnDropText:function(b){var a=this;setTimeout(function(){a.__OnInputTextChanged(b)},0)},__OnInputKeyDown:function(c){var a={htmlEvent:c};this.fire("keydown",a);if(c.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(c.keyCode==27||c.keyCode==13||c.keyCode==9){if(this._InputType=="textarea"&&c.keyCode==13){}else{this.__OnInputTextChanged(null);if(c.keyCode==13){var b=this;b.fire("enter",a)}}}if(c.keyCode==27){c.preventDefault()}},__OnInputKeyUp:function(a){this.fire("keyup",{htmlEvent:a})},__OnInputKeyPress:function(a){this.fire("keypress",{htmlEvent:a})},__OnFocus:function(a){this.doUpdate();if(this.isReadOnly()){return}this._focused=true;this.addCls(this._focusCls);this._initInputEvents();if(this.selectOnFocus){this.selectText()}this.fire("focus",{htmlEvent:a})},__OnBlur:function(b){this._focused=false;var a=this;setTimeout(function(){if(a._focused==false){a.removeCls(a._focusCls)}},2);this.fire("blur",{htmlEvent:b});if(this.validateOnLeave&&this.isEditable()){this._tryValidate()}},inputStyle:"",setInputStyle:function(a){this.inputStyle=a;mini.setStyle(this._textEl,a)},getAttrs:function(b){var a=mini.TextBox.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["value","text","emptyText","inputStyle","onenter","onkeydown","onkeyup","onkeypress","onclick","ondblclick","maxLengthErrorText","minLengthErrorText","onfocus","onblur","vtype","emailErrorText","urlErrorText","floatErrorText","intErrorText","dateErrorText","minErrorText","maxErrorText","rangeLengthErrorText","rangeErrorText","rangeCharErrorText","dictType"]);mini._ParseBool(b,a,["allowInput","selectOnFocus"]);mini._ParseInt(b,a,["maxLength","minLength","minHeight","minWidth"]);return a},vtype:"",setVtype:function(a){this.vtype=a},getVtype:function(){return this.vtype},__OnValidation:function(a){if(a.isValid==false){return}mini._ValidateVType(this.vtype,a.value,a,this)},setEmailErrorText:function(a){this.emailErrorText=a},getEmailErrorText:function(){return this.emailErrorText},setUrlErrorText:function(a){this.urlErrorText=a},getUrlErrorText:function(){return this.urlErrorText},setFloatErrorText:function(a){this.floatErrorText=a},getFloatErrorText:function(){return this.floatErrorText},setIntErrorText:function(a){this.intErrorText=a},getIntErrorText:function(){return this.intErrorText},setDateErrorText:function(a){this.dateErrorText=a},getDateErrorText:function(){return this.dateErrorText},setMaxLengthErrorText:function(a){this.maxLengthErrorText=a},getMaxLengthErrorText:function(){return this.maxLengthErrorText},setMinLengthErrorText:function(a){this.minLengthErrorText=a},getMinLengthErrorText:function(){return this.minLengthErrorText},setMaxErrorText:function(a){this.maxErrorText=a},getMaxErrorText:function(){return this.maxErrorText},setMinErrorText:function(a){this.minErrorText=a},getMinErrorText:function(){return this.minErrorText},setRangeLengthErrorText:function(a){this.rangeLengthErrorText=a},getRangeLengthErrorText:function(){return this.rangeLengthErrorText},setRangeCharErrorText:function(a){this.rangeCharErrorText=a},getRangeCharErrorText:function(){return this.rangeCharErrorText},setRangeErrorText:function(a){this.rangeErrorText=a},getRangeErrorText:function(){return this.rangeErrorText}});mini.regClass(mini.TextBox,"textbox");mini.Password=function(){mini.Password.superclass.constructor.apply(this,arguments)};mini.extend(mini.Password,mini.TextBox,{uiCls:"mini-password",_InputType:"password",setEmptyText:function(a){this.emptyText=""},getValue:function(){return this._textEl.value}});mini.regClass(mini.Password,"password");mini.TextArea=function(){mini.TextArea.superclass.constructor.apply(this,arguments)};mini.extend(mini.TextArea,mini.TextBox,{maxLength:10000000,height:"",minHeight:50,_InputType:"textarea",uiCls:"mini-textarea",doLayout:function(){if(!this.canLayout()){return}mini.TextArea.superclass.doLayout.call(this);var a=mini.getHeight(this.el);if(mini.isIE6){mini.setHeight(this._borderEl,a)}a-=2;if(a<0){a=0}this._textEl.style.height=a+"px"}});mini.regClass(mini.TextArea,"textarea");mini.PopupEdit=function(){mini.PopupEdit.superclass.constructor.apply(this,arguments);this._createPopup();this.el.className+=" mini-popupedit"};mini.extend(mini.PopupEdit,mini.ButtonEdit,{uiCls:"mini-popupedit",popup:null,popupCls:"mini-buttonedit-popup",_hoverCls:"mini-buttonedit-hover",_pressedCls:"mini-buttonedit-pressed",_destroyPopup:true,destroy:function(a){if(this.isShowPopup()){this.hidePopup()}if(this.popup){if(this._destroyPopup){this.popup.destroy()}this.popup=null}if(this._popupInner){this._popupInner.owner=null;this._popupInner=null}mini.PopupEdit.superclass.destroy.call(this,a)},_initEvents:function(){mini.PopupEdit.superclass._initEvents.call(this);mini._BindEvents(function(){mini_onOne(this.el,"mouseover",this.__OnMouseOver,this);mini_onOne(this.el,"mouseout",this.__OnMouseOut,this)},this)},_initButtons:function(){this.buttons=[];var a=this.createButton({cls:"mini-buttonedit-popup",iconCls:"mini-buttonedit-icons-popup",name:"popup"});this.buttons.push(a)},__OnBlur:function(a){this._focused=false;if(this._clickTarget&&mini.isAncestor(this.el,this._clickTarget)){return}if(this.isShowPopup()){return}mini.PopupEdit.superclass.__OnBlur.call(this,a)},__OnMouseOver:function(a){if(this.isReadOnly()||this.allowInput){return}if(mini.findParent(a.target,"mini-buttonedit-border")){this.addCls(this._hoverCls)}},__OnMouseOut:function(a){if(this.isReadOnly()||this.allowInput){return}this.removeCls(this._hoverCls)},__OnMouseDown:function(a){if(this.isReadOnly()){return}mini.PopupEdit.superclass.__OnMouseDown.call(this,a);if(this.allowInput==false&&mini.findParent(a.target,"mini-buttonedit-border")){mini.addClass(this.el,this._pressedCls);mini.on(document,"mouseup",this.__OnDocMouseUp,this)}},__OnInputKeyDown:function(a){this.fire("keydown",{htmlEvent:a});if(a.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(a.keyCode==9){this.hidePopup();return}if(a.keyCode==27){this.hidePopup();return}if(a.keyCode==13){this.fire("enter")}if(this.isShowPopup()){if(a.keyCode==13||a.keyCode==27){a.stopPropagation()}}},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this.popup.within(a)){return true}return false},popupWidth:"100%",popupMinWidth:50,popupMaxWidth:2000,popupHeight:"",popupMinHeight:30,popupMaxHeight:2000,setPopup:function(a){if(typeof a=="string"){mini.parse(a);a=mini.get(a)}var b=mini.getAndCreate(a);if(!b){return}b.setVisible(false);this._popupInner=b;b.owner=this;b.on("beforebuttonclick",this.__OnPopupButtonClick,this)},getPopup:function(){if(!this.popup){this._createPopup()}return this.popup},_createPopup:function(){this.popup=new mini.Popup();this.popup.setShowAction("none");this.popup.setHideAction("outerclick");this.popup.setPopupEl(this.el);this.popup.on("BeforeClose",this.__OnPopupBeforeClose,this);this.popup.on("close",this.__OnPopupClose,this);mini.on(this.popup.el,"keydown",this.__OnPopupKeyDown,this)},__OnPopupClose:function(a){},__OnPopupBeforeClose:function(a){if(this.within(a.htmlEvent)){a.cancel=true}else{this._unDocumentMousewheel()}},__OnPopupKeyDown:function(a){},showPopup:function(){var b={cancel:false};if(this._firebeforeshowpopup!==false){this.fire("beforeshowpopup",b);if(b.cancel==true){return false}}var a=this.getPopup();this._syncShowPopup();a.on("Close",this.__OnPopupHide,this);this._onDocumentMousewheel();this.fire("showpopup")},_unDocumentMousewheel:function(){mini.un(document,"mousewheel",this.__OnDocumentMousewheel,this);this._mousewheelXY=null},_onDocumentMousewheel:function(){this._unDocumentMousewheel();this._mousewheelXY=mini.getXY(this.el);mini.on(document,"mousewheel",this.__OnDocumentMousewheel,this)},__OnDocumentMousewheel:function(c){var b=this;function a(){if(!b.isShowPopup()){return}var d=b._mousewheelXY;var f=mini.getXY(b.el);if(d[0]!=f[0]||d[1]!=f[1]){b.hidePopup()}else{setTimeout(a,300)}}setTimeout(a,300)},doLayout:function(){mini.PopupEdit.superclass.doLayout.call(this);if(this.isShowPopup()){}},_syncShowPopup:function(){var b=this.getPopup();if(this._popupInner&&this._popupInner.el.parentNode!=this.popup._contentEl){this.popup._contentEl.appendChild(this._popupInner.el);this._popupInner.setVisible(true)}var f=mini.getBox(this._borderEl);var a=this.popupWidth;if(this.popupWidth=="100%"){a=f.width}b.setWidth(a);var d=parseInt(this.popupHeight);if(!isNaN(d)){b.setHeight(d)}else{b.setHeight("auto")}b.setMinWidth(this.popupMinWidth);b.setMinHeight(this.popupMinHeight);b.setMaxWidth(this.popupMaxWidth);b.setMaxHeight(this.popupMaxHeight);var c={xAlign:"left",yAlign:"below",outYAlign:"above",outXAlign:"right",popupCls:this.popupCls};this._doShowAtEl(this._borderEl,c)},_doShowAtEl:function(c,b){var a=this.getPopup();a.showAtEl(c,b)},__OnPopupHide:function(a){this.__doFocusCls();this.fire("hidepopup")},hidePopup:function(){if(this.isShowPopup()){var a=this.getPopup();a.close();this.blur()}},isShowPopup:function(){if(this.popup&&this.popup.isDisplay()){return true}else{return false}},setPopupWidth:function(a){this.popupWidth=a},setPopupMaxWidth:function(a){this.popupMaxWidth=a},setPopupMinWidth:function(a){this.popupMinWidth=a},getPopupWidth:function(a){return this.popupWidth},getPopupMaxWidth:function(a){return this.popupMaxWidth},getPopupMinWidth:function(a){return this.popupMinWidth},setPopupHeight:function(a){this.popupHeight=a},setPopupMaxHeight:function(a){this.popupMaxHeight=a},setPopupMinHeight:function(a){this.popupMinHeight=a},getPopupHeight:function(a){return this.popupHeight},getPopupMaxHeight:function(a){return this.popupMaxHeight},getPopupMinHeight:function(a){return this.popupMinHeight},__OnClick:function(b){if(this.enabled==false){return}this.fire("click",{htmlEvent:b});if(this.isReadOnly()){return}if(mini.isAncestor(this._buttonEl,b.target)){this._OnButtonClick(b)}if(mini.findParent(b.target,this._closeCls)){if(this.isShowPopup()){this.hidePopup()}this.fire("closeclick",{htmlEvent:b});return}if(this.allowInput==false||mini.isAncestor(this._buttonEl,b.target)){if(this.isShowPopup()){this.hidePopup()}else{var a=this;setTimeout(function(){a.showPopup()},1)}}},__OnPopupButtonClick:function(a){if(a.name=="close"){this.hidePopup()}a.cancel=true},getAttrs:function(b){var a=mini.PopupEdit.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["popupWidth","popupHeight","popup","onshowpopup","onhidepopup","onbeforeshowpopup"]);mini._ParseInt(b,a,["popupMinWidth","popupMaxWidth","popupMinHeight","popupMaxHeight"]);return a}});mini.regClass(mini.PopupEdit,"popupedit");mini.ComboBox=function(){this.data=[];this.columns=[];mini.ComboBox.superclass.constructor.apply(this,arguments);this._initInput()};mini.extend(mini.ComboBox,mini.PopupEdit,{_initInput:function(){var a=this;if(isFirefox){this._textEl.oninput=function(){a._tryQuery()}}},text:"",value:"",valueField:"id",textField:"text",dataField:"",delimiter:",",multiSelect:false,data:[],url:"",valueInCheckOrder:true,columns:[],allowInput:false,valueFromSelect:false,popupMaxHeight:200,set:function(d){if(typeof d=="string"){return this}var f=d.text;delete d.text;var c=d.value;delete d.value;var a=d.url;delete d.url;var b=d.data;delete d.data;mini.ComboBox.superclass.set.call(this,d);if(!mini.isNull(b)){this.setData(b);d.data=b}if(!mini.isNull(a)){this.setUrl(a);d.url=a}if(!mini.isNull(c)){this.setValue(c);d.value=c}if(!mini.isNull(f)){this.setText(f)}return this},uiCls:"mini-combobox",_createPopup:function(){mini.ComboBox.superclass._createPopup.call(this);this._listbox=new mini.ListBox();this._listbox.setBorderStyle("border:0;");this._listbox.setStyle("width:100%;height:auto;");this._listbox.render(this.popup._contentEl);this._listbox.on("itemclick",this.__OnItemClick,this);this._listbox.on("drawcell",this.__OnItemDrawCell,this);var a=this;this._listbox.on("beforeload",function(b){a.fire("beforeload",b)},this);this._listbox.on("preload",function(b){a.fire("preload",b)},this);this._listbox.on("load",function(b){a.data=b.data;a.fire("load",b)},this);this._listbox.on("loaderror",function(b){a.fire("loaderror",b)},this)},showPopup:function(){var a={cancel:false};this.fire("beforeshowpopup",a);this._firebeforeshowpopup=false;if(a.cancel==true){return}this._listbox.setHeight("auto");mini.ComboBox.superclass.showPopup.call(this);var b=this.popup.el.style.height;if(b==""||b=="auto"){this._listbox.setHeight("auto")}else{this._listbox.setHeight("100%")}this._listbox.setValueInCheckOrder(this.valueInCheckOrder);this._listbox.setValue(this.value)},changeOnSelectMethod:false,select:function(a){this._listbox.deselectAll();a=this.getItem(a);if(a){this._listbox.select(a);this.__OnItemClick({item:a},false);if(this.changeOnSelectMethod){this._OnValueChanged()}}},selects:function(a){if(!a){return}var b=this._listbox.getValueAndText(a);this.setValue(b[0])},getItem:function(a){return typeof a=="object"?a:this.data[a]},indexOf:function(a){return this.data.indexOf(a)},getAt:function(a){return this.data[a]},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setData(a)}},_eval:function(_){return eval("("+_+")")},setData:function(b){if(typeof b=="string"){b=this._eval(b)}if(!mini.isArray(b)){b=[]}this._listbox.setData(b);this.data=this._listbox.data;var a=this._listbox.getValueAndText(this.value);this.text=this._textEl.value=a[1];this.setValue(a[0])},getData:function(){return this.data},setUrl:function(a){this.getPopup();this._listbox.setUrl(a);this.url=this._listbox.url;this.data=this._listbox.data;var b=this._listbox.getValueAndText(this.value);this.text=this._textEl.value=b[1];this.setValue(b[0])},getUrl:function(){return this.url},setValueField:function(a){this.valueField=a;if(this._listbox){this._listbox.setValueField(a)}},getValueField:function(){return this.valueField},setTextField:function(a){if(this._listbox){this._listbox.setTextField(a)}this.textField=a},getTextField:function(){return this.textField},pinyinField:"tag",setPinyinField:function(a){this.pinyinField=a},getPinyinField:function(){return this.pinyinField},setDisplayField:function(a){this.setTextField(a)},setDataField:function(a){if(this._listbox){this._listbox.setDataField(a)}this.dataField=a},getDataField:function(){return this.dataField},setValueInCheckOrder:function(a){this.valueInCheckOrder=a},getValueInCheckOrder:function(){return this.valueInCheckOrder},setValue:function(b){if(this.value!==b){var a=this._listbox.getValueAndText(b);this.value=b;this._valueEl.value=this.value;this.text=this._textEl.value=a[1];this._doEmpty()}else{var a=this._listbox.getValueAndText(b);this.text=this._textEl.value=a[1]}},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;if(this._listbox){this._listbox.setMultiSelect(a);this._listbox.setShowCheckBox(a)}}},getMultiSelect:function(){return this.multiSelect},setColumns:function(a){if(!mini.isArray(a)){a=[]}this.columns=a;this._listbox.setColumns(a)},getColumns:function(){return this.columns},showNullItem:false,setShowNullItem:function(a){if(this.showNullItem!=a){this.showNullItem=a;this._listbox.setShowNullItem(a)}},getShowNullItem:function(){return this.showNullItem},setNullItemText:function(a){if(this.nullItemText!=a){this.nullItemText=a;this._listbox.setNullItemText(a)}},getNullItemText:function(){return this.nullItemText},setValueFromSelect:function(a){this.valueFromSelect=a},getValueFromSelect:function(){return this.valueFromSelect},_OnValueChanged:function(){if(this.validateOnChanged){this._tryValidate()}var a=this;function b(){var f=a.getValue();var d=a.getSelecteds();var c=d[0];a.fire("valuechanged",{value:f,selecteds:d,selected:c})}setTimeout(function(){b()},50)},getSelecteds:function(){return this._listbox.findItems(this.value)},getSelected:function(){return this.getSelecteds()[0]},__OnItemDrawCell:function(a){this.fire("drawcell",a)},__OnItemClick:function(j,b){var d={item:j.item,cancel:false};if(b!==false){this.fire("beforeitemclick",d);if(d.cancel){return}}var a=this._listbox.getSelecteds();var g=this._listbox.getValueAndText(a);var f=this.getValue();this.setValue(g[0]);this.setText(g[1]);if(j){if(b!==false){if(f!=this.getValue()){var c=this;setTimeout(function(){c._OnValueChanged()},1)}if(!this.multiSelect){this.hidePopup()}this.focus();this.fire("itemclick",{item:j.item})}}},__OnInputKeyDown:function(k,g){var c={htmlEvent:k};this.fire("keydown",c);if(k.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(k.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(k.keyCode){case 27:k.preventDefault();if(this.isShowPopup()){k.stopPropagation()}this.hidePopup();this.focus();break;case 13:if(this.isShowPopup()){k.preventDefault();k.stopPropagation();var b=this._listbox.getFocusedIndex();if(b!=-1){var f=this._listbox.getAt(b);var d={item:f,cancel:false};this.fire("beforeitemclick",d);if(d.cancel==false){if(this.multiSelect){}else{this._listbox.deselectAll();this._listbox.select(f)}var a=this._listbox.getSelecteds();var j=this._listbox.getValueAndText(a);this.setValue(j[0]);this.setText(j[1]);this._OnValueChanged()}}this.hidePopup();this.focus()}else{this.fire("enter",c)}break;case 37:break;case 38:k.preventDefault();var b=this._listbox.getFocusedIndex();if(b==-1){b=0;if(!this.multiSelect){var f=this._listbox.findItems(this.value)[0];if(f){b=this._listbox.indexOf(f)}}}if(this.isShowPopup()){if(!this.multiSelect){b-=1;if(b<0){b=0}this._listbox._focusItem(b,true)}}break;case 39:break;case 40:k.preventDefault();var b=this._listbox.getFocusedIndex();if(b==-1){b=0;if(!this.multiSelect){var f=this._listbox.findItems(this.value)[0];if(f){b=this._listbox.indexOf(f)}}}if(this.isShowPopup()){if(!this.multiSelect){b+=1;if(b>this._listbox.getCount()-1){b=this._listbox.getCount()-1}this._listbox._focusItem(b,true)}}else{this.showPopup();if(!this.multiSelect){this._listbox._focusItem(b,true)}}break;default:if(this.allowInput==false){}else{this._tryQuery(this._textEl.value)}break}},__OnInputKeyUp:function(a){this.fire("keyup",{htmlEvent:a})},__OnInputKeyPress:function(a){this.fire("keypress",{htmlEvent:a})},_tryQuery:function(a){var b=this;setTimeout(function(){var c=b._textEl.value;if(c!=a){b._doQuery(c)}},10)},_doQuery:function(k){if(this.multiSelect==true){return}var j=[];k=k.toUpperCase();for(var c=0,b=this.data.length;c<b;c++){var a=this.data[c];var n=mini._getMap(this.textField,a);var d=mini._getMap(this.pinyinField,a);n=n?String(n).toUpperCase():"";d=d?String(d).toUpperCase():"";if(n.indexOf(k)!=-1||d.indexOf(k)!=-1){j.push(a)}}this._listbox.setData(j);this._filtered=true;if(k!==""||this.isShowPopup()){this.showPopup();var f=0;if(this._listbox.getShowNullItem()){f=1}var g=this;g._listbox._focusItem(f,true)}},__OnPopupHide:function(a){if(this._filtered){this._filtered=false;if(this._listbox.el){this._listbox.setData(this.data)}}this.__doFocusCls();this.fire("hidepopup")},findItems:function(a){return this._listbox.findItems(a)},__OnInputTextChanged:function(j){if(this.isShowPopup()){return}if(this.multiSelect==false){var p=this._textEl.value;var d=this.getData();var c=null;for(var f=0,b=d.length;f<b;f++){var q=d[f];var n=q[this.textField];if(n==p){c=q;break}}if(c){this._listbox.setValue(c?c[this.valueField]:"");var o=this._listbox.getValue();var a=this._listbox.getValueAndText(o);var k=this.getValue();this.setValue(o);this.setText(a[1])}else{if(this.valueFromSelect){this.setValue("");this.setText("")}else{this.setValue(p);this.setText(p)}}if(k!=this.getValue()){var g=this;g._OnValueChanged()}}},setAjaxData:function(a){this.ajaxData=a;this._listbox.setAjaxData(a)},setAjaxType:function(a){this.ajaxType=a;this._listbox.setAjaxType(a)},getAttrs:function(b){var q=mini.ComboBox.superclass.getAttrs.call(this,b);mini._ParseString(b,q,["url","data","textField","valueField","displayField","nullItemText","pinyinField","ondrawcell","onbeforeload","onpreload","onload","onloaderror","onitemclick","onbeforeitemclick"]);mini._ParseBool(b,q,["multiSelect","showNullItem","valueFromSelect","valueInCheckOrder"]);if(q.displayField){q.textField=q.displayField}var r=q.valueField||this.valueField;var d=q.textField||this.textField;if(b.nodeName.toLowerCase()=="select"){var g=[];for(var j=0,f=b.length;j<f;j++){var k=b.options[j];var a={};a[d]=k.text;a[r]=k.value;g.push(a)}if(g.length>0){q.data=g}}else{var n=mini.getChildNodes(b);for(var j=0,f=n.length;j<f;j++){var c=n[j];var p=jQuery(c).attr("property");if(!p){continue}p=p.toLowerCase();if(p=="columns"){q.columns=mini._ParseColumns(c)}else{if(p=="data"){q.data=c.innerHTML}}}}return q}});mini.regClass(mini.ComboBox,"combobox");mini.DatePicker=function(){mini.DatePicker.superclass.constructor.apply(this,arguments);mini.addClass(this.el,"mini-datepicker");this.on("validation",this.__OnValidation,this)};mini.extend(mini.DatePicker,mini.PopupEdit,{valueFormat:"",format:"yyyy-MM-dd",maxDate:null,minDate:null,popupWidth:"",viewDate:new Date(),showTime:false,timeFormat:"H:mm",showYesterdayButton:false,showTodayButton:true,showClearButton:true,showOkButton:false,uiCls:"mini-datepicker",_getCalendar:function(){if(!mini.DatePicker._Calendar){var a=mini.DatePicker._Calendar=new mini.Calendar();a.setStyle("border:0;")}return mini.DatePicker._Calendar},destroy:function(a){if(this._destroyPopup){mini.DatePicker._Calendar=null}mini.DatePicker.superclass.destroy.call(this,a)},_createPopup:function(){mini.DatePicker.superclass._createPopup.call(this);this._calendar=this._getCalendar()},__OnPopupClose:function(a){if(this._calendar){this._calendar.hideMenu()}},_monthPicker:false,showPopup:function(){var a={cancel:false};this.fire("beforeshowpopup",a);if(a.cancel==true){return}this._calendar=this._getCalendar();this._calendar.beginUpdate();this._calendar._allowLayout=false;if(this._calendar.el.parentNode!=this.popup._contentEl){this._calendar.render(this.popup._contentEl)}this._calendar.set({monthPicker:this._monthPicker,showTime:this.showTime,timeFormat:this.timeFormat,showClearButton:this.showClearButton,showYesterdayButton:this.showYesterdayButton,showTodayButton:this.showTodayButton,showOkButton:this.showOkButton,showWeekNumber:this.showWeekNumber});this._calendar.setValue(this.value);if(this.value){this._calendar.setViewDate(this.value)}else{this._calendar.setViewDate(this.viewDate)}function c(){this._calendar.hideMenu();if(this._calendar._target){var d=this._calendar._target;this._calendar.un("timechanged",d.__OnTimeChanged,d);this._calendar.un("dateclick",d.__OnDateClick,d);this._calendar.un("drawdate",d.__OnDrawDate,d)}this._calendar.on("timechanged",this.__OnTimeChanged,this);this._calendar.on("dateclick",this.__OnDateClick,this);this._calendar.on("drawdate",this.__OnDrawDate,this);this._calendar.endUpdate();this._calendar._allowLayout=true;this._calendar.doLayout();this._calendar.focus();this._calendar._target=this}var b=this;c.call(b);mini.DatePicker.superclass.showPopup.call(this)},hidePopup:function(){mini.DatePicker.superclass.hidePopup.call(this);this._calendar.un("timechanged",this.__OnTimeChanged,this);this._calendar.un("dateclick",this.__OnDateClick,this);this._calendar.un("drawdate",this.__OnDrawDate,this);this._calendar.hideMenu()},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this._calendar.within(a)){return true}return false},__OnPopupKeyDown:function(a){if(a.keyCode==13){this.__OnDateClick()}if(a.keyCode==27){this.hidePopup();this.focus()}},minDateErrorText:"",maxDateErrorText:"",__OnValidation:function(d){if(d.isValid==false){return}var b=this.value;if(!mini.isDate(b)){return}var g=mini.parseDate(this.maxDate);var c=mini.parseDate(this.minDate);var a=this.maxDateErrorText||mini.VTypes.maxDateErrorText;var f=this.minDateErrorText||mini.VTypes.minDateErrorText;if(mini.isDate(g)){if(b.getTime()>g.getTime()){d.isValid=false;d.errorText=String.format(a,mini.formatDate(g,this.format))}}if(mini.isDate(c)){if(b.getTime()<c.getTime()){d.isValid=false;d.errorText=String.format(f,mini.formatDate(c,this.format))}}},__OnDrawDate:function(c){var a=c.date;var d=mini.parseDate(this.maxDate);var b=mini.parseDate(this.minDate);if(mini.isDate(d)){if(a.getTime()>d.getTime()){c.allowSelect=false}}if(mini.isDate(b)){if(a.getTime()<b.getTime()){c.allowSelect=false}}this.fire("drawdate",c)},__OnDateClick:function(c){if(!c){return}if(this.showOkButton&&c.action!="ok"){return}var a=this._calendar.getValue();var b=this.getFormValue("U");this.setValue(a);if(b!==this.getFormValue("U")){this._OnValueChanged()}this.hidePopup();this.focus()},__OnTimeChanged:function(b){if(this.showOkButton){return}var a=this._calendar.getValue();this.setValue(a);this._OnValueChanged()},setFormat:function(a){if(typeof a!="string"){return}if(this.format!=a){this.format=a;this._textEl.value=this._valueEl.value=this.getFormValue()}},getFormat:function(){return this.format},setValueFormat:function(a){if(typeof a!="string"){return}if(this.valueFormat!=a){this.valueFormat=a}},getValueFormat:function(){return this.valueFormat},setValue:function(a){a=mini.parseDate(a);if(mini.isNull(a)){a=""}if(mini.isDate(a)){a=new Date(a.getTime())}if(this.value!=a){this.value=a;this.text=this._textEl.value=this._valueEl.value=this.getFormValue()}},nullValue:"",setNullValue:function(a){if(a=="null"){a=null}this.nullValue=a},getNullValue:function(){return this.nullValue},getValue:function(){if(!mini.isDate(this.value)){return this.nullValue}var a=this.value;if(this.valueFormat){a=mini.formatDate(a,this.valueFormat)}return a},getFormValue:function(a){if(!mini.isDate(this.value)){return""}a=a||this.format;return mini.formatDate(this.value,a)},setViewDate:function(a){a=mini.parseDate(a);if(!mini.isDate(a)){return}this.viewDate=a},getViewDate:function(){return this._calendar.getViewDate()},setShowTime:function(a){if(this.showTime!=a){this.showTime=a}},getShowTime:function(){return this.showTime},setTimeFormat:function(a){if(this.timeFormat!=a){this.timeFormat=a}},getTimeFormat:function(){return this.timeFormat},setShowYesterdayButton:function(a){this.showYesterdayButton=a},getShowYesterdayButton:function(){return this.showYesterdayButton},setShowTodayButton:function(a){this.showTodayButton=a},getShowTodayButton:function(){return this.showTodayButton},setShowClearButton:function(a){this.showClearButton=a},getShowClearButton:function(){return this.showClearButton},setShowOkButton:function(a){this.showOkButton=a},getShowOkButton:function(){return this.showOkButton},setShowWeekNumber:function(a){this.showWeekNumber=a},getShowWeekNumber:function(){return this.showWeekNumber},setMaxDate:function(a){this.maxDate=a},getMaxDate:function(){return this.maxDate},setMinDate:function(a){this.minDate=a},getMinDate:function(){return this.minDate},setMaxDateErrorText:function(a){this.maxDateErrorText=a},getMaxDateErrorText:function(){return this.maxDateErrorText},setMinDateErrorText:function(a){this.minDateErrorText=a},getMinDateErrorText:function(){return this.minDateErrorText},__OnInputTextChanged:function(c){var a=this._textEl.value;var f=mini.parseDate(a);if(!f||isNaN(f)){f=null}var b=this.getFormValue("U");this.setValue(f);if(f==null){this._textEl.value=""}if(b!==this.getFormValue("U")){this._OnValueChanged()}},__OnInputKeyDown:function(c){var a={htmlEvent:c};this.fire("keydown",a);if(c.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(c.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(c.keyCode){case 27:c.preventDefault();if(this.isShowPopup()){c.stopPropagation()}this.hidePopup();break;case 9:case 13:if(this.isShowPopup()){c.preventDefault();c.stopPropagation();this.hidePopup()}else{this.__OnInputTextChanged(null);var b=this;setTimeout(function(){b.fire("enter",a)},10)}break;case 37:break;case 38:c.preventDefault();break;case 39:break;case 40:c.preventDefault();this.showPopup();break;default:break}},getAttrs:function(b){var a=mini.DatePicker.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["format","viewDate","timeFormat","ondrawdate","minDate","maxDate","valueFormat","nullValue","minDateErrorText","maxDateErrorText"]);mini._ParseBool(b,a,["showTime","showTodayButton","showClearButton","showOkButton","showWeekNumber","showYesterdayButton"]);return a}});mini.regClass(mini.DatePicker,"datepicker");mini.MonthPicker=function(){mini.MonthPicker.superclass.constructor.apply(this,arguments)};mini.extend(mini.MonthPicker,mini.DatePicker,{uiCls:"mini-monthpicker",valueFormat:"",format:"yyyy-MM",_monthPicker:true});mini.regClass(mini.MonthPicker,"monthpicker");mini.Calendar=function(){this.viewDate=new Date();this._selectedDates=[];mini.Calendar.superclass.constructor.apply(this,arguments)};mini.extend(mini.Calendar,mini.Control,{width:220,height:160,monthPicker:false,_clearBorder:false,viewDate:null,_selectedDate:"",_selectedDates:[],multiSelect:false,firstDayOfWeek:0,yesterdayText:"Yesterday",todayText:"Today",clearText:"Clear",okText:"OK",cancelText:"Cancel",daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],format:"MMM, yyyy",timeFormat:"H:mm",showTime:false,currentTime:true,rows:1,columns:1,headerCls:"",bodyCls:"",footerCls:"",_todayCls:"mini-calendar-today",_weekendCls:"mini-calendar-weekend",_otherMonthCls:"mini-calendar-othermonth",_selectedDateCls:"mini-calendar-selected",showHeader:true,showFooter:true,showWeekNumber:false,showDaysHeader:true,showMonthButtons:true,showYearButtons:true,showTodayButton:true,showClearButton:true,showOkButton:false,showYesterdayButton:false,isWeekend:function(b){var a=b.getDay();return a==0||a==6},getFirstDateOfMonth:function(a){var a=new Date(a.getFullYear(),a.getMonth(),1);return mini.getWeekStartDate(a,this.firstDayOfWeek)},getShortWeek:function(a){return this.daysShort[a]},uiCls:"mini-calendar",_create:function(){var f='<tr style="width:100%;"><td style="width:100%;"></td></tr>';f+='<tr ><td><div class="mini-calendar-footer"><span style="display:inline-block;"><input name="time" class="mini-timespinner" style="width:80px" format="'+this.timeFormat+'"/><span class="mini-calendar-footerSpace"></span></span><span class="mini-calendar-tadayButton">'+this.todayText+'</span><span class="mini-calendar-footerSpace"></span><span class="mini-calendar-clearButton">'+this.clearText+'</span><span class="mini-calendar-okButton">'+this.okText+'</span><a href="#" class="mini-calendar-focus" style="position:absolute;left:-10px;top:-10px;width:0px;height:0px;outline:none" hideFocus></a></div></td></tr>';var b='<table class="mini-calendar" cellpadding="0" cellspacing="0">'+f+"</table>";var g=document.createElement("div");g.innerHTML=b;this.el=g.firstChild;var a=this.el.getElementsByTagName("tr");var c=this.el.getElementsByTagName("td");this._innerEl=c[0];this._footerEl=mini.byClass("mini-calendar-footer",this.el);this.timeWrapEl=this._footerEl.childNodes[0];this.todayButtonEl=this._footerEl.childNodes[1];this.footerSpaceEl=this._footerEl.childNodes[2];this.closeButtonEl=this._footerEl.childNodes[3];this.okButtonEl=this._footerEl.childNodes[4];this._focusEl=this._footerEl.lastChild;this.yesterdayButtonEl=mini.after(this.todayButtonEl,'<span class="mini-calendar-tadayButton yesterday">'+this.yesterdayText+"</span>");mini.parse(this._footerEl);this.timeSpinner=mini.getbyName("time",this.el);this.doUpdate()},focus:function(){try{this._focusEl.focus()}catch(a){}},destroy:function(a){this._innerEl=this._footerEl=this.timeWrapEl=this.todayButtonEl=this.footerSpaceEl=this.closeButtonEl=null;mini.Calendar.superclass.destroy.call(this,a)},_initEvents:function(){if(this.timeSpinner){this.timeSpinner.on("valuechanged",this.__OnTimeChanged,this)}mini._BindEvents(function(){mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"mousedown",this.__OnMouseDown,this);mini.on(this.el,"keydown",this.__OnKeyDown,this)},this)},getDateEl:function(a){if(!a){return null}var b=this.uid+"$"+mini.clearTime(a).getTime();return document.getElementById(b)},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this.menuEl&&mini.isAncestor(this.menuEl,a.target)){return true}return false},setShowHeader:function(a){this.showHeader=a;this.doUpdate()},getShowHeader:function(){return this.showHeader},setShowFooter:function(a){this.showFooter=a;this.doUpdate()},getShowFooter:function(){return this.showFooter},setShowWeekNumber:function(a){this.showWeekNumber=a;this.doUpdate()},getShowWeekNumber:function(){return this.showWeekNumber},setShowDaysHeader:function(a){this.showDaysHeader=a;this.doUpdate()},getShowDaysHeader:function(){return this.showDaysHeader},setShowMonthButtons:function(a){this.showMonthButtons=a;this.doUpdate()},getShowMonthButtons:function(){return this.showMonthButtons},setShowYearButtons:function(a){this.showYearButtons=a;this.doUpdate()},getShowYearButtons:function(){return this.showYearButtons},setShowTodayButton:function(a){this.showTodayButton=a;this.todayButtonEl.style.display=this.showTodayButton?"":"none";this.doUpdate()},getShowTodayButton:function(){return this.showTodayButton},setShowYesterdayButton:function(a){this.showYesterdayButton=a;this.yesterdayButtonEl.style.display=this.showYesterdayButton?"":"none";this.doUpdate()},getShowYesterdayButton:function(){return this.showYesterdayButton},setShowClearButton:function(a){this.showClearButton=a;this.closeButtonEl.style.display=this.showClearButton?"":"none";this.doUpdate()},getShowClearButton:function(){return this.showClearButton},setShowOkButton:function(a){this.showOkButton=a;this.okButtonEl.style.display=this.showOkButton?"":"none";this.doUpdate()},getShowOkButton:function(){return this.showOkButton},setViewDate:function(a){a=mini.parseDate(a);if(!a){a=new Date()}if(mini.isDate(a)){a=new Date(a.getTime())}this.viewDate=a;this.doUpdate()},getViewDate:function(){return this.viewDate},setSelectedDate:function(b){b=mini.parseDate(b);if(!mini.isDate(b)){b=""}else{b=new Date(b.getTime())}var a=this.getDateEl(this._selectedDate);if(a){mini.removeClass(a,this._selectedDateCls)}this._selectedDate=b;if(this._selectedDate){this._selectedDate=mini.cloneDate(this._selectedDate)}var a=this.getDateEl(this._selectedDate);if(a){mini.addClass(a,this._selectedDateCls)}this.fire("datechanged")},setSelectedDates:function(a){if(!mini.isArray(a)){a=[]}this._selectedDates=a;this.doUpdate()},getSelectedDate:function(){return this._selectedDate?this._selectedDate:""},setTime:function(a){this.timeSpinner.setValue(a)},getTime:function(){return this.timeSpinner.getFormValue()},setValue:function(a){this.setSelectedDate(a);if(!a){a=new Date()}this.setTime(a)},getValue:function(){var b=this._selectedDate;if(b){b=mini.clearTime(b);if(this.showTime){var a=this.timeSpinner.getValue();if(a){b.setHours(a.getHours());b.setMinutes(a.getMinutes());b.setSeconds(a.getSeconds())}}}return b?b:""},getFormValue:function(){var a=this.getValue();if(a){return mini.formatDate(a,"yyyy-MM-dd HH:mm:ss")}return""},isSelectedDate:function(a){if(!a||!this._selectedDate){return false}return mini.clearTime(a).getTime()==mini.clearTime(this._selectedDate).getTime()},setMultiSelect:function(a){this.multiSelect=a;this.doUpdate()},getMultiSelect:function(){return this.multiSelect},setRows:function(a){if(isNaN(a)){return}if(a<1){a=1}this.rows=a;this.doUpdate()},getRows:function(){return this.rows},setColumns:function(a){if(isNaN(a)){return}if(a<1){a=1}this.columns=a;this.doUpdate()},getColumns:function(){return this.columns},setShowTime:function(a){if(this.showTime!=a){this.showTime=a;this.timeWrapEl.style.display=this.showTime?"":"none";this.doLayout()}},getShowTime:function(){return this.showTime},setTimeFormat:function(a){if(this.timeFormat!=a){this.timeSpinner.setFormat(a);this.timeFormat=this.timeSpinner.format}},getTimeFormat:function(){return this.timeFormat},doLayout:function(){if(!this.canLayout()){return}this.timeWrapEl.style.display=this.showTime?"":"none";this.todayButtonEl.style.display=this.showTodayButton?"":"none";this.closeButtonEl.style.display=this.showClearButton?"":"none";this.yesterdayButtonEl.style.display=this.showYesterdayButton?"":"none";this.okButtonEl.style.display=this.showOkButton?"":"none";this.footerSpaceEl.style.display=(this.showClearButton&&this.showTodayButton)?"":"none";this._footerEl.style.display=this.showFooter?"":"none";var a=this._innerEl.firstChild;var b=this.isAutoHeight();if(!b){a.parentNode.style.height="100px";h=jQuery(this.el).height();h-=jQuery(this._footerEl).outerHeight();a.parentNode.style.height=h+"px"}else{a.parentNode.style.height=""}mini.layout(this._footerEl);if(this.monthPicker){this._tryShowMenu()}},doUpdate:function(){if(!this._allowUpdate){return}var o=new Date(this.viewDate.getTime());var d=this.rows==1&&this.columns==1;var n=100/this.rows;var p='<table class="mini-calendar-views" border="0" cellpadding="0" cellspacing="0">';for(var g=0,b=this.rows;g<b;g++){p+="<tr >";for(var f=0,c=this.columns;f<c;f++){p+='<td style="height:'+n+'%">';p+=this._CreateView(o,g,f);p+="</td>";o=new Date(o.getFullYear(),o.getMonth()+1,1)}p+="</tr>"}p+="</table>";this._innerEl.innerHTML=p;var a=this.el;setTimeout(function(){mini.repaint(a)},100);this.doLayout()},_CreateView:function(n,d,a){var y=n.getMonth();var x=this.getFirstDateOfMonth(n);var p=new Date(x.getTime());var c=mini.clearTime(new Date()).getTime();var l=this.value?mini.clearTime(this.value).getTime():-1;var r=this.rows>1||this.columns>1;var o="";o+='<table class="mini-calendar-view" border="0" cellpadding="0" cellspacing="0">';if(this.showHeader){o+='<tr ><td colSpan="10" class="mini-calendar-header"><div class="mini-calendar-headerInner">';if(d==0&&a==0){o+='<div class="mini-calendar-prev">';if(this.showYearButtons){o+='<span class="mini-calendar-yearPrev"></span>'}if(this.showMonthButtons){o+='<span class="mini-calendar-monthPrev"></span>'}o+="</div>"}if(d==0&&a==this.columns-1){o+='<div class="mini-calendar-next">';if(this.showMonthButtons){o+='<span class="mini-calendar-monthNext"></span>'}if(this.showYearButtons){o+='<span class="mini-calendar-yearNext"></span>'}o+="</div>"}o+='<span class="mini-calendar-title">'+mini.formatDate(n,this.format);+"</span>";o+="</div></td></tr>"}if(this.showDaysHeader){o+='<tr class="mini-calendar-daysheader"><td class="mini-calendar-space"></td>';if(this.showWeekNumber){o+='<td sclass="mini-calendar-weeknumber"></td>'}for(var u=this.firstDayOfWeek,t=u+7;u<t;u++){var A=this.getShortWeek(u);o+='<td yAlign="middle">';o+=A;o+="</td>";x=new Date(x.getFullYear(),x.getMonth(),x.getDate()+1)}o+='<td class="mini-calendar-space"></td></tr>'}x=p;for(var v=0;v<=5;v++){o+='<tr class="mini-calendar-days"><td class="mini-calendar-space"></td>';if(this.showWeekNumber){var f=mini.getWeek(x.getFullYear(),x.getMonth()+1,x.getDate());if(String(f).length==1){f="0"+f}o+='<td class="mini-calendar-weeknumber" yAlign="middle">'+f+"</td>"}for(var u=this.firstDayOfWeek,t=u+7;u<t;u++){var q=this.isWeekend(x);var b=mini.clearTime(x).getTime();var z=b==c;var g=this.isSelectedDate(x);if(y!=x.getMonth()&&r){b=-1}var w=this._OnDrawDate(x);o+='<td yAlign="middle" id="';o+=this.uid+"$"+b;o+='" class="mini-calendar-date ';if(q){o+=" mini-calendar-weekend "}if(w.allowSelect==false){o+=" mini-calendar-disabled "}if(y!=x.getMonth()&&r){}else{if(g){o+=" "+this._selectedDateCls+" "}if(z){o+=" mini-calendar-today "}}if(y!=x.getMonth()){o+=" mini-calendar-othermonth "}if(w.dateCls){o+=" "+w.dateCls}o+='" style="';if(w.dateStyle){o+=w.dateStyle}o+='">';if(y!=x.getMonth()&&r){}else{o+=w.dateHtml}o+="</td>";x=new Date(x.getFullYear(),x.getMonth(),x.getDate()+1)}o+='<td class="mini-calendar-space"></td></tr>'}o+='<tr class="mini-calendar-bottom" colSpan="10"><td ></td></tr>';o+="</table>";return o},_OnDrawDate:function(a){var b={date:a,dateCls:"",dateStyle:"",dateHtml:a.getDate(),allowSelect:true};this.fire("drawdate",b);return b},_OnDateClick:function(a,b){this.hideMenu();var c={date:a,action:b};this.fire("dateclick",c);this._OnValueChanged()},menuEl:null,menuYear:null,menuSelectMonth:null,menuSelectYear:null,_tryShowMenu:function(){if(!this.menuEl){var a=this;setTimeout(function(){a.showMenu()},1)}},showMenu:function(){this.hideMenu();this.menuYear=parseInt(this.viewDate.getFullYear()/10)*10;this._menuselectMonth=this.viewDate.getMonth();this._menuselectYear=this.viewDate.getFullYear();var a='<div class="mini-calendar-menu"></div>';this.menuEl=mini.append(document.body,a);this.updateMenu(this.viewDate);var b=this.getBox();if(this.el.style.borderWidth=="0px"){this.menuEl.style.border="0"}mini.setBox(this.menuEl,b);mini.on(this.menuEl,"click",this.__OnMenuClick,this);mini.on(document,"mousedown",this.__OnBodyMenuMouseDown,this)},hideMenu:function(){if(this.menuEl){mini.un(this.menuEl,"click",this.__OnMenuClick,this);mini.un(document,"mousedown",this.__OnBodyMenuMouseDown,this);jQuery(this.menuEl).remove();this.menuEl=null}},updateMenu:function(){var d='<div class="mini-calendar-menu-months">';for(var c=0,b=12;c<b;c++){var f=mini.getShortMonth(c);var a="";if(this._menuselectMonth==c){a="mini-calendar-menu-selected"}d+='<a id="'+c+'" class="mini-calendar-menu-month '+a+'" href="javascript:void(0);" hideFocus onclick="return false">'+f+"</a>"}d+='<div style="clear:both;"></div></div>';d+='<div class="mini-calendar-menu-years">';for(var c=this.menuYear,b=this.menuYear+10;c<b;c++){var f=c;var a="";if(this._menuselectYear==c){a="mini-calendar-menu-selected"}d+='<a id="'+c+'" class="mini-calendar-menu-year '+a+'" href="javascript:void(0);" hideFocus onclick="return false">'+f+"</a>"}d+='<div class="mini-calendar-menu-prevYear"></div><div class="mini-calendar-menu-nextYear"></div><div style="clear:both;"></div></div>';d+='<div class="mini-calendar-footer"><span class="mini-calendar-okButton">'+this.okText+'</span><span class="mini-calendar-footerSpace"></span><span class="mini-calendar-cancelButton">'+this.cancelText+'</span></div><div style="clear:both;"></div>';this.menuEl.innerHTML=d},__OnMenuClick:function(f){var d=f.target;var c=mini.findParent(d,"mini-calendar-menu-month");var a=mini.findParent(d,"mini-calendar-menu-year");if(c){this._menuselectMonth=parseInt(c.id);this.updateMenu()}else{if(a){this._menuselectYear=parseInt(a.id);this.updateMenu()}else{if(mini.findParent(d,"mini-calendar-menu-prevYear")){this.menuYear=this.menuYear-1;this.menuYear=parseInt(this.menuYear/10)*10;this.updateMenu()}else{if(mini.findParent(d,"mini-calendar-menu-nextYear")){this.menuYear=this.menuYear+11;this.menuYear=parseInt(this.menuYear/10)*10;this.updateMenu()}else{if(mini.findParent(d,"mini-calendar-okButton")){var b=new Date(this._menuselectYear,this._menuselectMonth,1);if(this.monthPicker){this.setViewDate(b);this.setSelectedDate(b);this._OnDateClick(b)}else{this.setViewDate(b);this.hideMenu()}}else{if(mini.findParent(d,"mini-calendar-cancelButton")){if(this.monthPicker){this._OnDateClick(null,"cancel")}else{this.hideMenu()}}}}}}}},__OnBodyMenuMouseDown:function(a){if(!mini.findParent(a.target,"mini-calendar-menu")){if(!mini.findParent(a.target,"mini-monthpicker")){this.hideMenu()}}},__OnClick:function(l){var p=this.viewDate;if(this.enabled==false){return}var o=l.target;var b=mini.findParent(l.target,"mini-calendar-title");if(mini.findParent(o,"mini-calendar-monthNext")){p.setDate(1);p.setMonth(p.getMonth()+1);this.setViewDate(p)}else{if(mini.findParent(o,"mini-calendar-yearNext")){p.setDate(1);p.setFullYear(p.getFullYear()+1);this.setViewDate(p)}else{if(mini.findParent(o,"mini-calendar-monthPrev")){p.setMonth(p.getMonth()-1);this.setViewDate(p)}else{if(mini.findParent(o,"mini-calendar-yearPrev")){p.setFullYear(p.getFullYear()-1);this.setViewDate(p)}else{if(mini.findParent(o,"mini-calendar-tadayButton")){var g=!!mini.findParent(o,"yesterday");var n=new Date();if(g){n.setDate(n.getDate()-1)}this.setViewDate(n);this.setSelectedDate(n);if(this.currentTime){var k=new Date();this.setTime(k)}this._OnDateClick(n,"today")}else{if(mini.findParent(o,"mini-calendar-clearButton")){this.setSelectedDate(null);this.setTime(null);this._OnDateClick(null,"clear")}else{if(mini.findParent(o,"mini-calendar-okButton")){this._OnDateClick(null,"ok")}else{if(b){this.showMenu()}}}}}}}}var j=mini.findParent(l.target,"mini-calendar-date");if(j&&!mini.hasClass(j,"mini-calendar-disabled")){var a=j.id.split("$");var f=parseInt(a[a.length-1]);if(f==-1){return}var c=new Date(f);this._OnDateClick(c)}},__OnMouseDown:function(f){if(this.enabled==false){return}var b=mini.findParent(f.target,"mini-calendar-date");if(b&&!mini.hasClass(b,"mini-calendar-disabled")){var c=b.id.split("$");var d=parseInt(c[c.length-1]);if(d==-1){return}var a=new Date(d);this.setSelectedDate(a)}},__OnTimeChanged:function(a){this.fire("timechanged");this._OnValueChanged()},__OnKeyDown:function(d){if(this.enabled==false){return}var b=this.getSelectedDate();if(!b){b=new Date(this.viewDate.getTime())}switch(d.keyCode){case 27:break;case 13:break;case 37:b=mini.addDate(b,-1,"D");break;case 38:b=mini.addDate(b,-7,"D");break;case 39:b=mini.addDate(b,1,"D");break;case 40:b=mini.addDate(b,7,"D");break;default:break}var c=this;if(b.getMonth()!=c.viewDate.getMonth()){c.setViewDate(mini.cloneDate(b));c.focus()}var a=this.getDateEl(b);if(a&&mini.hasClass(a,"mini-calendar-disabled")){return}c.setSelectedDate(b);if(d.keyCode==37||d.keyCode==38||d.keyCode==39||d.keyCode==40){d.preventDefault()}},_OnValueChanged:function(){this.fire("valuechanged")},getAttrs:function(b){var a=mini.Calendar.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["viewDate","rows","columns","ondateclick","ondrawdate","ondatechanged","timeFormat","ontimechanged","onvaluechanged"]);mini._ParseBool(b,a,["multiSelect","showHeader","showFooter","showWeekNumber","showDaysHeader","showMonthButtons","showYearButtons","showTodayButton","showClearButton","showYesterdayButton","showTime","showOkButton"]);return a}});mini.regClass(mini.Calendar,"calendar");mini.ListBox=function(){mini.ListBox.superclass.constructor.apply(this,arguments)};mini.extend(mini.ListBox,mini.ListControl,{formField:true,columns:null,columnWidth:80,showNullItem:false,nullItemText:"",showEmpty:false,emptyText:"",showCheckBox:false,showAllCheckBox:true,multiSelect:false,_itemCls:"mini-listbox-item",_itemHoverCls:"mini-listbox-item-hover",_itemSelectedCls:"mini-listbox-item-selected",uiCls:"mini-listbox",_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-listbox";this.el.innerHTML='<div class="mini-listbox-border"><div class="mini-listbox-header"></div><div class="mini-listbox-view"></div><input type="hidden"/></div><div class="mini-errorIcon"></div>';this._borderEl=this.el.firstChild;this._headerEl=this._borderEl.firstChild;this._viewEl=this._borderEl.childNodes[1];this._valueEl=this._borderEl.childNodes[2];this._errorIconEl=this.el.lastChild;this._scrollViewEl=this._viewEl;this._viewEl.innerHTML='<div class="mini-grid-rows-content"></div>';this._contentEl=this._viewEl.firstChild},_initEvents:function(){mini.ListBox.superclass._initEvents.call(this);mini._BindEvents(function(){mini_onOne(this._viewEl,"scroll",this.__OnScroll,this)},this)},destroy:function(a){if(this._viewEl){this._viewEl.onscroll=null;mini.clearEvent(this._viewEl);this._viewEl=null}this._borderEl=null;this._headerEl=null;this._viewEl=null;this._valueEl=null;mini.ListBox.superclass.destroy.call(this,a)},setColumns:function(g){if(!mini.isArray(g)){g=[]}this.columns=g;for(var c=0,a=this.columns.length;c<a;c++){var f=this.columns[c];if(f.type){if(!mini.isNull(f.header)&&typeof f.header!=="function"){if(f.header.trim()==""){delete f.header}}var b=mini._getColumn(f.type);if(b){var j=mini.copyTo({},f);mini.copyTo(f,b);mini.copyTo(f,j)}}var d=parseInt(f.width);if(mini.isNumber(d)&&String(d)==f.width){f.width=d+"px"}if(mini.isNull(f.width)){f.width=this.columnWidth+"px"}}this.doUpdate()},getColumns:function(){return this.columns},doUpdate:function(){if(this._allowUpdate===false){return}var n=this.columns&&this.columns.length>0;if(n){mini.addClass(this.el,"mini-listbox-showColumns")}else{mini.removeClass(this.el,"mini-listbox-showColumns")}this._headerEl.style.display=n?"":"none";var a=[];if(n){a[a.length]='<table class="mini-listbox-headerInner" cellspacing="0" cellpadding="0"><tr>';var B=this.uid+"$ck$all";a[a.length]='<td class="mini-listbox-checkbox"><input type="checkbox" id="'+B+'"></td>';for(var v=0,u=this.columns.length;v<u;v++){var d=this.columns[v];var x=d.header;if(mini.isNull(x)){x="&nbsp;"}var q=d.width;if(mini.isNumber(q)){q=q+"px"}a[a.length]='<td class="';if(d.headerCls){a[a.length]=d.headerCls}a[a.length]='" style="';if(d.headerStyle){a[a.length]=d.headerStyle+";"}if(q){a[a.length]="width:"+q+";"}if(d.headerAlign){a[a.length]="text-align:"+d.headerAlign+";"}a[a.length]='">';a[a.length]=x;a[a.length]="</td>"}a[a.length]="</tr></table>"}this._headerEl.innerHTML=a.join("");var a=[];var D=this.data;a[a.length]='<table class="mini-listbox-items" cellspacing="0" cellpadding="0">';if(this.showEmpty&&D.length==0){a[a.length]='<tr><td colspan="20">'+this.emptyText+"</td></tr>"}else{this._doNullItem();for(var y=0,t=D.length;y<t;y++){var A=D[y];var g=-1;var s=" ";var f=-1;var C=" ";a[a.length]='<tr id="';a[a.length]=this._createItemId(y);a[a.length]='" index="';a[a.length]=y;a[a.length]='" class="mini-listbox-item ';if(A.enabled===false){a[a.length]=" mini-disabled "}g=a.length;a[a.length]=s;a[a.length]='" style="';f=a.length;a[a.length]=C;a[a.length]='">';var r=this._createCheckId(y);var p=this.name;var c=this.getItemValue(A);var b="";if(A.enabled===false){b="disabled"}a[a.length]='<td class="mini-listbox-checkbox"><input '+b+' id="'+r+'" type="checkbox" ></td>';if(n){for(var v=0,u=this.columns.length;v<u;v++){var d=this.columns[v];var z=this._OnDrawCell(A,y,d);var q=d.width;if(typeof q=="number"){q=q+"px"}a[a.length]='<td class="';if(z.cellCls){a[a.length]=z.cellCls}a[a.length]='" style="';if(z.cellStyle){a[a.length]=z.cellStyle+";"}if(q){a[a.length]="width:"+q+";"}if(d.align){a[a.length]="text-align:"+d.align+";"}a[a.length]='">';a[a.length]=z.cellHtml;a[a.length]="</td>";if(z.rowCls){s=z.rowCls}if(z.rowStyle){C=z.rowStyle}}}else{var z=this._OnDrawCell(A,y,null);a[a.length]='<td class="';if(z.cellCls){a[a.length]=z.cellCls}a[a.length]='" style="';if(z.cellStyle){a[a.length]=z.cellStyle}a[a.length]='">';a[a.length]=z.cellHtml;a[a.length]="</td>";if(z.rowCls){s=z.rowCls}if(z.rowStyle){C=z.rowStyle}}a[g]=s;a[f]=C;a[a.length]="</tr>"}}a[a.length]="</table>";var o=a.join("");this._viewEl.firstChild.innerHTML=o;this._doSelects();this.doLayout()},doLayout:function(){if(!this.canLayout()){return}if(this.columns&&this.columns.length>0){mini.addClass(this.el,"mini-listbox-showcolumns")}else{mini.removeClass(this.el,"mini-listbox-showcolumns")}if(this.showCheckBox){mini.removeClass(this.el,"mini-listbox-hideCheckBox")}else{mini.addClass(this.el,"mini-listbox-hideCheckBox")}var b=this.uid+"$ck$all";var n=document.getElementById(b);if(n){n.style.display=this.showAllCheckBox?"":"none"}var k=this.isAutoHeight();h=this.getHeight(true);g=mini.getWidth(this._borderEl,true);var l=g;var j=this._viewEl;j.style.width=g+"px";if(!k){var c=mini.getHeight(this._headerEl);h=h-c;j.style.height=h+"px"}else{j.style.height="auto"}if(isIE){var f=this._headerEl.firstChild,d=this._viewEl.firstChild.firstChild;if(this._viewEl.offsetHeight>=this._viewEl.scrollHeight){d.style.width="100%";if(f){f.style.width="100%"}}else{var g=parseInt(d.parentNode.offsetWidth)+"px";if(f){f.style.width=g}}}if(this._viewEl.offsetHeight<this._viewEl.scrollHeight){var a=$(this._viewEl).width()-$(this._contentEl).width();this._headerEl.style.width=(l-a)+"px"}else{this._headerEl.style.width="100%"}},setShowCheckBox:function(a){this.showCheckBox=a;this.doLayout()},getShowCheckBox:function(){return this.showCheckBox},setShowAllCheckBox:function(a){this.showAllCheckBox=a;this.doLayout()},getShowAllCheckBox:function(){return this.showAllCheckBox},setShowNullItem:function(a){if(this.showNullItem!=a){this.showNullItem=a;this._doNullItem();this.doUpdate()}},getShowNullItem:function(){return this.showNullItem},setNullItemText:function(a){if(this.nullItemText!=a){this.nullItemText=a;this._doNullItem();this.doUpdate()}},getNullItemText:function(){return this.nullItemText},_doNullItem:function(){for(var b=0,a=this.data.length;b<a;b++){var c=this.data[b];if(c.__NullItem){this.data.removeAt(b);break}}if(this.showNullItem){var c={__NullItem:true};c[this.textField]="";c[this.valueField]="";this.data.insert(0,c)}},_OnDrawCell:function(a,b,c){var f=c?mini._getMap(c.field,a):this.getItemText(a);var g={sender:this,index:b,rowIndex:b,record:a,item:a,column:c,field:c?c.field:null,value:f,cellHtml:f,rowCls:null,cellCls:c?(c.cellCls||""):"",rowStyle:null,cellStyle:c?(c.cellStyle||""):""};var j=this.columns&&this.columns.length>0;if(!j){if(b==0&&this.showNullItem){g.cellHtml=this.nullItemText}}if(g.autoEscape==true){g.cellHtml=mini.htmlEncode(g.cellHtml)}if(c){if(c.dateFormat){if(mini.isDate(g.value)){g.cellHtml=mini.formatDate(f,c.dateFormat)}else{g.cellHtml=f}}var d=c.renderer;if(d){fn=typeof d=="function"?d:window[d];if(fn){g.cellHtml=fn.call(c,g)}}}this.fire("drawcell",g);if(g.cellHtml===null||g.cellHtml===undefined||g.cellHtml===""){g.cellHtml="&nbsp;"}return g},__OnScroll:function(a){this._headerEl.scrollLeft=this._viewEl.scrollLeft},__OnClick:function(f){var d=this.uid+"$ck$all";if(f.target.id==d){var a=document.getElementById(d);if(a){var b=a.checked;var c=this.getValue();if(b){this.selectAll()}else{this.deselectAll()}this._OnSelectionChanged();if(c!=this.getValue()){this._OnValueChanged();this.fire("itemclick",{htmlEvent:f})}}return}this._fireEvent(f,"Click")},getAttrs:function(f){var b=mini.ListBox.superclass.getAttrs.call(this,f);mini._ParseString(f,b,["nullItemText","ondrawcell"]);mini._ParseBool(f,b,["showCheckBox","showAllCheckBox","showNullItem"]);if(f.nodeName.toLowerCase()!="select"){var d=mini.getChildNodes(f);for(var c=0,a=d.length;c<a;c++){var g=d[c];var j=jQuery(g).attr("property");if(!j){continue}j=j.toLowerCase();if(j=="columns"){b.columns=mini._ParseColumns(g)}else{if(j=="data"){b.data=g.innerHTML}}}}return b}});mini.regClass(mini.ListBox,"listbox");mini.CheckBoxList=function(){mini.CheckBoxList.superclass.constructor.apply(this,arguments)};mini.extend(mini.CheckBoxList,mini.ListControl,{formField:true,_labelFieldCls:"mini-labelfield-checkboxlist",multiSelect:true,repeatItems:0,repeatLayout:"none",repeatDirection:"horizontal",_itemCls:"mini-checkboxlist-item",_itemHoverCls:"mini-checkboxlist-item-hover",_itemSelectedCls:"mini-checkboxlist-item-selected",_tableCls:"mini-checkboxlist-table",_tdCls:"mini-checkboxlist-td",_checkType:"checkbox",uiCls:"mini-checkboxlist",_create:function(){var a=this.el=document.createElement("div");this.el.className=this.uiCls;this.el.innerHTML='<table cellpadding="0" border="0" cellspacing="0" style="display:table;"><tr><td><div class="mini-list-inner"></div><div class="mini-errorIcon"></div><input type="hidden" /></td></tr></table>';this.cellEl=a.getElementsByTagName("td")[0];this._innerEl=this.cellEl.firstChild;this._valueEl=this.cellEl.lastChild;this._errorIconEl=this.cellEl.childNodes[1];this._borderEl=this.el.firstChild},_getRepeatTable:function(){var g=[];if(this.repeatItems>0){if(this.repeatDirection=="horizontal"){var j=[];for(var d=0,b=this.data.length;d<b;d++){var f=this.data[d];if(j.length==this.repeatItems){g.push(j);j=[]}j.push(f)}g.push(j)}else{var a=this.repeatItems>this.data.length?this.data.length:this.repeatItems;for(var d=0,b=a;d<b;d++){g.push([])}for(var d=0,b=this.data.length;d<b;d++){var f=this.data[d];var c=d%this.repeatItems;g[c].push(f)}}}else{g=[this.data.clone()]}return g},doUpdate:function(){var d=this.data;var p="";for(var f=0,a=d.length;f<a;f++){var g=d[f];g._i=f}if(this.repeatLayout=="flow"){var n=this._getRepeatTable();for(var f=0,a=n.length;f<a;f++){var o=n[f];for(var c=0,b=o.length;c<b;c++){var g=o[c];p+=this._createItemHtml(g,g._i)}if(f!=a-1){p+="<br/>"}}}else{if(this.repeatLayout=="table"){var n=this._getRepeatTable();p+='<table class="'+this._tableCls+'" cellpadding="0" cellspacing="1">';for(var f=0,a=n.length;f<a;f++){var o=n[f];p+="<tr>";for(var c=0,b=o.length;c<b;c++){var g=o[c];p+='<td class="'+this._tdCls+'">';p+=this._createItemHtml(g,g._i);p+="</td>"}p+="</tr>"}p+="</table>"}else{for(var f=0,a=d.length;f<a;f++){var g=d[f];p+=this._createItemHtml(g,f)}}}this._innerEl.innerHTML=p;for(var f=0,a=d.length;f<a;f++){var g=d[f];delete g._i}},_createItemHtml:function(l,f){var g=this._OnDrawItem(l,f);var a=this._createItemId(f);var j=this._createCheckId(f);var b=this.getItemValue(l);var d="";var n='<div id="'+a+'" index="'+f+'" class="'+this._itemCls+" ";if(l.enabled===false){n+=" mini-disabled ";d="disabled"}var k='onclick="return false"';k='onmousedown="this._checked = this.checked;" onclick="this.checked = this._checked"';var c='style="padding-right: 5px;"';n+=g.itemCls+'" style="'+g.itemStyle+'"><input '+k+" "+c+" "+d+' value="'+b+'" id="'+j+'" type="'+this._checkType+'" /><label for="'+j+'" onclick="return false;">';n+=g.itemHtml+"</label></div>";return n},_OnDrawItem:function(b,a){var c=this.getItemText(b);var d={index:a,item:b,itemHtml:c,itemCls:"",itemStyle:""};this.fire("drawitem",d);if(d.itemHtml===null||d.itemHtml===undefined){d.itemHtml=""}return d},setRepeatItems:function(a){a=parseInt(a);if(isNaN(a)){a=0}if(this.repeatItems!=a){this.repeatItems=a;this.doUpdate()}},getRepeatItems:function(){return this.repeatItems},setRepeatLayout:function(a){if(a!="flow"&&a!="table"){a="none"}if(this.repeatLayout!=a){this.repeatLayout=a;this.doUpdate()}},getRepeatLayout:function(){return this.repeatLayout},setRepeatDirection:function(a){if(a!="vertical"){a="horizontal"}if(this.repeatDirection!=a){this.repeatDirection=a;this.doUpdate()}},getRepeatDirection:function(){return this.repeatDirection},getAttrs:function(d){var b=mini.CheckBoxList.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,b,["ondrawitem"]);var f=parseInt(g.attr("repeatItems"));if(!isNaN(f)){b.repeatItems=f}var a=g.attr("repeatLayout");if(a){b.repeatLayout=a}var c=g.attr("repeatDirection");if(c){b.repeatDirection=c}return b}});mini.regClass(mini.CheckBoxList,"checkboxlist");mini.RadioButtonList=function(){mini.RadioButtonList.superclass.constructor.apply(this,arguments)};mini.extend(mini.RadioButtonList,mini.CheckBoxList,{multiSelect:false,_itemCls:"mini-radiobuttonlist-item",_itemHoverCls:"mini-radiobuttonlist-item-hover",_itemSelectedCls:"mini-radiobuttonlist-item-selected",_tableCls:"mini-radiobuttonlist-table",_tdCls:"mini-radiobuttonlist-td",_checkType:"radio",uiCls:"mini-radiobuttonlist"});mini.regClass(mini.RadioButtonList,"radiobuttonlist");mini.TreeSelect=function(){this.data=[];mini.TreeSelect.superclass.constructor.apply(this,arguments)};mini.extend(mini.TreeSelect,mini.PopupEdit,{valueFromSelect:false,text:"",value:"",autoCheckParent:false,expandOnLoad:false,valueField:"id",textField:"text",nodesField:"children",dataField:"",delimiter:",",multiSelect:false,data:[],url:"",allowInput:false,showTreeIcon:false,showTreeLines:true,resultAsTree:false,parentField:"pid",checkRecursive:false,showFolderCheckBox:false,showRadioButton:false,popupHeight:200,popupWidth:"100%",popupMaxHeight:250,popupMinWidth:100,set:function(d){if(typeof d=="string"){return this}var c=d.value;delete d.value;var f=d.text;delete d.text;var a=d.url;delete d.url;var b=d.data;delete d.data;mini.TreeSelect.superclass.set.call(this,d);if(!mini.isNull(b)){this.setData(b)}if(!mini.isNull(a)){this.setUrl(a)}if(!mini.isNull(c)){this.setValue(c)}if(!mini.isNull(f)){this.setText(f)}return this},uiCls:"mini-treeselect",_createPopup:function(){mini.TreeSelect.superclass._createPopup.call(this);this.tree=new mini.Tree();this.tree.setShowTreeIcon(true);this.tree.setStyle("border:0;width:100%;height:100%;overflow:hidden;");this.tree.setResultAsTree(this.resultAsTree);this.tree.render(this.popup._contentEl);this.tree.setCheckRecursive(this.checkRecursive);this.tree.setShowFolderCheckBox(this.showFolderCheckBox);this.tree.setShowRadioButton(this.showRadioButton);this.tree.setExpandOnNodeClick(this.expandOnNodeClick);this.tree.on("nodeclick",this.__OnNodeClick,this);this.tree.on("nodecheck",this.__OnCheckedChanged,this);this.tree.on("expand",this.__OnTreeExpand,this);this.tree.on("collapse",this.__OnTreeCollapse,this);this.tree.on("beforenodecheck",this.__OnTreeBeforeNodeCheck,this);this.tree.on("beforenodeselect",this.__OnTreeBeforeNodeSelect,this);this.tree.on("drawnode",this.__OnDrawNode,this);this.tree.useAnimation=false;var a=this;this.tree.on("beforeload",function(b){a.fire("beforeload",b)},this);this.tree.on("load",function(b){a.fire("load",b)},this);this.tree.on("loaderror",function(b){a.fire("loaderror",b)},this)},__OnDrawNode:function(a){this.fire("drawnode",a)},__OnTreeBeforeNodeCheck:function(a){a.tree=a.sender;this.fire("beforenodecheck",a)},__OnTreeBeforeNodeSelect:function(a){a.tree=a.sender;this.fire("beforenodeselect",a);if(a.cancel){this._nohide=true}},__OnTreeExpand:function(a){},__OnTreeCollapse:function(a){},findItems:function(a){return this.tree.findNodes(this.tree.getIdField(),a)},findNodes:function(a){return this.tree.getNodesByValue(a)},getSelectedNode:function(){return this.getSelectedNodes()[0]},getCheckedNodes:function(a){return this.tree.getNodesByValue(this.value)},getSelectedNodes:function(){return this.tree.getNodesByValue(this.value)},getParentNode:function(a){return this.tree.getParentNode(a)},getChildNodes:function(a){return this.tree.getChildNodes(a)},showPopup:function(){var a={cancel:false};this.fire("beforeshowpopup",a);this._firebeforeshowpopup=false;if(a.cancel==true){return}var b=this.popup.el.style.height;mini.TreeSelect.superclass.showPopup.call(this);this.tree.setValue(this.value,false);if(this.expandOnPopup){this.tree.expandPath(this.value)}this._nohide=false},expandOnPopup:false,setExpandOnPopup:function(a){this.expandOnPopup=a},getExpandOnPopup:function(){return this.expandOnPopup},__OnPopupHide:function(a){this.__doFocusCls();this.tree.clearFilter();this.fire("hidepopup")},getItem:function(a){return typeof a=="object"?a:this.data[a]},indexOf:function(a){return this.data.indexOf(a)},getAt:function(a){return this.data[a]},loadList:function(b,a,c){this.tree.loadList(b,a,c);this.data=this.tree.getData();this._getCheckedValue()},getList:function(){return this.tree.getList()},load:function(a){this.tree.load(a);this.data=this.tree.data;this._getCheckedValue()},_eval:function(_){return eval("("+_+")")},setData:function(a){if(typeof a=="string"){a=this._eval(a)}if(!mini.isArray(a)){a=[]}this.tree.setData(a);this.data=this.tree.data;this._getCheckedValue()},getData:function(){return this.data},_getCheckedValue:function(){var a=this.tree.getValue();this.setValue(a)},setUrl:function(a){this.getPopup();this.tree.setUrl(a);this.url=this.tree.url;this.data=this.tree.data;this._getCheckedValue()},getUrl:function(){return this.url},virtualScroll:false,setVirtualScroll:function(a){if(this.tree){this.tree.setVirtualScroll(a)}this.virtualScroll=a},getVirtualScroll:function(){return this.virtualScroll},pinyinField:"tag",setPinyinField:function(a){this.pinyinField=a},getPinyinField:function(){return this.pinyinField},setTextField:function(a){if(this.tree){this.tree.setTextField(a)}this.textField=a},getTextField:function(){return this.textField},setNodesField:function(a){if(this.tree){this.tree.setNodesField(a)}this.nodesField=a},getNodesField:function(){return this.nodesField},setDataField:function(a){if(this.tree){this.tree.setDataField(a)}this.dataField=a},getDataField:function(){return this.dataField},getValue:function(){var a=mini.TreeSelect.superclass.getValue.call(this);if(this.valueFromSelect&&a&&this.findItems(a).length==0){return""}return a},setValue:function(b){var a=this.tree.getValueAndText(b);if(a[1]==""&&!this.valueFromSelect){a[0]=b;a[1]=b}this.value=b;this._valueEl.value=b;this.text=this._textEl.value=a[1];this._doEmpty()},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;this.tree.setShowCheckBox(a);this.tree.setAllowSelect(!a);this.tree.setEnableHotTrack(!a)}},getMultiSelect:function(){return this.multiSelect},__OnNodeClick:function(f){if(this.multiSelect){return}var b=this.tree.getSelectedNode();var d=this.tree.getValueAndText(b);var a=d[0];var c=this.getValue();this.setValue(a);if(c!=this.getValue()){this._OnValueChanged()}if(this._nohide!==true){this.hidePopup();this.focus()}this._nohide=false;this.fire("nodeclick",{node:f.node})},__OnCheckedChanged:function(c){if(!this.multiSelect){return}var a=this.tree.getValue();var b=this.getValue();this.setValue(a);if(b!=this.getValue()){this._OnValueChanged()}this.focus()},__OnInputKeyDown:function(c){var a={htmlEvent:c};this.fire("keydown",a);if(c.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(c.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(c.keyCode){case 27:if(this.isShowPopup()){c.stopPropagation()}this.hidePopup();break;case 13:var b=this;setTimeout(function(){b.fire("enter",a)},10);break;case 37:break;case 38:c.preventDefault();break;case 39:break;case 40:c.preventDefault();this.showPopup();break;default:if(this.allowInput==false){}else{var b=this;setTimeout(function(){b._doQuery()},10)}break}},_doQuery:function(){if(this.multiSelect){return}var c=this.textField,a=this.pinyinField;var b=this._textEl.value.toLowerCase();this.tree.filter(function(f){var g=String(f[c]?f[c]:"").toLowerCase();var d=String(f[a]?f[a]:"").toLowerCase();if(g.indexOf(b)!=-1||d.indexOf(b)!=-1){return true}else{return false}});this.tree.expandAll();this.showPopup()},setCheckRecursive:function(a){this.checkRecursive=a;if(this.tree){this.tree.setCheckRecursive(a)}},getCheckRecursive:function(){return this.checkRecursive},setResultAsTree:function(a){this.resultAsTree=a;if(this.tree){this.tree.setResultAsTree(a)}},getResultAsTree:function(){return this.resultAsTree},setParentField:function(a){this.parentField=a;if(this.tree){this.tree.setParentField(a)}},getParentField:function(){return this.parentField},setValueField:function(a){if(this.tree){this.tree.setIdField(a)}this.valueField=a},getValueField:function(){return this.valueField},setShowTreeIcon:function(a){this.showTreeIcon=a;if(this.tree){this.tree.setShowTreeIcon(a)}},getShowTreeIcon:function(){return this.showTreeIcon},setShowTreeLines:function(a){this.showTreeLines=a;if(this.tree){this.tree.setShowTreeLines(a)}},getShowTreeLines:function(){return this.showTreeLines},setShowFolderCheckBox:function(a){this.showFolderCheckBox=a;if(this.tree){this.tree.setShowFolderCheckBox(a)}},getShowFolderCheckBox:function(){return this.showFolderCheckBox},setShowRadioButton:function(a){this.showRadioButton=a;if(this.tree){this.tree.setShowRadioButton(a)}},getShowRadioButton:function(){return this.showRadioButton},setAutoCheckParent:function(a){this.autoCheckParent=a;if(this.tree){this.tree.setAutoCheckParent(a)}},getAutoCheckParent:function(){return this.autoCheckParent},setExpandOnLoad:function(a){this.expandOnLoad=a;if(this.tree){this.tree.setExpandOnLoad(a)}},getExpandOnLoad:function(){return this.expandOnLoad},setValueFromSelect:function(a){this.valueFromSelect=a},getValueFromSelect:function(){return this.valueFromSelect},setAjaxData:function(a){this.ajaxData=a;this.tree.setAjaxData(a)},setAjaxType:function(a){this.ajaxType=a;this.tree.setAjaxType(a)},expandOnNodeClick:false,setExpandOnNodeClick:function(a){this.expandOnNodeClick=a;if(this.tree){this.tree.setExpandOnNodeClick(a)}},getExpandOnNodeClick:function(){return this.expandOnNodeClick},getAttrs:function(b){var a=mini.ComboBox.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["url","data","textField","pinyinField","valueField","nodesField","parentField","onbeforenodecheck","onbeforenodeselect","expandOnLoad","onnodeclick","onbeforeload","onload","onloaderror","ondrawnode"]);mini._ParseBool(b,a,["expandOnNodeClick","multiSelect","resultAsTree","checkRecursive","showTreeIcon","showTreeLines","showFolderCheckBox","showRadioButton","autoCheckParent","valueFromSelect","virtualScroll","expandOnPopup"]);if(a.expandOnLoad){var c=parseInt(a.expandOnLoad);if(mini.isNumber(c)){a.expandOnLoad=c}else{a.expandOnLoad=a.expandOnLoad=="true"?true:false}}return a}});mini.regClass(mini.TreeSelect,"TreeSelect");mini.Spinner=function(){mini.Spinner.superclass.constructor.apply(this,arguments);this.setValue(this.minValue)};mini.extend(mini.Spinner,mini.ButtonEdit,{value:0,minValue:0,maxValue:100,increment:1,decimalPlaces:-1,changeOnMousewheel:true,allowLimitValue:true,set:function(b){if(typeof b=="string"){return this}var a=b.value;delete b.value;mini.Spinner.superclass.set.call(this,b);if(!mini.isNull(a)){this.setValue(a)}return this},uiCls:"mini-spinner",_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-buttonedit-up"><span></span></span><span class="mini-buttonedit-down"><span></span></span></span>'},_initEvents:function(){mini.Spinner.superclass._initEvents.call(this);mini._BindEvents(function(){this.on("buttonmousedown",this.__OnButtonMouseDown,this);mini.on(this.el,"mousewheel",this.__OnMousewheel,this)},this)},_ValueLimit:function(){if(this.allowLimitValue==false){return}if(mini.isNull(this.value)&&this.allowNull){return}if(this.minValue>this.maxValue){this.maxValue=this.minValue+100}if(this.value<this.minValue){this.setValue(this.minValue)}if(this.value>this.maxValue){this.setValue(this.maxValue)}},getFormValue:function(){var b=this.value;b=parseFloat(b);if(this.allowNull&&isNaN(b)){return""}if(isNaN(b)){b=0}var g=String(b).split(".");var f=g[0],c=g[1];if(!c){c=""}if(this.decimalPlaces>0){for(var d=c.length,a=this.decimalPlaces;d<a;d++){c+="0"}c="."+c}else{if(c){c="."+c}}return f+c},allowNull:false,setValue:function(a){a=parseFloat(a);if(isNaN(a)){a=this.defaultValue}a=mini.parseFloat(a,this.culture,this.format);if(isNaN(a)&&!this.allowNull){a=this.minValue}if(isNaN(a)&&this.allowNull){a=null}if(a&&this.decimalPlaces>=0){a=parseFloat(a.toFixed(this.decimalPlaces))}if(this.value!=a){this.value=a;this._ValueLimit();this._valueEl.value=this.value;this.text=this._textEl.value=this.getFormatValue()}else{this.text=this._textEl.value=this.getFormatValue()}},setMaxValue:function(a){a=parseFloat(a);if(isNaN(a)){return}a=parseFloat(a);if(this.maxValue!=a){this.maxValue=a;this._ValueLimit()}},getMaxValue:function(a){return this.maxValue},setMinValue:function(a){a=parseFloat(a);if(isNaN(a)){return}a=parseFloat(a);if(this.minValue!=a){this.minValue=a;this._ValueLimit()}},getMinValue:function(a){return this.minValue},setIncrement:function(a){a=parseFloat(a);if(isNaN(a)){return}if(this.increment!=a){this.increment=a}},getIncrement:function(a){return this.increment},setDecimalPlaces:function(a){a=parseInt(a);if(isNaN(a)||a<0){return}this.decimalPlaces=a},getDecimalPlaces:function(a){return this.decimalPlaces},setChangeOnMousewheel:function(a){this.changeOnMousewheel=a},getChangeOnMousewheel:function(a){return this.changeOnMousewheel},setAllowLimitValue:function(a){this.allowLimitValue=a},getAllowLimitValue:function(a){return this.allowLimitValue},setAllowNull:function(a){this.allowNull=a},getAllowNull:function(a){return this.allowNull},format:"",setFormat:function(a){if(typeof a!="string"){return}if(this.format!=a){this.format=a;this.setText(this.getFormatValue())}},getFormat:function(){return this.format},getFormatValue:function(){if(mini.isNull(this.value)){return""}if(this.format&&mini.isNumber(this.value)){return mini.formatNumber(this.value,this.format,this.culture)}return this.value},_SpinTimer:null,_StartSpin:function(n,b,f){this._StopSpin();var c=1000000;var k=this.value*c;var j=n*c;var l=(k+j)/c;this.setValue(l);var g=this;var d=f;var a=new Date();this._SpinTimer=setInterval(function(){g.setValue(g.value+n);g._OnValueChanged();f--;if(f==0&&b>50){g._StartSpin(n,b-100,d+3)}var o=new Date();if(o-a>500){g._StopSpin()}a=o},b);mini.on(document,"mouseup",this._OnDocumentMouseUp,this)},_StopSpin:function(){clearInterval(this._SpinTimer);this._SpinTimer=null},__OnButtonMouseDown:function(a){this._DownValue=this.getValue();this.__OnInputTextChanged();if(a.spinType=="up"){this._StartSpin(this.increment,230,2)}else{this._StartSpin(-this.increment,230,2)}},__OnInputKeyDown:function(b){mini.Spinner.superclass.__OnInputKeyDown.call(this,b);var a=mini.Keyboard;switch(b.keyCode){case a.Top:this.setValue(this.value+this.increment);this._OnValueChanged();break;case a.Bottom:this.setValue(this.value-this.increment);this._OnValueChanged();break}},__OnMousewheel:function(c){if(this.isReadOnly()){return}if(this.changeOnMousewheel==false){return}var b=c.wheelDelta||c.originalEvent.wheelDelta;if(mini.isNull(b)){b=-c.detail*24}var a=this.increment;if(b<0){a=-a}this.setValue(this.value+a);this._OnValueChanged();return false},_OnDocumentMouseUp:function(a){this._StopSpin();mini.un(document,"mouseup",this._OnDocumentMouseUp,this);if(this._DownValue!=this.getValue()){this._OnValueChanged()}},__OnInputTextChanged:function(c){var a=this.getValue();var b=mini.parseFloat(this._textEl.value,this.culture,this.format);this.setValue(b);if(a!=this.getValue()){this._OnValueChanged()}},getAttrs:function(b){var a=mini.Spinner.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["minValue","maxValue","increment","decimalPlaces","format"]);mini._ParseBool(b,a,["allowLimitValue","allowNull","changeOnMousewheel"]);return a}});mini.regClass(mini.Spinner,"spinner");mini.TimeSpinner=function(){mini.TimeSpinner.superclass.constructor.apply(this,arguments);this.setValue("00:00:00")};mini.extend(mini.TimeSpinner,mini.ButtonEdit,{value:null,format:"H:mm:ss",uiCls:"mini-timespinner",_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-buttonedit-up"><span></span></span><span class="mini-buttonedit-down"><span></span></span></span>'},_initEvents:function(){mini.TimeSpinner.superclass._initEvents.call(this);mini._BindEvents(function(){this.on("buttonmousedown",this.__OnButtonMouseDown,this);mini.on(this.el,"mousewheel",this.__OnMousewheel,this);mini.on(this._textEl,"keydown",this.__OnKeyDown,this)},this)},setFormat:function(b){if(typeof b!="string"){return}var a=["H:mm:ss","HH:mm:ss","H:mm","HH:mm","H","HH","mm:ss"];if(this.format!=b){this.format=b;this.text=this._textEl.value=this.getFormattedValue()}},getFormat:function(){return this.format},setValue:function(a){a=mini.parseTime(a,this.format);if(!a){a=null}if(mini.isDate(a)){a=new Date(a.getTime())}this.value=a;this.text=this._textEl.value=this.getFormattedValue();this._valueEl.value=this.getFormValue()},getValue:function(){return this.value==null?null:new Date(this.value.getTime())},getFormValue:function(){if(!this.value){return""}return mini.formatDate(this.value,this.format)},getFormattedValue:function(){if(!this.value){return""}return mini.formatDate(this.value,this.format)},_ChangeValue:function(a,f){var d=this.getValue();if(d){switch(f){case"hours":var b=d.getHours()+a;if(b>23){b=23}if(b<0){b=0}d.setHours(b);break;case"minutes":var c=d.getMinutes()+a;if(c>59){c=59}if(c<0){c=0}d.setMinutes(c);break;case"seconds":var g=d.getSeconds()+a;if(g>59){g=59}if(g<0){g=0}d.setSeconds(g);break}}else{d="00:00:00"}this.setValue(d)},_SpinTimer:null,_StartSpin:function(a,g,f){this._StopSpin();this._ChangeValue(a,this._timeType);var d=this;var c=f;var b=new Date();this._SpinTimer=setInterval(function(){d._ChangeValue(a,d._timeType);f--;if(f==0&&g>50){d._StartSpin(a,g-100,c+3)}var j=new Date();if(j-b>500){d._StopSpin()}b=j},g);mini.on(document,"mouseup",this._OnDocumentMouseUp,this)},_StopSpin:function(){clearInterval(this._SpinTimer);this._SpinTimer=null},__OnButtonMouseDown:function(a){this._DownValue=this.getFormValue();this._timeType="hours";if(a.spinType=="up"){this._StartSpin(1,230,2)}else{this._StartSpin(-1,230,2)}},_OnDocumentMouseUp:function(a){this._StopSpin();mini.un(document,"mouseup",this._OnDocumentMouseUp,this);if(this._DownValue!=this.getFormValue()){this._OnValueChanged()}},__OnInputTextChanged:function(b){var a=this.getFormValue();this.setValue(this._textEl.value);if(a!=this.getFormValue()){this._OnValueChanged()}},getAttrs:function(b){var a=mini.TimeSpinner.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["format"]);return a}});mini.regClass(mini.TimeSpinner,"timespinner");mini.HtmlFile=function(){mini.HtmlFile.superclass.constructor.apply(this,arguments);this.on("validation",this.__OnValidation,this)};mini.extend(mini.HtmlFile,mini.ButtonEdit,{buttonText:"...",_buttonWidth:56,limitType:"",limitTypeErrorText:"",allowInput:false,readOnly:true,_cellSpacing:0,uiCls:"mini-htmlfile",_create:function(){mini.HtmlFile.superclass._create.call(this);this._fileEl=mini.append(this.el,'<input type="file" hideFocus class="mini-htmlfile-file" name="'+this.name+'" ContentEditable=false/>');mini.on(this._borderEl,"mousemove",this.__OnMouseMove,this);mini.on(this._fileEl,"change",this.__OnFileChange,this)},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+">"+this.buttonText+"</span>"},__OnFileChange:function(a){this.value=this._textEl.value=this._fileEl.value;this._OnValueChanged();a={htmlEvent:a};this.fire("fileselect",a)},__OnMouseMove:function(c){var a=c.pageX,d=c.pageY;var b=mini.getBox(this.el);a=(a-b.x-5);d=(d-b.y-5);if(this.enabled==false){a=-20;d=-20}this._fileEl.style.display="";this._fileEl.style.left=a+"px";this._fileEl.style.top=d+"px"},__OnValidation:function(c){if(!this.limitType){return}if(c.isValid==false){return}if(this.required==false&&c.value==""){return}var d=c.value.split(".");var a=("*."+d[d.length-1]).toLowerCase();var b=this.limitType.split(";");if(b.length>0&&b.indexOf(a)==-1){c.errorText=this.limitTypeErrorText+this.limitType;c.isValid=false}},setName:function(a){this.name=a;mini.setAttr(this._fileEl,"name",this.name)},getValue:function(){return this._textEl.value},setButtonText:function(b){this.buttonText=b;var a=mini.byClass("mini-buttonedit-button",this.el);if(a){a.innerHTML=b}},getButtonText:function(){return this.buttonText},setLimitType:function(a){this.limitType=a},getLimitType:function(){return this.limitType},getAttrs:function(b){var a=mini.HtmlFile.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["limitType","buttonText","limitTypeErrorText","onfileselect"]);return a}});mini.regClass(mini.HtmlFile,"htmlfile");mini.FilterEdit=function(){mini.FilterEdit.superclass.constructor.apply(this,arguments);this.on("buttonclick",this.__OnButtonClick,this);this.on("closeclick",this.__OnCloseClick,this)};mini.extend(mini.FilterEdit,mini.ButtonEdit,{uiCls:"mini-filteredit",_deferSetText:false,value:"",filterValue:"",filterData:null,_getMenu:function(){var a=this;if(!this.menu){this.menu=new mini.Menu();this.menu.on("itemclick",function(b){a.setFilterValue(b.item.value);a._OnValueChanged()})}return this.menu},__OnButtonClick:function(c){var d=this._getMenu();var b=(this.filterData||[]).clone();d.setItems(b);var a=this.findItem(this.filterValue);d.setSelectedItem(a);d.showAtEl(this._buttonsEl,{})},__OnCloseClick:function(a){this.setText("");this.setValue("");this.setFilterValue("");this._OnValueChanged()},findItem:function(f){var g=this._getMenu();var b=g.getItems();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(d.value==f){return d}}return null},setValue:function(a){if(a===null||a===undefined){a=""}a=String(a);this.value=a;this._valueEl.value=this._textEl.value=a},getFilterData:function(){return this.filterData||[]},setFilterData:function(a){if(!mini.isArray(a)){a=[]}this.filterData=a},getFilterValue:function(){return this.filterValue||""},setFilterValue:function(a){if(a===null||a===undefined){a=""}this.filterValue=a},getAttrs:function(el){var attrs=mini.FilterEdit.superclass.getAttrs.call(this,el);var jq=jQuery(el);mini._ParseString(el,attrs,["value","text","filterValue","filterData"]);if(typeof attrs.filterData=="string"){try{attrs.filterData=eval("("+attrs.filterData+")")}catch(e){attrs.filterData=mini._getMap(attrs.filterData,window)}}return attrs}});mini.regClass(mini.FilterEdit,"filteredit");mini.Lookup=function(){this.data=[];mini.Lookup.superclass.constructor.apply(this,arguments);mini.on(this._textEl,"mouseup",this.__OnMouseUp,this);this.on("showpopup",this.__OnShowPopup,this)};mini.extend(mini.Lookup,mini.PopupEdit,{allowInput:true,valueField:"id",textField:"text",delimiter:",",multiSelect:false,data:[],grid:null,_destroyPopup:false,uiCls:"mini-lookup",destroy:function(a){if(this.grid){this.grid.un("rowclick",this.__OnGridRowClickChanged,this);this.grid.un("load",this.__OnGridLoad,this);this.grid=null}mini.Lookup.superclass.destroy.call(this,a)},setMultiSelect:function(a){this.multiSelect=a;if(this.grid){this.grid.setMultiSelect(a)}},setGrid:function(a){if(typeof a=="string"){mini.parse(a);a=mini.get(a)}this.grid=mini.getAndCreate(a);if(this.grid){this.grid.setMultiSelect(this.multiSelect);this.grid.setCheckSelectOnLoad(false);this.grid.on("rowclick",this.__OnGridRowClickChanged,this);this.grid.on("load",this.__OnGridLoad,this);this.grid.on("checkall",this.__OnGridRowClickChanged,this)}},getGrid:function(){return this.grid},setValueField:function(a){this.valueField=a},getValueField:function(){return this.valueField},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},deselectAll:function(){this.data=[];this.setValue("");this.setText("");if(this.grid){this.grid.deselectAll()}},getItemValue:function(a){return String(a[this.valueField])},getItemText:function(b){var a=b[this.textField];return mini.isNull(a)?"":String(a)},getValueAndText:function(d){if(mini.isNull(d)){d=[]}var c=[];var g=[];for(var f=0,b=d.length;f<b;f++){var a=d[f];if(a){c.push(this.getItemValue(a));g.push(this.getItemText(a))}}return[c.join(this.delimiter),g.join(this.delimiter)]},_createData:function(){this.value=mini.isNull(this.value)?"":String(this.value);this.text=mini.isNull(this.text)?"":String(this.text);var d=[];var j=this.value.split(this.delimiter);var b=this.text.split(this.delimiter);var g=j.length;if(this.value){for(var f=0,c=g;f<c;f++){var n={};var a=j[f];var k=b[f];n[this.valueField]=a?a:"";n[this.textField]=k?k:"";d.push(n)}}this.data=d},_getValueMaps:function(c){var g={};for(var b=0,a=c.length;b<a;b++){var d=c[b];var f=d[this.valueField];g[f]=d}return g},setValue:function(a){mini.Lookup.superclass.setValue.call(this,a);this._createData()},setText:function(a){mini.Lookup.superclass.setText.call(this,a);this._createData()},__OnGridRowClickChanged:function(g){var l=this._getValueMaps(this.grid.getData());var d=this._getValueMaps(this.grid.getSelecteds());var k=this._getValueMaps(this.data);if(this.multiSelect==false){k={};this.data=[]}var j={};for(var a in k){var b=k[a];if(l[a]){if(d[a]){}else{j[a]=b}}}for(var f=this.data.length-1;f>=0;f--){var b=this.data[f];var a=b[this.valueField];if(j[a]){this.data.removeAt(f)}}for(var a in d){var b=d[a];if(!k[a]){this.data.push(b)}}var c=this.getValueAndText(this.data);this.setValue(c[0]);this.setText(c[1]);this._OnValueChanged()},__OnGridLoad:function(a){this.__OnShowPopup(a)},__OnShowPopup:function(g){var c=String(this.value).split(this.delimiter);var k={};for(var f=0,b=c.length;f<b;f++){var j=c[f];k[j]=1}var o=this.grid.getData();var d=[];for(var f=0,b=o.length;f<b;f++){var n=o[f];var a=n[this.valueField];if(k[a]){d.push(n)}}this.grid.selects(d)},doUpdate:function(){mini.Lookup.superclass.doUpdate.call(this);this._textEl.readOnly=true;this.el.style.cursor="default"},__OnInputKeyDown:function(a){mini.Lookup.superclass.__OnInputKeyDown.call(this,a);switch(a.keyCode){case 46:case 8:break;case 37:break;case 39:break}},__OnMouseUp:function(d){if(this.isReadOnly()){return}var c=mini.getSelectRange(this._textEl);var f=c[0],a=c[1];var b=this._findTextIndex(f)},_findTextIndex:function(j){var c=-1;if(this.text==""){return c}var f=String(this.text).split(this.delimiter);var a=0;for(var d=0,b=f.length;d<b;d++){var g=f[d];if(a<j&&j<=a+g.length){c=d;break}a=a+g.length+1}return c},getAttrs:function(b){var a=mini.Lookup.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["grid","valueField","textField"]);mini._ParseBool(b,a,["multiSelect"]);return a}});mini.regClass(mini.Lookup,"lookup");mini.TextBoxList=function(a){mini.TextBoxList.superclass.constructor.call(this,null);this.data=[];this.doUpdate();if(a){mini.applyTo.call(this,a)}};mini.extend(mini.TextBoxList,mini.ValidatorBase,{formField:true,value:"",text:"",valueField:"id",textField:"text",data:"",url:"",delay:150,allowInput:true,editIndex:0,_focusCls:"mini-textboxlist-focus",_itemHoverClass:"mini-textboxlist-item-hover",_itemSelectedClass:"mini-textboxlist-item-selected",_closeHoverClass:"mini-textboxlist-close-hover",textName:"",setTextName:function(a){this.textName=a},getTextName:function(){return this.textName},uiCls:"mini-textboxlist",_create:function(){var a='<table class="mini-textboxlist" cellpadding="0" cellspacing="0"><tr ><td class="mini-textboxlist-border"><ul></ul><a href="#"></a><input type="hidden"/></td></tr></table>';var b=document.createElement("div");b.innerHTML=a;this.el=b.firstChild;var c=this.el.getElementsByTagName("td")[0];this.ulEl=c.firstChild;this._valueEl=c.lastChild;this.focusEl=c.childNodes[1]},destroy:function(a){if(this.isShowPopup){this.hidePopup()}mini.un(document,"mousedown",this.__OnDocMouseDown,this);mini.TextBoxList.superclass.destroy.call(this,a)},_initEvents:function(){mini.TextBoxList.superclass._initEvents.call(this);mini.on(this.el,"mousemove",this.__OnMouseMove,this);mini.on(this.el,"mouseout",this.__OnMouseOut,this);mini.on(this.el,"mousedown",this.__OnMouseDown,this);mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"keydown",this.__OnKeyDown,this);mini.on(document,"mousedown",this.__OnDocMouseDown,this)},__OnDocMouseDown:function(a){if(this.isReadOnly()){return}if(this.isShowPopup){if(!mini.isAncestor(this.popup.el,a.target)){this.hidePopup()}}if(this._focused){if(this.within(a)==false){this.select(null,false);this.showInput(false);this.removeCls(this._focusCls);this._focused=false}}},errorIconEl:null,getErrorIconEl:function(){if(!this._errorIconEl){var a=this.el.rows[0];var b=a.insertCell(1);b.style.cssText="width:18px;vertical-align:top;";b.innerHTML='<div class="mini-errorIcon"></div>';this._errorIconEl=b.firstChild}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){jQuery(this._errorIconEl.parentNode).remove()}this._errorIconEl=null},doLayout:function(){if(this.canLayout()==false){return}mini.TextBoxList.superclass.doLayout.call(this);if(this.isReadOnly()||this.allowInput==false){this._inputEl.readOnly=true}else{this._inputEl.readOnly=false}},doUpdate:function(){if(this._ValueChangeTimer){clearInterval(this._ValueChangeTimer)}if(this._inputEl){mini.un(this._inputEl,"keydown",this.__OnInputKeyDown,this)}var j=[];var a=this.uid;for(var d=0,c=this.data.length;d<c;d++){var b=this.data[d];var n=a+"$text$"+d;var k=mini._getMap(this.textField,b);if(mini.isNull(k)){k=""}j[j.length]='<li id="'+n+'" class="mini-textboxlist-item">';j[j.length]=k;j[j.length]='<span class="mini-textboxlist-close"></span></li>'}var g=a+"$input";j[j.length]='<li id="'+g+'" class="mini-textboxlist-inputLi"><input class="mini-textboxlist-input" type="text" autocomplete="off"></li>';this.ulEl.innerHTML=j.join("");this.editIndex=this.data.length;if(this.editIndex<0){this.editIndex=0}this.inputLi=this.ulEl.lastChild;this._inputEl=this.inputLi.firstChild;mini.on(this._inputEl,"keydown",this.__OnInputKeyDown,this);var f=this;this._inputEl.onkeyup=function(){f._syncInputSize()};f._ValueChangeTimer=null;f._LastInputText=f._inputEl.value;this._inputEl.onfocus=function(){f._ValueChangeTimer=setInterval(function(){if(f._LastInputText!=f._inputEl.value){f._startQuery();f._LastInputText=f._inputEl.value}},10);f.addCls(f._focusCls);f._focused=true;f.fire("focus")};this._inputEl.onblur=function(){clearInterval(f._ValueChangeTimer);f.fire("blur")}},getItemByEvent:function(c){var b=mini.findParent(c.target,"mini-textboxlist-item");if(b){var a=b.id.split("$");var d=a[a.length-1];return this.data[d]}},getItem:function(a){if(typeof a=="number"){return this.data[a]}if(typeof a=="object"){return a}},getItemEl:function(c){var a=this.data.indexOf(c);var b=this.uid+"$text$"+a;return document.getElementById(b)},hoverItem:function(b,c){if(this.isReadOnly()||this.enabled==false){return}this.blurItem();var a=this.getItemEl(b);mini.addClass(a,this._itemHoverClass);if(c&&mini.hasClass(c.target,"mini-textboxlist-close")){mini.addClass(c.target,this._closeHoverClass)}},blurItem:function(){var b=this.data.length;for(var d=0,c=b;d<c;d++){var f=this.data[d];var a=this.getItemEl(f);if(a){mini.removeClass(a,this._itemHoverClass);mini.removeClass(a.lastChild,this._closeHoverClass)}}},showInput:function(b){this.select(null);if(mini.isNumber(b)){this.editIndex=b}else{this.editIndex=this.data.length}if(this.editIndex<0){this.editIndex=0}if(this.editIndex>this.data.length){this.editIndex=this.data.length}var a=this.inputLi;a.style.display="block";if(mini.isNumber(b)&&b<this.data.length){var d=this.data[b];var c=this.getItemEl(d);jQuery(c).before(a)}else{this.ulEl.appendChild(a)}if(b!==false){setTimeout(function(){try{a.firstChild.focus();mini.selectRange(a.firstChild,100)}catch(f){}},10)}else{this.lastInputText="";this._inputEl.value=""}return a},select:function(d){d=this.getItem(d);if(this._selected){var a=this.getItemEl(this._selected);mini.removeClass(a,this._itemSelectedClass)}this._selected=d;if(this._selected){var a=this.getItemEl(this._selected);mini.addClass(a,this._itemSelectedClass)}var c=this;if(this._selected){this.focusEl.focus();var b=this;setTimeout(function(){try{b.focusEl.focus()}catch(f){}},50)}if(this._selected){c.addCls(c._focusCls);c._focused=true}},_doInsertSelectValue:function(){var b=this._listbox.getSelected();var a=this.editIndex;if(b){b=mini.clone(b);this.insertItem(a,b)}},insertItem:function(a,b){this.data.insert(a,b);var d=this.getText();var c=this.getValue();this.setValue(c,false);this.setText(d,false);this._createData();this.doUpdate();this.showInput(a+1);this._OnValueChanged()},removeItem:function(b){if(!b){return}var a=this.getItemEl(b);mini.removeNode(a);this.data.remove(b);var d=this.getText();var c=this.getValue();this.setValue(c,false);this.setText(d,false);this._OnValueChanged()},_createData:function(){var g=(this.text?this.text:"").split(",");var c=(this.value?this.value:"").split(",");if(c[0]==""){c=[]}var a=c.length;this.data.length=a;for(var d=0,b=a;d<b;d++){var k=this.data[d];if(!k){k={};this.data[d]=k}var j=!mini.isNull(g[d])?g[d]:"";var f=!mini.isNull(c[d])?c[d]:"";mini._setMap(this.textField,j,k);mini._setMap(this.valueField,f,k)}this.value=this.getValue();this.text=this.getText()},getInputText:function(){return this._inputEl?this._inputEl.value:""},getText:function(){var f=[];for(var c=0,a=this.data.length;c<a;c++){var d=this.data[c];var b=mini._getMap(this.textField,d);if(mini.isNull(b)){b=""}b=b.replace(",","");f.push(b)}return f.join(",")},getValue:function(){var f=[];for(var c=0,a=this.data.length;c<a;c++){var d=this.data[c];var b=mini._getMap(this.valueField,d);f.push(b)}return f.join(",")},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},setName:function(a){if(this.name!=a){this.name=a;this._valueEl.name=a}},setValue:function(a){if(mini.isNull(a)){a=""}if(this.value!=a){this.value=a;this._valueEl.value=a;this._createData();this.doUpdate()}},setText:function(a){if(mini.isNull(a)){a=""}if(this.text!==a){this.text=a;this._createData();this.doUpdate()}},setValueField:function(a){this.valueField=a;this._createData()},getValueField:function(){return this.valueField},setTextField:function(a){this.textField=a;this._createData()},getTextField:function(){return this.textField},setAllowInput:function(a){this.allowInput=a;this.doLayout()},getAllowInput:function(){return this.allowInput},setUrl:function(a){this.url=a},getUrl:function(){return this.url},setPopupHeight:function(a){this.popupHeight=a},getPopupHeight:function(){return this.popupHeight},setPopupMinHeight:function(a){this.popupMinHeight=a},getPopupMinHeight:function(){return this.popupMinHeight},setPopupMaxHeight:function(a){this.popupMaxHeight=a},getPopupMaxHeight:function(){return this.popupMaxHeight},doQuery:function(){this._startQuery(true)},_syncInputSize:function(){if(this.isDisplay()==false){return}var d=this.getInputText();var b=mini.measureText(this._inputEl,d);var c=b.width>20?b.width+4:20;var a=mini.getWidth(this.el,true);if(c>a-15){c=a-15}this._inputEl.style.width=c+"px"},_startQuery:function(a){var b=this;setTimeout(function(){b._syncInputSize()},1);this.showPopup("loading");this._stopQuery();this._loading=true;this.delayTimer=setTimeout(function(){var c=b._inputEl.value;b._doQuery()},this.delay)},ajaxDataType:"text",ajaxContentType:"application/x-www-form-urlencoded; charset=UTF-8",_doQuery:function(){if(this.isDisplay()==false){return}var l=this.getInputText();var d=this;var a=this._listbox.getData();var c={value:this.getValue(),text:this.getText()};c[this.searchField]=l;var b=this.url;var k=typeof b=="function"?b:window[b];if(typeof k=="function"){b=k(this)}if(!b){return}var g="post";if(b){if(b.indexOf(".txt")!=-1||b.indexOf(".json")!=-1){g="get"}}var f={url:b,async:true,params:c,data:c,type:this.ajaxType?this.ajaxType:g,cache:false,cancel:false};this.fire("beforeload",f);if(f.cancel){return}var j=this;mini.copyTo(f,{success:function(r,s,q){delete f.params;var p={text:r,result:null,sender:j,options:f,xhr:q};var n=null;try{mini_doload(p);n=p.result;if(!n){n=mini.decode(r)}}catch(o){if(mini_debugger==true){throw new Error("textboxlist json is error")}}if(mini.isArray(n)){n={data:n}}if(j.dataField){n.data=mini._getMap(j.dataField,n)}if(!n.data){n.data=[]}d._listbox.setData(n.data);d.showPopup();d._listbox._focusItem(0,true);d.fire("load",{data:n.data,result:n});d._loading=false;if(d._selectOnLoad){d.__doSelectValue();d._selectOnLoad=null}},error:function(n,p,o){d.showPopup("error")}});d._ajaxer=mini.ajax(f)},_stopQuery:function(){if(this.delayTimer){clearTimeout(this.delayTimer);this.delayTimer=null}if(this._ajaxer){this._ajaxer.abort()}this._loading=false},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this.showPopup&&this.popup&&this.popup.within(a)){return true}return false},popupLoadingText:"<span class='mini-textboxlist-popup-loading'>Loading...</span>",popupErrorText:"<span class='mini-textboxlist-popup-error'>Error</span>",popupEmptyText:"<span class='mini-textboxlist-popup-noresult'>No Result</span>",isShowPopup:false,popupHeight:"",popupMinHeight:30,popupMaxHeight:150,_createPopup:function(){if(!this.popup){this.popup=new mini.ListBox();this.popup.addCls("mini-textboxlist-popup");this.popup.setStyle("position:absolute;left:0;top:0;");this.popup.showEmpty=true;this.popup.setValueField(this.valueField);this.popup.setTextField(this.textField);this.popup.render(document.body);this.popup.on("itemclick",function(a){this.hidePopup();this._doInsertSelectValue()},this)}this._listbox=this.popup;return this.popup},showPopup:function(d){if(this.isDisplay()==false){return}this.isShowPopup=true;var b=this._createPopup();b.el.style.zIndex=mini.getMaxZIndex();var f=this._listbox;f.emptyText=this.popupEmptyText;if(d=="loading"){f.emptyText=this.popupLoadingText;this._listbox.setData([])}else{if(d=="error"){f.emptyText=this.popupLoadingText;this._listbox.setData([])}}this._listbox.doUpdate();var c=this.getBox();var a=c.x,g=c.y+c.height;this.popup.el.style.display="block";mini.setXY(b.el,-1000,-1000);this.popup.setWidth(c.width);this.popup.setHeight(this.popupHeight);if(this.popup.getHeight()<this.popupMinHeight){this.popup.setHeight(this.popupMinHeight)}if(this.popup.getHeight()>this.popupMaxHeight){this.popup.setHeight(this.popupMaxHeight)}mini.setXY(b.el,a,g)},hidePopup:function(){this.isShowPopup=false;if(this.popup){this.popup.el.style.display="none"}},__OnMouseMove:function(b){if(this.enabled==false){return}var a=this.getItemByEvent(b);if(!a){this.blurItem();return}this.hoverItem(a,b)},__OnMouseOut:function(a){this.blurItem()},__OnClick:function(b){if(this.isReadOnly()||this.enabled==false){return}if(this.enabled==false){return}var a=this.getItemByEvent(b);if(!a){if(mini.findParent(b.target,"mini-textboxlist-input")){}else{this.showInput()}return}this.focusEl.focus();this.select(a);if(b&&mini.hasClass(b.target,"mini-textboxlist-close")){this.removeItem(a)}},__OnKeyDown:function(d){if(this.isReadOnly()||this.allowInput==false){return false}var b=this.data.indexOf(this._selected);var c=this;function a(){var f=c.data[b];c.removeItem(f);f=c.data[b];if(!f){f=c.data[b-1]}c.select(f);if(!f){c.showInput()}}switch(d.keyCode){case 8:d.preventDefault();a();break;case 37:case 38:this.select(null);this.showInput(b);break;case 39:case 40:b+=1;this.select(null);this.showInput(b);break;case 46:a();break}},__doSelectValue:function(){var a=this._listbox.getFocusedItem();if(a){this._listbox.setSelected(a)}this.lastInputText=this.text;this.hidePopup();this._doInsertSelectValue()},__OnInputKeyDown:function(j){this._selectOnLoad=null;if(this.isReadOnly()||this.allowInput==false){return false}j.stopPropagation();if(this.isReadOnly()||this.allowInput==false){return}var f=mini.getSelectRange(this._inputEl);var a=f[0],b=f[1],k=this._inputEl.value.length;var c=a==b&&a==0;var d=a==b&&b==k;if(this.isReadOnly()||this.allowInput==false){j.preventDefault()}if(j.keyCode==9){this.hidePopup();return}if(j.keyCode==16||j.keyCode==17||j.keyCode==18){return}switch(j.keyCode){case 13:if(this.isShowPopup){j.preventDefault();if(this._loading){this._selectOnLoad=true;return}this.__doSelectValue()}break;case 27:j.preventDefault();this.hidePopup();break;case 8:if(c){j.preventDefault()}case 37:if(c){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex>0){var g=this.editIndex-1;if(g<0){g=0}if(g>=this.data.length){g=this.data.length-1}this.showInput(false);this.select(g)}}}break;case 39:if(d){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex<=this.data.length-1){var g=this.editIndex;this.showInput(false);this.select(g)}}}break;case 38:j.preventDefault();if(this.isShowPopup){var g=-1;var l=this._listbox.getFocusedItem();if(l){g=this._listbox.indexOf(l)}g--;if(g<0){g=0}this._listbox._focusItem(g,true)}break;case 40:j.preventDefault();if(this.isShowPopup){var g=-1;var l=this._listbox.getFocusedItem();if(l){g=this._listbox.indexOf(l)}g++;if(g<0){g=0}if(g>=this._listbox.getCount()){g=this._listbox.getCount()-1}this._listbox._focusItem(g,true)}else{this._startQuery(true)}break;default:break}},focus:function(){try{this._inputEl.focus()}catch(a){}},blur:function(){try{this._inputEl.blur()}catch(a){}},searchField:"key",setSearchField:function(a){this.searchField=a},getSearchField:function(){return this.searchField},getAttrs:function(b){var a=mini.TextBox.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["value","text","valueField","textField","url","popupHeight","textName","onfocus","onbeforeload","onload","searchField"]);mini._ParseBool(b,a,["allowInput"]);mini._ParseInt(b,a,["popupMinHeight","popupMaxHeight"]);return a}});mini.regClass(mini.TextBoxList,"textboxlist");mini.AutoComplete=function(){mini.AutoComplete.superclass.constructor.apply(this,arguments);var a=this;a._ValueChangeTimer=null;this._textEl.onfocus=function(){a._LastInputText=a._textEl.value;a._ValueChangeTimer=setInterval(function(){if(a._LastInputText!=a._textEl.value){a._tryQuery();a._LastInputText=a._textEl.value;if(a._textEl.value==""&&a.value!=""){a.setValue("");a._OnValueChanged()}}},10)};this._textEl.onblur=function(){clearInterval(a._ValueChangeTimer);if(!a.isShowPopup()){if(a._LastInputText!=a._textEl.value){if(a._textEl.value==""&&a.value!=""){a.setValue("");a._OnValueChanged()}}}};this._buttonEl.style.display="none";this._doInputLayout()};mini.extend(mini.AutoComplete,mini.ComboBox,{url:"",allowInput:true,delay:150,showButton:false,searchField:"key",minChars:0,_buttonWidth:0,uiCls:"mini-autocomplete",_initInput:function(){var a=this;if(isFirefox){this._textEl.oninput=function(){if(!a.enterQuery){a._tryQuery()}}}},setUrl:function(a){this.url=a},setValue:function(a){if(mini.isNull(a)){a=""}if(this.value!=a){this.value=a;this._valueEl.value=this.value}},setText:function(a){if(mini.isNull(a)){a=""}if(this.text!=a){this.text=a;this._LastInputText=a}this._textEl.value=this.text},setMinChars:function(a){this.minChars=a},getMinChars:function(){return this.minChars},setSearchField:function(a){this.searchField=a},getSearchField:function(){return this.searchField},popupLoadingText:"<span class='mini-textboxlist-popup-loading'>Loading...</span>",popupErrorText:"<span class='mini-textboxlist-popup-error'>Error</span>",popupEmptyText:"<span class='mini-textboxlist-popup-noresult'>No Result</span>",showPopup:function(b){var a=this.getPopup();var c=this._listbox;c.showEmpty=true;c.emptyText=this.popupEmptyText;if(b=="loading"){c.emptyText=this.popupLoadingText;this._listbox.setData([])}else{if(b=="error"){c.emptyText=this.popupLoadingText;this._listbox.setData([])}}this._listbox.doUpdate();mini.AutoComplete.superclass.showPopup.call(this)},__OnInputKeyDown:function(g){var b={htmlEvent:g};this.fire("keydown",b);if(g.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(g.keyCode==9){this.hidePopup();return}if(g.keyCode==16||g.keyCode==17||g.keyCode==18){return}if(this.isReadOnly()){return}switch(g.keyCode){case 27:if(this.isShowPopup()){g.stopPropagation()}this.hidePopup();break;case 13:if(!this.isShowPopup()||this._listbox.getData().length==0){if(this.enterQuery){this._tryQuery(this._textEl.value)}}if(this.isShowPopup()){g.preventDefault();g.stopPropagation();var a=this._listbox.getFocusedIndex();if(a!=-1){var c=this._listbox.getAt(a);var f=this._listbox.getValueAndText([c]);var d=f[0];this.setText(f[1]);this.setValue(d);this._OnValueChanged();this.hidePopup();this.focus()}}else{this.fire("enter",b)}break;case 37:break;case 38:var a=this._listbox.getFocusedIndex();if(a==-1){a=0;if(!this.multiSelect){var c=this._listbox.findItems(this.value)[0];if(c){a=this._listbox.indexOf(c)}}}if(this.isShowPopup()){if(!this.multiSelect){a-=1;if(a<0){a=0}this._listbox._focusItem(a,true)}}break;case 39:break;case 40:var a=this._listbox.getFocusedIndex();if(this.isShowPopup()){if(!this.multiSelect){a+=1;if(a>this._listbox.getCount()-1){a=this._listbox.getCount()-1}this._listbox._focusItem(a,true)}}else{this._tryQuery(this._textEl.value)}break;default:if(this.enterQuery==true){this.hidePopup();this.focus()}else{this._tryQuery(this._textEl.value)}break}},enterQuery:false,doQuery:function(){this._tryQuery()},_tryQuery:function(a){var b=this;if(this._queryTimer){clearTimeout(this._queryTimer);this._queryTimer=null}this._queryTimer=setTimeout(function(){var c=b._textEl.value;b._doQuery(c)},this.delay);this.showPopup("loading")},_doQuery:function(c){if(this._ajaxer){this._ajaxer.abort()}var b=this.url;var k="post";if(b){if(b.indexOf(".txt")!=-1||b.indexOf(".json")!=-1){k="get"}}var j={};j[this.searchField]=c;var g={url:b,async:true,params:j,data:j,type:this.ajaxType?this.ajaxType:k,cache:false,cancel:false};this.fire("beforeload",g);var d=this;function a(n,l){d._listbox.setData(n);d.showPopup();d._listbox._focusItem(0,true);d.data=n;d.fire("load",{data:n,result:l})}if(g.cancel){var f=g.result||[];a(f,f);return}mini.copyTo(g,{success:function(q,r,p){delete g.params;var o={text:q,result:null,sender:d,options:g,xhr:p};var l=null;try{mini_doload(o);l=o.result;if(!l){l=mini.decode(q)}}catch(n){if(mini_debugger==true){throw new Error("autocomplete json is error")}}if(mini.isArray(l)){l={data:l}}if(d.dataField){l.data=mini._getMap(d.dataField,l)}if(!l.data){l.data=[]}a(l.data,l)},error:function(l,o,n){d.showPopup("error")}});this._ajaxer=mini.ajax(g)},setEnterQuery:function(a){this.enterQuery=a},getEnterQuery:function(){return this.enterQuery},getAttrs:function(b){var a=mini.AutoComplete.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["searchField"]);mini._ParseBool(b,a,["enterQuery"]);return a}});mini.regClass(mini.AutoComplete,"autocomplete");mini.ToolTip=function(){mini.ToolTip.superclass.constructor.apply(this,arguments)};mini.extend(mini.ToolTip,mini.Control,{selector:"[title]",placement:"bottom",trigger:"hover focus",uiCls:"mini-tooltip",_create:function(){this.el=jQuery('<div class="mini-tooltip"><div class="mini-tooltip-arrow"></div><div class="mini-tooltip-inner"></div></div>')[0];this.$element=jQuery(this.el);this.$element.appendTo(document.body)},_initEvents:function(){},_bindTooltip:function(){var k=jQuery(document),a=this.selector,g="tooltip";var f=this.trigger.split(" ");for(var d=f.length;d--;){var c=f[d];if(c=="click"){k.on("click."+g,a,$.proxy(this._toggle,this))}else{if(c!="manual"){var j=c=="hover"?"mouseenter":"focus";var b=c=="hover"?"mouseleave":"blur";k.on(j+"."+g,a,$.proxy(this._enter,this));k.on(b+"."+g,a,$.proxy(this._leave,this))}}}},setSelector:function(a){this.selector=a;this._bindTooltip()},getSelector:function(){return this.selector},setPlacement:function(a){this.placement=a},getPlacement:function(){return this.placement},_enter:function(a){this.open(a.currentTarget)},_leave:function(a){this.close()},_toggle:function(a){if(this._getTip().css("display")=="none"){this.enter(a)}else{this.leave(a)}},open:function(c){var c=$(c)[0]||this.target,d=$(c),a=this.getContent(c);var b={element:c,content:a,cancel:!a};this.fire("beforeopen",b);if(b.cancel){return}this.$element.show();this._target=c;this.setContent(b.content);this.fire("open",{element:c})},close:function(){this._target=null;this.$element.hide()},showLoading:function(){this.setContent('<div class="mini-tooltip-loading"></div>')},setContent:function(a){this.$element.children(".mini-tooltip-inner").html(a||"&nbsp;");this.applyPlacement()},getContent:function(a){var b=a.title;if(b){$(a).attr("data-tooltip",b).attr("title","")}if(!b){b=$(a).attr("data-tooltip")}return b},applyPlacement:function(){if(!this._target){return}if(this.$element.css("display")=="none"){return}var f=this._target,a=jQuery(f),b=a.attr("data-placement")||this.placement,o=this.$element;o.show().css({left:"-2000px",top:"-2000px"});function l(q){o.removeClass("mini-tooltip-left mini-tooltip-top mini-tooltip-right mini-tooltip-bottom mini-tooltip-bottomleft mini-tooltip-topleft mini-tooltip-bottomright mini-tooltip-topright").addClass("mini-tooltip-"+q)}function d(q){o.offset(q)}var c=mini.getBox(f);var j=mini.getViewportBox();var n=c.top-j.top,p=j.bottom-c.bottom;l(b);var g=mini.getBox(o[0]);var k=mini.getCalculatedOffset(b,c,g.width,g.height);if(b=="left"){}else{if(b=="right"){}else{if(b=="top"){}else{if(b=="bottom"){}else{if(b=="bottomleft"&&n>p){if(k.top+g.height>j.bottom){b="topleft"}}else{if(b=="topleft"){}}}}}}l(b);k=mini.getCalculatedOffset(b,c,g.width,g.height);d(k)},getAttrs:function(b){var a=mini.ToolTip.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["selector","placement","onbeforeopen","onopen","onclose"]);return a}});mini.regClass(mini.ToolTip,"tooltip");mini.getCalculatedOffset=function(a,d,b,c){if(a=="bottom"){return{top:d.top+d.height,left:d.left+d.width/2-b/2}}if(a=="top"){return{top:d.top-c,left:d.left+d.width/2-b/2}}if(a=="left"){return{top:d.top+d.height/2-c/2,left:d.left-b}}if(a=="bottomleft"){return{top:d.top+d.height,left:d.left}}if(a=="bottomright"){return{top:d.top+d.height,left:d.left+d.width-b}}if(a=="topleft"){return{top:d.top-c,left:d.left}}if(a=="topright"){return{top:d.top-c,left:d.left+d.width-b}}return{top:d.top+d.height/2-c/2,left:d.left+d.width}};mini.FileUpload=function(a){this.postParam={};mini.FileUpload.superclass.constructor.call(this,a);this.on("validation",this.__OnValidation,this)};mini.extend(mini.FileUpload,mini.ButtonEdit,{buttonText:"...",_buttonWidth:56,limitTypeErrorText:"",readOnly:true,_cellSpacing:0,limitSize:"",limitType:"",typesDescription:"",uploadLimit:0,queueLimit:"",flashUrl:"",uploadUrl:"",showUploadProgress:true,postParam:null,uploadOnSelect:false,uiCls:"mini-fileupload",_create:function(){mini.FileUpload.superclass._create.call(this);mini.addClass(this.el,"mini-htmlfile");this._progressbarEl=mini.append(this._borderEl,'<div id="'+this._id+'$progressbar"  class="mini-fileupload-progressbar"><div id="'+this._id+'$complete" class="mini-fileupload-complete"></div></div>');this._completeEl=this._progressbarEl.firstChild;this._uploadId=this._id+"$button_placeholder";this._fileEl=mini.append(this.el,'<span id="'+this._uploadId+'"></span>');this.uploadEl=this._fileEl;mini.on(this._borderEl,"mousemove",this.__OnMouseMove,this)},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+">"+this.buttonText+"</span>"},destroy:function(a){if(this._innerEl){mini.clearEvent(this._innerEl);this._innerEl=null}if(this.swfUpload){this.swfUpload.destroy();this.swfUpload=null}mini.FileUpload.superclass.destroy.call(this,a)},__OnMouseMove:function(a){if(this.enabled==false){return}var d=this;if(!this.swfUpload){var b=new SWFUpload({file_post_name:this.name,upload_url:d.uploadUrl,flash_url:d.flashUrl,file_size_limit:d.limitSize,file_types:d.limitType,file_types_description:d.typesDescription,file_upload_limit:parseInt(d.uploadLimit),file_queue_limit:d.queueLimit,file_queued_handler:mini.createDelegate(this.__on_file_queued,this),upload_error_handler:mini.createDelegate(this.__on_upload_error,this),upload_success_handler:mini.createDelegate(this.__on_upload_success,this),upload_complete_handler:mini.createDelegate(this.__on_upload_complete,this),upload_progress_handler:mini.createDelegate(this.__on_upload_progress,this),file_queue_error_handler:mini.createDelegate(this.__on_file_queued_error,this),button_placeholder_id:this._uploadId,button_width:1000,button_height:50,button_window_mode:"transparent",button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,debug:false});b.flashReady();this.swfUpload=b;var c=this.swfUpload.movieElement;c.style.zIndex=1000;c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.width="100%";c.style.height="50px"}else{}},addPostParam:function(a){mini.copyTo(this.postParam,a)},setPostParam:function(a){this.addPostParam(a)},getPostParam:function(){return this.postParam},setLimitType:function(a){this.limitType=a;if(this.swfUpload){this.swfUpload.setFileTypes(this.limitType,this.typesDescription)}},getLimitType:function(){return this.limitType},setTypesDescription:function(a){this.typesDescription=a;if(this.swfUpload){this.swfUpload.setFileTypes(this.limitType,this.typesDescription)}},getTypesDescription:function(){return this.typesDescription},setButtonText:function(a){this.buttonText=a;this._buttonEl.innerHTML=a},getButtonText:function(){return this.buttonText},setUploadLimit:function(a){this.uploadLimit=a},setQueueLimit:function(a){this.queueLimit=a},setFlashUrl:function(a){this.flashUrl=a},setUploadUrl:function(a){if(this.swfUpload){this.swfUpload.setUploadURL(a)}this.uploadUrl=a},getUploadUrl:function(){return this.uploadUrl},setName:function(a){this.name=a},startUpload:function(b){var a={cancel:false};this.fire("beforeupload",a);if(a.cancel==true){return}if(this.swfUpload){this.swfUpload.setPostParams(this.postParam);this.swfUpload.startUpload()}},setShowUploadProgress:function(a){this.showUploadProgress=a;this._progressbarEl.style.display=a?"block":"none"},getShowUploadProgress:function(){return this.showUploadProgress},clear:function(){this.setValue("");this.setText("");if(this.swfUpload){this.swfUpload.cancelUpload()}},__on_upload_progress:function(c,b,f){if(this.showUploadProgress){var a=mini.getWidth(this._progressbarEl);var d=a*b/f;mini.setWidth(this._completeEl,d)}this._progressbarEl.style.display=this.showUploadProgress?"block":"none";var g={file:c,complete:b,total:f};this.fire("uploadprogress",g)},__on_file_queued_error:function(a,b,d){var c={file:a,code:b,msg:d};this.fire("queuederror",c)},__on_file_queued:function(d){var c=this.swfUpload.getStats();if(c){var a=c.files_queued;if(a>1){for(var b=0;b<a-1;b++){this.swfUpload.cancelUpload()}}}var f={file:d};if(this.uploadOnSelect){this.startUpload()}this.setText(d.name);this.setValue(d.name);this.validate();this.fire("fileselect",f)},__on_upload_success:function(b,a){var c={file:b,serverData:a};this.fire("uploadsuccess",c);this._progressbarEl.style.display="none"},__on_upload_error:function(a,c,b){if(b=="File Cancelled"){return}this._progressbarEl.style.display="none";var d={file:a,code:c,message:b};this.fire("uploaderror",d)},__on_upload_complete:function(a){this._progressbarEl.style.display="none";this.fire("uploadcomplete",a)},__fileError:function(){},getAttrs:function(b){var a=mini.FileUpload.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["limitType","limitSize","flashUrl","uploadUrl","uploadLimit","buttonText","showUploadProgress","onuploadsuccess","onuploaderror","onuploadcomplete","onfileselect","onuploadprogress","onqueuederror"]);mini._ParseBool(b,a,["uploadOnSelect"]);return a}});mini.regClass(mini.FileUpload,"fileupload");mini.Form=function(a){this.el=mini.byId(a);if(!this.el){throw new Error("form element not null")}mini.Form.superclass.constructor.apply(this,arguments)};mini.extend(mini.Form,mini.Component,{el:null,getFields:function(){if(!this.el){return[]}var a=mini.findControls(function(b){if(!b.el||b.formField!=true){return false}if(mini.isAncestor(this.el,b.el)){return true}return false},this);return a},getFieldsMap:function(){var a=this.getFields();var f={};for(var c=0,b=a.length;c<b;c++){var d=a[c];if(d.name){f[d.name]=d}}return f},getField:function(a){if(!this.el){return null}return mini.getbyName(a,this.el)},getData:function(c,n){if(mini.isNull(n)){n=true}var j=c?"getFormValue":"getValue";var k=this.getFields();var d={};for(var f=0,a=k.length;f<a;f++){var b=k[f];var g=b[j];if(!g){continue}if(b.name){if(n==true){mini._setMap(b.name,g.call(b),d)}else{d[b.name]=g.call(b)}}if(b.textName&&b.getText){if(n==true){mini._setMap(b.textName,b.getText(),d)}else{d[b.textName]=b.getText()}}}return d},setData:function(d,f,a){if(mini.isNull(a)){a=true}if(typeof d!="object"){d={}}var j=this.getFieldsMap();for(var c in j){var g=j[c];if(!g){continue}if(g.setValue){var b=d[c];if(a==true){b=mini._getMap(c,d)}if(b===undefined&&f===false){continue}if(b===null){b=""}g.setValue(b)}if(g.setText&&g.textName){var k=d[g.textName];if(a==true){k=mini._getMap(g.textName,d)}if(mini.isNull(k)){k=""}g.setText(k)}}},reset:function(){var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(!d.setValue){continue}if(d.setText&&d._clearText!==false){var f=d.defaultText;if(mini.isNull(f)){f=""}d.setText(f)}d.setValue(d.defaultValue)}this.setIsValid(true)},clear:function(){var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(!d.setValue){continue}if(d.setText&&d._clearText!==false){d.setText("")}d.setValue("")}this.setIsValid(true)},getValidateFields:function(){function c(j){return j.isDisplay(function(k){if(mini.hasClass(k,"mini-tabs-body")){return true}})}var a=[];var d=this.getFields();for(var f=0,b=d.length;f<b;f++){var g=d[f];if(!g.validate||!g.isDisplay){continue}if(c(g)){a.push(g)}}return a},validate:function(f){var c=this.getValidateFields();for(var d=0,b=c.length;d<b;d++){var g=c[d];var a=g.validate();if(a==false&&f===false){break}}return this.isValid()},isValid:function(){var b=this.getValidateFields();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(d.isValid()==false){return false}}return true},setIsValid:function(f){var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(!d.setIsValid){continue}d.setIsValid(f)}},getErrorTexts:function(){var a=[];var f=this.getErrors();for(var c=0,b=f.length;c<b;c++){var d=f[c];a.push(d.errorText)}return a},getErrors:function(){var f=[];var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var d=b[c];if(!d.isValid){continue}if(d.isValid()==false){f.push(d)}}return f},mask:function(a){if(typeof a=="string"){a={html:a}}a=a||{};a.el=this.el;if(!a.cls){a.cls=this._maskCls}mini.mask(a)},unmask:function(){mini.unmask(this.el)},_maskCls:"mini-mask-loading",loadingMsg:"...",loading:function(a){this.mask(a||this.loadingMsg)},__OnValueChanged:function(a){this._changed=true},_changed:false,setChanged:function(d){this._changed=d;var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var f=b[c];f.on("valuechanged",this.__OnValueChanged,this)}},isChanged:function(){return this._changed},setEnabled:function(d){var b=this.getFields();for(var c=0,a=b.length;c<a;c++){var f=b[c];f.setEnabled(d)}}});mini.Fit=function(){mini.Fit.superclass.constructor.apply(this,arguments)};mini.extend(mini.Fit,mini.Container,{style:"",_clearBorder:false,uiCls:"mini-fit",_create:function(){this.el=document.createElement("div");this.el.className="mini-fit";this._bodyEl=this.el},_initEvents:function(){},isFixedSize:function(){return false},doLayout:function(){if(!this.canLayout()){return}var k=this.el.parentNode;var q=mini.getChildNodes(k);if(k==document.body){this.el.style.height="0px"}var r=mini.getHeight(k,true);for(var g=0,c=q.length;g<c;g++){var b=q[g];var a=b.tagName?b.tagName.toLowerCase():"";if(b==this.el||(a=="style"||a=="script"||b.type=="hidden")){continue}var o=mini.getStyle(b,"position");if(o=="absolute"||o=="fixed"){continue}var j=mini.getHeight(b);var f=mini.getMargins(b);r=r-j-f.top-f.bottom}var d=mini.getBorders(this.el);var p=mini.getPaddings(this.el);var f=mini.getMargins(this.el);r=r-f.top-f.bottom;if(jQuery.boxModel){r=r-p.top-p.bottom-d.top-d.bottom}if(r<0){r=0}this.el.style.height=r+"px";try{q=mini.getChildNodes(this.el);for(var g=0,c=q.length;g<c;g++){var b=q[g];mini.layout(b)}}catch(n){}},set_bodyParent:function(b){if(!b){return}var a=this._bodyEl;var d=b;while(d.firstChild){try{a.appendChild(d.firstChild)}catch(c){}}this.doLayout()},getAttrs:function(b){var a=mini.Fit.superclass.getAttrs.call(this,b);a._bodyParent=b;return a}});mini.regClass(mini.Fit,"fit");mini.Panel=function(){this._initButtons();mini.Panel.superclass.constructor.apply(this,arguments);if(this.url){this.setUrl(this.url)}this._contentEl=this._bodyEl;this._doVisibleEls();this._Resizer=new mini._Resizer(this);this._doTools()};mini.extend(mini.Panel,mini.Container,{width:250,title:"",iconCls:"",iconStyle:"",allowResize:false,url:"",refreshOnExpand:false,maskOnLoad:true,collapseOnTitleClick:false,showCollapseButton:false,showCloseButton:false,closeAction:"display",showHeader:true,showToolbar:false,showFooter:false,headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",footerCls:"",footerStyle:"",toolbarCls:"",toolbarStyle:"",minWidth:180,minHeight:100,maxWidth:5000,maxHeight:3000,set:function(f){if(typeof f=="string"){return this}var b=this._allowLayout;this._allowLayout=false;var d=f.toolbar;delete f.toolbar;var g=f.footer;delete f.footer;var a=f.url;delete f.url;var c=f.buttons;delete f.buttons;mini.Panel.superclass.set.call(this,f);if(c){this.setButtons(c)}if(d){this.setToolbar(d)}if(g){this.setFooter(g)}if(a){this.setUrl(a)}this._allowLayout=b;this.doLayout();return this},uiCls:"mini-panel",_create:function(){this.el=document.createElement("div");this.el.className="mini-panel";this.el.tabIndex=0;var b='<div class="mini-panel-border"><div class="mini-panel-header" ><div class="mini-panel-header-inner" ><span class="mini-panel-icon"></span><div class="mini-panel-title" ></div><div class="mini-tools" ></div></div></div><div class="mini-panel-viewport"><div class="mini-panel-toolbar"></div><div class="mini-panel-body" ></div><div class="mini-panel-footer"></div><div class="mini-resizer-trigger"></div></div></div>';this.el.innerHTML=b;this.el.hideFocus=true;this._borderEl=this.el.firstChild;this._headerEl=this._borderEl.firstChild;this._viewportEl=this._borderEl.lastChild;this._toolbarEl=mini.byClass("mini-panel-toolbar",this.el);this._bodyEl=mini.byClass("mini-panel-body",this.el);this._footerEl=mini.byClass("mini-panel-footer",this.el);this._resizeGridEl=mini.byClass("mini-resizer-trigger",this.el);var a=mini.byClass("mini-panel-header-inner",this.el);this._iconEl=mini.byClass("mini-panel-icon",this.el);this._titleEl=mini.byClass("mini-panel-title",this.el);this._toolsEl=mini.byClass("mini-tools",this.el);mini.setStyle(this._bodyEl,this.bodyStyle);this._doTitle()},destroy:function(a){this._doRemoveIFrame();this._iframeEl=null;this._viewportEl=this._borderEl=this._bodyEl=this._footerEl=this._toolbarEl=null;this._toolsEl=this._titleEl=this._iconEl=this._resizeGridEl=null;mini.Panel.superclass.destroy.call(this,a)},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"click",this.__OnClick,this)},this)},_doVisibleEls:function(){this._headerEl.style.display=this.showHeader?"":"none";this._toolbarEl.style.display=this.showToolbar?"":"none";this._footerEl.style.display=this.showFooter?"":"none"},_setBodyWidth:true,doLayout:function(){if(!this.canLayout()){return}this._resizeGridEl.style.display=this.allowResize?"":"none";var c=this.isAutoHeight();var f=this.isAutoWidth();var a=this.getWidth(true);var d=a;if(mini.isIE6){mini.setWidth(this._bodyEl,a-2)}if(!c){var g=this.getViewportHeight();mini.setHeight(this._viewportEl,g);var b=this.getBodyHeight();mini.setHeight(this._bodyEl,b)}else{this._viewportEl.style.height="auto";this._bodyEl.style.height="auto"}mini.layout(this._borderEl);if(this._resizeGridEl){mini.repaint(this._resizeGridEl)}this.fire("layout")},deferLayout:function(b){if(!b){b=10}if(this._layoutTimer){return}var a=this;this._layoutTimer=setTimeout(function(){a._layoutTimer=null;a.doLayout()},b)},_stopLayout:function(){clearTimeout(this._layoutTimer);this._layoutTimer=null},getViewportWidth:function(a){return this.getWidth(true)},getViewportHeight:function(c){var b=this.getHeight(true)-this.getHeaderHeight();if(c){var a=mini.getPaddings(this._viewportEl);var f=mini.getBorders(this._viewportEl);var d=mini.getMargins(this._viewportEl);if(jQuery.boxModel){b=b-a.top-a.bottom-f.top-f.bottom}b=b-d.top-d.bottom}return b},getBodyHeight:function(c){var b=this.getViewportHeight();var b=b-this.getToolbarHeight()-this.getFooterHeight();if(c){var f=mini.getPaddings(this._bodyEl);var a=mini.getBorders(this._bodyEl);var d=mini.getMargins(this._bodyEl);if(jQuery.boxModel){b=b-f.top-f.bottom-a.top-a.bottom}b=b-d.top-d.bottom}if(b<0){b=0}return b},getHeaderHeight:function(){var a=this.showHeader?jQuery(this._headerEl).outerHeight():0;return a},getToolbarHeight:function(){var a=this.showToolbar?jQuery(this._toolbarEl).outerHeight():0;return a},getFooterHeight:function(){var a=this.showFooter?jQuery(this._footerEl).outerHeight():0;return a},setHeaderStyle:function(a){this.headerStyle=a;mini.setStyle(this._headerEl,a);this.doLayout()},getHeaderStyle:function(){return this.headerStyle},setBodyStyle:function(a){this.bodyStyle=a;mini.setStyle(this._bodyEl,a);this.doLayout()},getBodyStyle:function(){return this.bodyStyle},setToolbarStyle:function(a){this.toolbarStyle=a;mini.setStyle(this._toolbarEl,a);this.doLayout()},getToolbarStyle:function(){return this.toolbarStyle},setFooterStyle:function(a){this.footerStyle=a;mini.setStyle(this._footerEl,a);this.doLayout()},getFooterStyle:function(){return this.footerStyle},setHeaderCls:function(a){jQuery(this._headerEl).removeClass(this.headerCls);jQuery(this._headerEl).addClass(a);this.headerCls=a;this.doLayout()},getHeaderCls:function(){return this.headerCls},setBodyCls:function(a){jQuery(this._bodyEl).removeClass(this.bodyCls);jQuery(this._bodyEl).addClass(a);this.bodyCls=a;this.doLayout()},getBodyCls:function(){return this.bodyCls},setToolbarCls:function(a){jQuery(this._toolbarEl).removeClass(this.toolbarCls);jQuery(this._toolbarEl).addClass(a);this.toolbarCls=a;this.doLayout()},getToolbarCls:function(){return this.toolbarCls},setFooterCls:function(a){jQuery(this._footerEl).removeClass(this.footerCls);jQuery(this._footerEl).addClass(a);this.footerCls=a;this.doLayout()},getFooterCls:function(){return this.footerCls},_doTitle:function(){this._titleEl.innerHTML=this.title;this._iconEl.style.display=(this.iconCls||this.iconStyle)?"inline":"none";this._iconEl.className="mini-panel-icon "+this.iconCls;mini.setStyle(this._iconEl,this.iconStyle)},setTitle:function(a){this.title=a;this._doTitle()},getTitle:function(){return this.title},setIconCls:function(a){this.iconCls=a;this._doTitle()},getIconCls:function(){return this.iconCls},setIconStyle:function(a){this.iconStyle=a;this._doTitle()},getIconStyle:function(){return this.iconStyle},_doTools:function(){var d="";for(var c=0,a=this.buttons.length;c<a;c++){var b=this.buttons[c];if(b.html){d+=b.html}else{d+='<span id="'+c+'" class="'+b.cls+" "+(b.enabled?"":"mini-disabled")+'" style="'+b.style+";"+(b.visible?"":"display:none;")+'"></span>'}}this._toolsEl.innerHTML=d},setShowCloseButton:function(b){this.showCloseButton=b;var a=this.getButton("close");if(!a){return}a.visible=b;this._doTools()},getShowCloseButton:function(){return this.showCloseButton},setCloseAction:function(a){this.closeAction=a},getCloseAction:function(){return this.closeAction},setShowCollapseButton:function(b){this.showCollapseButton=b;var a=this.getButton("collapse");if(!a){return}a.visible=b;this._doTools()},getShowCollapseButton:function(){return this.showCollapseButton},setShowHeader:function(a){this.showHeader=a;this._doVisibleEls();this.deferLayout()},getShowHeader:function(){return this.showHeader},setShowToolbar:function(a){this.showToolbar=a;this._doVisibleEls();this.deferLayout()},getShowToolbar:function(){return this.showToolbar},setShowFooter:function(a){this.showFooter=a;this._doVisibleEls();this.deferLayout()},getShowFooter:function(){return this.showFooter},__OnClick:function(b){if(mini.isAncestor(this._headerEl,b.target)){var c=mini.findParent(b.target,"mini-tools");if(c){var a=this.getButton(parseInt(b.target.id));if(a){this._OnButtonClick(a,b)}}else{if(this.collapseOnTitleClick){this.toggle()}}}},_OnButtonClick:function(d,a){var f={button:d,index:this.buttons.indexOf(d),name:d.name.toLowerCase(),htmlEvent:a,cancel:false};this.fire("beforebuttonclick",f);var b=true;try{if(f.name=="close"&&this.closeAction=="destroy"&&this._iframeEl&&this._iframeEl.contentWindow){if(this._iframeEl.contentWindow.CloseWindow){b=this._iframeEl.contentWindow.CloseWindow("close")}else{if(this._iframeEl.contentWindow.CloseOwnerWindow){b=this._iframeEl.contentWindow.CloseOwnerWindow("close")}else{b=this._CloseOwnerWindow("close")}}}}catch(c){b=this._CloseOwnerWindow("close")}if(b===false){f.cancel=true}if(f.cancel==true){return f}this.fire("buttonclick",f);if(f.name=="close"){if(this.closeAction=="destroy"){this.__HideAction="close";this.destroy()}else{this.hide()}}if(f.name=="collapse"){this.toggle();if(this.refreshOnExpand&&this.expanded&&this.url){this.reload()}}return f},onButtonClick:function(b,a){this.on("buttonclick",b,a)},_initButtons:function(){this.buttons=[];var b=this.createButton({name:"collapse",cls:"mini-tools-collapse",visible:this.showCollapseButton});this.buttons.push(b);var a=this.createButton({name:"close",cls:"mini-tools-close",visible:this.showCloseButton});this.buttons.push(a)},createButton:function(a){var b=mini.copyTo({name:"",cls:"",style:"",visible:true,enabled:true,html:""},a);return b},setButtons:function(f){if(typeof f=="string"){f=f.split(" ")}if(!mini.isArray(f)){f=[]}var d=[];for(var c=0,a=f.length;c<a;c++){var b=f[c];if(typeof b=="string"){b=b.trim();if(!b){continue}b={name:b,cls:"mini-tools-"+b,html:""}}b=this.createButton(b);d.push(b)}this.buttons=d;this._doTools()},getButtons:function(){return this.buttons},addButton:function(b,a){if(typeof b=="string"){b={iconCls:b}}b=this.createButton(b);if(typeof a!="number"){a=this.buttons.length}this.buttons.insert(a,b);this._doTools()},updateButton:function(b,a){var c=this.getButton(b);if(!c){return}mini.copyTo(c,a);this._doTools()},removeButton:function(a){var b=this.getButton(a);if(!b){return}this.buttons.remove(b);this._doTools()},getButton:function(b){if(typeof b=="number"){return this.buttons[b]}else{for(var d=0,a=this.buttons.length;d<a;d++){var c=this.buttons[d];if(c.name==b){return c}}}},setBody:function(a){__mini_setControls(a,this._bodyEl,this)},set_bodyParent:function(a){},setToolbar:function(a){__mini_setControls(a,this._toolbarEl,this)},setFooter:function(a){__mini_setControls(a,this._footerEl,this)},getHeaderEl:function(){return this._headerEl},getToolbarEl:function(){return this._toolbarEl},getBodyEl:function(){return this._bodyEl},getFooterEl:function(){return this._footerEl},getIFrameEl:function(a){return this._iframeEl},clearTimeStamp:false,setClearTimeStamp:function(a){this.clearTimeStamp=a},getClearTimeStamp:function(){return this.clearTimeStamp},_getMaskWrapEl:function(){return this._bodyEl},_doRemoveIFrame:function(c){if(this._iframeEl){var b=this._iframeEl;b.onload=function(){};jQuery(b).unbind("load");b.src="";try{b.contentWindow.document.write("");b.contentWindow.document.close()}catch(a){}if(b._ondestroy){b._ondestroy()}try{this._iframeEl.parentNode.removeChild(this._iframeEl);this._iframeEl.removeNode(true)}catch(a){}}this._iframeEl=null;if(c===true){mini.removeChilds(this._bodyEl)}},_deferLoadingTime:80,_doLoad:function(){if(!this.url){return}this._doRemoveIFrame(true);var b=new Date();var d=this;this.loadedUrl=this.url;if(this.maskOnLoad){this.loading()}jQuery(this._bodyEl).css("overflow","hidden");function a(g){d.__HideAction=g;var f=true;if(d.__onDestroy){f=d.__onDestroy(g)}if(f===false){return false}var j={iframe:d._iframeEl,action:g};d.fire("unload",j);setTimeout(function(){d.destroy()},10)}d._CloseOwnerWindow=a;var c=mini.createIFrame(this.url,function(k,j){var f=(b-new Date())+d._deferLoadingTime;if(f<0){f=0}setTimeout(function(){d.unmask()},f);try{d._iframeEl.contentWindow.Owner=d.Owner;d._iframeEl.contentWindow.CloseOwnerWindow=a}catch(g){}if(j||d.loadOnRefresh){if(d.__onLoad){d.__onLoad()}var g={iframe:d._iframeEl};d.fire("load",g)}},this.clearTimeStamp);this._bodyEl.appendChild(c);this._iframeEl=c},load:function(a,c,b){this.setUrl(a,c,b)},reload:function(){this.setUrl(this.url)},setUrl:function(a,c,b){this.url=a;this.__onLoad=c;this.__onDestroy=b;if(this.expanded&&a){this._doLoad()}},getUrl:function(){return this.url},setRefreshOnExpand:function(a){this.refreshOnExpand=a},getRefreshOnExpand:function(){return this.refreshOnExpand},setMaskOnLoad:function(a){this.maskOnLoad=a},getMaskOnLoad:function(a){return this.maskOnLoad},setAllowResize:function(a){if(this.allowResize!=a){this.allowResize=a;this.doLayout()}},getAllowResize:function(){return this.allowResize},setLoadOnRefresh:function(a){this.loadOnRefresh=a},getLoadOnRefresh:function(a){return this.loadOnRefresh},expanded:true,setExpanded:function(a){if(this.expanded!=a){this.expanded=a;if(this.expanded){this.expand()}else{this.collapse()}}},getExpanded:function(){return this.expanded},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},collapse:function(){this.expanded=false;if(this.state!="max"){this._height=this.el.style.height}this.el.style.height="auto";this._viewportEl.style.display="none";mini.addClass(this.el,"mini-panel-collapse");this.doLayout()},expand:function(){this.expanded=true;if(this._height){this.el.style.height=this._height}this._viewportEl.style.display="block";if(this.state!="max"){delete this._height}mini.removeClass(this.el,"mini-panel-collapse");if(this.url&&this.url!=this.loadedUrl){this._doLoad()}this.doLayout()},setCollapseOnTitleClick:function(a){this.collapseOnTitleClick=a;mini.removeClass(this.el,"mini-panel-titleclick");if(a){mini.addClass(this.el,"mini-panel-titleclick")}},getCollapseOnTitleClick:function(){return this.collapseOnTitleClick},getAttrs:function(d){var a=mini.Panel.superclass.getAttrs.call(this,d);mini._ParseString(d,a,["title","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","footerCls","footerStyle","toolbarCls","toolbarStyle","footer","toolbar","url","closeAction","loadingMsg","onbeforebuttonclick","onbuttonclick","onload","buttons"]);mini._ParseBool(d,a,["allowResize","showCloseButton","showHeader","showToolbar","showFooter","loadOnRefresh","showCollapseButton","refreshOnExpand","maskOnLoad","expanded","collapseOnTitleClick","clearTimeStamp"]);var c=mini.getChildNodes(d,true);for(var b=c.length-1;b>=0;b--){var f=c[b];var g=jQuery(f).attr("property");if(!g){continue}g=g.toLowerCase();if(g=="toolbar"){a.toolbar=f}else{if(g=="footer"){a.footer=f}}}a.body=c;return a}});mini.regClass(mini.Panel,"panel");mini.Window=function(){mini.Window.superclass.constructor.apply(this,arguments);this.addCls("mini-window");this.setVisible(false);this.setAllowDrag(this.allowDrag);this.setAllowResize(this.allowResize)};mini.extend(mini.Window,mini.Panel,{x:0,y:0,state:"restore",_dragCls:"mini-window-drag",_resizeCls:"mini-window-resize",allowDrag:true,showCloseButton:true,showMaxButton:false,showMinButton:false,showCollapseButton:false,showModal:true,minWidth:150,minHeight:80,maxWidth:2000,maxHeight:2000,uiCls:"mini-window",_create:function(){mini.Window.superclass._create.call(this);if(mini.isIE&&mini_useShims){var a="<iframe frameborder='0' style='position: absolute; z-index: -1; width: 100%; height: 100%; top: 0;left:0;scrolling:no;'></iframe>";mini.append(this.el,a)}},_initButtons:function(){this.buttons=[];var d=this.createButton({name:"collapse",cls:"mini-tools-collapse",visible:this.showCollapseButton});this.buttons.push(d);var b=this.createButton({name:"min",cls:"mini-tools-min",visible:this.showMinButton});this.buttons.push(b);var a=this.createButton({name:"max",cls:"mini-tools-max",visible:this.showMaxButton});this.buttons.push(a);var c=this.createButton({name:"close",cls:"mini-tools-close",visible:this.showCloseButton});this.buttons.push(c)},_initEvents:function(){mini.Window.superclass._initEvents.call(this);mini._BindEvents(function(){mini.on(this.el,"mouseover",this.__OnMouseOver,this);mini.on(window,"resize",this.__OnWindowResize,this);mini.on(this.el,"mousedown",this.__OnWindowMouseDown,this)},this)},doLayout:function(){if(!this.canLayout()){return}if(this.state=="max"){var a=this.getParentBox();this.el.style.left="0px";this.el.style.top="0px";mini.setSize(this.el,a.width,a.height)}mini.Window.superclass.doLayout.call(this);if(this.allowDrag){mini.addClass(this.el,this._dragCls)}if(this.state=="max"){this._resizeGridEl.style.display="none";mini.removeClass(this.el,this._dragCls)}this._doModal()},_doModal:function(){if(!this.el){if(this._modalEl){mini.removeNode(this._modalEl)}return}var a=this.showModal&&this.isDisplay()&&this.visible;if(!this._modalEl&&this.showModal==false){if(this._modalEl){mini.removeNode(this._modalEl)}return}if(!this._modalEl){var c="__modal"+this._id;var b="<iframe frameborder='0' style='position: absolute; z-index: -1; width: 100%; height: 100%; top: 0;left:0;scrolling:no;'></iframe>";this._modalEl=mini.append(document.body,'<div id="'+c+'" class="mini-modal" style="display:none">'+b+"</div>")}if(a){this._modalEl.style.display="block";this._modalEl.style.zIndex=mini.getStyle(this.el,"zIndex")-1}else{this._modalEl.style.display="none"}},getParentBox:function(){var a=mini.getViewportBox();var b=this._containerEl||document.body;if(b!=document.body){a=mini.getBox(b)}return a},setShowModal:function(a){this.showModal=a},getShowModal:function(){return this.showModal},setMinWidth:function(a){if(isNaN(a)){return}this.minWidth=a},getMinWidth:function(){return this.minWidth},setMinHeight:function(a){if(isNaN(a)){return}this.minHeight=a},getMinHeight:function(){return this.minHeight},setMaxWidth:function(a){if(isNaN(a)){return}this.maxWidth=a},getMaxWidth:function(){return this.maxWidth},setMaxHeight:function(a){if(isNaN(a)){return}this.maxHeight=a},getMaxHeight:function(){return this.maxHeight},setAllowDrag:function(a){this.allowDrag=a;mini.removeClass(this.el,this._dragCls);if(a){mini.addClass(this.el,this._dragCls)}},getAllowDrag:function(){return this.allowDrag},setShowMaxButton:function(b){this.showMaxButton=b;var a=this.getButton("max");if(!a){return}a.visible=b;this._doTools()},getShowMaxButton:function(){return this.showMaxButton},setShowMinButton:function(b){this.showMinButton=b;var a=this.getButton("min");if(!a){return}a.visible=b;this._doTools()},getShowMinButton:function(){return this.showMinButton},max:function(){this.state="max";this.show();var a=this.getButton("max");if(a){a.cls="mini-tools-restore";this._doTools()}},restore:function(){this.state="restore";this.show(this.x,this.y);var a=this.getButton("max");if(a){a.cls="mini-tools-max";this._doTools()}},showInBody:true,setShowInBody:function(a){this.showInBody=a},getShowInBody:function(){return this.showInBody},containerEl:null,showAtPos:function(a,c,b){this.show(a,c,b)},show:function(a,g,b){this._allowLayout=false;var d=this._containerEl||document.body;if(!this.isRender()||(this.el.parentNode!=d&&this.showInBody)){this.render(d)}this.el.style.zIndex=mini.getMaxZIndex();this._doShow(a,g);this._allowLayout=true;this.setVisible(true);if(this.state!="max"){var c=this.getBox();this.x=c.x;this.y=c.y}try{this.el.focus()}catch(f){}},hide:function(){this.setVisible(false);this._doModal()},getWidth:function(){this._headerEl.style.width="50px";var a=mini.getWidth(this.el);this._headerEl.style.width="auto";return a},getBox:function(){this._headerEl.style.width="50px";this.el.style.display="";var a=mini.getWidth(this.el);this._headerEl.style.width="auto";var b=mini.getBox(this.el);b.width=a;b.right=b.x+a;return b},_measureSize:function(){this.el.style.display="";var a=this.getBox();if(a.width>this.maxWidth){mini.setWidth(this.el,this.maxWidth);a=this.getBox()}if(a.height>this.maxHeight){mini.setHeight(this.el,this.maxHeight);a=this.getBox()}if(a.width<this.minWidth){mini.setWidth(this.el,this.minWidth);a=this.getBox()}if(a.height<this.minHeight){mini.setHeight(this.el,this.minHeight);a=this.getBox()}},_doShow:function(a,d){var b=this.getParentBox();if(this.state=="max"){if(!this._width){var c=this.getBox();this._width=c.width;if(this.expanded){this._height=c.height}this.x=c.x;this.y=c.y}}else{if(mini.isNull(a)){a="center"}if(mini.isNull(d)){d="middle"}this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";if(this._width){this.setWidth(this._width);this.setHeight(this._height);delete this._width;delete this._height}else{}this._measureSize();var c=this.getBox();if(a=="left"){a=0}if(a=="center"){a=b.width/2-c.width/2}if(a=="right"){a=b.width-c.width}if(d=="top"){d=0}if(d=="middle"){d=b.y+b.height/2-c.height/2}if(d=="bottom"){d=b.height-c.height}if(a+c.width>b.right){a=b.right-c.width}if(d+c.height>b.bottom){d=b.bottom-c.height}if(a<0){a=0}if(d<0){d=0}this.el.style.display="";mini.setX(this.el,a);mini.setY(this.el,d)}this.doLayout()},_OnButtonClick:function(b,a){var c=mini.Window.superclass._OnButtonClick.call(this,b,a);if(c.cancel==true){return c}if(c.name=="max"){if(this.state=="max"){this.restore()}else{this.max()}}return c},__OnWindowResize:function(a){if(this.state=="max"){this.doLayout()}if(!mini.isIE6){this._doModal()}},enableDragProxy:true,setEnableDragProxy:function(a){this.enableDragProxy=a},getEnableDragProxy:function(a){return this.enableDragProxy},allowCrossBottom:true,setAllowCrossBottom:function(a){this.allowCrossBottom=a},getAllowCrossBottom:function(){return this.allowCrossBottom},xxx:0,__OnWindowMouseDown:function(d){var c=this;if(d.button!=mini.MouseButton.Left){return}if(this.state!="max"&&this.allowDrag&&mini.isAncestor(this._headerEl,d.target)&&!mini.findParent(d.target,"mini-tools")){var c=this;if(this.el){this.el.style.zIndex=mini.getMaxZIndex()}var b=this.getBox();var a=new mini.Drag({capture:false,onStart:function(){c._maskProxy=mini.append(document.body,'<div class="mini-resizer-mask" style=""></div>');if(c.enableDragProxy){c._dragProxy=mini.append(document.body,'<div class="mini-drag-proxy"></div>');c.el.style.left="-2000px";c.el.style.top="-2000px"}else{c._dragProxy=c.el}var f=mini.append(document.body,'<div class="mini-resizer-mask"></div>');setTimeout(function(){mini.removeNode(f)},300)},onMove:function(n){var f=n.now[0]-n.init[0],o=n.now[1]-n.init[1];f=b.x+f;o=b.y+o;var l=c.getParentBox();var k=f+b.width;var g=o+b.height;if(k>l.width){f=l.width-b.width}if(!c.allowCrossBottom){if(g>l.height){o=l.height-b.height}}if(f<0){f=0}if(o<0){o=0}c.x=f;c.y=o;var j={x:f,y:o,width:b.width,height:b.height};mini.setBox(c._dragProxy,j);this.moved=true},onStop:function(){if(c.el){c.el.style.display="block";if(this.moved){var f=mini.getBox(c._dragProxy);mini.setBox(c.el,f)}}jQuery(c._maskProxy).remove();c._maskProxy=null;if(c.enableDragProxy){jQuery(c._dragProxy).remove()}c._dragProxy=null}});a.start(d)}},destroy:function(a){mini.un(window,"resize",this.__OnWindowResize,this);if(this._modalEl){jQuery(this._modalEl).remove();this._modalEl=null}if(this.shadowEl){jQuery(this.shadowEl).remove();this.shadowEl=null}var b="__modal"+this._id;jQuery("[id='"+b+"']").remove();mini.Window.superclass.destroy.call(this,a)},getAttrs:function(b){var a=mini.Window.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["modalStyle"]);mini._ParseBool(b,a,["showModal","showShadow","allowDrag","allowResize","showMaxButton","showMinButton","showInBody","enableDragProxy","allowCrossBottom"]);mini._ParseInt(b,a,["minWidth","minHeight","maxWidth","maxHeight"]);return a},showAtEl:function(b,t){b=mini.byId(b);if(!b){return}if(!this.isRender()||this.el.parentNode!=document.body){this.render(document.body)}var k={xAlign:this.xAlign,yAlign:this.yAlign,xOffset:0,yOffset:0,popupCls:this.popupCls};mini.copyTo(k,t);this._popupEl=b;this.el.style.position="absolute";this.el.style.left="-2000px";this.el.style.top="-2000px";this.el.style.display="";this.doLayout();this._measureSize();var l=mini.getViewportBox();var g=this.getBox();var f=mini.getBox(b);var s=k.xy;var j=k.xAlign,r=k.yAlign;var p=l.width/2-g.width/2,o=0;if(s){p=s[0];o=s[1]}switch(k.xAlign){case"outleft":p=f.x-g.width;break;case"left":p=f.x;break;case"center":p=f.x+f.width/2-g.width/2;break;case"right":p=f.right-g.width;break;case"outright":p=f.right;break;default:break}switch(k.yAlign){case"above":o=f.y-g.height;break;case"top":o=f.y;break;case"middle":o=f.y+f.height/2-g.height/2;break;case"bottom":o=f.bottom-g.height;break;case"below":o=f.bottom;break;default:break}p=parseInt(p);o=parseInt(o);if(k.outYAlign||k.outXAlign){if(k.outYAlign=="above"){if(o+g.height>l.bottom){var n=f.y-l.y;var a=l.bottom-f.bottom;if(n>a){o=f.y-g.height}}}if(k.outXAlign=="outleft"){if(p+g.width>l.right){var d=f.x-l.x;var q=l.right-f.right;if(d>q){p=f.x-g.width}}}if(k.outXAlign=="right"){if(p+g.width>l.right){p=f.right-g.width}}this._Show(p,o)}else{this.showAtPos(p+k.xOffset,o+k.yOffset)}}});mini.regClass(mini.Window,"window");mini.MessageBox={alertTitle:"",confirmTitle:"",prompTitle:"",prompMessage:"",buttonText:{ok:"",cancel:"",yes:"",no:""},show:function(f){f=mini.copyTo({width:"auto",height:"auto",showModal:true,timeout:0,minWidth:150,maxWidth:800,minHeight:50,maxHeight:350,showHeader:true,title:"",titleIcon:"",iconCls:"",iconStyle:"",message:"",html:"",spaceStyle:"margin-right:15px",showCloseButton:true,buttons:null,buttonWidth:58,callback:null},f);f.message=String(f.message);var g=f.callback;var p=new mini.Window();p.setBodyStyle("overflow:hidden");p.setShowModal(f.showModal);p.setTitle(f.title||"");p.setIconCls(f.titleIcon);p.setShowHeader(f.showHeader);p.setShowCloseButton(f.showCloseButton);var d=p.uid+"$table",b=p.uid+"$content";var y='<div class="'+f.iconCls+'" style="'+f.iconStyle+'"></div>';var r='<table class="mini-messagebox-table" id="'+d+'" style="" cellspacing="0" cellpadding="0"><tr><td>'+y+'</td><td id="'+b+'" class="mini-messagebox-content-text">'+(f.message||"")+"</td></tr></table>";var c='<div class="mini-messagebox-content"></div><div class="mini-messagebox-buttons"></div>';p._bodyEl.innerHTML=c;var j=p._bodyEl.firstChild;if(f.html){if(typeof f.html=="string"){j.innerHTML=f.html}else{if(mini.isElement(f.html)){j.appendChild(f.html)}}}else{j.innerHTML=r}p._Buttons=[];var z=p._bodyEl.lastChild;if(f.buttons&&f.buttons.length>0){for(var w=0,v=f.buttons.length;w<v;w++){var a=f.buttons[w];var q=mini.MessageBox.buttonText[a];if(!q){q=a}var n=new mini.Button();n.setText(q);n.render(z);n.setIconCls("icon-opinion");n.action=a;n.on("click",function(s){var l=s.sender;if(g){if(g(l.action)===false){return}}mini.MessageBox.hide(p)});if(w!=v-1){n.setStyle(f.spaceStyle)}p._Buttons.push(n)}}else{z.style.display="none"}p.setMinWidth(f.minWidth);p.setMinHeight(f.minHeight);p.setMaxWidth(f.maxWidth);p.setMaxHeight(f.maxHeight);p.setWidth(f.width);p.setHeight(f.height);p.show(f.x,f.y,{animType:f.animType});var u=p.getWidth();p.setWidth(u);var t=p.getHeight();p.setHeight(t);var o=document.getElementById(d);if(o){o.style.width="100%"}var k=document.getElementById(b);if(k){k.style.width="100%"}var x=p._Buttons[0];if(x){x.focus()}else{p.focus()}p.on("beforebuttonclick",function(l){if(g){g("close")}l.cancel=true;mini.MessageBox.hide(p)});mini.on(p.el,"keydown",function(l){});if(f.timeout){setTimeout(function(){mini.MessageBox.hide(p.uid)},f.timeout)}return p.uid},hide:function(f){if(!f){return}var d=typeof f=="object"?f:mini.getbyUID(f);if(!d){return}for(var c=0,a=d._Buttons.length;c<a;c++){var b=d._Buttons[c];b.destroy()}d._Buttons=null;d.destroy()},alert:function(a,b,c){return mini.MessageBox.show({minWidth:250,title:b||mini.MessageBox.alertTitle,buttons:["ok"],message:a,iconCls:"mini-messagebox-warning",callback:c})},confirm:function(a,b,c){return mini.MessageBox.show({minWidth:250,title:b||mini.MessageBox.confirmTitle,buttons:["ok","cancel"],message:a,iconCls:"mini-messagebox-question",callback:c})},prompt:function(d,g,k,f){var j="prompt$"+new Date().getTime();var c=d||mini.MessageBox.promptMessage;if(f){c=c+'<br/><textarea id="'+j+'" style="width:200px;height:60px;margin-top:3px;"></textarea>'}else{c=c+'<br/><input id="'+j+'" type="text" style="width:200px;margin-top:3px;"/>'}var b=mini.MessageBox.show({title:g||mini.MessageBox.promptTitle,buttons:["ok","cancel"],width:250,html:'<div style="padding:5px;padding-left:10px;">'+c+"</div>",callback:function(n){var l=document.getElementById(j);if(k){return k(n,l.value)}}});var a=document.getElementById(j);a.focus();return b},loading:function(a,b){return mini.MessageBox.show({minHeight:50,title:b,showCloseButton:false,message:a,iconCls:"mini-messagebox-waiting"})},showTips:function(b){var d=jQuery;b=d.extend({content:"",state:"",x:"center",y:"top",offset:[10,10],fixed:true,timeout:2000},b);var a="mini-tips-"+b.state;var c='<div class="mini-tips '+a+'">'+b.content+"</div>";var f=d(c).appendTo(document.body);b.el=f[0];b.timeoutHandler=function(){f.slideUp();setTimeout(function(){f.remove()},2000)};mini.showAt(b);f.hide().slideDown()}};mini.alert=mini.MessageBox.alert;mini.confirm=mini.MessageBox.confirm;mini.prompt=mini.MessageBox.prompt;mini.loading=mini.MessageBox.loading;mini.showMessageBox=mini.MessageBox.show;mini.hideMessageBox=mini.MessageBox.hide;mini.showTips=mini.MessageBox.showTips;mini.Splitter=function(){this._initPanes();mini.Splitter.superclass.constructor.apply(this,arguments)};mini.extend(mini.Splitter,mini.Control,{width:300,height:180,vertical:false,allowResize:true,pane1:null,pane2:null,showHandleButton:true,handlerStyle:"",handlerCls:"",handlerSize:5,uiCls:"mini-splitter",_create:function(){this.el=document.createElement("div");this.el.className="mini-splitter";this.el.innerHTML='<div class="mini-splitter-border"><div id="1" class="mini-splitter-pane mini-splitter-pane1"></div><div id="2" class="mini-splitter-pane mini-splitter-pane2"></div><div class="mini-splitter-handler"></div></div>';this._borderEl=this.el.firstChild;this._pane1El=this._borderEl.firstChild;this._pane2El=this._borderEl.childNodes[1];this._handlerEl=this._borderEl.lastChild},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"mousedown",this.__OnMouseDown,this)},this)},_initPanes:function(){this.pane1={id:"",index:1,minSize:30,maxSize:3000,size:"",showCollapseButton:false,cls:"",style:"",visible:true,expanded:true};this.pane2=mini.copyTo({},this.pane1);this.pane2.index=2},doUpdate:function(){this.doLayout()},doLayout:function(){if(!this.canLayout()){return}this._handlerEl.style.cursor=this.allowResize?"":"default";mini.removeClass(this.el,"mini-splitter-vertical");if(this.vertical){mini.addClass(this.el,"mini-splitter-vertical")}mini.removeClass(this._pane1El,"mini-splitter-pane1-vertical");mini.removeClass(this._pane2El,"mini-splitter-pane2-vertical");if(this.vertical){mini.addClass(this._pane1El,"mini-splitter-pane1-vertical");mini.addClass(this._pane2El,"mini-splitter-pane2-vertical")}mini.removeClass(this._handlerEl,"mini-splitter-handler-vertical");if(this.vertical){mini.addClass(this._handlerEl,"mini-splitter-handler-vertical")}var x=this.getHeight(true);var n=this.getWidth(true);if(!jQuery.boxModel){var g=mini.getBorders(this._borderEl);x=x+g.top+g.bottom;n=n+g.left+g.right}if(n<0){n=0}if(x<0){x=0}this._borderEl.style.width=n+"px";this._borderEl.style.height=x+"px";var b=this._pane1El,a=this._pane2El;var p=jQuery(b),l=jQuery(a);b.style.display=a.style.display=this._handlerEl.style.display="";var B=this.handlerSize;this.pane1.size=String(this.pane1.size);this.pane2.size=String(this.pane2.size);var z=parseFloat(this.pane1.size),q=parseFloat(this.pane2.size);var v=isNaN(z),j=isNaN(q);var A=!isNaN(z)&&this.pane1.size.indexOf("%")!=-1;var o=!isNaN(q)&&this.pane2.size.indexOf("%")!=-1;var f=!v&&!A;var d=!j&&!o;var t=this.vertical?x-this.handlerSize:n-this.handlerSize;var y=p2Size=0;if(v||j){if(v&&j){y=parseInt(t/2);p2Size=t-y}else{if(f){y=z;p2Size=t-y}else{if(A){y=parseInt(t*z/100);p2Size=t-y}else{if(d){p2Size=q;y=t-p2Size}else{if(o){p2Size=parseInt(t*q/100);y=t-p2Size}}}}}}else{if(A&&d){p2Size=q;y=t-p2Size}else{if(f&&o){y=z;p2Size=t-y}else{var c=z+q;y=parseInt(t*z/c);p2Size=t-y}}}if(y>this.pane1.maxSize){y=this.pane1.maxSize;p2Size=t-y}if(p2Size>this.pane2.maxSize){p2Size=this.pane2.maxSize;y=t-p2Size}if(y<this.pane1.minSize){y=this.pane1.minSize;p2Size=t-y}if(p2Size<this.pane2.minSize){p2Size=this.pane2.minSize;y=t-p2Size}if(this.pane1.expanded==false){p2Size=t;y=0;b.style.display="none"}else{if(this.pane2.expanded==false){y=t;p2Size=0;a.style.display="none"}}if(this.pane1.visible==false){p2Size=t+B;y=B=0;b.style.display="none";this._handlerEl.style.display="none"}else{if(this.pane2.visible==false){y=t+B;p2Size=B=0;a.style.display="none";this._handlerEl.style.display="none"}}if(this.vertical){mini.setWidth(b,n);mini.setWidth(a,n);mini.setHeight(b,y);mini.setHeight(a,p2Size);a.style.top=(y+B)+"px";this._handlerEl.style.left="0px";this._handlerEl.style.top=y+"px";mini.setWidth(this._handlerEl,n);mini.setHeight(this._handlerEl,this.handlerSize);b.style.left="0px";a.style.left="0px"}else{mini.setWidth(b,y);mini.setWidth(a,p2Size);mini.setHeight(b,x);mini.setHeight(a,x);a.style.left=(y+B)+"px";this._handlerEl.style.top="0px";this._handlerEl.style.left=y+"px";mini.setWidth(this._handlerEl,this.handlerSize);mini.setHeight(this._handlerEl,x);b.style.top="0px";a.style.top="0px"}var r='<div class="mini-splitter-handler-buttons">';if(!this.pane1.expanded||!this.pane2.expanded){if(!this.pane1.expanded){if(this.pane1.showCollapseButton){r+='<a id="1" class="mini-splitter-pane2-button"></a>'}}else{if(this.pane2.showCollapseButton){r+='<a id="2" class="mini-splitter-pane1-button"></a>'}}}else{if(this.pane1.showCollapseButton){r+='<a id="1" class="mini-splitter-pane1-button"></a>'}if(this.allowResize){if((!this.pane1.showCollapseButton&&!this.pane2.showCollapseButton)){r+='<span class="mini-splitter-resize-button"></span>'}}if(this.pane2.showCollapseButton){r+='<a id="2" class="mini-splitter-pane2-button"></a>'}}r+="</div>";this._handlerEl.innerHTML=r;var u=this._handlerEl.firstChild;u.style.display=this.showHandleButton?"":"none";var k=mini.getBox(u);if(this.vertical){u.style.marginLeft=-k.width/2+"px"}else{u.style.marginTop=-k.height/2+"px"}if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded){mini.addClass(this._handlerEl,"mini-splitter-nodrag")}else{mini.removeClass(this._handlerEl,"mini-splitter-nodrag")}mini.layout(this._borderEl);this.fire("layout")},getPaneBox:function(a){var b=this.getPaneEl(a);if(!b){return null}return mini.getBox(b)},getPane:function(a){if(a==1){return this.pane1}else{if(a==2){return this.pane2}}return a},setPanes:function(b){if(!mini.isArray(b)){return}for(var a=0;a<2;a++){var c=b[a];this.updatePane(a+1,c)}},setPaneControls:function(a,c){var d=this.getPane(a);if(!d){return}var b=this.getPaneEl(a);__mini_setControls(c,b,this)},getPaneEl:function(a){if(a==1){return this._pane1El}return this._pane2El},updatePane:function(c,b){var k=this.getPane(c);if(!k){return}mini.copyTo(k,b);var g=this.getPaneEl(c);var f=k.body;delete k.body;if(f){if(!mini.isArray(f)){f=[f]}for(var d=0,a=f.length;d<a;d++){mini.append(g,f[d])}}if(k.bodyParent){var j=k.bodyParent;while(j.firstChild){g.appendChild(j.firstChild)}}delete k.bodyParent;g.id=k.id;mini.setStyle(g,k.style);mini.addClass(g,k["class"]);if(k.cls){mini.addClass(g,k.cls)}if(k.controls){var c=k==this.pane1?1:2;this.setPaneControls(c,k.controls);delete k.controls}this.doUpdate()},setShowHandleButton:function(a){this.showHandleButton=a;this.doUpdate()},getShowHandleButton:function(a){return this.showHandleButton},setVertical:function(a){this.vertical=a;this.doUpdate()},getVertical:function(){return this.vertical},expandPane:function(a){var c=this.getPane(a);if(!c){return}c.expanded=true;this.doUpdate();var b={pane:c,paneIndex:this.pane1==c?1:2};this.fire("expand",b)},collapsePane:function(a){var d=this.getPane(a);if(!d){return}d.expanded=false;var b=d==this.pane1?this.pane2:this.pane1;if(b.expanded==false){b.expanded=true;b.visible=true}this.doUpdate();var c={pane:d,paneIndex:this.pane1==d?1:2};this.fire("collapse",c)},togglePane:function(a){var b=this.getPane(a);if(!b){return}if(b.expanded){this.collapsePane(b)}else{this.expandPane(b)}},showPane:function(a){var b=this.getPane(a);if(!b){return}b.visible=true;this.doUpdate()},hidePane:function(a){var c=this.getPane(a);if(!c){return}c.visible=false;var b=c==this.pane1?this.pane2:this.pane1;if(b.visible==false){b.expanded=true;b.visible=true}this.doUpdate()},setAllowResize:function(a){if(this.allowResize!=a){this.allowResize=a;this.doLayout()}},getAllowResize:function(){return this.allowResize},setHandlerSize:function(a){if(this.handlerSize!=a){this.handlerSize=a;this.doLayout()}},getHandlerSize:function(){return this.handlerSize},__OnClick:function(c){var b=c.target;if(!mini.isAncestor(this._handlerEl,b)){return}var a=parseInt(b.id);var d=this.getPane(a);var c={pane:d,paneIndex:a,cancel:false};if(d.expanded){this.fire("beforecollapse",c)}else{this.fire("beforeexpand",c)}if(c.cancel==true){return}if(b.className=="mini-splitter-pane1-button"){this.togglePane(a)}else{if(b.className=="mini-splitter-pane2-button"){this.togglePane(a)}}},_OnButtonClick:function(b,a){this.fire("buttonclick",{pane:b,index:this.pane1==b?1:2,htmlEvent:a})},onButtonClick:function(b,a){this.on("buttonclick",b,a)},__OnMouseDown:function(c){var a=c.target;if(!this.allowResize){return}if(!this.pane1.visible||!this.pane2.visible||!this.pane1.expanded||!this.pane2.expanded){return}if(mini.isAncestor(this._handlerEl,a)){if(a.className=="mini-splitter-pane1-button"||a.className=="mini-splitter-pane2-button"){}else{var b=this._getDrag();b.start(c)}}},_getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this.drag},_OnDragStart:function(a){this.handlerBox=mini.getBox(this._handlerEl);this._maskProxy=mini.append(document.body,'<div class="mini-resizer-mask"></div>');this._dragProxy=mini.append(document.body,'<div class="mini-proxy"></div>');this._dragProxy.style.cursor=this.vertical?"n-resize":"w-resize";this.elBox=mini.getBox(this._borderEl,true);mini.setBox(this._dragProxy,this.handlerBox)},_OnDragMove:function(d){if(!this.handlerBox){return}if(!this.elBox){this.elBox=mini.getBox(this._borderEl,true)}var n=this.elBox.width,f=this.elBox.height;var c=this.handlerSize;var q=this.vertical?f-this.handlerSize:n-this.handlerSize;var o=this.pane1.minSize,a=this.pane1.maxSize;var j=this.pane2.minSize,p=this.pane2.maxSize;if(this.vertical==true){var b=d.now[1]-d.init[1];var k=this.handlerBox.y+b;if(k-this.elBox.y>a){k=this.elBox.y+a}if(k+this.handlerBox.height<this.elBox.bottom-p){k=this.elBox.bottom-p-this.handlerBox.height}if(k-this.elBox.y<o){k=this.elBox.y+o}if(k+this.handlerBox.height>this.elBox.bottom-j){k=this.elBox.bottom-j-this.handlerBox.height}mini.setY(this._dragProxy,k)}else{var g=d.now[0]-d.init[0];var l=this.handlerBox.x+g;if(l-this.elBox.x>a){l=this.elBox.x+a}if(l+this.handlerBox.width<this.elBox.right-p){l=this.elBox.right-p-this.handlerBox.width}if(l-this.elBox.x<o){l=this.elBox.x+o}if(l+this.handlerBox.width>this.elBox.right-j){l=this.elBox.right-j-this.handlerBox.width}mini.setX(this._dragProxy,l)}},_OnDragStop:function(j){var p=this.elBox.width,k=this.elBox.height;var b=this.handlerSize;var t=parseFloat(this.pane1.size),r=parseFloat(this.pane2.size);var q=isNaN(t),o=isNaN(r);var n=!isNaN(t)&&this.pane1.size.indexOf("%")!=-1;var l=!isNaN(r)&&this.pane2.size.indexOf("%")!=-1;var a=!q&&!n;var g=!o&&!l;var s=this.vertical?k-this.handlerSize:p-this.handlerSize;var f=mini.getBox(this._dragProxy);var d=f.x-this.elBox.x,c=s-d;if(this.vertical){d=f.y-this.elBox.y;c=s-d}if(q||o){if(q&&o){t=parseFloat(d/s*100).toFixed(1);this.pane1.size=t+"%"}else{if(a){t=d;this.pane1.size=t}else{if(n){t=parseFloat(d/s*100).toFixed(1);this.pane1.size=t+"%"}else{if(g){r=c;this.pane2.size=r}else{if(l){r=parseFloat(c/s*100).toFixed(1);this.pane2.size=r+"%"}}}}}}else{if(n&&g){this.pane2.size=c}else{if(a&&l){this.pane1.size=d}else{this.pane1.size=parseFloat(d/s*100).toFixed(1);this.pane2.size=100-this.pane1.size}}}jQuery(this._dragProxy).remove();jQuery(this._maskProxy).remove();this._maskProxy=null;this._dragProxy=null;this.elBox=this.handlerBox=null;this.doLayout();this.fire("resize")},getAttrs:function(c){var p=mini.Splitter.superclass.getAttrs.call(this,c);mini._ParseString(c,p,["onexpand","oncollapse","onresize"]);mini._ParseBool(c,p,["allowResize","vertical","showHandleButton"]);mini._ParseInt(c,p,["handlerSize"]);var n=[];var a=mini.getChildNodes(c);for(var j=0,f=2;j<f;j++){var d=a[j];var k=jQuery(d);var b={};n.push(b);if(!d){continue}b.style=d.style.cssText;mini._ParseString(d,b,["cls","size","id","class"]);mini._ParseBool(d,b,["visible","expanded","showCollapseButton"]);mini._ParseInt(d,b,["minSize","maxSize","handlerSize"]);b.bodyParent=d}p.panes=n;return p}});mini.regClass(mini.Splitter,"splitter");mini.Layout=function(){this.regions=[];this.regionMap={};mini.Layout.superclass.constructor.apply(this,arguments)};mini.extend(mini.Layout,mini.Control,{regions:[],splitSize:5,collapseWidth:28,collapseHeight:25,regionWidth:150,regionHeight:80,regionMinWidth:50,regionMinHeight:25,regionMaxWidth:2000,regionMaxHeight:2000,uiCls:"mini-layout",_create:function(){this.el=document.createElement("div");this.el.className="mini-layout";this.el.innerHTML='<div class="mini-layout-border"></div>';this._borderEl=this.el.firstChild;this.doUpdate()},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"mousedown",this.__OnMouseDown,this);mini.on(this.el,"mouseover",this.__OnMouseOver,this);mini.on(this.el,"mouseout",this.__OnMouseOut,this);mini.on(document,"mousedown",this.__OnDocMouseDown,this)},this)},getRegionEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._el},getRegionHeaderEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._header},getRegionBodyEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._body},getRegionSplitEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._split},getRegionProxyEl:function(a){var a=this.getRegion(a);if(!a){return null}return a._proxy},getRegionBox:function(b){var a=this.getRegionEl(b);if(a){return mini.getBox(a)}return null},getRegion:function(a){if(typeof a=="string"){return this.regionMap[a]}return a},_getButton:function(g,b){var f=g.buttons;for(var d=0,a=f.length;d<a;d++){var c=f[d];if(c.name==b){return c}}},_createRegion:function(a){var b=mini.copyTo({region:"",title:"",iconCls:"",iconStyle:"",showCloseButton:false,showCollapseButton:true,buttons:[{name:"close",cls:"mini-tools-close",html:"",visible:false},{name:"collapse",cls:"mini-tools-collapse",html:"",visible:true}],showSplitIcon:false,showSplit:true,showHeader:true,splitSize:this.splitSize,collapseSize:this.collapseWidth,width:this.regionWidth,height:this.regionHeight,minWidth:this.regionMinWidth,minHeight:this.regionMinHeight,maxWidth:this.regionMaxWidth,maxHeight:this.regionMaxHeight,allowResize:true,cls:"",style:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,expanded:true},a);return b},_CreateRegionEl:function(a){var a=this.getRegion(a);if(!a){return}mini.append(this._borderEl,'<div id="'+a.region+'" class="mini-layout-region"><div class="mini-layout-region-header" style="'+a.headerStyle+'"></div><div class="mini-layout-region-body '+a.bodyCls+'" style="'+a.bodyStyle+'"></div></div>');a._el=this._borderEl.lastChild;a._header=a._el.firstChild;a._body=a._el.lastChild;if(a.cls){mini.addClass(a._el,a.cls)}if(a.style){mini.setStyle(a._el,a.style)}if(a.headerCls){mini.addClass(a._el.firstChild,a.headerCls)}mini.addClass(a._el,"mini-layout-region-"+a.region);if(a.region!="center"){mini.append(this._borderEl,'<div uid="'+this.uid+'" id="'+a.region+'" class="mini-layout-split"><div class="mini-layout-spliticon"></div></div>');a._split=this._borderEl.lastChild;mini.addClass(a._split,"mini-layout-split-"+a.region)}if(a.region!="center"){mini.append(this._borderEl,'<div id="'+a.region+'" class="mini-layout-proxy"></div>');a._proxy=this._borderEl.lastChild;mini.addClass(a._proxy,"mini-layout-proxy-"+a.region)}},setRegionControls:function(c,b){var c=this.getRegion(c);if(!c){return}var a=this.getRegionBodyEl(c);__mini_setControls(b,a,this)},setRegions:function(c){if(!mini.isArray(c)){return}for(var b=0,a=c.length;b<a;b++){this.addRegion(c[b])}},addRegion:function(o,n){var d=o;o=this._createRegion(o);if(!o.region){o.region="center"}o.region=o.region.toLowerCase();if(o.region=="center"&&d&&!d.showHeader){o.showHeader=false}if(o.region=="north"||o.region=="south"){if(!d.collapseSize){o.collapseSize=this.collapseHeight}}this._measureRegion(o);if(typeof n!="number"){n=this.regions.length}var a=this.regionMap[o.region];if(a){return}this.regions.insert(n,o);this.regionMap[o.region]=o;this._CreateRegionEl(o);var c=this.getRegionBodyEl(o);var k=o.body;delete o.body;if(k){if(!mini.isArray(k)){k=[k]}for(var j=0,f=k.length;j<f;j++){mini.append(c,k[j])}}if(o.bodyParent){var b=o.bodyParent;while(b.firstChild){var g=b.firstChild;c.appendChild(g)}}delete o.bodyParent;if(o.controls){this.setRegionControls(o,o.controls);delete o.controls}this.doUpdate()},removeRegion:function(a){var a=this.getRegion(a);if(!a){return}this.regions.remove(a);delete this.regionMap[a.region];jQuery(a._el).remove();jQuery(a._split).remove();jQuery(a._proxy).remove();this.doUpdate()},moveRegion:function(c,a){var c=this.getRegion(c);if(!c){return}var b=this.regions[a];if(!b||b==c){return}this.regions.remove(c);var a=this.region.indexOf(b);this.regions.insert(a,c);this.doUpdate()},_measureRegion:function(b){var a=this._getButton(b,"close");a.visible=b.showCloseButton;var a=this._getButton(b,"collapse");a.visible=b.showCollapseButton;if(b.width<b.minWidth){b.width=mini.minWidth}if(b.width>b.maxWidth){b.width=mini.maxWidth}if(b.height<b.minHeight){b.height=mini.minHeight}if(b.height>b.maxHeight){b.height=mini.maxHeight}},updateRegion:function(b,a){b=this.getRegion(b);if(!b){return}if(a){delete a.region}mini.copyTo(b,a);this._measureRegion(b);this.doUpdate()},expandRegion:function(a){a=this.getRegion(a);if(!a){return}a.expanded=true;this.doUpdate()},collapseRegion:function(a){a=this.getRegion(a);if(!a){return}a.expanded=false;this.doUpdate()},toggleRegion:function(a){a=this.getRegion(a);if(!a){return}if(a.expanded){this.collapseRegion(a)}else{this.expandRegion(a)}},showRegion:function(a){a=this.getRegion(a);if(!a){return}a.visible=true;this.doUpdate()},hideRegion:function(a){a=this.getRegion(a);if(!a){return}a.visible=false;this.doUpdate()},isExpandRegion:function(a){a=this.getRegion(a);if(!a){return null}return a.expanded},isVisibleRegion:function(a){a=this.getRegion(a);if(!a){return null}return a.visible},_tryToggleRegion:function(b){b=this.getRegion(b);var a={region:b,cancel:false};if(b.expanded){this.fire("BeforeCollapse",a);if(a.cancel==false){this.collapseRegion(b)}}else{this.fire("BeforeExpand",a);if(a.cancel==false){this.expandRegion(b)}}},_getProxyElByEvent:function(b){var a=mini.findParent(b.target,"mini-layout-proxy");return a},_getRegionElByEvent:function(b){var a=mini.findParent(b.target,"mini-layout-region");return a},__OnClick:function(f){if(this._inAniming){return}var a=this._getProxyElByEvent(f);if(a){var d=a.id;var c=mini.findParent(f.target,"mini-tools-collapse");if(c){this._tryToggleRegion(d)}else{this._VirtualToggle(d)}}var b=this._getRegionElByEvent(f);if(b&&mini.findParent(f.target,"mini-layout-region-header")){var d=b.id;var c=mini.findParent(f.target,"mini-tools-collapse");if(c){this._tryToggleRegion(d)}var g=mini.findParent(f.target,"mini-tools-close");if(g){this.updateRegion(d,{visible:false})}}if(mini.hasClass(f.target,"mini-layout-spliticon")){var d=f.target.parentNode.id;this._tryToggleRegion(d)}},_OnButtonClick:function(c,b,a){this.fire("buttonclick",{htmlEvent:a,region:c,button:b,index:this.buttons.indexOf(b),name:b.name})},_OnButtonMouseDown:function(c,b,a){this.fire("buttonmousedown",{htmlEvent:a,region:c,button:b,index:this.buttons.indexOf(b),name:b.name})},hoverProxyEl:null,__OnMouseOver:function(b){var a=this._getProxyElByEvent(b);if(a){mini.addClass(a,"mini-layout-proxy-hover");this.hoverProxyEl=a}},__OnMouseOut:function(a){if(this.hoverProxyEl){mini.removeClass(this.hoverProxyEl,"mini-layout-proxy-hover")}this.hoverProxyEl=null},onButtonClick:function(b,a){this.on("buttonclick",b,a)},onButtonMouseDown:function(b,a){this.on("buttonmousedown",b,a)}});mini.copyTo(mini.Layout.prototype,{_createHeader:function(f,c){var d='<div class="mini-tools">';if(c){d+='<span class="mini-tools-collapse"></span>'}else{for(var b=f.buttons.length-1;b>=0;b--){var a=f.buttons[b];d+='<span class="'+a.cls+'" style="';d+=a.style+";"+(a.visible?"":"display:none;")+'">'+a.html+"</span>"}}d+="</div>";d+='<div class="mini-layout-region-icon '+f.iconCls+'" style="'+f.iconStyle+";"+((f.iconStyle||f.iconCls)?"":"display:none;")+'"></div>';d+='<div class="mini-layout-region-title">'+f.title+"</div>";return d},doUpdate:function(){for(var d=0,a=this.regions.length;d<a;d++){var j=this.regions[d];var g=j.region;var f=j._el,c=j._split,b=j._proxy;if(j.cls){mini.addClass(f,j.cls)}if(j.headerCls){mini.addClass(f.firstChild,j.headerCls)}j._header.style.display=j.showHeader?"":"none";j._header.innerHTML=this._createHeader(j);if(j._proxy){j._proxy.innerHTML=this._createHeader(j,true)}if(c){mini.removeClass(c,"mini-layout-split-nodrag");if(j.expanded==false||!j.allowResize){mini.addClass(c,"mini-layout-split-nodrag")}}}this.doLayout()},doLayout:function(){if(!this.canLayout()){return}if(this._inAniming){return}var v=mini.getHeight(this.el,true);var p=mini.getWidth(this.el,true);var o={x:0,y:0,width:p,height:v};mini.setHeight(this._borderEl,v);var b=this.regions.clone();var B=this.getRegion("center");b.remove(B);if(B){b.push(B)}for(var u=0,s=b.length;u<s;u++){var g=b[u];g._Expanded=false;mini.removeClass(g._el,"mini-layout-popup");var j=g.region;var c=g._el,r=g._split,t=g._proxy;if(g.visible==false){c.style.display="none";if(j!="center"){r.style.display=t.style.display="none"}continue}c.style.display="";if(j!="center"){r.style.display=t.style.display=""}var n=o.x,k=o.y,p=o.width,v=o.height;var f=g.width,q=g.height;if(!g.expanded){if(j=="west"||j=="east"){f=mini.getWidth(t);mini.setWidth(c,g.width)}else{if(j=="north"||j=="south"){q=mini.getHeight(t);mini.setHeight(c,g.height)}}}switch(j){case"north":v=q;o.y+=q;o.height-=q;break;case"south":v=q;k=o.y+o.height-q;o.height-=q;break;case"west":p=f;o.x+=f;o.width-=f;break;case"east":p=f;n=o.x+o.width-f;o.width-=f;break;case"center":break;default:continue}if(p<0){p=0}if(v<0){v=0}if(j=="west"||j=="east"){mini.setHeight(c,v)}if(j=="north"||j=="south"){mini.setWidth(c,p)}var z="left:"+n+"px;top:"+k+"px;";var A=c;if(!g.expanded){A=t;c.style.top="-100px";c.style.left="-1500px"}else{if(t){t.style.left="-1500px";t.style.top="-100px"}}A.style.left=n+"px";A.style.top=k+"px";if(A==t){if(j=="west"||j=="east"){mini.setHeight(A,v)}if(j=="north"||j=="south"){mini.setWidth(A,p)}}else{mini.setWidth(A,p);mini.setHeight(A,v)}var C=jQuery(g._el).height();var a=g.showHeader?jQuery(g._header).outerHeight():0;mini.setHeight(g._body,C-a);if(j=="center"){continue}f=q=g.splitSize;var n=o.x,k=o.y,p=o.width,v=o.height;switch(j){case"north":v=q;o.y+=q;o.height-=q;break;case"south":v=q;k=o.y+o.height-q;o.height-=q;break;case"west":p=f;o.x+=f;o.width-=f;break;case"east":p=f;n=o.x+o.width-f;o.width-=f;break;case"center":break}if(p<0){p=0}if(v<0){v=0}r.style.left=n+"px";r.style.top=k+"px";mini.setWidth(r,p);mini.setHeight(r,v);if(g.showSplit&&g.expanded&&g.allowResize==true){mini.removeClass(r,"mini-layout-split-nodrag")}else{mini.addClass(r,"mini-layout-split-nodrag")}r.firstChild.style.display=g.showSplitIcon?"block":"none";if(g.expanded){mini.removeClass(r.firstChild,"mini-layout-spliticon-collapse")}else{mini.addClass(r.firstChild,"mini-layout-spliticon-collapse")}}mini.layout(this._borderEl);this.fire("layout")},__OnMouseDown:function(d){if(this._inAniming){return}if(mini.findParent(d.target,"mini-layout-split")){var a=jQuery(d.target).attr("uid");if(a!=this.uid){return}var c=this.getRegion(d.target.id);if(c.expanded==false||!c.allowResize||!c.showSplit){return}this.dragRegion=c;var b=this._getDrag();b.start(d)}},_getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this.drag},_OnDragStart:function(a){this._maskProxy=mini.append(document.body,'<div class="mini-resizer-mask"></div>');this._dragProxy=mini.append(document.body,'<div class="mini-proxy"></div>');this._dragProxy.style.cursor="n-resize";if(this.dragRegion.region=="west"||this.dragRegion.region=="east"){this._dragProxy.style.cursor="w-resize"}this.splitBox=mini.getBox(this.dragRegion._split);mini.setBox(this._dragProxy,this.splitBox);this.elBox=mini.getBox(this.el,true)},_OnDragMove:function(w){var D=w.now[0]-w.init[0];var p=this.splitBox.x+D;var l=w.now[1]-w.init[1];var n=this.splitBox.y+l;var A=p+this.splitBox.width;var j=n+this.splitBox.height;var f=this.getRegion("west"),k=this.getRegion("east"),u=this.getRegion("north"),r=this.getRegion("south"),B=this.getRegion("center");var C=f&&f.visible?f.width:0;var g=k&&k.visible?k.width:0;var a=u&&u.visible?u.height:0;var o=r&&r.visible?r.height:0;var t=f&&f.showSplit?mini.getWidth(f._split):0;var q=k&&k.showSplit?mini.getWidth(k._split):0;var d=u&&u.showSplit?mini.getHeight(u._split):0;var v=r&&r.showSplit?mini.getHeight(r._split):0;var c=this.dragRegion,b=c.region;if(b=="west"){var z=this.elBox.width-g-q-t-B.minWidth;if(p-this.elBox.x>z){p=z+this.elBox.x}if(p-this.elBox.x<c.minWidth){p=c.minWidth+this.elBox.x}if(p-this.elBox.x>c.maxWidth){p=c.maxWidth+this.elBox.x}mini.setX(this._dragProxy,p)}else{if(b=="east"){var z=this.elBox.width-C-t-q-B.minWidth;if(this.elBox.right-(p+this.splitBox.width)>z){p=this.elBox.right-z-this.splitBox.width}if(this.elBox.right-(p+this.splitBox.width)<c.minWidth){p=this.elBox.right-c.minWidth-this.splitBox.width}if(this.elBox.right-(p+this.splitBox.width)>c.maxWidth){p=this.elBox.right-c.maxWidth-this.splitBox.width}mini.setX(this._dragProxy,p)}else{if(b=="north"){var s=this.elBox.height-o-v-d-B.minHeight;if(n-this.elBox.y>s){n=s+this.elBox.y}if(n-this.elBox.y<c.minHeight){n=c.minHeight+this.elBox.y}if(n-this.elBox.y>c.maxHeight){n=c.maxHeight+this.elBox.y}mini.setY(this._dragProxy,n)}else{if(b=="south"){var s=this.elBox.height-a-d-v-B.minHeight;if(this.elBox.bottom-(n+this.splitBox.height)>s){n=this.elBox.bottom-s-this.splitBox.height}if(this.elBox.bottom-(n+this.splitBox.height)<c.minHeight){n=this.elBox.bottom-c.minHeight-this.splitBox.height}if(this.elBox.bottom-(n+this.splitBox.height)>c.maxHeight){n=this.elBox.bottom-c.maxHeight-this.splitBox.height}mini.setY(this._dragProxy,n)}}}}},_OnDragStop:function(d){var f=mini.getBox(this._dragProxy);var g=this.dragRegion,c=g.region;if(c=="west"){var b=f.x-this.elBox.x;this.updateRegion(g,{width:b})}else{if(c=="east"){var b=this.elBox.right-f.right;this.updateRegion(g,{width:b})}else{if(c=="north"){var a=f.y-this.elBox.y;this.updateRegion(g,{height:a})}else{if(c=="south"){var a=this.elBox.bottom-f.bottom;this.updateRegion(g,{height:a})}}}}jQuery(this._dragProxy).remove();this._dragProxy=null;this.elBox=this.handlerBox=null;jQuery(this._maskProxy).remove();this._maskProxy=null},_VirtualToggle:function(a){a=this.getRegion(a);if(a._Expanded===true){this._VirtualCollapse(a)}else{this._VirtualExpand(a)}},_VirtualExpand:function(p){if(this._inAniming){return}this.doLayout();var l=p.region,a=p._el;p._Expanded=true;mini.addClass(a,"mini-layout-popup");var f=mini.getBox(p._proxy);var j=mini.getBox(p._el);var c={};if(l=="east"){var q=f.x;var o=f.y;var g=f.height;mini.setHeight(a,g);mini.setX(a,q);a.style.top=p._proxy.style.top;var d=parseInt(a.style.left);c={left:d-j.width}}else{if(l=="west"){var q=f.right-j.width;var o=f.y;var g=f.height;mini.setHeight(a,g);mini.setX(a,q);a.style.top=p._proxy.style.top;var d=parseInt(a.style.left);c={left:d+j.width}}else{if(l=="north"){var q=f.x;var o=f.bottom-j.height;var r=f.width;mini.setWidth(a,r);mini.setXY(a,q,o);var n=parseInt(a.style.top);c={top:n+j.height}}else{if(l=="south"){var q=f.x;var o=f.y;var r=f.width;mini.setWidth(a,r);mini.setXY(a,q,o);var n=parseInt(a.style.top);c={top:n-j.height}}}}}mini.addClass(p._proxy,"mini-layout-maxZIndex");this._inAniming=true;var k=this;var b=jQuery(a);b.animate(c,250,function(){mini.removeClass(p._proxy,"mini-layout-maxZIndex");k._inAniming=false})},_VirtualCollapse:function(k){if(this._inAniming){return}k._Expanded=false;var j=k.region,a=k._el;var f=mini.getBox(a);var c={};if(j=="east"){var d=parseInt(a.style.left);c={left:d+f.width}}else{if(j=="west"){var d=parseInt(a.style.left);c={left:d-f.width}}else{if(j=="north"){var l=parseInt(a.style.top);c={top:l-f.height}}else{if(j=="south"){var l=parseInt(a.style.top);c={top:l+f.height}}}}}mini.addClass(k._proxy,"mini-layout-maxZIndex");this._inAniming=true;var g=this;var b=jQuery(a);b.animate(c,250,function(){mini.removeClass(k._proxy,"mini-layout-maxZIndex");g._inAniming=false;g.doLayout()})},__OnDocMouseDown:function(d){if(this._inAniming){return}for(var b=0,a=this.regions.length;b<a;b++){var c=this.regions[b];if(!c._Expanded){continue}if(mini.isAncestor(c._el,d.target)||mini.isAncestor(c._proxy,d.target)||d.target.location){}else{this._VirtualCollapse(c)}}},getAttrs:function(c){var p=mini.Layout.superclass.getAttrs.call(this,c);var d=jQuery(c);var n=parseInt(d.attr("splitSize"));if(!isNaN(n)){p.splitSize=n}var j=[];var a=mini.getChildNodes(c);for(var k=0,g=a.length;k<g;k++){var f=a[k];var b={};j.push(b);b.cls=f.className;b.style=f.style.cssText;mini._ParseString(f,b,["region","title","iconCls","iconStyle","cls","headerCls","headerStyle","bodyCls","bodyStyle"]);mini._ParseBool(f,b,["allowResize","visible","showCloseButton","showCollapseButton","showSplit","showHeader","expanded","showSplitIcon"]);mini._ParseInt(f,b,["splitSize","collapseSize","width","height","minWidth","minHeight","maxWidth","maxHeight"]);b.bodyParent=f}p.regions=j;return p}});mini.regClass(mini.Layout,"layout");mini.Box=function(){mini.Box.superclass.constructor.apply(this,arguments)};mini.extend(mini.Box,mini.Container,{style:"",borderStyle:"",bodyStyle:"",uiCls:"mini-box",_create:function(){this.el=document.createElement("div");this.el.className="mini-box";this.el.innerHTML='<div class="mini-box-border"></div>';this._bodyEl=this._borderEl=this.el.firstChild;this._contentEl=this._bodyEl},_initEvents:function(){},doLayout:function(){if(!this.canLayout()){return}var b=this.isAutoHeight();var j=this.isAutoWidth();var g=mini.getPaddings(this._bodyEl);var f=mini.getMargins(this._bodyEl);if(!b){var d=this.getHeight(true);if(jQuery.boxModel){d=d-g.top-g.bottom}d=d-f.top-f.bottom;if(d<0){d=0}this._bodyEl.style.height=d+"px"}else{this._bodyEl.style.height=""}var a=this.getWidth(true);var c=a;a=a-f.left-f.right;if(jQuery.boxModel){a=a-g.left-g.right}if(a<0){a=0}this._bodyEl.style.width=a+"px";mini.layout(this._borderEl);this.fire("layout")},setBody:function(c){if(!c){return}if(!mini.isArray(c)){c=[c]}for(var b=0,a=c.length;b<a;b++){mini.append(this._bodyEl,c[b])}mini.parse(this._bodyEl);this.doLayout()},set_bodyParent:function(b){if(!b){return}var a=this._bodyEl;var c=b;while(c.firstChild){a.appendChild(c.firstChild)}this.doLayout()},setBodyStyle:function(a){mini.setStyle(this._bodyEl,a);this.doLayout()},getAttrs:function(b){var a=mini.Box.superclass.getAttrs.call(this,b);a._bodyParent=b;mini._ParseString(b,a,["bodyStyle"]);return a}});mini.regClass(mini.Box,"box");mini.Include=function(){mini.Include.superclass.constructor.apply(this,arguments)};mini.extend(mini.Include,mini.Control,{url:"",uiCls:"mini-include",_create:function(){this.el=document.createElement("div");this.el.className="mini-include"},_initEvents:function(){},doLayout:function(){if(!this.canLayout()){return}var d=this.el.childNodes;if(d){for(var b=0,a=d.length;b<a;b++){var c=d[b];mini.layout(c)}}},setUrl:function(a){this.url=a;mini.update({url:this.url,el:this.el,async:this.async});this.doLayout()},getUrl:function(a){return this.url},getAttrs:function(b){var a=mini.Include.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["url"]);return a}});mini.regClass(mini.Include,"include");mini.Tabs=function(){this._initTabs();mini.Tabs.superclass.constructor.apply(this,arguments)};mini.extend(mini.Tabs,mini.Control,{activeIndex:-1,tabAlign:"left",tabPosition:"top",showBody:true,showHeader:true,nameField:"name",titleField:"title",urlField:"url",url:"",maskOnLoad:true,plain:true,bodyStyle:"",_tabHoverCls:"mini-tab-hover",_tabActiveCls:"mini-tab-active",set:function(d){if(typeof d=="string"){return this}var c=this._allowLayout;this._allowLayout=false;var a=d.activeIndex;delete d.activeIndex;var b=d.url;delete d.url;mini.Tabs.superclass.set.call(this,d);if(b){this.setUrl(b)}if(mini.isNumber(a)){this.setActiveIndex(a)}this._allowLayout=c;this.doLayout();return this},uiCls:"mini-tabs",_create:function(){this.el=document.createElement("div");this.el.className="mini-tabs";var b='<table class="mini-tabs-table" cellspacing="0" cellpadding="0"><tr style="width:100%;"><td></td><td style="text-align:left;vertical-align:top;width:100%;"><div class="mini-tabs-bodys"></div></td><td></td></tr></table>';this.el.innerHTML=b;this._tableEl=this.el.firstChild;var a=this.el.getElementsByTagName("td");this._td1El=a[0];this._td2El=a[1];this._td3El=a[2];this._bodyEl=this._td2El.firstChild;this._borderEl=this._bodyEl;this.doUpdate()},destroy:function(a){this._tableEl=this._td1El=this._td2El=this._td3El=null;this._bodyEl=this._borderEl=this.headerEl=null;this.tabs=[];mini.Tabs.superclass.destroy.call(this,a)},_doClearElement:function(){mini.removeClass(this._td1El,"mini-tabs-header");mini.removeClass(this._td3El,"mini-tabs-header");this._td1El.innerHTML="";this._td3El.innerHTML="";mini.removeChilds(this._td2El,this._bodyEl)},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"mousedown",this.__OnMouseDown,this);mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"mouseover",this.__OnMouseOver,this);mini.on(this.el,"mouseout",this.__OnMouseOut,this);mini.on(this.el,"dblclick",this.__OnDblClick,this)},this)},_initTabs:function(){this.tabs=[]},_TabID:1,createTab:function(a){var b=mini.copyTo({_id:this._TabID++,name:"",title:"",newLine:false,iconCls:"",iconStyle:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,enabled:true,showCloseButton:false,active:false,url:"",loaded:false,refreshOnClick:false},a);if(a){a=mini.copyTo(a,b);b=a}return b},_doLoad:function(){var a=mini._getResult(this.url,null,null,null,null,this.dataField);if(this.dataField&&!mini.isArray(a)){a=mini._getMap(this.dataField,a)}if(!a){a=[]}this.setTabs(a);this.fire("load")},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setTabs(a)}},setUrl:function(a){this.url=a;this._doLoad()},getUrl:function(){return this.url},setNameField:function(a){this.nameField=a},getNameField:function(){return this.nameField},setTitleField:function(a){this.titleField=a},getTitleField:function(){return this.titleField},setUrlField:function(a){this.urlField=a},getUrlField:function(){return this.urlField},setButtons:function(b){this._buttons=mini.byId(b);if(this._buttons){var a=mini.byClass("mini-tabs-buttons",this.el);if(a){a.appendChild(this._buttons);mini.parse(a);this.doLayout()}}},setTabControls:function(b,c){var b=this.getTab(b);if(!b){return}var a=this.getTabBodyEl(b);__mini_setControls(c,a,this)},setTabs:function(c){if(!mini.isArray(c)){return}this.beginUpdate();this.removeAll();for(var b=0,a=c.length;b<a;b++){var d=c[b];d.title=mini._getMap(this.titleField,d);d.url=mini._getMap(this.urlField,d);d.name=mini._getMap(this.nameField,d)}for(var b=0,a=c.length;b<a;b++){this.addTab(c[b])}this.setActiveIndex(0);this.endUpdate()},getTabs:function(){return this.tabs},removeAll:function(c){var a=this.getActiveTab();if(mini.isNull(c)){c=[]}if(!mini.isArray(c)){c=[c]}for(var f=c.length-1;f>=0;f--){var d=this.getTab(c[f]);if(!d){c.removeAt(f)}else{c[f]=d}}var b=this.tabs;for(var f=b.length-1;f>=0;f--){var g=b[f];if(c.indexOf(g)==-1){this.removeTab(g)}}var j=c[0];if(a!=this.getActiveTab()){if(j){this.activeTab(j)}}},addTab:function(c,j){if(typeof c=="string"){c={title:c}}c=this.createTab(c);if(!c.name){c.name=""}if(typeof j!="number"){j=this.tabs.length}this.tabs.insert(j,c);var k=this._createTabBodyId(c);var n='<div id="'+k+'" class="mini-tabs-body '+c.bodyCls+'" style="'+c.bodyStyle+';display:none;"></div>';mini.append(this._bodyEl,n);var b=this.getTabBodyEl(c);var g=c.body;delete c.body;if(g){if(!mini.isArray(g)){g=[g]}for(var f=0,d=g.length;f<d;f++){mini.append(b,g[f])}}if(c.bodyParent){var a=c.bodyParent;while(a.firstChild){if(a.firstChild.nodeType==8){a.removeChild(a.firstChild)}else{b.appendChild(a.firstChild)}}}delete c.bodyParent;if(c.controls){this.setTabControls(c,c.controls);delete c.controls}this.doUpdate();return c},removeTab:function(g){g=this.getTab(g);if(!g||this.tabs.indexOf(g)==-1){return}var b=this.getActiveTab();var f=g==b;var a=this._OnTabDestroy(g);this.tabs.remove(g);this._doRemoveIFrame(g);var d=this.getTabBodyEl(g);if(d){this._bodyEl.removeChild(d)}if(a&&f){for(var c=this.activeIndex;c>=0;c--){var g=this.getTab(c);if(g&&g.enabled&&g.visible){this.activeIndex=c;break}}this.doUpdate();this.setActiveIndex(this.activeIndex);this.fire("activechanged")}else{this.activeIndex=this.tabs.indexOf(b);this.doUpdate()}return g},moveTab:function(c,a){c=this.getTab(c);if(!c){return}var b=this.tabs[a];if(b==c){return}this.tabs.remove(c);var a=this.tabs.indexOf(b);if(a==-1){this.tabs.add(c)}else{this.tabs.insert(a,c)}this.doUpdate()},updateTab:function(b,a){b=this.getTab(b);if(!b){return}mini.copyTo(b,a);this.doUpdate()},_getMaskWrapEl:function(){return this._bodyEl},_doRemoveIFrame:function(k,j){if(k._iframeEl&&k._iframeEl.parentNode){k._iframeEl.onload=function(){};jQuery(k._iframeEl).unbind("load");k._iframeEl.src="";try{iframe.contentWindow.document.write("");iframe.contentWindow.document.close()}catch(f){}if(k._iframeEl._ondestroy){k._iframeEl._ondestroy()}try{k._iframeEl.parentNode.removeChild(k._iframeEl);k._iframeEl.removeNode(true)}catch(f){}}k._iframeEl=null;k.loadedUrl=null;if(j===true){var b=this.getTabBodyEl(k);if(b){var g=mini.getChildNodes(b,true);for(var c=0,a=g.length;c<a;c++){var n=g[c];if(n&&n.parentNode){n.parentNode.removeChild(n)}}}}},_deferLoadingTime:180,_cancelLoadTabs:function(f){var d=this.tabs;for(var c=0,a=d.length;c<a;c++){var b=d[c];if(b!=f){if(b._loading&&b._iframeEl){b._loading=false;this._doRemoveIFrame(b,true)}}}if(f&&f==this.getActiveTab()&&f._loading){}else{this._loading=false;this.unmask()}},_doLoadTab:function(d){if(!d||d!=this.getActiveTab()){return}var a=this.getTabBodyEl(d);if(!a){return}this._cancelLoadTabs();this._doRemoveIFrame(d,true);this._loading=true;d._loading=true;this.unmask();if(this.maskOnLoad){this.loading()}var b=new Date();var f=this;f.isLoading=true;var c=mini.createIFrame(d.url,function(l,k){try{d._iframeEl.contentWindow.Owner=window;d._iframeEl.contentWindow.CloseOwnerWindow=function(o){d.removeAction=o;var n=true;if(d.ondestroy){if(typeof d.ondestroy=="string"){d.ondestroy=window[d.ondestroy]}if(d.ondestroy){n=d.ondestroy.call(this,j)}}if(n===false){return false}setTimeout(function(){f.removeTab(d)},10)}}catch(j){}if(d._loading!=true){return}var g=(b-new Date())+f._deferLoadingTime;d._loading=false;d.loadedUrl=d.url;if(g<0){g=0}setTimeout(function(){f.unmask();f.doLayout();f.isLoading=false},g);if(k){var j={sender:f,tab:d,index:f.tabs.indexOf(d),name:d.name,iframe:d._iframeEl};if(d.onload){if(typeof d.onload=="string"){d.onload=window[d.onload]}if(d.onload){d.onload.call(f,j)}}}if(f.getActiveTab()==d){f.fire("tabload",j)}},this.clearTimeStamp);setTimeout(function(){if(d._iframeEl==c){a.appendChild(c)}},1);d._iframeEl=c},_OnTabDestroy:function(a){var b={sender:this,tab:a,index:this.tabs.indexOf(a),name:a.name,iframe:a._iframeEl,autoActive:true};this.fire("tabdestroy",b);return b.autoActive},loadTab:function(a,c,g,f){if(!a){return}c=this.getTab(c);if(!c){c=this.getActiveTab()}if(!c){return}var b=this.getTabBodyEl(c);if(b){mini.addClass(b,"mini-tabs-hideOverflow")}c.url=a;delete c.loadedUrl;if(g){c.onload=g}if(f){c.ondestroy=f}var d=this;clearTimeout(this._loadTabTimer);this._loadTabTimer=null;this._loadTabTimer=setTimeout(function(){d._doLoadTab(c)},1)},reloadTab:function(a){a=this.getTab(a);if(!a){a=this.getActiveTab()}if(!a){return}this.loadTab(a.url,a)},getTabRows:function(){var d=[];var f=[];for(var b=0,a=this.tabs.length;b<a;b++){var c=this.tabs[b];if(b!=0&&c.newLine){d.push(f);f=[]}f.push(c)}d.push(f);return d},doUpdate:function(){if(this._allowUpdate===false){return}if(this._buttons&&this._buttons.parentNode){this._buttons.parentNode.removeChild(this._buttons)}mini.removeClass(this.el,"mini-tabs-position-left");mini.removeClass(this.el,"mini-tabs-position-top");mini.removeClass(this.el,"mini-tabs-position-right");mini.removeClass(this.el,"mini-tabs-position-bottom");if(this.tabPosition=="bottom"){mini.addClass(this.el,"mini-tabs-position-bottom");this._doUpdateBottom()}else{if(this.tabPosition=="right"){mini.addClass(this.el,"mini-tabs-position-right");this._doUpdateRight()}else{if(this.tabPosition=="left"){mini.addClass(this.el,"mini-tabs-position-left");this._doUpdateLeft()}else{mini.addClass(this.el,"mini-tabs-position-top");this._doUpdateTop()}}}var b=this._headerEl,a="mini-tabs-header-";mini.removeClass(b,a+"left");mini.removeClass(b,a+"top");mini.removeClass(b,a+"right");mini.removeClass(b,a+"bottom");mini.addClass(b,a+this.tabPosition);var b=this._bodyEl,a="mini-tabs-body-";mini.removeClass(b,a+"left");mini.removeClass(b,a+"top");mini.removeClass(b,a+"right");mini.removeClass(b,a+"bottom");mini.addClass(b,a+this.tabPosition);if(this._buttons){var b=mini.byClass("mini-tabs-buttons",this.el);if(b){b.appendChild(this._buttons);mini.parse(b)}}this.doLayout();this.setActiveIndex(this.activeIndex,false)},_handleIFrameOverflow:function(){var a=this.getTabBodyEl(this.activeIndex);if(a){mini.removeClass(a,"mini-tabs-hideOverflow");var b=mini.getChildNodes(a)[0];if(b&&b.tagName&&b.tagName.toUpperCase()=="IFRAME"){mini.addClass(a,"mini-tabs-hideOverflow")}}},doLayout:function(){if(!this.canLayout()){return}this._headerEl.style.display=this.showHeader?"":"none";this._handleIFrameOverflow();var F=this.isAutoHeight();J=this.getHeight(true);s=this.getWidth();var t=J;var A=s;if(this.showBody){this._bodyEl.style.display=""}else{this._bodyEl.style.display="none"}if(this.plain){mini.addClass(this.el,"mini-tabs-plain")}else{mini.removeClass(this.el,"mini-tabs-plain")}if(!F&&this.showBody){var E=jQuery(this._headerEl).outerHeight();var j=jQuery(this._headerEl).outerWidth();if(this.tabPosition=="top"){E=jQuery(this._headerEl.parentNode).outerHeight()}if(this.tabPosition=="left"||this.tabPosition=="right"){s=s-j}else{J=J-E}if(jQuery.boxModel){var v=mini.getPaddings(this._bodyEl);var C=mini.getBorders(this._bodyEl);J=J-v.top-v.bottom-C.top-C.bottom;s=s-v.left-v.right-C.left-C.right}margin=mini.getMargins(this._bodyEl);J=J-margin.top-margin.bottom;s=s-margin.left-margin.right;if(J<0){J=0}if(s<0){s=0}this._bodyEl.style.width=s+"px";this._bodyEl.style.height=J+"px";if(this.tabPosition=="left"||this.tabPosition=="right"){var a=this._headerEl.getElementsByTagName("tr")[0];var G=a.childNodes;var u=G[0].getElementsByTagName("tr");var k=last=all=0;for(var H=0,D=u.length;H<D;H++){var a=u[H];var r=jQuery(a).outerHeight();all+=r;if(H==0){k=r}if(H==D-1){last=r}}switch(this.tabAlign){case"center":var x=parseInt((t-(all-k-last))/2);for(var H=0,D=G.length;H<D;H++){G[H].firstChild.style.height=t+"px";var p=G[H].firstChild;var u=p.getElementsByTagName("tr");var N=u[0],L=u[u.length-1];N.style.height=x+"px";L.style.height=x+"px"}break;case"right":for(var H=0,D=G.length;H<D;H++){var p=G[H].firstChild;var u=p.getElementsByTagName("tr");var a=u[0];var y=t-(all-k);if(y>=0){a.style.height=y+"px"}}break;case"fit":for(var H=0,D=G.length;H<D;H++){G[H].firstChild.style.height=t+"px"}break;default:for(var H=0,D=G.length;H<D;H++){var p=G[H].firstChild;var u=p.getElementsByTagName("tr");var a=u[u.length-1];var y=t-(all-last);if(y>=0){a.style.height=y+"px"}}break}}}else{this._bodyEl.style.width="auto";this._bodyEl.style.height="auto"}var g=this.getTabBodyEl(this.activeIndex);if(g){if(!F&&this.showBody){var J=mini.getHeight(this._bodyEl,true);if(jQuery.boxModel){var v=mini.getPaddings(g);var C=mini.getBorders(g);J=J-v.top-v.bottom-C.top-C.bottom}g.style.height=J+"px"}else{g.style.height="auto"}}switch(this.tabPosition){case"bottom":var d=this._headerEl.childNodes;for(var H=0,D=d.length;H<D;H++){var p=d[H];mini.removeClass(p,"mini-tabs-header2");if(D>1&&H!=0){mini.addClass(p,"mini-tabs-header2")}}break;case"left":var G=this._headerEl.firstChild.rows[0].cells;for(var H=0,D=G.length;H<D;H++){var o=G[H];mini.removeClass(o,"mini-tabs-header2");if(D>1&&H==0){mini.addClass(o,"mini-tabs-header2")}}break;case"right":var G=this._headerEl.firstChild.rows[0].cells;for(var H=0,D=G.length;H<D;H++){var o=G[H];mini.removeClass(o,"mini-tabs-header2");if(D>1&&H!=0){mini.addClass(o,"mini-tabs-header2")}}break;default:var d=this._headerEl.childNodes;for(var H=0,D=d.length;H<D;H++){var p=d[H];mini.removeClass(p,"mini-tabs-header2");if(D>1&&H==0){mini.addClass(p,"mini-tabs-header2")}}break}mini.removeClass(this.el,"mini-tabs-scroll");var o=mini.byClass("mini-tabs-lastSpace",this.el);var I=mini.byClass("mini-tabs-buttons",this.el);var f=this._headerEl.parentNode;f.style.paddingRight="0px";if(this._navEl){this._navEl.style.display="none"}if(this._leftNavEl){this._navEl.style.display="none"}if(I){I.style.display="none"}mini.setWidth(f,A);if(this.tabPosition=="top"&&this.tabAlign=="left"){this._headerEl.style.width="auto";I.style.display="block";var B=A;var q=this._headerEl.firstChild.offsetWidth-o.offsetWidth;var K=I.firstChild?I.offsetWidth:0;if(q+K>B){this._navEl.style.display="block";var z=this._navEl.offsetWidth;var M=0;if(this.showNavMenu){this._headerMenuEl.style.display="inline-block";M=this._headerMenuEl.offsetWidth;this._headerMenuEl.style.right=K+"px";this._createHeaderMenu()}var c=0;if(this.arrowPosition=="side"){this._leftNavEl.style.display="block";c=this._leftNavEl.offsetWidth;this._headerEl.style.left=c+"px"}this._navEl.style.right=K+M+"px";var s=B-K-z-c-M;mini.setWidth(this._headerEl,s)}}this._scrollToTab(this.activeIndex);this._doScrollButton();mini.layout(this._bodyEl);var n=this;var b=this.getActiveTab();if(b&&b.repaint&&g){var s=g.style.width;g.style.width="0px";setTimeout(function(){g.style.width=s},1)}this.fire("layout")},_getTabBy_Id:function(d){for(var b=0,a=this.tabs.length;b<a;b++){var c=this.tabs[b];if(c._id==d){return c}}},_createHeaderMenu:function(){this._headerMenu=new mini.Menu();this._headerMenu.setIdField("_id");this._headerMenu.setTextField("title");this._headerMenu.setPopupEl(this._headerMenuEl);this._headerMenu.setShowAction("leftclick");this._headerMenu.setHideAction("outerclick");this._headerMenu.setXAlign("left");this._headerMenu.setYAlign("below");this._headerMenu.on("itemclick",this._doMenuSelectTab,this);this._headerMenu.hide();this._headerMenu.owner=this._headerMenuEl},_setHeaderMenuItems:function(){var d=this.getTabs();var b=[];for(var c=0,a=d.length;c<a;c++){var f=d[c];b.push({id:f._id,text:f[this.titleField]})}this._headerMenu.setItems(b)},_doMenuSelectTab:function(c){var b=c.item;var a=this._getTabBy_Id(b.id);this.activeTab(a)},setTabAlign:function(a){this.tabAlign=a;this.doUpdate()},setTabPosition:function(a){this.tabPosition=a;this.doUpdate()},allowClickWrap:true,setAllowClickWrap:function(a){this.allowClickWrap=a},getAllowClickWrap:function(){return this.allowClickWrap},getTab:function(b){if(typeof b=="object"){return b}if(typeof b=="number"){return this.tabs[b]}else{for(var c=0,a=this.tabs.length;c<a;c++){var d=this.tabs[c];if(d.name==b){return d}}}},getHeaderEl:function(){return this._headerEl},getBodyEl:function(){return this._bodyEl},getTabEl:function(b){var g=this.getTab(b);if(!g){return null}var j=this._createTabId(g);var f=this.el.getElementsByTagName("*");for(var c=0,a=f.length;c<a;c++){var d=f[c];if(d.id==j){return d}}return null},getTabBodyEl:function(b){var g=this.getTab(b);if(!g){return null}var j=this._createTabBodyId(g);var f=this._bodyEl.childNodes;for(var c=0,a=f.length;c<a;c++){var d=f[c];if(d.id==j){return d}}return null},getTabIFrameEl:function(a){var b=this.getTab(a);if(!b){return null}return b._iframeEl},_createTabId:function(a){return this.uid+"$"+a._id},_createTabBodyId:function(a){return this.uid+"$body$"+a._id},_doScrollButton:function(){if(this.tabPosition=="top"){mini.removeClass(this._leftButtonEl,"mini-disabled");mini.removeClass(this._rightButtonEl,"mini-disabled");if(this._headerEl.scrollLeft==0){mini.addClass(this._leftButtonEl,"mini-disabled")}var c=this.getTabEl(this.tabs.length-1);if(c){var a=mini.getBox(c);var b=mini.getBox(this._headerEl);if(a.right<=b.right){mini.addClass(this._rightButtonEl,"mini-disabled")}}}},setActiveIndex:function(r,t){var d=this.getTab(r);var v=this.getTab(this.activeIndex);var a=d!=v;var b=this.getTabBodyEl(this.activeIndex);if(b){b.style.display="none"}if(d){this.activeIndex=this.tabs.indexOf(d)}else{this.activeIndex=-1}var b=this.getTabBodyEl(this.activeIndex);if(b){b.style.display=""}var b=this.getTabEl(v);if(b){mini.removeClass(b,this._tabActiveCls)}var b=this.getTabEl(d);if(b){mini.addClass(b,this._tabActiveCls)}if(b&&a){if(this.tabPosition=="bottom"){var k=mini.findParent(b,"mini-tabs-header");if(k){jQuery(this._headerEl).prepend(k)}}else{if(this.tabPosition=="left"){var j=mini.findParent(b,"mini-tabs-header").parentNode;if(j){j.parentNode.appendChild(j)}}else{if(this.tabPosition=="right"){var j=mini.findParent(b,"mini-tabs-header").parentNode;if(j){jQuery(j.parentNode).prepend(j)}}else{var k=mini.findParent(b,"mini-tabs-header");if(k&&this.allowClickWrap){this._headerEl.appendChild(k)}}}}var g=this._headerEl.scrollLeft;var v=this.getTab(this.activeIndex);var p=v?!v._layouted:false;var s=this.isAutoHeight();if(s||p){if(v){v._layouted=true}this.doLayout()}var u=this.getTabRows();if(u.length>1){}else{this._scrollToTab(this.activeIndex);this._doScrollButton()}for(var n=0,f=this.tabs.length;n<f;n++){var c=this.getTabEl(this.tabs[n]);if(c){mini.removeClass(c,this._tabHoverCls)}}}var q=this;if(a){var o={tab:d,index:this.tabs.indexOf(d),name:d?d.name:""};setTimeout(function(){q.fire("ActiveChanged",o)},1)}this._cancelLoadTabs(d);if(t!==false){if(d&&d.url&&!d.loadedUrl){var q=this;q.loadTab(d.url,d)}}else{}if(q.canLayout()){try{mini.layoutIFrames(q.el)}catch(o){}}},_scrollToTab:function(b){var g=this._headerEl.scrollLeft;if(this.tabPosition=="top"){this._headerEl.scrollLeft=g;var f=this.getTabEl(b);if(f){var d=this;var a=mini.getBox(f);var c=mini.getBox(d._headerEl);if(a.x<c.x){d._headerEl.scrollLeft-=(c.x-a.x)}else{if(a.right>c.right){d._headerEl.scrollLeft+=(a.right-c.right)}}}}},getActiveIndex:function(){return this.activeIndex},activeTab:function(a){this.setActiveIndex(a)},getActiveTab:function(){return this.getTab(this.activeIndex)},getActiveIndex:function(){return this.activeIndex},_tryActiveTab:function(b){b=this.getTab(b);if(!b){return}var a=this.tabs.indexOf(b);if(this.activeIndex==a){return}var c={tab:b,index:a,name:b.name,cancel:false};this.fire("BeforeActiveChanged",c);if(c.cancel==false){this.activeTab(b)}},setShowHeader:function(a){if(this.showHeader!=a){this.showHeader=a;this.doLayout()}},getShowHeader:function(){return this.showHeader},setShowBody:function(a){if(this.showBody!=a){this.showBody=a;this.doLayout()}},getShowBody:function(){return this.showBody},setBodyStyle:function(a){this.bodyStyle=a;mini.setStyle(this._bodyEl,a);this.doLayout()},getBodyStyle:function(){return this.bodyStyle},setMaskOnLoad:function(a){this.maskOnLoad=a},getMaskOnLoad:function(){return this.maskOnLoad},setPlain:function(a){this.plain=a;this.doLayout()},getPlain:function(){return this.plain},arrowPosition:"right",setArrowPosition:function(a){this.arrowPosition=a},getArrowPosition:function(){return this.arrowPosition},showNavMenu:false,setShowNavMenu:function(a){this.showNavMenu=a},getShowNavMenu:function(){return this.showNavMenu},clearTimeStamp:false,setClearTimeStamp:function(a){this.clearTimeStamp=a},getClearTimeStamp:function(){return this.clearTimeStamp},getTabByEvent:function(a){return this._getTabByEvent(a)},_getTabByEvent:function(d){var c=mini.findParent(d.target,"mini-tab");if(!c){return null}var b=c.id.split("$");if(b[0]!=this.uid){return null}var a=parseInt(jQuery(c).attr("index"));return this.getTab(a)},__OnDblClick:function(b){var a=this._getTabByEvent(b);if(!a){return}var b={tab:a};this.fire("tabdblclick",b)},__OnClick:function(c){var a=this._getTabByEvent(c);if(!a){return}var d=!!mini.findParent(c.target,"mini-tab-close");if(!d&&a==this.getActiveTab()&&!a.refreshOnClick){return}if(a.enabled){var b=this;setTimeout(function(){if(d){b._OnCloseButtonClick(a,c)}else{var f=a.loadedUrl;b._tryActiveTab(a);if(a.refreshOnClick&&a.url==f){b.reloadTab(a)}}},10)}},hoverTab:null,__OnMouseOver:function(b){var a=this._getTabByEvent(b);if(a&&a.enabled){var c=this.getTabEl(a);mini.addClass(c,this._tabHoverCls);this.hoverTab=a}},__OnMouseOut:function(a){if(this.hoverTab){var b=this.getTabEl(this.hoverTab);mini.removeClass(b,this._tabHoverCls)}this.hoverTab=null},__OnMouseDown:function(d){clearInterval(this._scrollTimer);if(this.tabPosition=="top"){var c=this;var b=0,a=10;if(d.target==this._leftButtonEl){this._scrollTimer=setInterval(function(){c._headerEl.scrollLeft-=a;b++;if(b>5){a=18}if(b>10){a=25}c._doScrollButton()},25)}else{if(d.target==this._rightButtonEl){this._scrollTimer=setInterval(function(){c._headerEl.scrollLeft+=a;b++;if(b>5){a=18}if(b>10){a=25}c._doScrollButton()},25)}else{if(d.target==this._headerMenuEl){this._setHeaderMenuItems()}}}mini.on(document,"mouseup",this.__OnDocMouseUp,this)}},__OnDocMouseUp:function(a){clearInterval(this._scrollTimer);this._scrollTimer=null;mini.un(document,"mouseup",this.__OnDocMouseUp,this)},_doUpdateTop:function(){var t=this.tabPosition=="top";var y="";if(t){y+='<div class="mini-tabs-scrollCt">';if(this.arrowPosition=="side"){y+='<div class="mini-tabs-leftnav"><a class="mini-tabs-leftButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>';y+='<div class="mini-tabs-nav"><a class="mini-tabs-rightButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>'}else{y+='<div class="mini-tabs-nav"><a class="mini-tabs-leftButton" href="javascript:void(0)" hideFocus onclick="return false"></a><a class="mini-tabs-rightButton" href="javascript:void(0)" hideFocus onclick="return false"></a></div>'}if(this.showNavMenu){y+='<a class="mini-tabs-tabmenu" href="javascript:void(0)" hideFocus onclick="return false"></a>'}y+='<div class="mini-tabs-buttons"></div>'}y+='<div class="mini-tabs-headers">';var x=this.getTabRows();for(var o=0,g=x.length;o<g;o++){var u=x[o];var w="";y+='<table class="mini-tabs-header" cellspacing="0" cellpadding="0"><tr><td class="mini-tabs-space mini-tabs-firstSpace"><div></div></td>';for(var q=0,f=u.length;q<f;q++){var c=u[q];var b=this._createTabId(c);if(!c.visible){continue}var r=this.tabs.indexOf(c);var w=c.headerCls||"";if(c.enabled==false){w+=" mini-disabled"}y+='<td id="'+b+'" index="'+r+'"  class="mini-tab '+w+'" style="'+c.headerStyle+'">';if(c.iconCls||c.iconStyle){y+='<span class="mini-tab-icon '+c.iconCls+'" style="'+c.iconStyle+'"></span>'}y+='<span class="mini-tab-text">'+c.title+"</span>";if(c.showCloseButton){var a="";if(c.enabled){a="onmouseover=\"mini.addClass(this, 'mini-tab-close-hover')\" onmouseout=\"mini.removeClass(this, 'mini-tab-close-hover')\""}y+='<span class="mini-tab-close" '+a+" ></span>"}y+="</td>";if(q!=f-1){y+='<td class=""><div></div></td>'}}y+='<td class="mini-tabs-space mini-tabs-lastSpace" ><div></div></td></tr></table>'}if(t){y+="</div>"}y+="</div>";this._doClearElement();mini.prepend(this._td2El,y);var d=this._td2El;this._headerEl=d.firstChild.lastChild;if(t){if(this.arrowPosition=="side"){this._leftNavEl=d.firstChild.firstChild;this._navEl=this._headerEl.parentNode.children[1];this._leftButtonEl=this._leftNavEl.firstChild;this._rightButtonEl=this._navEl.firstChild;if(this.showNavMenu){this._headerMenuEl=this._headerEl.parentNode.children[2]}}else{this._navEl=this._headerEl.parentNode.firstChild;this._leftButtonEl=this._navEl.firstChild;this._rightButtonEl=this._navEl.childNodes[1];if(this.showNavMenu){this._headerMenuEl=this._headerEl.parentNode.children[1]}}}switch(this.tabAlign){case"center":var v=this._headerEl.childNodes;for(var q=0,f=v.length;q<f;q++){var n=v[q];var p=n.getElementsByTagName("td");p[0].style.width="50%";p[p.length-1].style.width="50%"}break;case"right":var v=this._headerEl.childNodes;for(var q=0,f=v.length;q<f;q++){var n=v[q];var p=n.getElementsByTagName("td");p[0].style.width="100%"}break;case"fit":break;default:var v=this._headerEl.childNodes;for(var q=0,f=v.length;q<f;q++){var n=v[q];var p=n.getElementsByTagName("td");p[p.length-1].style.width="100%"}break}},_doUpdateBottom:function(){this._doUpdateTop();var a=this._td2El;mini.append(a,a.firstChild);this._headerEl=a.lastChild},_doUpdateLeft:function(){var t='<table cellspacing="0" cellpadding="0"><tr>';var r=this.getTabRows();for(var g=0,f=r.length;g<f;g++){var p=r[g];var q="";if(f>1&&g!=f-1){q="mini-tabs-header2"}t+='<td class="'+q+'"><table class="mini-tabs-header" cellspacing="0" cellpadding="0">';t+='<tr ><td class="mini-tabs-space mini-tabs-firstSpace" ><div></div></td></tr>';for(var n=0,d=p.length;n<d;n++){var c=p[n];var b=this._createTabId(c);if(!c.visible){continue}var o=this.tabs.indexOf(c);var q=c.headerCls||"";if(c.enabled==false){q+=" mini-disabled"}t+='<tr><td id="'+b+'" index="'+o+'"  class="mini-tab '+q+'" style="'+c.headerStyle+'">';if(c.iconCls||c.iconStyle){t+='<span class="mini-tab-icon '+c.iconCls+'" style="'+c.iconStyle+'"></span>'}t+='<span class="mini-tab-text">'+c.title+"</span>";if(c.showCloseButton){var a="";if(c.enabled){a="onmouseover=\"mini.addClass(this, 'mini-tab-close-hover')\" onmouseout=\"mini.removeClass(this, 'mini-tab-close-hover')\""}t+='<span class="mini-tab-close" '+a+"></span>"}t+="</td></tr>";if(n!=d-1){t+='<tr><td class=""><div></div></td></tr>'}}t+='<tr ><td class="mini-tabs-space mini-tabs-lastSpace" ><div></div></td></tr>';t+="</table></td>"}t+="</tr ></table>";this._doClearElement();mini.addClass(this._td1El,"mini-tabs-header");mini.append(this._td1El,t);this._headerEl=this._td1El},_doUpdateRight:function(){this._doUpdateLeft();mini.removeClass(this._td1El,"mini-tabs-header");mini.removeClass(this._td3El,"mini-tabs-header");mini.append(this._td3El,this._td1El.firstChild);this._headerEl=this._td3El},_OnCloseButtonClick:function(d,a){var f={tab:d,index:this.tabs.indexOf(d),name:d.name.toLowerCase(),htmlEvent:a,cancel:false};this.fire("beforecloseclick",f);if(f.cancel==true){return}try{if(d._iframeEl&&d._iframeEl.contentWindow){var b=true;if(d._iframeEl.contentWindow.CloseWindow){b=d._iframeEl.contentWindow.CloseWindow("close")}else{if(d._iframeEl.contentWindow.CloseOwnerWindow){b=d._iframeEl.contentWindow.CloseOwnerWindow("close")}}if(b===false){f.cancel=true}}}catch(c){}if(f.cancel==true){return}d.removeAction="close";this.removeTab(d);this.fire("closeclick",f)},onBeforeCloseClick:function(b,a){this.on("beforecloseclick",b,a)},onCloseClick:function(b,a){this.on("closeclick",b,a)},onActiveChanged:function(b,a){this.on("activechanged",b,a)},getAttrs:function(el){var attrs=mini.Tabs.superclass.getAttrs.call(this,el);mini._ParseString(el,attrs,["tabAlign","tabPosition","bodyStyle","onactivechanged","onbeforeactivechanged","url","ontabload","ontabdestroy","onbeforecloseclick","oncloseclick","ontabdblclick","titleField","urlField","nameField","loadingMsg","buttons","arrowPosition"]);mini._ParseBool(el,attrs,["allowAnim","showBody","showHeader","maskOnLoad","plain","allowClickWrap","showNavMenu","clearTimeStamp"]);mini._ParseInt(el,attrs,["activeIndex"]);var tabs=[];var nodes=mini.getChildNodes(el);for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];var o={};tabs.push(o);o.style=node.style.cssText;mini._ParseString(node,o,["name","title","url","cls","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle","onload","ondestroy","data-options"]);mini._ParseBool(node,o,["newLine","visible","enabled","showCloseButton","refreshOnClick"]);o.bodyParent=node;var options=o["data-options"];if(options){options=eval("("+options+")");if(options){mini.copyTo(o,options)}}}attrs.tabs=tabs;return attrs}});mini.regClass(mini.Tabs,"tabs");mini.Menu=function(){this.items=[];mini.Menu.superclass.constructor.apply(this,arguments)};mini.extend(mini.Menu,mini.Control);mini.copyTo(mini.Menu.prototype,mini.Popup_prototype);var mini_Popup_prototype_hide=mini.Popup_prototype.hide;mini.copyTo(mini.Menu.prototype,{height:"auto",width:"auto",minWidth:140,vertical:true,allowSelectItem:false,_selectedItem:null,_itemSelectedCls:"mini-menuitem-selected",textField:"text",resultAsTree:false,idField:"id",parentField:"pid",itemsField:"children",showNavArrow:true,imgPath:"",_clearBorder:false,showAction:"none",hideAction:"outerclick",getbyName:function(b){for(var c=0,a=this.items.length;c<a;c++){var d=this.items[c];if(d.name==b){return d}if(d.menu){var f=d.menu.getbyName(b);if(f){return f}}}return null},set:function(b){if(typeof b=="string"){return this}var a=b.url;delete b.url;if(b.imgPath){this.setImgPath(b.imgPath)}delete b.imgPath;this.ownerItem=b.ownerItem;delete b.ownerItem;mini.Menu.superclass.set.call(this,b);if(a){this.setUrl(a)}return this},uiCls:"mini-menu",_create:function(){this.el=document.createElement("div");this.el.className="mini-menu";this.el.innerHTML='<div class="mini-menu-border"><a class="mini-menu-topArrow" href="#" onclick="return false"></a><div class="mini-menu-inner"></div><a class="mini-menu-bottomArrow" href="#" onclick="return false"></a></div>';this._borderEl=this.el.firstChild;this._topArrowEl=this._borderEl.childNodes[0];this._bottomArrowEl=this._borderEl.childNodes[2];this._innerEl=this._borderEl.childNodes[1];this._innerEl.innerHTML='<div class="mini-menu-float"></div><div class="mini-menu-toolbar"></div><div style="clear:both;"></div>';this._contentEl=this._innerEl.firstChild;this._toolbarEl=this._innerEl.childNodes[1];if(this.isVertical()==false){mini.addClass(this.el,"mini-menu-horizontal")}},destroy:function(a){if(this._topArrowEl){this._topArrowEl.onmousedown=this._bottomArrowEl.onmousedown=null}this._popupEl=this.popupEl=this._borderEl=this._innerEl=this._contentEl=null;this._topArrowEl=this._bottomArrowEl=null;this.owner=null;this.window=null;mini.un(document,"mousedown",this.__OnBodyMouseDown,this);mini.un(window,"resize",this.__OnWindowResize,this);mini.Menu.superclass.destroy.call(this,a)},_disableContextMenu:false,_initEvents:function(){mini._BindEvents(function(){mini.on(document,"mousedown",this.__OnBodyMouseDown,this);mini_onOne(this.el,"mouseover",this.__OnMouseOver,this);mini.on(window,"resize",this.__OnWindowResize,this);if(this._disableContextMenu){mini_onOne(this.el,"contextmenu",function(a){a.preventDefault()},this)}mini_onOne(this._topArrowEl,"mousedown",this.__OnTopMouseDown,this);mini_onOne(this._bottomArrowEl,"mousedown",this.__OnBottomMouseDown,this)},this)},within:function(d){if(mini.isAncestor(this.el,d.target)){return true}for(var b=0,a=this.items.length;b<a;b++){var c=this.items[b];if(c.within(d)){return true}}return false},setVertical:function(a){this.vertical=a;if(!a){mini.addClass(this.el,"mini-menu-horizontal")}else{mini.removeClass(this.el,"mini-menu-horizontal")}},getVertical:function(){return this.vertical},isVertical:function(){return this.vertical},show:function(){this.setVisible(true)},hide:function(){this.hideItems();mini_Popup_prototype_hide.call(this)},hideItems:function(){for(var b=0,a=this.items.length;b<a;b++){var c=this.items[b];c.hideMenu()}},showItemMenu:function(c){for(var b=0,a=this.items.length;b<a;b++){var d=this.items[b];if(d==c){d.showMenu()}else{d.hideMenu()}}},hasShowItemMenu:function(){for(var b=0,a=this.items.length;b<a;b++){var c=this.items[b];if(c&&c.menu&&c.menu.isPopup){return true}}return false},setData:function(a){if(!mini.isArray(a)){a=[]}this.setItems(a)},getData:function(){return this.getItems()},setItems:function(b){if(!mini.isArray(b)){b=[]}this.removeAll();var d=new Date();for(var c=0,a=b.length;c<a;c++){this.addItem(b[c])}},getItems:function(){return this.items},_itemType:"menuitem",addItem:function(a){if(a=="-"||a=="|"||a.type=="separator"){mini.append(this._contentEl,'<span id="'+a.id+'" name="'+(a.name||"")+'" class="mini-separator"></span>');return}if(!mini.isControl(a)&&!mini.getClass(a.type)){a.type=this._itemType}a.ownerMenu=this;a=mini.getAndCreate(a);this.items.push(a);this._contentEl.appendChild(a.el);a.ownerMenu=this;this.fire("itemschanged")},removeItem:function(a){a=mini.get(a);if(!a){return}this.items.remove(a);this._contentEl.removeChild(a.el);this.fire("itemschanged")},removeItemAt:function(a){var b=this.items[a];this.removeItem(b)},removeAll:function(){var a=this.items.clone();for(var b=a.length-1;b>=0;b--){this.removeItem(a[b])}this._contentEl.innerHTML=""},getGroupItems:function(c){if(!c){return[]}var b=[];for(var d=0,a=this.items.length;d<a;d++){var f=this.items[d];if(f.groupName==c){b.push(f)}}return b},getItem:function(d){if(typeof d=="number"){return this.items[d]}if(typeof d=="string"){for(var b=0,a=this.items.length;b<a;b++){var c=this.items[b];if(c.id==d){return c}}return null}if(d&&this.items.indexOf(d)!=-1){return d}return null},setAllowSelectItem:function(a){this.allowSelectItem=a},getAllowSelectItem:function(){return this.allowSelectItem},setSelectedItem:function(a){a=this.getItem(a);this._OnItemSelect(a)},getSelectedItem:function(a){return this._selectedItem},setShowNavArrow:function(a){this.showNavArrow=a},getShowNavArrow:function(){return this.showNavArrow},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},setResultAsTree:function(a){this.resultAsTree=a},getResultAsTree:function(){return this.resultAsTree},setIdField:function(a){this.idField=a},getIdField:function(){return this.idField},setParentField:function(a){this.parentField=a},getParentField:function(){return this.parentField},doLayout:function(){if(!this.canLayout()){return}if(!this.isAutoHeight()){var a=mini.getHeight(this.el,true);mini.setHeight(this._borderEl,a);this._topArrowEl.style.display=this._bottomArrowEl.style.display="none";this._contentEl.style.height="auto";if(this.showNavArrow&&this._borderEl.scrollHeight>this._borderEl.clientHeight){this._topArrowEl.style.display=this._bottomArrowEl.style.display="block";a=mini.getHeight(this._borderEl,true);var f=mini.getHeight(this._topArrowEl);var b=mini.getHeight(this._bottomArrowEl);var d=a-f-b;if(d<0){d=0}mini.setHeight(this._contentEl,d);var c=mini.getWidth(this._borderEl,true);mini.setWidth(this._topArrowEl,c);mini.setWidth(this._bottomArrowEl,c)}else{this._contentEl.style.height="auto"}}else{this._borderEl.style.height="auto";this._contentEl.style.height="auto"}},_measureSize:function(){if(this.height=="auto"){this.el.style.height="auto";this._borderEl.style.height="auto";this._contentEl.style.height="auto";this._topArrowEl.style.display=this._bottomArrowEl.style.display="none";var a=mini.getViewportBox();var c=mini.getBox(this.el);this.maxHeight=a.height-25;if(this.ownerItem){var c=mini.getBox(this.ownerItem.el);var d=c.top;var f=a.height-c.bottom;var b=d>f?d:f;b-=10;this.maxHeight=b}}this.el.style.display="";var c=mini.getBox(this.el);if(c.width>this.maxWidth){mini.setWidth(this.el,this.maxWidth);c=mini.getBox(this.el)}if(c.height>this.maxHeight){mini.setHeight(this.el,this.maxHeight);c=mini.getBox(this.el)}if(c.width<this.minWidth){mini.setWidth(this.el,this.minWidth);c=mini.getBox(this.el)}if(c.height<this.minHeight){mini.setHeight(this.el,this.minHeight);c=mini.getBox(this.el)}},url:"",_doLoad:function(){var b=mini._getResult(this.url,null,null,null,null,this.dataField);if(this.dataField&&!mini.isArray(b)){b=mini._getMap(this.dataField,b)}if(!b){b=[]}if(this.resultAsTree==false){b=mini.arrayToTree(b,this.itemsField,this.idField,this.parentField)}var f=mini.treeToArray(b,this.itemsField,this.idField,this.parentField);for(var c=0,a=f.length;c<a;c++){var g=f[c];g.text=mini._getMap(this.textField,g);if(mini.isNull(g.text)){g.text=""}}var d=new Date();this.setItems(b);this.fire("load")},loadList:function(f,c,g){if(!f){return}c=c||this.idField;g=g||this.parentField;for(var d=0,b=f.length;d<b;d++){var j=f[d];j.text=mini._getMap(this.textField,j);if(mini.isNull(j.text)){j.text=""}}var a=mini.arrayToTree(f,this.itemsField,c,g);this.load(a)},load:function(a){if(typeof a=="string"){this.setUrl(a)}else{this.setItems(a)}},setUrl:function(a){this.url=a;this._doLoad()},getUrl:function(){return this.url},hideOnClick:true,setHideOnClick:function(a){this.hideOnClick=a},getHideOnClick:function(){return this.hideOnClick},hideOnClick:true,setImgPath:function(a){this.imgPath=a},getImgPath:function(){return this.imgPath},_OnItemClick:function(b,a){var c={item:b,isLeaf:!b.menu,htmlEvent:a};if(this.hideOnClick){if(this.isPopup){this.hide()}else{this.hideItems()}}if(this.allowSelectItem&&this._selectedItem!=b){this.setSelectedItem(b)}this.fire("itemclick",c);if(this.ownerItem){}},_OnItemSelect:function(a){if(this._selectedItem){this._selectedItem.removeCls(this._itemSelectedCls)}this._selectedItem=a;if(this._selectedItem){this._selectedItem.addCls(this._itemSelectedCls)}var b={item:this._selectedItem,isLeaf:this._selectedItem?!this._selectedItem.menu:false};this.fire("itemselect",b)},onItemClick:function(b,a){this.on("itemclick",b,a)},onItemSelect:function(b,a){this.on("itemselect",b,a)},__OnTopMouseDown:function(a){this._startScrollMove(-20)},__OnBottomMouseDown:function(a){this._startScrollMove(20)},_startScrollMove:function(c){clearInterval(this._scrollTimer);var a=function(){clearInterval(b._scrollTimer);mini.un(document,"mouseup",a)};mini.on(document,"mouseup",a);var b=this;this._scrollTimer=setInterval(function(){b._contentEl.scrollTop+=c},50)},setToolbar:function(a){__mini_setControls(a,this._toolbarEl,this)},parseItems:function(a){var g=[];for(var j=0,f=a.length;j<f;j++){var d=a[j];if(d.className=="separator"){var c={type:"separator",id:d.id,name:d.name};g.add(c);continue}var k=mini.getChildNodes(d);var n=k[0];var p=k[1];var c=new mini.MenuItem();if(!p){mini.applyTo.call(c,d);g.add(c);continue}mini.applyTo.call(c,n);c.render(document.body);var b=new mini.Menu();mini.applyTo.call(b,p);c.setMenu(b);b.render(document.body);g.add(c)}return g.clone()},getAttrs:function(b){var n=mini.Menu.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,n,["popupEl","popupCls","showAction","hideAction","xAlign","yAlign","modalStyle","onbeforeopen","open","onbeforeclose","onclose","url","onitemclick","onitemselect","textField","idField","parentField","toolbar","imgPath"]);mini._ParseBool(b,n,["resultAsTree","hideOnClick","showNavArrow","showShadow"]);var a=mini.getChildNodes(b);for(var j=a.length-1;j>=0;j--){var d=a[j];var l=jQuery(d).attr("property");if(!l){continue}l=l.toLowerCase();if(l=="toolbar"){n.toolbar=d;d.parentNode.removeChild(d)}}var a=mini.getChildNodes(b);var k=this.parseItems(a);if(k.length>0){n.items=k}var g=c.attr("vertical");if(g){n.vertical=g=="true"?true:false}var f=c.attr("allowSelectItem");if(f){n.allowSelectItem=f=="true"?true:false}return n}});mini.regClass(mini.Menu,"menu");mini.MenuBar=function(){mini.MenuBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.MenuBar,mini.Menu,{uiCls:"mini-menubar",vertical:false,setVertical:function(a){this.vertical=false}});mini.regClass(mini.MenuBar,"menubar");mini.ContextMenu=function(){mini.ContextMenu.superclass.constructor.apply(this,arguments)};mini.extend(mini.ContextMenu,mini.Menu,{uiCls:"mini-contextmenu",vertical:true,visible:false,_disableContextMenu:true,setVertical:function(a){this.vertical=true}});mini.regClass(mini.ContextMenu,"contextmenu");mini.MenuItem=function(){mini.MenuItem.superclass.constructor.apply(this,arguments)};mini.extend(mini.MenuItem,mini.Control,{text:"",iconCls:"",iconStyle:"",iconPosition:"left",img:"",showIcon:true,showAllow:true,checked:false,checkOnClick:false,groupName:"",_hoverCls:"mini-menuitem-hover",_pressedCls:"mini-menuitem-pressed",_checkedCls:"mini-menuitem-checked",_clearBorder:false,menu:null,set:function(a){if(typeof a=="string"){return this}this.ownerMenu=a.ownerMenu;delete a.ownerMenu;mini.MenuItem.superclass.set.call(this,a);return this},uiCls:"mini-menuitem",_create:function(){var a=this.el=document.createElement("div");this.el.className="mini-menuitem";this.el.innerHTML='<div class="mini-menuitem-inner"><div class="mini-menuitem-icon"></div><div class="mini-menuitem-text"></div><div class="mini-menuitem-allow"></div></div>';this._innerEl=this.el.firstChild;this._iconEl=this._innerEl.firstChild;this._textEl=this._innerEl.childNodes[1];this.allowEl=this._innerEl.lastChild},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mouseover",this.__OnMouseOver,this)},this)},_inputEventsInited:false,_initInputEvents:function(){if(this._inputEventsInited){return}this._inputEventsInited=true;mini_onOne(this.el,"click",this.__OnClick,this);mini_onOne(this.el,"mouseup",this.__OnMouseUp,this);mini_onOne(this.el,"mouseout",this.__OnMouseOut,this)},destroy:function(a){if(this.el){this.el.onmouseover=null}this.menu=this._innerEl=this._iconEl=this._textEl=this.allowEl=null;mini.MenuItem.superclass.destroy.call(this,a)},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this.menu&&this.menu.within(a)){return true}return false},_getIconImg:function(){return this.img&&this.getTopMenu()?this.getTopMenu().imgPath+this.img:this.img},_doUpdateIcon:function(){var b=this._getIconImg();var a=!!(this.iconStyle||this.iconCls||this.checkOnClick||b);if(this._iconEl){mini.setStyle(this._iconEl,this.iconStyle);mini.addClass(this._iconEl,this.iconCls);if(b&&!this.checked){var c="background-image:url("+b+")";mini.setStyle(this._iconEl,c)}if(this.checked){jQuery(this._iconEl).css({"background-image":""})}this._iconEl.style.display=a?"block":"none"}if(this.iconPosition=="top"){mini.addClass(this.el,"mini-menuitem-icontop")}else{mini.removeClass(this.el,"mini-menuitem-icontop")}},_hasChildMenu:function(){return this.menu&&this.menu.items.length>0},doUpdate:function(){if(this._textEl){this._textEl.innerHTML=this.text}this._doUpdateIcon();if(this.checked){mini.addClass(this.el,this._checkedCls);jQuery(this._iconEl).css({"background-image":""})}else{mini.removeClass(this.el,this._checkedCls)}if(this.allowEl){if(this._hasChildMenu()){this.allowEl.style.display="block"}else{this.allowEl.style.display="none"}}},setText:function(a){this.text=a;if(this._textEl){this._textEl.innerHTML=this.text}},getText:function(){return this.text},setIconCls:function(a){mini.removeClass(this._iconEl,this.iconCls);this.iconCls=a;this._doUpdateIcon()},getIconCls:function(){return this.iconCls},setImg:function(a){this.img=a;this._doUpdateIcon()},getImg:function(){return this.img},setIconStyle:function(a){this.iconStyle=a;this._doUpdateIcon()},getIconStyle:function(){return this.iconStyle},setIconPosition:function(a){this.iconPosition=a;this._doUpdateIcon()},getIconPosition:function(){return this.iconPosition},setCheckOnClick:function(a){this.checkOnClick=a;if(a){mini.addClass(this.el,"mini-menuitem-showcheck")}else{mini.removeClass(this.el,"mini-menuitem-showcheck")}this.doUpdate()},getCheckOnClick:function(){return this.checkOnClick},setChecked:function(a){if(this.checked!=a){this.checked=a;this.doUpdate();this.fire("checkedchanged")}},getChecked:function(){return this.checked},setGroupName:function(a){if(this.groupName!=a){this.groupName=a}},getGroupName:function(){return this.groupName},setChildren:function(a){this.setMenu(a)},setMenu:function(a){if(mini.isArray(a)){a={type:"menu",items:a}}if(this.menu!==a){a.ownerItem=this;this.menu=mini.getAndCreate(a);this.menu.hide();this.menu.ownerItem=this;this.doUpdate();this.menu.on("itemschanged",this.__OnItemsChanged,this)}},getMenu:function(){return this.menu},showMenu:function(){if(this.menu&&this.menu.isDisplay()==false){this.menu.setHideAction("outerclick");var a={xAlign:"outright",yAlign:"top",outXAlign:"outleft",outYAlign:"below",popupCls:"mini-menu-popup"};if(this.ownerMenu&&this.ownerMenu.vertical==false){a.xAlign="left";a.yAlign="below";a.outXAlign=null}this.menu.showAtEl(this.el,a);this.menu.addCls("mini-menu-open")}},hideMenu:function(){if(this.menu){this.menu.hide()}},hide:function(){this.hideMenu();this.setVisible(false)},__OnItemsChanged:function(a){this.doUpdate()},getTopMenu:function(){if(this.ownerMenu){if(this.ownerMenu.ownerItem){return this.ownerMenu.ownerItem.getTopMenu()}else{return this.ownerMenu}}return null},__OnClick:function(g){if(this.isReadOnly()){return}if(this.checkOnClick){if(this.ownerMenu&&this.groupName){var a=this.ownerMenu.getGroupItems(this.groupName);if(a.length>0){if(this.checked==false){for(var c=0,b=a.length;c<b;c++){var f=a[c];if(f!=this){f.setChecked(false)}}this.setChecked(true)}}else{this.setChecked(!this.checked)}}else{this.setChecked(!this.checked)}}this.fire("click");var d=this.getTopMenu();if(d){d._OnItemClick(this,g)}},__OnMouseUp:function(b){if(this.isReadOnly()){return}if(this.ownerMenu){var a=this;setTimeout(function(){if(a.isDisplay()){a.ownerMenu.showItemMenu(a)}},1)}},__OnMouseOver:function(a){if(this.isReadOnly()){return}this._initInputEvents();mini.addClass(this.el,this._hoverCls);this.el.title=this.text;if(this._textEl.scrollWidth>this._textEl.clientWidth){this.el.title=this.text}else{this.el.title=""}if(this.ownerMenu){if(this.ownerMenu.isVertical()==true){this.ownerMenu.showItemMenu(this)}else{if(this.ownerMenu.hasShowItemMenu()){this.ownerMenu.showItemMenu(this)}}}},__OnMouseOut:function(a){mini.removeClass(this.el,this._hoverCls)},onClick:function(b,a){this.on("click",b,a)},onCheckedChanged:function(b,a){this.on("checkedchanged",b,a)},getAttrs:function(b){var a=mini.MenuItem.superclass.getAttrs.call(this,b);var c=jQuery(b);a.text=b.innerHTML;mini._ParseString(b,a,["text","iconCls","iconStyle","iconPosition","groupName","onclick","oncheckedchanged"]);mini._ParseBool(b,a,["checkOnClick","checked"]);return a}});mini.regClass(mini.MenuItem,"menuitem");mini.Separator=function(){mini.Separator.superclass.constructor.apply(this,arguments)};mini.extend(mini.Separator,mini.Control,{_clearBorder:false,uiCls:"mini-separator",_create:function(){this.el=document.createElement("span");this.el.className="mini-separator"}});mini.regClass(mini.Separator,"separator");mini.OutlookBar=function(){this._initGroups();mini.OutlookBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.OutlookBar,mini.Control,{width:180,expandOnLoad:false,activeIndex:-1,autoCollapse:false,groupCls:"",groupStyle:"",groupHeaderCls:"",groupHeaderStyle:"",groupBodyCls:"",groupBodyStyle:"",groupHoverCls:"",groupActiveCls:"",allowAnim:true,imgPath:"",set:function(c){if(typeof c=="string"){return this}var b=this._allowLayout;this._allowLayout=false;var a=c.activeIndex;delete c.activeIndex;if(c.imgPath){this.setImgPath(c.imgPath)}delete c.imgPath;mini.OutlookBar.superclass.set.call(this,c);if(mini.isNumber(a)){this.setActiveIndex(a)}this._allowLayout=b;this.doLayout();return this},uiCls:"mini-outlookbar",_create:function(){this.el=document.createElement("div");this.el.className="mini-outlookbar";this.el.innerHTML='<div class="mini-outlookbar-border"></div>';this._borderEl=this.el.firstChild},_initEvents:function(){mini._BindEvents(function(){mini.on(this.el,"click",this.__OnClick,this)},this);var a="mini-outlookbar-hover";$(this.el).on("mouseenter",".mini-outlookbar-groupHeader",function(b){$(b.currentTarget).addClass(a)});$(this.el).on("mouseleave",".mini-outlookbar-groupHeader",function(b){$(b.currentTarget).removeClass(a)})},_createGroupId:function(a){return this.uid+"$"+a._id},_GroupId:1,_initGroups:function(){this.groups=[]},_createGroupEl:function(k){var b=this._createGroupId(k);var o='<div id="'+b+'" class="mini-outlookbar-group '+k.cls+'" style="'+k.style+'"><div class="mini-outlookbar-groupHeader '+k.headerCls+'" style="'+k.headerStyle+';"></div><div class="mini-outlookbar-groupBody '+k.bodyCls+'" style="'+k.bodyStyle+';"></div></div>';var c=mini.append(this._borderEl,o);var n=c.lastChild;var j=k.body;delete k.body;if(j){if(!mini.isArray(j)){j=[j]}for(var g=0,f=j.length;g<f;g++){var d=j[g];mini.append(n,d)}j.length=0}if(k.bodyParent){var a=k.bodyParent;while(a.firstChild){n.appendChild(a.firstChild)}}delete k.bodyParent;return c},createGroup:function(a){var b=mini.copyTo({_id:this._GroupId++,name:"",title:"",cls:"",style:"",iconCls:"",iconStyle:"",headerCls:"",headerStyle:"",bodyCls:"",bodyStyle:"",visible:true,enabled:true,showCollapseButton:true,expanded:this.expandOnLoad},a);return b},setImgPath:function(a){this.imgPath=a},getImgPath:function(){return this.imgPath},setGroups:function(a){if(!mini.isArray(a)){return}this.removeAll();for(var c=0,b=a.length;c<b;c++){this.addGroup(a[c])}},getGroups:function(){return this.groups},addGroup:function(f,a){if(typeof f=="string"){f={title:f}}f=this.createGroup(f);if(typeof a!="number"){a=this.groups.length}this.groups.insert(a,f);var c=this._createGroupEl(f);f._el=c;var a=this.groups.indexOf(f);var d=this.groups[a+1];if(d){var b=this.getGroupEl(d);jQuery(b).before(c)}this.doUpdate();return f},updateGroup:function(b,a){var b=this.getGroup(b);if(!b){return}mini.copyTo(b,a);this.doUpdate()},removeGroup:function(a){a=this.getGroup(a);if(!a){return}var b=this.getGroupEl(a);if(b){b.parentNode.removeChild(b)}this.groups.remove(a);this.doUpdate()},removeAll:function(){for(var a=this.groups.length-1;a>=0;a--){this.removeGroup(a)}},moveGroup:function(c,a){c=this.getGroup(c);if(!c){return}target=this.getGroup(a);var d=this.getGroupEl(c);this.groups.remove(c);if(target){a=this.groups.indexOf(target);this.groups.insert(a,c);var b=this.getGroupEl(target);jQuery(b).before(d)}else{this.groups.add(c);this._borderEl.appendChild(d)}this.doUpdate()},_getIconImg:function(a){return a&&this.imgPath+a},doUpdate:function(){for(var d=0,b=this.groups.length;d<b;d++){var k=this.groups[d];var c=k._el;var o=c.firstChild;var g=c.lastChild;var f=this._getIconImg(k.img);var a="background-image:url("+f+")";var n='<div class="mini-outlookbar-icon '+k.iconCls+'" style="'+k.iconStyle+';"></div>';var p='<div class="mini-tools"><span class="mini-tools-collapse" style="'+(k.showCollapseButton?"":"display:none;")+'"></span></div>'+((k.iconStyle||k.iconCls||k.img)?n:"")+'<div class="mini-outlookbar-groupTitle">'+k.title+'</div><div style="clear:both;"></div>';o.innerHTML=p;if(f){var j=o.childNodes[1];mini.setStyle(j,a)}if(k.enabled){mini.removeClass(c,"mini-disabled")}else{mini.addClass(c,"mini-disabled")}mini.addClass(c,k.cls);mini.setStyle(c,k.style);mini.addClass(g,k.bodyCls);mini.setStyle(g,k.bodyStyle);mini.addClass(o,k.headerCls);mini.setStyle(o,k.headerStyle);mini.removeClass(c,"mini-outlookbar-firstGroup");mini.removeClass(c,"mini-outlookbar-lastGroup");if(d==0){mini.addClass(c,"mini-outlookbar-firstGroup")}if(d==b-1){mini.addClass(c,"mini-outlookbar-lastGroup")}}this.doLayout()},doLayout:function(){if(!this.canLayout()){return}if(this._inAniming){return}this._doLayoutInner();for(var d=0,a=this.groups.length;d<a;d++){var o=this.groups[d];var c=o._el;var j=c.lastChild;if(o.expanded){mini.addClass(c,"mini-outlookbar-expand");mini.removeClass(c,"mini-outlookbar-collapse")}else{mini.removeClass(c,"mini-outlookbar-expand");mini.addClass(c,"mini-outlookbar-collapse")}j.style.height="auto";j.style.display=o.expanded?"block":"none";c.style.display=o.visible?"":"none";var k=mini.getWidth(c,true);var g=mini.getPaddings(j);var b=mini.getBorders(j);if(jQuery.boxModel){k=k-g.left-g.right-b.left-b.right}j.style.width=k+"px"}var n=this.isAutoHeight();var f=this.getActiveGroup();if(!n&&this.autoCollapse&&!this.expandOnLoad&&f){var c=this.getGroupEl(this.activeIndex);c.lastChild.style.height=this._getFillGroupBodyHeight()+"px"}else{}mini.layout(this._borderEl)},_doLayoutInner:function(){if(this.isAutoHeight()){this._borderEl.style.height="auto"}else{var b=this.getHeight(true);if(!jQuery.boxModel){var a=mini.getBorders(this._borderEl);b=b+a.top+a.bottom}if(b<0){b=0}this._borderEl.style.height=b+"px"}},_getFillGroupBodyHeight:function(){var j=jQuery(this.el).height();var q=mini.getBorders(this._borderEl);j=j-q.top-q.bottom;var n=this.getActiveGroup();var o=0;for(var g=0,b=this.groups.length;g<b;g++){var s=this.groups[g];var a=this.getGroupEl(s);if(s.visible==false||s==n){continue}var k=a.lastChild.style.display;a.lastChild.style.display="none";var p=jQuery(a).outerHeight();a.lastChild.style.display=k;var d=mini.getMargins(a);p=p+d.top+d.bottom;o+=p}j=j-o;var f=this.getGroupEl(this.activeIndex);if(!f){return 0}j=j-jQuery(f.firstChild).outerHeight();if(jQuery.boxModel){var r=mini.getPaddings(f.lastChild);var c=mini.getBorders(f.lastChild);j=j-r.top-r.bottom-c.top-c.bottom}var r=mini.getPaddings(f);var c=mini.getBorders(f);var d=mini.getMargins(f);j=j-d.top-d.bottom;j=j-r.top-r.bottom-c.top-c.bottom;if(j<0){j=0}return j},getGroup:function(b){if(typeof b=="object"){return b}if(typeof b=="number"){return this.groups[b]}else{for(var c=0,a=this.groups.length;c<a;c++){var d=this.groups[c];if(d.name==b){return d}}}},_getGroupById:function(d){for(var b=0,a=this.groups.length;b<a;b++){var c=this.groups[b];if(c._id==d){return c}}},getGroupEl:function(a){var b=this.getGroup(a);if(!b){return null}return b._el},getGroupBodyEl:function(a){var b=this.getGroupEl(a);if(b){return b.lastChild}return null},setAutoCollapse:function(a){this.autoCollapse=a},getAutoCollapse:function(){return this.autoCollapse},setExpandOnLoad:function(a){this.expandOnLoad=a},getExpandOnLoad:function(){return this.expandOnLoad},setActiveIndex:function(f){var c=this.activeIndex;var g=this.getGroup(f);var a=this.getGroup(this.activeIndex);var b=g!=a;if(g){this.activeIndex=this.groups.indexOf(g)}else{this.activeIndex=-1}var g=this.getGroup(this.activeIndex);if(g){var d=this.allowAnim;this.allowAnim=false;this.expandGroup(g);this.allowAnim=d}if(this.activeIndex==-1&&c!=-1){this.collapseGroup(c)}},getActiveIndex:function(){return this.activeIndex},getActiveGroup:function(){return this.getGroup(this.activeIndex)},showGroup:function(a){a=this.getGroup(a);if(!a||a.visible==true){return}a.visible=true;this.doUpdate()},hideGroup:function(a){a=this.getGroup(a);if(!a||a.visible==false){return}a.visible=false;this.doUpdate()},toggleGroup:function(a){a=this.getGroup(a);if(!a){return}if(a.expanded){this.collapseGroup(a)}else{this.expandGroup(a)}},collapseGroup:function(n){n=this.getGroup(n);if(!n){return}var k=n.expanded;var f=0;if(this.autoCollapse&&!this.expandOnLoad&&!this.isAutoHeight()){f=this._getFillGroupBodyHeight()}var a=false;n.expanded=false;var j=this.groups.indexOf(n);if(j==this.activeIndex){this.activeIndex=-1;a=true}var b=this.getGroupBodyEl(n);if(this.allowAnim&&k){this._inAniming=true;b.style.display="block";b.style.height="auto";if(this.autoCollapse&&!this.expandOnLoad&&!this.isAutoHeight()){b.style.height=f+"px"}var d={height:"1px"};mini.addClass(b,"mini-outlookbar-overflow");mini.removeClass(this.getGroupEl(n),"mini-outlookbar-expand");var g=this;var c=jQuery(b);c.animate(d,180,function(){g._inAniming=false;mini.removeClass(b,"mini-outlookbar-overflow");g.doLayout()})}else{this.doLayout()}var l={group:n,index:this.groups.indexOf(n),name:n.name};this.fire("Collapse",l);if(a){this.fire("activechanged")}},expandGroup:function(s){s=this.getGroup(s);if(!s){return}var q=s.expanded;s.expanded=true;this.activeIndex=this.groups.indexOf(s);fire=true;if(this.autoCollapse&&!this.expandOnLoad){for(var j=0,f=this.groups.length;j<f;j++){var n=this.groups[j];if(n.expanded&&n!=s){this.collapseGroup(n)}}}var a=this.getGroupBodyEl(s);if(this.allowAnim&&q==false){this._inAniming=true;a.style.display="block";if(this.autoCollapse&&!this.expandOnLoad&&!this.isAutoHeight()){var p=this._getFillGroupBodyHeight();a.style.height=(p)+"px"}else{a.style.height="auto"}var k=mini.getHeight(a);a.style.height="1px";var c={height:k+"px"};var d=a.style.overflow;a.style.overflow="hidden";mini.addClass(a,"mini-outlookbar-overflow");mini.addClass(this.getGroupEl(s),"mini-outlookbar-expand");var o=this;var b=jQuery(a);b.animate(c,180,function(){a.style.overflow=d;mini.removeClass(a,"mini-outlookbar-overflow");o._inAniming=false;o.doLayout()})}else{this.doLayout()}var r={group:s,index:this.groups.indexOf(s),name:s.name};this.fire("Expand",r);if(fire){this.fire("activechanged")}},_tryToggleGroup:function(b){b=this.getGroup(b);if(b.enabled==false){return}var a={group:b,groupIndex:this.groups.indexOf(b),groupName:b.name,cancel:false};if(b.expanded){this.fire("BeforeCollapse",a);if(a.cancel==false){this.collapseGroup(b)}}else{this.fire("BeforeExpand",a);if(a.cancel==false){this.expandGroup(b)}}},_getGroupByEvent:function(c){var b=mini.findParent(c.target,"mini-outlookbar-group");if(!b){return null}var a=b.id.split("$");var d=a[a.length-1];return this._getGroupById(d)},__OnClick:function(c){if(this._inAniming){return}var b=mini.findParent(c.target,"mini-outlookbar-groupHeader");if(!b){return}var a=this._getGroupByEvent(c);if(!a){return}this._tryToggleGroup(a)},parseGroups:function(c){var a=[];for(var d=0,b=c.length;d<b;d++){var f=c[d];var g={};a.push(g);g.style=f.style.cssText;mini._ParseString(f,g,["name","title","cls","iconCls","iconStyle","headerCls","headerStyle","bodyCls","bodyStyle"]);mini._ParseBool(f,g,["visible","enabled","showCollapseButton","expanded"]);g.bodyParent=f}return a},getAttrs:function(c){var b=mini.OutlookBar.superclass.getAttrs.call(this,c);mini._ParseString(c,b,["onactivechanged","oncollapse","onexpand","imgPath"]);mini._ParseBool(c,b,["autoCollapse","allowAnim","expandOnLoad"]);mini._ParseInt(c,b,["activeIndex"]);var a=mini.getChildNodes(c);b.groups=this.parseGroups(a);return b}});mini.regClass(mini.OutlookBar,"outlookbar");mini.OutlookMenu=function(){mini.OutlookMenu.superclass.constructor.apply(this,arguments);this.data=[]};mini.extend(mini.OutlookMenu,mini.OutlookBar,{url:"",textField:"text",iconField:"iconCls",urlField:"url",resultAsTree:false,itemsField:"children",idField:"id",parentField:"pid",style:"width:100%;height:100%;",set:function(c){if(typeof c=="string"){return this}var b=c.url;delete c.url;var a=c.activeIndex;delete c.activeIndex;if(mini.isNumber(a)){this.activeIndex=a}mini.OutlookMenu.superclass.set.call(this,c);if(b){this.setUrl(b)}if(mini.isNumber(a)){this.setActiveIndex(a)}return this},uiCls:"mini-outlookmenu",destroy:function(a){this._destroyTrees();mini.OutlookMenu.superclass.destroy.call(this,a)},_destroyTrees:function(){if(this._menus){var c=this._menus.clone();for(var b=0,a=c.length;b<a;b++){var d=c[b];d.destroy()}this._menus.length=0}},_doParseFields:function(c){for(var b=0,a=c.length;b<a;b++){var d=c[b];d.text=d[this.textField];d.url=d[this.urlField];d.iconCls=d[this.iconField]}},_doLoad:function(){var d={cancel:false};this.fire("beforeload",d);if(d.cancel===true){return}var a=[];try{a=mini._getResult(this.url,null,null,null,null,this.dataField)}catch(b){if(mini_debugger==true){alert("outlooktree json is error.")}}if(this.dataField&&!mini.isArray(a)){a=mini._getMap(this.dataField,a)}if(!a){a=[]}if(this.resultAsTree==false){a=mini.arrayToTree(a,this.itemsField,this.idField,this.parentField)}var c=mini.treeToArray(a,this.itemsField,this.idField,this.parentField);this._doParseFields(c);this.createNavBarMenu(a);this.fire("load")},loadList:function(c,b,d){b=b||this.idField;d=d||this.parentField;this._doParseFields(c);var a=mini.arrayToTree(c,this.nodesField,b,d);this.load(a)},load:function(b){if(typeof b=="string"){this.setUrl(b)}else{var a=mini.treeToArray(b,this.itemsField,this.idField,this.parentField);this._doParseFields(a);this.createNavBarMenu(b)}},setData:function(a){this.load(a)},setUrl:function(a){this.url=a;this._doLoad()},getUrl:function(){return this.url},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},setIconField:function(a){this.iconField=a},getIconField:function(){return this.iconField},setUrlField:function(a){this.urlField=a},getUrlField:function(){return this.urlField},setResultAsTree:function(a){this.resultAsTree=a},getResultAsTree:function(){return this.resultAsTree},setNodesField:function(a){this.nodesField=a},getNodesField:function(){return this.nodesField},setIdField:function(a){this.idField=a},getIdField:function(){return this.idField},setParentField:function(a){this.parentField=a},getParentField:function(){return this.parentField},_selected:null,getSelected:function(){return this._selected},selectNode:function(a){a=this.getNode(a);if(!a){if(this._selected){var b=this._getOwnerMenu(this._selected);if(b){b.setSelectedItem(null)}}return}var b=this._getOwnerMenu(a);if(!b){return}this.expandGroup(b._ownerGroup);setTimeout(function(){try{b.setSelectedItem(a)}catch(c){}},100)},findNodes:function(o,q){var a=[];q=q||this;for(var g=0,c=this._menus.length;g<c;g++){var n=this._menus[g].getItems();var b=[];for(var f=0,d=n.length;f<d;f++){var p=n[f];if(o&&o.call(q,p)===true){b.push(p)}}a.addRange(b)}return a},getNode:function(c){for(var b=0,a=this._menus.length;b<a;b++){var d=this._menus[b];var f=d.getItem(c);if(f){return f}}return null},getList:function(){var d=[];for(var c=0,a=this._menus.length;c<a;c++){var f=this._menus[c];var b=f.getItems();d.addRange(b)}return d},_getOwnerMenu:function(c){if(!c){return}for(var b=0,a=this._menus.length;b<a;b++){var d=this._menus[b];var f=d.getItem(c);if(f){return d}}},getAttrs:function(b){var a=mini.OutlookMenu.superclass.getAttrs.call(this,b);a.text=b.innerHTML;mini._ParseString(b,a,["url","textField","urlField","idField","parentField","itemsField","iconField","onitemclick","onitemselect","ondrawnode","imgPath","onload","onbeforeload"]);mini._ParseBool(b,a,["resultAsTree","expandOnLoad"]);return a},imgPath:"",setImgPath:function(a){this.imgPath=a},getImgPath:function(){return this.imgPath},expandOnLoad:false,autoCollapse:true,activeIndex:0,createNavBarMenu:function(b){this._destroyTrees();if(!mini.isArray(b)){b=[]}this.data=b;var a=[];for(var d=0,c=this.data.length;d<c;d++){var k=this.data[d];var g={};g.title=k.text;g.iconCls=k.iconCls;a.push(g);g.img=k.img;g._children=k[this.itemsField]}this.setGroups(a);if(!this.expandOnLoad){this.setActiveIndex(this.activeIndex)}this._menus=[];for(var d=0,c=this.groups.length;d<c;d++){var g=this.groups[d];var f=this.getGroupBodyEl(g);var j=new mini.Menu();j._ownerGroup=g;j.set({expanded:false,imgPath:this.imgPath,showNavArrow:false,style:"width:100%;height:100%;border:0;",borderStyle:"border:0",allowSelectItem:true,items:g._children});j.render(f);j.on("itemclick",this.__OnItemClick,this);j.on("itemselect",this.__OnItemSelect,this);this._onDrawNodes(j.getItems());this._menus.push(j);delete g._children}},_onDrawNodes:function(b){if(!b){return}for(var c=0,a=b.length;c<a;c++){var d=b[c];var f={node:d,img:d.img,nodeHtml:""};this.fire("drawnode",f);if(f.img!=d.img&&d.setImg){d.setImg(f.img)}if(f.nodeHtml!=""){d.setText(f.nodeHtml)}}},__OnItemClick:function(b){var a={item:b.item,htmlEvent:b.htmlEvent};this.fire("itemclick",a)},__OnItemSelect:function(d){if(!d.item){return}for(var b=0,a=this._menus.length;b<a;b++){var f=this._menus[b];if(f!=d.sender){f.setSelectedItem(null)}}var c={item:d.item,htmlEvent:d.htmlEvent};this._selected=d.item;this.fire("itemselect",c)}});mini.regClass(mini.OutlookMenu,"outlookmenu");mini.OutlookTree=function(){mini.OutlookTree.superclass.constructor.apply(this,arguments);this.data=[]};mini.extend(mini.OutlookTree,mini.OutlookBar,{url:"",textField:"text",iconField:"iconCls",urlField:"url",resultAsTree:false,nodesField:"children",idField:"id",parentField:"pid",style:"width:100%;height:100%;",set:function(c){if(typeof c=="string"){return this}var b=c.url;delete c.url;var a=c.activeIndex;delete c.activeIndex;mini.OutlookTree.superclass.set.call(this,c);if(b){this.setUrl(b)}if(mini.isNumber(a)){this.setActiveIndex(a)}return this},uiCls:"mini-outlooktree",destroy:function(a){this._destroyTrees(a);mini.OutlookTree.superclass.destroy.call(this,a)},_destroyTrees:function(d){if(this._trees){var c=this._trees.clone();for(var b=0,a=c.length;b<a;b++){var f=c[b];f.destroy(d)}this._trees.length=0}},_doParseFields:function(c){for(var b=0,a=c.length;b<a;b++){var d=c[b];d.text=d[this.textField];d.url=d[this.urlField];d.iconCls=d[this.iconField]}},_doLoad:function(){var a=[];try{a=mini._getResult(this.url,null,null,null,null,this.dataField)}catch(b){if(mini_debugger==true){alert("outlooktree json is error.")}}if(this.dataField&&!mini.isArray(a)){a=mini._getMap(this.dataField,a)}if(!a){a=[]}if(this.resultAsTree==false){a=mini.arrayToTree(a,this.nodesField,this.idField,this.parentField)}var c=mini.treeToArray(a,this.nodesField,this.idField,this.parentField);this._doParseFields(c);this.createNavBarTree(a);this.fire("load")},loadList:function(c,b,d){b=b||this.idField;d=d||this.parentField;this._doParseFields(c);var a=mini.arrayToTree(c,this.nodesField,b,d);this.load(a)},load:function(b){if(typeof b=="string"){this.setUrl(b)}else{var a=mini.treeToArray(b,this.itemsField,this.idField,this.parentField);this._doParseFields(a);this.createNavBarTree(b)}},setData:function(a){this.load(a)},getData:function(){return this.data},setUrl:function(a){this.url=a;this._doLoad()},getUrl:function(){return this.url},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},setIconField:function(a){this.iconField=a},getIconField:function(){return this.iconField},setUrlField:function(a){this.urlField=a},getUrlField:function(){return this.urlField},setResultAsTree:function(a){this.resultAsTree=a},getResultAsTree:function(){return this.resultAsTree},setNodesField:function(a){this.nodesField=a},getNodesField:function(){return this.nodesField},setIdField:function(a){this.idField=a},getIdField:function(){return this.idField},setParentField:function(a){this.parentField=a},getParentField:function(){return this.parentField},_selected:null,getSelected:function(){return this._selected},isSelectedNode:function(b){b=this.getNode(b);if(!b){return false}var a=this._getOwnerTree(b);if(!a){return false}return a.isSelectedNode(b)},selectNode:function(b){b=this.getNode(b);if(!b){return}var a=this._getOwnerTree(b);a.selectNode(b)},expandPath:function(b){b=this.getNode(b);if(!b){return}var a=this._getOwnerTree(b);a.expandPath(b);this.expandGroup(a._ownerGroup)},expandNode:function(c,b){var c=this.getNode(c);if(!c){return}var a=this._getOwnerTree(c);a.expandNode(c,b)},collapseNode:function(c,b){var c=this.getNode(c);if(!c){return}var a=this._getOwnerTree(c);a.collapseNode(c,b)},findNodes:function(g,f){var c=[];f=f||this;for(var d=0,b=this._trees.length;d<b;d++){var a=this._trees[d];var j=a.findNodes(g,f);c.addRange(j)}return c},getNode:function(d){for(var c=0,b=this._trees.length;c<b;c++){var a=this._trees[c];var f=a.getNode(d);if(f){return f}}return null},getList:function(){var f=[];for(var d=0,b=this._trees.length;d<b;d++){var a=this._trees[d];var c=a.getList();f.addRange(c)}return f},_getOwnerTree:function(d){if(!d){return}for(var c=0,b=this._trees.length;c<b;c++){var a=this._trees[c];if(a.getby_id(d._id)){return a}}},expandOnLoad:false,setExpandOnLoad:function(a){this.expandOnLoad=a},getExpandOnLoad:function(){return this.expandOnLoad},showArrow:false,setShowArrow:function(a){this.showArrow=a},getShowArrow:function(){return this.showArrow},showTreeIcon:true,setShowTreeIcon:function(a){this.showTreeIcon=a},getShowTreeIcon:function(a){return this.showTreeIcon},expandOnNodeClick:false,setExpandOnNodeClick:function(a){this.expandOnNodeClick=a},getExpandOnNodeClick:function(){return this.expandOnNodeClick},_handlerTree:function(b){b.tree=b.sender;b.sender=this;var a="node"+b.type;if(b.type.indexOf("before")==0){a="beforenode"+b.type.replace("before","")}this.fire(a,b)},getAttrs:function(b){var a=mini.OutlookTree.superclass.getAttrs.call(this,b);a.text=b.innerHTML;mini._ParseString(b,a,["url","textField","urlField","idField","parentField","nodesField","iconField","onnodeclick","onnodeselect","onnodemousedown","ondrawnode","expandOnLoad","imgPath","onbeforenodeexpand","onnodeexpand","onbeforenodecollapse","onnodecollapse","onload","onbeforenodeselect"]);mini._ParseBool(b,a,["resultAsTree","showArrow","showTreeIcon","expandOnNodeClick"]);if(a.expandOnLoad){var c=parseInt(a.expandOnLoad);if(mini.isNumber(c)){a.expandOnLoad=c}else{a.expandOnLoad=a.expandOnLoad=="true"?true:false}}return a},imgPath:"",setImgPath:function(a){this.imgPath=a},getImgPath:function(){return this.imgPath},autoCollapse:true,activeIndex:0,createNavBarTree:function(b){this._destroyTrees();var g=this;if(!mini.isArray(b)){b=[]}this.data=b;var a=[];for(var d=0,c=this.data.length;d<c;d++){var k=this.data[d];var j={};j.title=k.text;j.iconCls=k.iconCls;a.push(j);j._children=k[this.nodesField]}this.setGroups(a);this.setActiveIndex(this.activeIndex);this._trees=[];for(var d=0,c=this.groups.length;d<c;d++){var j=this.groups[d];var f=this.getGroupBodyEl(j);var b=new mini.Tree();b.set({expandOnNodeClick:this.expandOnNodeClick,showTreeIcon:this.showTreeIcon,showArrow:this.showArrow,imgPath:this.imgPath,idField:this.idField,parentField:this.parentField,textField:this.textField,expandOnLoad:this.expandOnLoad,style:"width:100%;height:100%;border:0;background:none",data:j._children,onbeforeload:function(l){l.url=g.url}});b.render(f);b.on("nodeclick",this.__OnNodeClick,this);b.on("nodeselect",this.__OnNodeSelect,this);b.on("nodemousedown",this.__OnNodeMouseDown,this);b.on("drawnode",this.__OnDrawNode,this);b.on("beforeexpand",this._handlerTree,this);b.on("beforecollapse",this._handlerTree,this);b.on("expand",this._handlerTree,this);b.on("collapse",this._handlerTree,this);b.on("beforeselect",this._handlerTree,this);this._trees.push(b);delete j._children;b._ownerGroup=j}},__OnNodeMouseDown:function(b){var a={node:b.node,isLeaf:b.sender.isLeaf(b.node),htmlEvent:b.htmlEvent};this.fire("nodemousedown",a)},__OnNodeClick:function(b){var a={node:b.node,isLeaf:b.sender.isLeaf(b.node),htmlEvent:b.htmlEvent};this.fire("nodeclick",a)},__OnNodeSelect:function(f){if(!f.node){return}for(var c=0,b=this._trees.length;c<b;c++){var a=this._trees[c];if(a!=f.sender){a.selectNode(null)}}var d={node:f.node,isLeaf:f.sender.isLeaf(f.node),htmlEvent:f.htmlEvent};this._selected=f.node;this.fire("nodeselect",d)},__OnDrawNode:function(a){this.fire("drawnode",a)}});mini.regClass(mini.OutlookTree,"outlooktree");mini.NavBar=function(){mini.NavBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.NavBar,mini.OutlookBar,{uiCls:"mini-navbar"});mini.regClass(mini.NavBar,"navbar");mini.NavBarMenu=function(){mini.NavBarMenu.superclass.constructor.apply(this,arguments)};mini.extend(mini.NavBarMenu,mini.OutlookMenu,{uiCls:"mini-navbarmenu"});mini.regClass(mini.NavBarMenu,"navbarmenu");mini.NavBarTree=function(){mini.NavBarTree.superclass.constructor.apply(this,arguments)};mini.extend(mini.NavBarTree,mini.OutlookTree,{uiCls:"mini-navbartree"});mini.regClass(mini.NavBarTree,"navbartree");mini.ToolBar=function(){mini.ToolBar.superclass.constructor.apply(this,arguments)};mini.extend(mini.ToolBar,mini.Container,{_clearBorder:false,style:"",uiCls:"mini-toolbar",_create:function(){this.el=document.createElement("div");this.el.className="mini-toolbar"},_initEvents:function(){},doLayout:function(){if(!this.canLayout()){return}var b=mini.getChildNodes(this.el,true);for(var c=0,a=b.length;c<a;c++){mini.layout(b[c])}},set_bodyParent:function(a){if(!a){return}this.el=a;this.doLayout()},getAttrs:function(el){var attrs={};mini._ParseString(el,attrs,["id","borderStyle","data-options"]);this.el=el;this.el.uid=this.uid;this.addCls(this.uiCls);var options=attrs["data-options"];if(options){options=eval("("+options+")");if(options){mini.copyTo(attrs,options)}}return attrs}});mini.regClass(mini.ToolBar,"toolbar");mini.Pager=function(){mini.Pager.superclass.constructor.apply(this,arguments)};mini.extend(mini.Pager,mini.Control,{pageIndex:0,pageSize:10,totalCount:0,totalPage:0,showPageIndex:true,showPageSize:true,showTotalCount:true,showPageInfo:true,showReloadButton:true,_clearBorder:false,showButtonText:false,showButtonIcon:true,firstText:"",prevText:"",nextText:"",lastText:"",reloadText:"",pageInfoText:" {0} ,  {1} ",sizeList:[10,20,50,100],set:function(b){if(typeof b=="string"){return this}var a=b.pageIndex;delete b.pageIndex;mini.Pager.superclass.set.call(this,b);if(!mini.isNull(a)){this.setPageIndex(a)}return this},uiCls:"mini-pager",_create:function(){this.el=document.createElement("div");this.el.className="mini-pager";var b='<div class="mini-pager-left"><table cellspacing="0" cellpadding="0" border="0"><tr><td></td><td></td></tr></table></div><div class="mini-pager-right"></div>';this.el.innerHTML=b;this._leftEl=this.el.childNodes[0];this._rightEl=this.el.childNodes[1];var a=this._leftEl.getElementsByTagName("td");this._barEl=a[0];this._barEl2=a[1];this.sizeEl=mini.append(this._barEl,'<span class="mini-pager-size"></span>');this.sizeCombo=new mini.ComboBox();this.sizeCombo.setName("pagesize");this.sizeCombo.setWidth(this.pageSizeWidth);this.sizeCombo.render(this.sizeEl);mini.append(this.sizeEl,'<span class="separator"></span>');this.firstButton=new mini.Button();this.firstButton.render(this._barEl);this.prevButton=new mini.Button();this.prevButton.render(this._barEl);this.indexEl=document.createElement("span");this.indexEl.className="mini-pager-index";this.indexEl.innerHTML='<input id="" type="text" class="mini-pager-num"/><span class="mini-pager-pages">/ 0</span>';this._barEl.appendChild(this.indexEl);this.numInput=this.indexEl.firstChild;this.pagesLabel=this.indexEl.lastChild;this.nextButton=new mini.Button();this.nextButton.render(this._barEl);this.lastButton=new mini.Button();this.lastButton.render(this._barEl);mini.append(this._barEl,'<span class="separator"></span>');this.reloadButton=new mini.Button();this.reloadButton.render(this._barEl);this.buttonsEl=mini.append(this._barEl2,'<div class="mini-page-buttons"></div>');this.update()},setButtons:function(a){__mini_setControls(a,this.buttonsEl,this)},getButtonsEl:function(){return this.buttonsEl},destroy:function(a){if(this.pageSelect){mini.clearEvent(this.pageSelect);this.pageSelect=null}if(this.numInput){mini.clearEvent(this.numInput);this.numInput=null}this.sizeEl=null;this._leftEl=null;mini.Pager.superclass.destroy.call(this,a)},_initEvents:function(){mini.Pager.superclass._initEvents.call(this);this.firstButton.on("click",function(c){this._OnPageChanged(0)},this);this.prevButton.on("click",function(c){this._OnPageChanged(this.pageIndex-1)},this);this.nextButton.on("click",function(c){this._OnPageChanged(this.pageIndex+1)},this);this.lastButton.on("click",function(c){this._OnPageChanged(this.totalPage)},this);this.reloadButton.on("click",function(c){this._OnPageChanged()},this);function a(){if(b){return}b=true;var c=parseInt(this.numInput.value);if(isNaN(c)){this.update()}else{this._OnPageChanged(c-1)}setTimeout(function(){b=false},100)}var b=false;mini.on(this.numInput,"change",function(c){a.call(this)},this);mini.on(this.numInput,"keydown",function(c){if(c.keyCode==13){a.call(this);c.stopPropagation()}},this);this.sizeCombo.on("valuechanged",this.__OnPageSelectChanged,this)},doLayout:function(){if(!this.canLayout()){return}mini.layout(this._leftEl);mini.layout(this._rightEl)},setPageIndex:function(a){if(isNaN(a)){return}this.pageIndex=a;this.update()},getPageIndex:function(){return this.pageIndex},setPageSize:function(a){if(isNaN(a)){return}this.pageSize=a;this.update()},getPageSize:function(){return this.pageSize},setTotalCount:function(a){a=parseInt(a);if(isNaN(a)){return}this.totalCount=a;this.update()},getTotalCount:function(){return this.totalCount},setSizeList:function(a){if(!mini.isArray(a)){return}this.sizeList=a;this.update()},getSizeList:function(){return this.sizeList},pageSizeWidth:50,setPageSizeWidth:function(a){a=parseInt(a);if(isNaN(a)){return}if(this.pageSizeWidth!=a){this.pageSizeWidth=a;this.sizeCombo.setWidth(a)}},getPageSizeWidth:function(){return this.pageSizeWidth},setShowPageSize:function(a){this.showPageSize=a;this.update()},getShowPageSize:function(){return this.showPageSize},setShowPageIndex:function(a){this.showPageIndex=a;this.update()},getShowPageIndex:function(){return this.showPageIndex},setShowTotalCount:function(a){this.showTotalCount=a;this.update()},getShowTotalCount:function(){return this.showTotalCount},setShowPageInfo:function(a){this.showPageInfo=a;this.update()},getShowPageInfo:function(){return this.showPageInfo},setShowReloadButton:function(a){this.showReloadButton=a;this.update()},getShowReloadButton:function(){return this.showReloadButton},setShowButtonText:function(a){this.showButtonText=a;this.update()},getShowButtonText:function(){return this.showButtonText},setShowButtonIcon:function(a){this.showButtonIcon=a;this.update()},getShowButtonIcon:function(){return this.showButtonIcon},getTotalPage:function(){return this.totalPage},update:function(g,v,p){if(mini.isNumber(g)){this.pageIndex=parseInt(g)}if(mini.isNumber(v)){this.pageSize=parseInt(v)}if(mini.isNumber(p)){this.totalCount=parseInt(p)}this.totalPage=parseInt(this.totalCount/this.pageSize)+1;if((this.totalPage-1)*this.pageSize==this.totalCount){this.totalPage-=1}if(this.totalCount==0){this.totalPage=0}if(this.pageIndex>this.totalPage-1){this.pageIndex=this.totalPage-1}if(this.pageIndex<=0){this.pageIndex=0}if(this.totalPage<=0){this.totalPage=0}this.firstButton.enable();this.prevButton.enable();this.nextButton.enable();this.lastButton.enable();if(this.pageIndex==0){this.firstButton.disable();this.prevButton.disable()}if(this.pageIndex>=this.totalPage-1){this.nextButton.disable();this.lastButton.disable()}var a=this.pageIndex>-1?this.pageIndex+1:0;if(this.totalCount==0){a=0}this.numInput.value=a;this.pagesLabel.innerHTML="/ "+this.totalPage;var q=this.sizeList.clone();if(q.indexOf(this.pageSize)==-1){q.push(this.pageSize);q=q.sort(function(s,l){return s>l})}var u=[];for(var c=0,b=q.length;c<b;c++){var f=q[c];var d={};d.text=f;d.id=f;u.push(d)}this.sizeCombo.setData(u);this.sizeCombo.setValue(this.pageSize);var k=this.firstText,o=this.prevText,t=this.nextText,n=this.lastText,j=this.reloadText;if(this.showButtonText==false){k=o=t=n=j=""}this.firstButton.setText(k);this.prevButton.setText(o);this.nextButton.setText(t);this.lastButton.setText(n);this.reloadButton.setText(j);var k=this.firstText,o=this.prevText,t=this.nextText,n=this.lastText;if(this.showButtonText){this.firstButton.setTooltip(k);this.prevButton.setTooltip(o);this.nextButton.setTooltip(t);this.lastButton.setTooltip(n);this.reloadButton.setTooltip(j)}this.firstButton.setIconCls(this.showButtonIcon?"mini-pager-first":"");this.prevButton.setIconCls(this.showButtonIcon?"mini-pager-prev":"");this.nextButton.setIconCls(this.showButtonIcon?"mini-pager-next":"");this.lastButton.setIconCls(this.showButtonIcon?"mini-pager-last":"");this.reloadButton.setIconCls(this.showButtonIcon?"mini-pager-reload":"");this.reloadButton.setVisible(this.showReloadButton);var r=this.reloadButton.el.previousSibling;if(r){r.style.display=this.showReloadButton?"":"none"}this._rightEl.innerHTML=String.format(this.pageInfoText,this.pageSize,this.totalCount);this.indexEl.style.display=this.showPageIndex?"":"none";this.sizeEl.style.display=this.showPageSize?"":"none";this._rightEl.style.display=this.showPageInfo?"":"none"},__OnPageSelectChanged:function(b){var a=parseInt(this.sizeCombo.getValue());this._OnPageChanged(0,a)},_OnPageChanged:function(a,b){var c={pageIndex:mini.isNumber(a)?a:this.pageIndex,pageSize:mini.isNumber(b)?b:this.pageSize,cancel:false};if(c.pageIndex>this.totalPage-1){c.pageIndex=this.totalPage-1}if(c.pageIndex<0){c.pageIndex=0}this.fire("beforepagechanged",c);if(c.cancel==true){return}this.fire("pagechanged",c);this.update(c.pageIndex,c.pageSize)},onPageChanged:function(b,a){this.on("pagechanged",b,a)},getAttrs:function(el){var attrs=mini.Pager.superclass.getAttrs.call(this,el);mini._ParseString(el,attrs,["onpagechanged","sizeList","onbeforepagechanged","buttons"]);mini._ParseBool(el,attrs,["showPageIndex","showPageSize","showTotalCount","showPageInfo","showReloadButton","showButtonText","showButtonIcon"]);mini._ParseInt(el,attrs,["pageIndex","pageSize","totalCount","pageSizeWidth"]);if(typeof attrs.sizeList=="string"){attrs.sizeList=eval(attrs.sizeList)}if(attrs.buttons){attrs.buttons=mini.byId(attrs.buttons)}return attrs}});mini.regClass(mini.Pager,"pager");mini.DataBinding=function(){this._bindFields=[];this._bindForms=[];mini.DataBinding.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataBinding,mini.Component,{bindField:function(d,a,c,f,b){d=mini.get(d);a=mini.get(a);if(!d||!a||!c){return}var g={control:d,source:a,field:c,convert:b,mode:f};this._bindFields.push(g);a.on("currentchanged",this.__OnCurrentChanged,this);d.on("valuechanged",this.__OnValueChanged,this)},bindForm:function(d,f,k,j){d=mini.byId(d);f=mini.get(f);if(!d||!f){return}var d=new mini.Form(d);var b=d.getFields();for(var c=0,a=b.length;c<a;c++){var g=b[c];this.bindField(g,f,g.getName(),k,j)}},__OnCurrentChanged:function(g){if(this._doSetting){return}this._doSetting=true;this._currentRecord=g.record;var a=g.sender;var f=g.record;for(var d=0,b=this._bindFields.length;d<b;d++){var j=this._bindFields[d];if(j.source!=a){continue}var c=j.control;var n=j.field;if(c.setValue){if(f){var o=mini._getMap(n,f);c.setValue(o)}else{c.setValue("")}}if(c.setText&&c.textName){if(f){c.setText(f[c.textName])}else{c.setText("")}}}var k=this;setTimeout(function(){k._doSetting=false},10)},__OnValueChanged:function(g){if(this._doSetting){return}this._doSetting=true;var d=g.sender;var o=d.getValue();for(var f=0,b=this._bindFields.length;f<b;f++){var k=this._bindFields[f];if(k.control!=d||k.mode===false){continue}var a=k.source;var j=this._currentRecord;if(!j){continue}var c={};c[k.field]=o;if(d.getText&&d.textName){c[d.textName]=d.getText()}a.updateRow(j,c)}var n=this;setTimeout(function(){n._doSetting=false},10)}});mini.regClass(mini.DataBinding,"databinding");mini.DataSet=function(){this._sources={};this._data={};this._links=[];this._originals={};mini.DataSet.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataSet,mini.Component,{add:function(a,b){if(!a||!b){return}this._sources[a]=b;this._data[a]=[];b._set_autoCreateNewID(true);b._set_originalIdField(b.getIdField());b._set_clearOriginals(false);b.on("addrow",this.__OnRowChanged,this);b.on("updaterow",this.__OnRowChanged,this);b.on("deleterow",this.__OnRowChanged,this);b.on("removerow",this.__OnRowChanged,this);b.on("preload",this.__OnDataPreLoad,this);b.on("selectionchanged",this.__OnDataSelectionChanged,this)},addLink:function(b,a,d){if(!b||!a||!d){return}if(!this._sources[b]||!this._sources[a]){return}var c={parentName:b,childName:a,parentField:d};this._links.push(c)},clearData:function(){this._data={};this._originals={};for(var a in this._sources){this._data=[]}},getData:function(){return this._data},_getNameByListControl:function(b){for(var a in this._sources){var d=this._sources[a];if(d==b){return a}}},_getRecord:function(d,b,c){var g=this._data[d];if(!g){return false}for(var f=0,a=g.length;f<a;f++){var j=g[f];if(j[c]==b[c]){return j}}return null},__OnRowChanged:function(k){var f=k.type;var b=k.record;var d=this._getNameByListControl(k.sender);var c=this._getRecord(d,b,k.sender.getIdField());var g=this._data[d];if(c){var g=this._data[d];g.remove(c)}if(f=="removerow"&&b._state=="added"){}else{g.push(b)}this._originals[d]=k.sender._get_originals();if(b._state=="added"){var a=this._getParentSource(k.sender);if(a){var j=a.getSelected();if(j){b._parentId=j[a.getIdField()]}else{g.remove(b)}}}},__OnDataPreLoad:function(o){var b=o.sender;var c=this._getNameByListControl(b);var d=o.sender.getIdField();var u=this._data[c];var r={};for(var j=0,g=u.length;j<g;j++){var t=u[j];r[t[d]]=t}var k=this._originals[c];if(k){b._set_originals(k)}var a=o.data||[];for(var j=0,g=a.length;j<g;j++){var t=a[j];var f=r[t[d]];if(f){delete f._uid;mini.copyTo(t,f)}}var q=this._getParentSource(b);if(b.getPageIndex&&b.getPageIndex()==0){var p=[];for(var j=0,g=u.length;j<g;j++){var t=u[j];if(t._state=="added"){if(q){var n=q.getSelected();if(n&&n[q.getIdField()]==t._parentId){p.push(t)}}else{p.push(t)}}}p.reverse();a.insertRange(0,p)}var s=[];for(var j=a.length-1;j>=0;j--){var t=a[j];var f=r[t[d]];if(f&&f._state=="removed"){a.removeAt(j);s.push(f)}}},_getParentSource:function(f){var b=this._getNameByListControl(f);for(var c=0,a=this._links.length;c<a;c++){var d=this._links[c];if(d.childName==b){return this._sources[d.parentName]}}},_getLinks:function(g){var c=this._getNameByListControl(g);var b=[];for(var d=0,a=this._links.length;d<a;d++){var f=this._links[d];if(f.parentName==c){b.push(f)}}return b},__OnDataSelectionChanged:function(g){var b=g.sender;var f=b.getSelected();var n=this._getLinks(b);for(var d=0,c=n.length;d<c;d++){var k=n[d];var a=this._sources[k.childName];if(f){var j={};j[k.parentField]=f[b.getIdField()];a.load(j)}else{a.loadData([])}}}});mini.regClass(mini.DataSet,"dataset");if(typeof mini_doload=="undefined"){mini_doload=function(a){}}mini.DataSource=function(){mini.DataSource.superclass.constructor.apply(this,arguments);this._init()};mini.extend(mini.DataSource,mini.Component,{idField:"id",textField:"text",loaded:false,_originalIdField:"_id",_clearOriginals:true,_autoCreateNewID:false,_init:function(){this.source=[];this.dataview=[];this.visibleRows=null;this._ids={};this._removeds=[];if(this._clearOriginals){this._originals={}}this._errors={};this._selected=null;this._selecteds=[];this._idSelecteds={};this.__changeCount=0},getSource:function(){return this.source},getList:function(){return this.source.clone()},getDataView:function(){return this.dataview.clone()},getVisibleRows:function(){if(!this.visibleRows){this.visibleRows=this.getDataView().clone()}return this.visibleRows},setData:function(a){this.loadData(a)},loadData:function(a){if(!mini.isArray(a)){a=[]}this._init();this._doLoadData(a);this._dataChanged();this.fire("loaddata");return true},_doLoadData:function(g){this.source=g;this.dataview=g;var f=this.source,d=this._ids;for(var c=0,b=f.length;c<b;c++){var a=f[c];a._id=mini.DataSource.RecordId++;d[a._id]=a;a._uid=a._id}},clearData:function(){this._init();this._dataChanged();this.fire("cleardata")},clear:function(){this.clearData()},updateRecord:function(a,j,f){if(mini.isNull(a)){return}var d=mini._getMap,c=mini._setMap;this.fire("beforeupdate",{record:a});if(typeof j=="string"){var b=d(j,a);if(mini.isEquals(b,f)){return false}this.beginChange();c(j,f,a);this._setModified(a,j,b);this.endChange()}else{this.beginChange();for(var g in j){var b=d(g,a);var f=j[g];if(mini.isEquals(b,f)){continue}c(g,f,a);this._setModified(a,g,b)}this.endChange()}this.fire("update",{record:a})},deleteRecord:function(a){this._setDeleted(a);this._dataChanged();this.fire("delete",{record:a})},getby_id:function(a){a=typeof a=="object"?a._id:a;return this._ids[a]},getbyId:function(j){var d=typeof j;if(d=="number"){return this.getAt(j)}if(typeof j=="object"){if(this.getby_id(j)){return j}j=j[this.idField]}var f=this.getList();j=String(j);for(var c=0,a=f.length;c<a;c++){var g=f[c];var b=!mini.isNull(g[this.idField])?String(g[this.idField]):null;if(b==j){return g}}return null},getsByIds:function(g){if(mini.isNull(g)){g=""}g=String(g);var b=[];var d=String(g).split(",");for(var c=0,a=d.length;c<a;c++){var f=this.getbyId(d[c]);if(f){b.push(f)}}return b},getRecord:function(a){return this.getRow(a)},getRow:function(a){var b=typeof a;if(b=="string"){return this.getbyId(a)}else{if(b=="number"){return this.getAt(a)}else{if(b=="object"){return a}}}},delimiter:",",getValueAndText:function(f,d){if(mini.isNull(f)){f=[]}d=d||this.delimiter;if(typeof f=="string"||typeof f=="number"){f=this.getsByIds(f)}else{if(!mini.isArray(f)){f=[f]}}var c=[];var j=[];for(var g=0,b=f.length;g<b;g++){var a=f[g];if(a){c.push(this.getItemValue(a));j.push(this.getItemText(a))}}return[c.join(d),j.join(d)]},getItemValue:function(b){if(!b){return""}var a=mini._getMap(this.idField,b);return mini.isNull(a)?"":String(a)},getItemText:function(b){if(!b){return""}var a=mini._getMap(this.textField,b);return mini.isNull(a)?"":String(a)},isModified:function(a,c){var b=this._originals[a[this._originalIdField]];if(!b){return false}if(mini.isNull(c)){return false}return b.hasOwnProperty(c)},hasRecord:function(a){return !!this.getby_id(a)},findRecords:function(p,n){var j=typeof p=="function";var k=p;var q=n||this;var d=this.source;var b=[];for(var f=0,c=d.length;f<c;f++){var a=d[f];if(j){var g=k.call(q,a);if(g==true){b[b.length]=a}if(g===1){break}}else{if(a[p]==n){b[b.length]=a}}}return b},findRecord:function(c,b){var a=this.findRecords(c,b);return a[0]},each:function(b,a){var c=this.getDataView().clone();a=a||this;mini.forEach(c,b,a)},getCount:function(){return this.getDataView().length},setIdField:function(a){this.idField=a},setTextField:function(a){this.textField=a},__changeCount:0,beginChange:function(){this.__changeCount++},endChange:function(a){this.__changeCount--;if(this.__changeCount<0){this.__changeCount=0}if((a!==false&&this.__changeCount==0)||a==true){this.__changeCount=0;this._dataChanged()}},_dataChanged:function(){this.visibleRows=null;if(this.__changeCount==0){this.fire("datachanged")}},_setAdded:function(a){a._id=mini.DataSource.RecordId++;if(this._autoCreateNewID&&!a[this.idField]){a[this.idField]=UUID()}a._uid=a._id;a._state="added";this._ids[a._id]=a;delete this._originals[a[this._originalIdField]]},_setModified:function(a,d,b){if(a._state!="added"&&a._state!="deleted"&&a._state!="removed"){a._state="modified";var c=this._getOriginal(a);if(!c.hasOwnProperty(d)){c[d]=b}}},_setDeleted:function(a){if(a._state!="added"&&a._state!="deleted"&&a._state!="removed"){a._state="deleted"}},_setRemoved:function(a){delete this._ids[a._id];if(a._state!="added"&&a._state!="removed"){a._state="removed";delete this._originals[a[this._originalIdField]];this._removeds.push(a)}},_getOriginal:function(a){var b=a[this._originalIdField];var c=this._originals[b];if(!c){c=this._originals[b]={}}return c},_selected:null,_selecteds:[],_idSelecteds:null,multiSelect:false,isSelected:function(a){if(!a){return false}if(typeof a!="string"){a=a._id}return !!this._idSelecteds[a]},setSelected:function(a){a=this.getby_id(a);var b=this.getSelected();if(b!=a){this._selected=a;if(a){this.select(a)}else{this.deselect(this.getSelected())}this._OnCurrentChanged(a)}},getSelected:function(){if(this.isSelected(this._selected)){return this._selected}return this._selecteds[0]},setCurrent:function(a){this.setSelected(a)},getCurrent:function(){return this.getSelected()},getSelecteds:function(){return this._selecteds.clone()},select:function(a,b){if(mini.isNull(a)){return}this.selects([a],b)},deselect:function(a,b){if(mini.isNull(a)){return}this.deselects([a],b)},selectAll:function(a){this.selects(this.getList())},deselectAll:function(a){this.deselects(this.getSelecteds())},_fireSelect:function(a,b){var c={record:a,cancel:false};this.fire(b,c);return !c.cancel},selects:function(c,f){if(!mini.isArray(c)){return}c=c.clone();if(this.multiSelect==false){this.deselects(this.getSelecteds());if(c.length>0){c.length=1}this._selecteds=[];this._idSelecteds={}}var g=[];for(var d=0,b=c.length;d<b;d++){var a=this.getbyId(c[d]);if(!a){continue}if(!this.isSelected(a)){if(f!==false){if(!this._fireSelect(a,"beforeselect")){continue}}this._selecteds.push(a);this._idSelecteds[a._id]=a;g.push(a);if(f!==false){this.fire("select",{record:a})}}}this._OnSelectionChanged(c,true,g,f)},deselects:function(c,f){if(!mini.isArray(c)){return}c=c.clone();var j=[];for(var d=c.length-1;d>=0;d--){var b=this.getbyId(c[d]);if(!b){continue}if(this.isSelected(b)){if(f!==false){if(!this._fireSelect(b,"beforedeselect")){continue}}delete this._idSelecteds[b._id];j.push(b)}}this._selecteds=[];var a=this._idSelecteds;for(var d in a){var g=a[d];if(g._id){this._selecteds.push(g)}}for(var d=c.length-1;d>=0;d--){var b=this.getbyId(c[d]);if(!b){continue}if(f!==false){this.fire("deselect",{record:b})}}this._OnSelectionChanged(c,false,j,f)},_OnSelectionChanged:function(b,a,j,d){var g={fireEvent:d,records:b,select:a,selected:this.getSelected(),selecteds:this.getSelecteds(),_records:j};this.fire("SelectionChanged",g);var f=this._current;var c=this.getCurrent();if(f!=c){this._current=c;this._OnCurrentChanged(c)}},_OnCurrentChanged:function(a){if(this._currentTimer){clearTimeout(this._currentTimer)}var b=this;this._currentTimer=setTimeout(function(){b._currentTimer=null;var c={record:a};b.fire("CurrentChanged",c)},30)},_checkSelecteds:function(){for(var b=this._selecteds.length-1;b>=0;b--){var a=this._selecteds[b];var c=this.getby_id(a._id);if(!c){this._selecteds.removeAt(b);delete this._idSelecteds[a._id]}}if(this._selected&&this.getby_id(this._selected._id)==null){this._selected=null}},setMultiSelect:function(a){if(this.multiSelect!=a){this.multiSelect=a;if(a==false){}}},getMultiSelect:function(){return this.multiSelect},selectPrev:function(){var a=this.getSelected();if(!a){a=this.getAt(0)}else{var b=this.indexOf(a);a=this.getAt(b-1)}if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},selectNext:function(){var a=this.getSelected();if(!a){a=this.getAt(0)}else{var b=this.indexOf(a);a=this.getAt(b+1)}if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},selectFirst:function(){var a=this.getAt(0);if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},selectLast:function(){var b=this.getVisibleRows();var a=this.getAt(b.length-1);if(a){this.deselectAll();this.select(a);this.setCurrent(a)}},getSelectedsId:function(b){var a=this.getSelecteds();var c=this.getValueAndText(a,b);return c[0]},getSelectedsText:function(b){var a=this.getSelecteds();var c=this.getValueAndText(a,b);return c[1]},_filterInfo:null,_sortInfo:null,filter:function(b,a){if(typeof b!="function"){return}a=a||this;this._filterInfo=[b,a];this._doFilter();this._doSort();this._dataChanged();this.fire("filter")},clearFilter:function(){if(!this._filterInfo){return}this._filterInfo=null;this._doFilter();this._doSort();this._dataChanged();this.fire("filter")},sort:function(c,b,a){if(typeof c!="function"){return}b=b||this;this._sortInfo=[c,b,a];this._doSort();this._dataChanged();this.fire("sort")},clearSort:function(){this._sortInfo=null;this.sortField=this.sortOrder="";this._doFilter();this._dataChanged();if(this.sortMode=="server"){var a=this.getLoadParams();a.sortField="";a.sortOrder="";this.load(a)}else{}this.fire("filter")},_doClientSortField:function(b,d,a){var f=this._getSortFnByField(b,a);if(!f){return}var c=d=="desc";this.sort(f,this,c)},_getSortFnByField:function(c,d){if(!c){return null}var b=null;var a=mini.sortTypes[d];if(!a){a=mini.sortTypes.string}function f(k,g){var j=mini._getMap(c,k),l=mini._getMap(c,g);var o=mini.isNull(j)||j==="";var n=mini.isNull(l)||l==="";if(o){return 0}if(n){return 1}if(d=="chinese"){return j.localeCompare(l)}var q=a(j);var p=a(l);if(q>p){return 1}else{return 0}}b=f;return b},ajaxOptions:null,autoLoad:false,url:"",pageSize:10,pageIndex:0,totalCount:0,totalPage:0,sortField:"",sortOrder:"",loadParams:null,getLoadParams:function(){return this.loadParams||{}},sortMode:"server",pageIndexField:"pageIndex",pageSizeField:"pageSize",sortFieldField:"sortField",sortOrderField:"sortOrder",totalField:"total",dataField:"data",startField:"",limitField:"",errorField:"error",errorMsgField:"errorMsg",stackTraceField:"stackTrace",load:function(f,d,b,a){if(typeof f=="string"){this.setUrl(f);return}if(this._loadTimer){clearTimeout(this._loadTimer)}this.loadParams=f||{};if(!mini.isNumber(this.loadParams.pageIndex)){this.loadParams.pageIndex=0}if(this._xhr){this._xhr.abort()}if(this.ajaxAsync){var c=this;this._loadTimer=setTimeout(function(){c._doLoadAjax(c.loadParams,d,b,a);c._loadTimer=null},1)}else{this._doLoadAjax(this.loadParams,d,b,a)}},reload:function(c,b,a){this.load(this.loadParams,c,b,a)},gotoPage:function(a,b){var c=this.loadParams||{};if(mini.isNumber(a)){c.pageIndex=a}if(mini.isNumber(b)){c.pageSize=b}this.load(c)},sortBy:function(a,b){this.sortField=a;this.sortOrder=b=="asc"?"asc":"desc";if(this.sortMode=="server"){var c=this.getLoadParams();c.sortField=a;c.sortOrder=b;c.pageIndex=this.pageIndex;this.load(c)}else{}},setSortField:function(a){this.sortField=a;if(this.sortMode=="server"){var b=this.getLoadParams();b.sortField=a}},setSortOrder:function(a){this.sortOrder=a;if(this.sortMode=="server"){var b=this.getLoadParams();b.sortOrder=a}},checkSelectOnLoad:true,selectOnLoad:false,ajaxData:null,ajaxAsync:true,ajaxType:"",_doLoadAjax:function(f,r,l,b,n){f=f||{};if(mini.isNull(f.pageIndex)){f.pageIndex=this.pageIndex}if(mini.isNull(f.pageSize)){f.pageSize=this.pageSize}if(f.sortField){this.sortField=f.sortField}if(f.sortOrder){this.sortOrder=f.sortOrder}f.sortField=this.sortField;f.sortOrder=this.sortOrder;this.loadParams=f;var a=this._evalUrl();var q=this._evalType(a);var j=mini._evalAjaxData(this.ajaxData,this);jQuery.extend(true,f,j);var k={url:a,async:this.ajaxAsync,type:q,data:f,params:f,cache:false,cancel:false};jQuery.extend(true,k,this.ajaxOptions);this._OnBeforeLoad(k);if(k.cancel==true){f.pageIndex=this.getPageIndex();f.pageSize=this.getPageSize();return}if(k.data!=k.params&&k.params!=f){k.data=k.params}if(k.url!=a&&k.type==q){k.type=this._evalType(k.url)}var c={};c[this.pageIndexField]=f.pageIndex;c[this.pageSizeField]=f.pageSize;if(f.sortField){c[this.sortFieldField]=f.sortField}if(f.sortOrder){c[this.sortOrderField]=f.sortOrder}if(this.startField&&this.limitField){c[this.startField]=f.pageIndex*f.pageSize;c[this.limitField]=f.pageSize}jQuery.extend(true,f,c);jQuery.extend(true,k.data,c);if(this.sortMode=="client"){f[this.sortFieldField]="";f[this.sortOrderField]=""}var g=this.getSelected();this._selectedValue=g?g[this.idField]:null;if(mini.isNumber(this._selectedValue)){this._selectedValue=String(this._selectedValue)}var p=this;p._resultObject=null;var d=k.async;mini.copyTo(k,{success:function(A,u,B){if(!A||A=="null"){A="{ tatal: 0, data: [] }"}delete k.params;var v={text:A,result:null,sender:p,options:k,xhr:B};var C=null;try{mini_doload(v);C=v.result;if(!C){C=mini.decode(A)}}catch(y){if(mini_debugger==true){alert(a+"\n json is error.")}}if(C&&!mini.isArray(C)){C.total=parseInt(mini._getMap(p.totalField,C));C.data=mini._getMap(p.dataField,C)}else{if(C==null){C={};C.data=[];C.total=0}else{if(mini.isArray(C)){var s={};s.data=C;s.total=C.length;C=s}}}if(!C.data){C.data=[]}if(!C.total){C.total=0}p._resultObject=C;if(!mini.isArray(C.data)){C.data=[C.data]}var y={xhr:B,text:A,textStatus:u,result:C,total:C.total,data:C.data.clone(),pageIndex:f[p.pageIndexField],pageSize:f[p.pageSizeField]};var z=mini._getMap(p.errorField,C);var w=mini._getMap(p.errorMsgField,C);var x=mini._getMap(p.stackTraceField,C);if(mini.isNumber(z)&&z!=0||z===false){y.textStatus="servererror";y.errorCode=z;y.stackTrace=x||"";y.errorMsg=w||"";if(mini_debugger==true){alert(a+"\n"+y.textStatus+"\n"+y.errorMsg+"\n"+y.stackTrace)}p.fire("loaderror",y);if(l){l.call(p,y)}}else{if(n){n(y)}else{p.pageIndex=y.pageIndex;p.pageSize=y.pageSize;p.setTotalCount(y.total);p._OnPreLoad(y);p.loaded=true;p.setData(y.data);if(p._selectedValue&&p.checkSelectOnLoad){var t=p.getbyId(p._selectedValue);if(t){p.select(t)}}if(p.getSelected()==null&&p.selectOnLoad&&p.getDataView().length>0){p.select(0)}p.fire("load",y);if(r){if(d){setTimeout(function(){r.call(p,y)},20)}else{r.call(p,y)}}}}},error:function(t,u,s){if(u=="abort"){return}var o={xhr:t,text:t.responseText,textStatus:u};o.errorMsg=t.responseText;o.errorCode=t.status;if(mini_debugger==true){alert(a+"\n"+o.errorCode+"\n"+o.errorMsg)}p.fire("loaderror",o);if(l){l.call(p,o)}},complete:function(s,t){var o={xhr:s,text:s.responseText,textStatus:t};p.fire("loadcomplete",o);if(b){b.call(p,o)}p._xhr=null}});if(this._xhr){}this._xhr=mini.ajax(k)},_OnBeforeLoad:function(a){this.fire("beforeload",a)},_OnPreLoad:function(a){this.fire("preload",a)},_evalUrl:function(){var url=this.url;if(typeof url=="function"){url=url()}else{try{url=eval(url)}catch(ex){url=this.url}if(!url){url=this.url}}return url},_evalType:function(a){var b=this.ajaxType;if(!b){b="post";if(a){if(a.indexOf(".txt")!=-1||a.indexOf(".json")!=-1){b="get"}}else{b="get"}}return b},setSortMode:function(a){this.sortMode=a},getSortMode:function(){return this.sortMode},setAjaxOptions:function(a){this.ajaxOptions=a},getAjaxOptions:function(){return this.ajaxOptions},setAutoLoad:function(a){this.autoLoad=a},getAutoLoad:function(){return this.autoLoad},setUrl:function(a){this.url=a;if(this.autoLoad){this.load()}},getUrl:function(){return this.url},setPageIndex:function(a){this.pageIndex=a;var b=this.loadParams||{};if(mini.isNumber(a)){b.pageIndex=a}this.fire("pageinfochanged")},getPageIndex:function(){return this.pageIndex},setPageSize:function(a){this.pageSize=a;var b=this.loadParams||{};if(mini.isNumber(a)){b.pageSize=a}this.fire("pageinfochanged")},getPageSize:function(){return this.pageSize},setTotalCount:function(a){this.totalCount=parseInt(a);this.fire("pageinfochanged")},getTotalCount:function(){return this.totalCount},getTotalPage:function(){return this.totalPage},setCheckSelectOnLoad:function(a){this.checkSelectOnLoad=a},getCheckSelectOnLoad:function(){return this.checkSelectOnLoad},setSelectOnLoad:function(a){this.selectOnLoad=a},getSelectOnLoad:function(){return this.selectOnLoad}});mini.DataSource.RecordId=1;mini.DataTable=function(){mini.DataTable.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataTable,mini.DataSource,{_init:function(){mini.DataTable.superclass._init.call(this);this._filterInfo=null;this._sortInfo=null},add:function(a){return this.insert(this.source.length,a)},addRange:function(a){this.insertRange(this.source.length,a)},insert:function(d,b){if(!b){return null}var g={index:d,record:b};this.fire("beforeadd",g);if(!mini.isNumber(d)){var c=this.getRecord(d);if(c){d=this.indexOf(c)}else{d=this.getDataView().length}}var f=this.dataview[d];if(f){this.dataview.insert(d,b)}else{this.dataview.add(b)}if(this.dataview!=this.source){if(f){var a=this.source.indexOf(f);this.source.insert(a,b)}else{this.source.add(b)}}this._setAdded(b);this._dataChanged();this.fire("add",g)},insertRange:function(d,c){if(!mini.isArray(c)){return}this.beginChange();c=c.clone();for(var f=0,b=c.length;f<b;f++){var a=c[f];this.insert(d+f,a)}this.endChange()},remove:function(a,c){var b=this.indexOf(a);return this.removeAt(b,c)},removeAt:function(f,d){var b=this.getAt(f);if(!b){return null}var g={record:b};this.fire("beforeremove",g);var c=this.isSelected(b);this.source.remove(b);if(this.dataview!==this.source){this.dataview.removeAt(f)}this._setRemoved(b);this._checkSelecteds();this._dataChanged();this.fire("remove",g);if(c&&d){var a=this.getAt(f);if(!a){a=this.getAt(f-1)}this.deselectAll();this.select(a)}},removeRange:function(b,c){if(!mini.isArray(b)){return}this.beginChange();b=b.clone();for(var d=0,a=b.length;d<a;d++){var f=b[d];this.remove(f,c)}this.endChange()},move:function(g,q){if(!g||!mini.isNumber(q)){return}if(q<0){return}if(mini.isArray(g)){this.beginChange();var d=g,b=this.getAt(q);var k=this;mini.sort(d,function(r,l){return k.indexOf(r)>k.indexOf(l)},this);for(var f=0,c=d.length;f<c;f++){var a=d[f];var j=this.indexOf(b);this.move(a,j)}this.endChange();return}var o={index:q,record:g};this.fire("beforemove",o);var n=this.dataview[q];this.dataview.remove(g);var p=this.dataview.indexOf(n);if(p!=-1){q=p}if(n){this.dataview.insert(q,g)}else{this.dataview.add(g)}if(this.dataview!=this.source){this.source.remove(g);var p=this.source.indexOf(n);if(p!=-1){q=p}if(n){this.source.insert(q,g)}else{this.source.add(g)}}this._dataChanged();this.fire("move",o)},indexOf:function(a){return this.getVisibleRows().indexOf(a)},getAt:function(a){return this.getVisibleRows()[a]},getRange:function(j,b){if(j>b){var f=j;j=b;b=f}var c=[];for(var d=j,a=b;d<=a;d++){var g=this.dataview[d];c.push(g)}return c},selectRange:function(c,a){if(!mini.isNumber(c)){c=this.indexOf(c)}if(!mini.isNumber(a)){a=this.indexOf(a)}if(mini.isNull(c)||mini.isNull(a)){return}var b=this.getRange(c,a);this.selects(b)},toArray:function(){return this.source.clone()},isChanged:function(){return this.getChanges().length>0},getChanges:function(b,g){var n=[];if(b=="removed"||b==null){n.addRange(this._removeds.clone())}for(var d=0,c=this.source.length;d<c;d++){var f=this.source[d];if(!f._state){continue}if(f._state==b||b==null){n[n.length]=f}}var q=n;if(g){for(var d=0,c=q.length;d<c;d++){var p=q[d];if(p._state=="modified"){var o={};o._state=p._state;o[this.idField]=p[this.idField];for(var k in p){var j=this.isModified(p,k);if(j){o[k]=p[k]}}q[d]=o}}}var a=this;mini.sort(n,function(r,l){var t=a.indexOf(r);var s=a.indexOf(l);if(t>s){return 1}if(t<s){return -1}return 0});return n},accept:function(){this.beginChange();for(var c=0,b=this.source.length;c<b;c++){var a=this.source[c];this.acceptRecord(a)}this._removeds=[];this._originals={};this.endChange()},reject:function(){this.beginChange();for(var c=0,b=this.source.length;c<b;c++){var a=this.source[c];this.rejectRecord(a)}this._removeds=[];this._originals={};this.endChange()},acceptRecord:function(a){if(!a._state){return}delete this._originals[a[this._originalIdField]];if(a._state=="deleted"){this.remove(a)}else{delete a._state;delete this._originals[a[this._originalIdField]];this._dataChanged()}this.fire("update",{record:a})},rejectRecord:function(a){if(!a._state){return}if(a._state=="added"){this.remove(a)}else{if(a._state=="modified"||a._state=="deleted"){var c=this._getOriginal(a);for(var b in c){var d=c[b];mini._setMap(b,d,a)}delete a._state;delete this._originals[a[this._originalIdField]];this._dataChanged();this.fire("update",{record:a})}}},_doFilter:function(){if(!this._filterInfo){this.dataview=this.source;return}var f=this._filterInfo[0],d=this._filterInfo[1];var b=[];var j=this.source;for(var c=0,a=j.length;c<a;c++){var g=j[c];var k=f.call(d,g,c,this);if(k!==false){b.push(g)}}this.dataview=b},_doSort:function(){if(!this._sortInfo){return}var d=this._sortInfo[0],c=this._sortInfo[1],a=this._sortInfo[2];var b=this.getDataView().clone();mini.sort(b,d,c);if(a){b.reverse()}this.dataview=b}});mini.regClass(mini.DataTable,"datatable");mini.DataTree=function(){mini.DataTree.superclass.constructor.apply(this,arguments)};mini.extend(mini.DataTree,mini.DataSource,{isTree:true,expandOnLoad:false,idField:"id",parentField:"pid",nodesField:"children",checkedField:"checked",resultAsTree:true,dataField:"",checkModel:"cascade",autoCheckParent:false,onlyLeafCheckable:false,setExpandOnLoad:function(a){this.expandOnLoad=a},getExpandOnLoad:function(){return this.expandOnLoad},setParentField:function(a){this.parentField=a},setNodesField:function(b){if(this.nodesField!=b){var a=this.root[this.nodesField];this.nodesField=b;this._doLoadData(a)}},setResultAsTree:function(a){this.resultAsTree=a},setCheckRecursive:function(a){this.checkModel=a?"cascade":"multiple"},getCheckRecursive:function(){return this.checkModel=="cascade"},setShowFolderCheckBox:function(a){this.onlyLeafCheckable=!a},getShowFolderCheckBox:function(){return !this.onlyLeafCheckable},_doExpandOnLoad:function(a){var d=this.nodesField;var c=this.expandOnLoad;function b(g,o){for(var j=0,f=g.length;j<f;j++){var k=g[j];if(mini.isNull(k.expanded)){if(c===true||(mini.isNumber(c)&&o<=c)){k.expanded=true}else{k.expanded=false}}else{}var n=k[d];if(n){b(n,o+1)}}}b(a,0)},_OnBeforeLoad:function(b){var a=this._loadingNode||this.root;b.node=a;if(this._isNodeLoading()){b.async=true;b.isRoot=b.node==this.root;if(!b.isRoot){b.data[this.idField]=this.getItemValue(b.node)}}this.fire("beforeload",b)},_OnPreLoad:function(a){if(this.resultAsTree==false){a.data=mini.arrayToTree(a.data,this.nodesField,this.idField,this.parentField)}this.fire("preload",a)},_init:function(){mini.DataTree.superclass._init.call(this);this.root={_id:-1,_level:-1};this.source=this.root[this.nodesField]=[];this.viewNodes=null;this.dataview=null;this.visibleRows=null;this._ids[this.root._id]=this.root},_doLoadData:function(f){f=f||[];this._doExpandOnLoad(f);this.source=this.root[this.nodesField]=f;this.viewNodes=null;this.dataview=null;this.visibleRows=null;var b=mini.treeToArray(f,this.nodesField);var a=this._ids;a[this.root._id]=this.root;for(var g=0,d=b.length;g<d;g++){var c=b[g];c._id=mini.DataSource.RecordId++;a[c._id]=c;c._uid=c._id}var n=this.checkedField;var b=mini.treeToArray(f,this.nodesField,"_id","_pid",this.root._id);for(var g=0,d=b.length;g<d;g++){var c=b[g];var j=this.getParentNode(c);c._pid=j._id;c._level=j._level+1;delete c._state;c.checked=c[n];if(c.checked){c.checked=c.checked!="false"}if(this.isLeafNode(c)==false){var k=c[this.nodesField];if(k&&k.length>0){}}}this._doUpdateLoadedCheckedNodes()},_setAdded:function(b){var a=this.getParentNode(b);b._id=mini.DataSource.RecordId++;if(this._autoCreateNewID&&!b[this.idField]){b[this.idField]=UUID()}b._uid=b._id;b._pid=a._id;if(a[this.idField]){b[this.parentField]=a[this.idField]}b._level=a._level+1;b._state="added";this._ids[b._id]=b;delete this._originals[b[this._originalIdField]]},_createNodes:function(b){var a=b[this.nodesField];if(!a){a=b[this.nodesField]=[]}if(this.viewNodes&&!this.viewNodes[b._id]){this.viewNodes[b._id]=[]}return a},addNode:function(b,a){if(!b){return}return this.insertNode(b,-1,a)},addNodes:function(c,a,g){if(!mini.isArray(c)){return}if(mini.isNull(g)){g="add"}for(var d=0,b=c.length;d<b;d++){var f=c[d];this.insertNode(f,g,a)}},insertNodes:function(d,f,a){if(!mini.isNumber(f)){return}if(!mini.isArray(d)){return}if(!a){a=this.root}this.beginChange();var c=this._createNodes(a);if(f<0||f>c.length){f=c.length}d=d.clone();for(var g=0,b=d.length;g<b;g++){this.insertNode(d[g],f+g,a)}this.endChange();return d},removeNode:function(c){var a=this.getParentNode(c);if(!a){return}var b=this.indexOfNode(c);return this.removeNodeAt(b,a)},removeNodes:function(b){if(!mini.isArray(b)){return}this.beginChange();b=b.clone();for(var c=0,a=b.length;c<a;c++){this.removeNode(b[c])}this.endChange()},moveNodes:function(b,j,g){if(!b||b.length==0||!j||!g){return}this.beginChange();var f=this;mini.sort(b,function(l,k){return f.indexOf(l)>f.indexOf(k)},this);for(var c=0,a=b.length;c<a;c++){var d=b[c];this.moveNode(d,j,g);if(c!=0){j=d;g="after"}}this.endChange()},moveNode:function(a,j,b){if(!a||!j||mini.isNull(b)){return}if(this.viewNodes){var d=j;var f=b;if(f=="before"){d=this.getParentNode(j);f=this.indexOfNode(j)}else{if(f=="after"){d=this.getParentNode(j);f=this.indexOfNode(j)+1}else{if(f=="add"||f=="append"){if(!d[this.nodesField]){d[this.nodesField]=[]}f=d[this.nodesField].length}else{if(!mini.isNumber(f)){return}}}}if(this.isAncestor(a,d)){return false}var l=this.getChildNodes(d);if(f<0||f>l.length){f=l.length}var k={};l.insert(f,k);var n=this.getParentNode(a);var c=this.getChildNodes(n);c.remove(a);f=l.indexOf(k);l[f]=a}var d=j;var f=b;var l=this._createNodes(d);if(f=="before"){d=this.getParentNode(j);l=this._createNodes(d);f=l.indexOf(j)}else{if(f=="after"){d=this.getParentNode(j);l=this._createNodes(d);f=l.indexOf(j)+1}else{if(f=="add"||f=="append"){f=l.length}else{if(!mini.isNumber(f)){return}}}}if(this.isAncestor(a,d)){return false}if(f<0||f>l.length){f=l.length}var k={};l.insert(f,k);var n=this.getParentNode(a);n[this.nodesField].remove(a);f=l.indexOf(k);l[f]=a;this._updateParentAndLevel(a,d);this._dataChanged();var g={parentNode:d,index:f,node:a};this.fire("movenode",g)},insertNode:function(f,d,b){if(!f){return}if(!b){b=this.root;d="add"}if(!mini.isNumber(d)){switch(d){case"before":d=this.indexOfNode(b);b=this.getParentNode(b);this.insertNode(f,d,b);break;case"after":d=this.indexOfNode(b);b=this.getParentNode(b);this.insertNode(f,d+1,b);break;case"append":case"add":this.addNode(f,b);break;default:break}return}var a=this._createNodes(b);var c=this.getChildNodes(b);if(d<0){d=c.length}c.insert(d,f);d=c.indexOf(f);if(this.viewNodes){var k=c[d-1];if(k){var j=a.indexOf(k);a.insert(j+1,f)}else{a.insert(0,f)}}f._pid=b._id;this._setAdded(f);this.cascadeChild(f,function(q,l,o){q._pid=o._id;this._setAdded(q)},this);this._dataChanged();var g={parentNode:b,index:d,node:f};this.fire("addnode",g);return f},removeNodeAt:function(d,b){if(!b){b=this.root}var c=this.getChildNodes(b);var f=c[d];if(!f){return null}c.removeAt(d);if(this.viewNodes){var a=b[this.nodesField];a.remove(f)}this._setRemoved(f);this.cascadeChild(f,function(l,j,k){this._setRemoved(l)},this);this._checkSelecteds();this._dataChanged();var g={parentNode:b,index:d,node:f};this.fire("removenode",g);return f},bubbleParent:function(d,c,b){b=b||this;if(d){c.call(this,d)}var a=this.getParentNode(d);if(a&&a!=this.root){this.bubbleParent(a,c,b)}},cascadeChild:function(j,g,f){if(!g){return}if(!j){j=this.root}var b=this.getChildNodes(j);if(b){b=b.clone();for(var d=0,a=b.length;d<a;d++){var k=b[d];if(g.call(f||this,k,d,j)===false){return}this.cascadeChild(k,g,f)}}},eachChild:function(g,f,d){if(!f||!g){return}var b=g[this.nodesField];if(b){var j=b.clone();for(var c=0,a=j.length;c<a;c++){var k=j[c];if(f.call(d||this,k,c,g)===false){break}}}},collapse:function(b,a){b=this.getNode(b);if(!b){return}this.beginChange();b.expanded=false;if(a){this.eachChild(b,function(d){if(d[this.nodesField]!=null){this.collapse(d,a)}},this)}this.endChange();var c={node:b};this.fire("collapse",c)},expand:function(b,a){b=this.getNode(b);if(!b){return}this.beginChange();b.expanded=true;if(a){this.eachChild(b,function(d){if(d[this.nodesField]!=null){this.expand(d,a)}},this)}this.endChange();var c={node:b};this.fire("expand",c)},toggle:function(a){if(this.isExpandedNode(a)){this.collapse(a)}else{this.expand(a)}},expandNode:function(a){this.expand(a)},collapseNode:function(a){this.collapse(a)},collapseAll:function(){this.collapse(this.root,true)},expandAll:function(){this.expand(this.root,true)},collapseLevel:function(b,a){this.beginChange();this.each(function(d){var c=this.getLevel(d);if(b==c){this.collapse(d,a)}},this);this.endChange()},expandLevel:function(b,a){this.beginChange();this.each(function(d){var c=this.getLevel(d);if(b==c){this.expand(d,a)}},this);this.endChange()},expandPath:function(d){d=this.getNode(d);if(!d){return}var b=this.getAncestors(d);for(var c=0,a=b.length;c<a;c++){this.expandNode(b[c])}},collapsePath:function(d){d=this.getNode(d);if(!d){return}var b=this.getAncestors(d);for(var c=0,a=b.length;c<a;c++){this.collapseNode(b[c])}},isAncestor:function(a,f){if(a==f){return true}if(!a||!f){return false}if(a==this.getRootNode()){return true}var c=this.getAncestors(f);for(var d=0,b=c.length;d<b;d++){if(c[d]==a){return true}}return false},getAncestors:function(c){var b=[];while(1){var a=this.getParentNode(c);if(!a||a==this.root){break}b[b.length]=a;c=a}b.reverse();return b},getNode:function(a){return this.getRecord(a)},getRootNode:function(){return this.root},getParentNode:function(a){if(!a){return null}return this.getby_id(a._pid)},getAllChildNodes:function(a){return this.getChildNodes(a,true)},getChildNodes:function(b,k,n){b=this.getNode(b);if(!b){b=this.getRootNode()}var a=b[this.nodesField];if(this.viewNodes&&n!==false){a=this.viewNodes[b._id]}if(k===true&&a){var j=[];for(var d=0,c=a.length;d<c;d++){var g=a[d];j[j.length]=g;var f=this.getChildNodes(g,k,n);if(f&&f.length>0){j.addRange(f)}}a=j}return a||[]},getChildNodeAt:function(b,c){var a=this.getChildNodes(c);if(a){return a[b]}return null},hasChildNodes:function(b){var a=this.getChildNodes(b);return a.length>0},getLevel:function(a){return a._level},_is_true:function(a){return a===true||a===1||a==="Y"||a==="y"},_is_false:function(a){return a===false||a===0||a==="N"||a==="n"},leafField:"isLeaf",isLeafNode:function(a){return this.isLeaf(a)},isLeaf:function(c){if(!c){return false}var b=c[this.leafField];if(!c||this._is_false(b)){return false}var a=this.getChildNodes(c,false,false);if(a.length>0){return false}return true},hasChildren:function(b){var a=this.getChildNodes(b);return !!(a&&a.length>0)},isFirstNode:function(b){if(b==this.root){return true}var a=this.getParentNode(b);if(!a){return false}return this.getFirstNode(a)==b},isLastNode:function(b){if(b==this.root){return true}var a=this.getParentNode(b);if(!a){return false}return this.getLastNode(a)==b},isCheckedNode:function(a){return a.checked===true},isExpandedNode:function(a){return a.expanded==true||a.expanded==1||mini.isNull(a.expanded)},isEnabledNode:function(a){return a.enabled!==false},isVisibleNode:function(a){if(a.visible==false){return false}var b=this._ids[a._pid];if(!b||b==this.root){return true}if(b.expanded===false){return false}return this.isVisibleNode(b)},getNextNode:function(c){var a=this.getby_id(c._pid);if(!a){return null}var b=this.indexOfNode(c);return this.getChildNodes(a)[b+1]},getPrevNode:function(c){var a=this.getby_id(c._pid);if(!a){return null}var b=this.indexOfNode(c);return this.getChildNodes(a)[b-1]},getFirstNode:function(a){return this.getChildNodes(a)[0]},getLastNode:function(a){var b=this.getChildNodes(a);return b[b.length-1]},indexOfNode:function(b){var a=this.getby_id(b._pid);if(a){return this.getChildNodes(a).indexOf(b)}return -1},indexOfList:function(a){return this.getList().indexOf(a)},getAt:function(a){return this.getVisibleRows()[a]},indexOf:function(a){return this.getVisibleRows().indexOf(a)},getRange:function(k,b){if(k>b){var f=k;k=b;b=f}var g=this.getChildNodes(this.root,true);var c=[];for(var d=k,a=b;d<=a;d++){var j=g[d];if(j){c.push(j)}}return c},selectRange:function(d,a){var c=this.getChildNodes(this.root,true);if(!mini.isNumber(d)){d=c.indexOf(d)}if(!mini.isNumber(a)){a=c.indexOf(a)}if(mini.isNull(d)||mini.isNull(a)){return}var b=this.getRange(d,a);this.selects(b)},findRecords:function(p,n){var d=this.toArray();var j=typeof p=="function";var k=p;var q=n||this;var b=[];for(var f=0,c=d.length;f<c;f++){var a=d[f];if(j){var g=k.call(q,a);if(g==true){b[b.length]=a}if(g===1){break}}else{if(a[p]==n){b[b.length]=a}}}return b},_dataChangedCount:0,_dataChanged:function(){this._dataChangedCount++;this.dataview=null;this.visibleRows=null;if(this.__changeCount==0){this.fire("datachanged")}},_createDataView:function(){var a=this.getChildNodes(this.root,true);return a},_createVisibleRows:function(){var f=this.getChildNodes(this.root,true);var b=[];for(var c=0,a=f.length;c<a;c++){var d=f[c];if(this.isVisibleNode(d)){b[b.length]=d}}return b},getList:function(){return mini.treeToList(this.source,this.nodesField)},getDataView:function(){if(!this.dataview){this.dataview=this._createDataView()}return this.dataview.clone()},getVisibleRows:function(){if(!this.visibleRows){this.visibleRows=this._createVisibleRows()}return this.visibleRows},_doFilter:function(){if(!this._filterInfo){this.viewNodes=null;return}var d=this._filterInfo[0],c=this._filterInfo[1];var a=this.viewNodes={},f=this.nodesField;function b(o){var j=o[f];if(!j){return false}var k=o._id;var s=a[k]=[];for(var q=0,p=j.length;q<p;q++){var g=j[q];var n=b(g);var t=d.call(c,g,q,this);if(t===true||n){s.push(g)}}return s.length>0}b(this.root)},_doSort:function(){if(!this._filterInfo&&!this._sortInfo){this.viewNodes=null;return}if(!this._sortInfo){return}var f=this._sortInfo[0],d=this._sortInfo[1],b=this._sortInfo[2];var j=this.nodesField;if(!this.viewNodes){var a=this.viewNodes={};a[this.root._id]=this.root[j].clone();this.cascadeChild(this.root,function(n,l,o){var k=n[j];if(k){a[n._id]=k.clone()}})}var g=this;function c(q){var n=g.getChildNodes(q);mini.sort(n,f,d);if(b){n.reverse()}for(var o=0,k=n.length;o<k;o++){var p=n[o];c(p)}}c(this.root)},toArray:function(){if(!this._array||this._dataChangedCount!=this._dataChangedCount2){this._dataChangedCount2=this._dataChangedCount;this._array=this.getChildNodes(this.root,true,false)}return this._array},toTree:function(){return this.root[this.nodesField]},isChanged:function(){return this.getChanges().length>0},getChanges:function(a,d){var j=[];if(a=="removed"||a==null){j.addRange(this._removeds.clone())}this.cascadeChild(this.root,function(l,q,r){if(l._state==null||l._state==""){return}if(l._state==a||a==null){j[j.length]=l}},this);var o=j;if(d){for(var c=0,b=o.length;c<b;c++){var n=o[c];if(n._state=="modified"){var k={};k[this.idField]=n[this.idField];for(var g in n){var f=this.isModified(n,g);if(f){k[g]=n[g]}}o[c]=k}}}return j},accept:function(a){a=a||this.root;this.beginChange();this.cascadeChild(this.root,function(b){this.acceptRecord(b)},this);this._removeds=[];this._originals={};this.endChange()},reject:function(a){this.beginChange();this.cascadeChild(this.root,function(b){this.rejectRecord(b)},this);this._removeds=[];this._originals={};this.endChange()},acceptRecord:function(a){if(!a._state){return}delete this._originals[a[this._originalIdField]];if(a._state=="deleted"){this.removeNode(a)}else{delete a._state;delete this._originals[a[this._originalIdField]];this._dataChanged();this.fire("update",{record:a})}},rejectRecord:function(a){if(!a._state){return}if(a._state=="added"){this.removeNode(a)}else{if(a._state=="modified"||a._state=="deleted"){var b=this._getOriginal(a);mini.copyTo(a,b);delete a._state;delete this._originals[a[this._originalIdField]];this._dataChanged();this.fire("update",{record:a})}}},upGrade:function(b){var f=this.getParentNode(b);if(f==this.root||b==this.root){return false}var c=f[this.nodesField];var j=c.indexOf(b);var k=b[this.nodesField]?b[this.nodesField].length:0;for(var g=c.length-1;g>=j;g--){var a=c[g];c.removeAt(g);if(a!=b){if(!b[this.nodesField]){b[this.nodesField]=[]}b[this.nodesField].insert(k,a)}}var d=this.getParentNode(f);var l=d[this.nodesField];var j=l.indexOf(f);l.insert(j+1,b);this._updateParentAndLevel(b,d);this._doFilter();this._dataChanged()},downGrade:function(f){if(this.isFirstNode(f)){return false}var d=this.getParentNode(f);var c=d[this.nodesField];var b=c.indexOf(f);var a=c[b-1];c.removeAt(b);if(!a[this.nodesField]){a[this.nodesField]=[]}a[this.nodesField].add(f);this._updateParentAndLevel(f,a);this._doFilter();this._dataChanged()},_updateParentAndLevel:function(c,a){var b=this;c._pid=a._id;c._level=a._level+1;c[b.parentField]=a[b.idField];if(!c[b.parentField]){c[b.parentField]=a._id}this.cascadeChild(c,function(g,d,f){g._pid=f._id;g._level=f._level+1;g[b.parentField]=f[b.idField]},this);this._setModified(c)},setCheckModel:function(a){this.checkModel=a},getCheckModel:function(){return this.checkModel},setOnlyLeafCheckable:function(a){this.onlyLeafCheckable=a},getOnlyLeafCheckable:function(){return this.onlyLeafCheckable},setAutoCheckParent:function(a){this.autoCheckParent=a},getAutoCheckParent:function(){return this.autoCheckParent},_doUpdateLoadedCheckedNodes:function(){var b=this.getAllChildNodes(this.root);for(var c=0,a=b.length;c<a;c++){var d=b[c];if(d.checked==true){if(this.autoCheckParent==false||!this.hasChildNodes(d)){this._doUpdateNodeCheckState(d)}}}},_doUpdateNodeCheckState:function(a){if(!a){return}var n=this.isChecked(a);if(this.checkModel=="cascade"||this.autoCheckParent){this.cascadeChild(a,function(l){this.doCheckNodes(l,n)},this);if(!this.autoCheckParent){var o=this.getAncestors(a);o.reverse();for(var d=0,b=o.length;d<b;d++){var f=o[d];var q=this.getChildNodes(f);var r=true;for(var p=0,k=q.length;p<k;p++){var j=q[p];if(!this.isCheckedNode(j)){r=false}}if(r){this.doCheckNodes(f,true)}else{this.doCheckNodes(f,false)}this.fire("checkchanged",{nodes:[f],_nodes:[f]})}}}var g=this;function c(t){var v=g.getChildNodes(t);for(var l=0,u=v.length;l<u;l++){var s=v[l];if(g.isCheckedNode(s)){return true}}return false}if(this.autoCheckParent){var o=this.getAncestors(a);o.reverse();for(var d=0,b=o.length;d<b;d++){var f=o[d];f.checked=c(f);this.fire("checkchanged",{nodes:[f],_nodes:[f]})}}},doCheckNodes:function(b,g,a){if(!b){return}if(typeof b=="string"){b=b.split(",")}if(!mini.isArray(b)){b=[b]}b=b.clone();var j=[];g=g!==false;if(a===true){if(this.checkModel=="single"){this.uncheckAllNodes()}}for(var c=b.length-1;c>=0;c--){var f=this.getRecord(b[c]);if(!f||(g&&f.checked===true)||(!g&&f.checked!==true)){if(f){if(a===true){this._doUpdateNodeCheckState(f)}if(!g&&!this.isLeaf(f)){j.push(f)}}continue}f.checked=g;j.push(f);if(a===true){this._doUpdateNodeCheckState(f)}}var d=this;setTimeout(function(){d.fire("checkchanged",{nodes:b,_nodes:j,checked:g})},1)},checkNode:function(b,a){this.doCheckNodes([b],true,a!==false)},uncheckNode:function(b,a){this.doCheckNodes([b],false,a!==false)},checkNodes:function(b,a){if(!mini.isArray(b)){b=[]}this.doCheckNodes(b,true,a!==false)},uncheckNodes:function(b,a){if(!mini.isArray(b)){b=[]}this.doCheckNodes(b,false,a!==false)},checkAllNodes:function(){var a=this.getList();this.doCheckNodes(a,true,false)},uncheckAllNodes:function(){var a=this.getList();this.doCheckNodes(a,false,false)},getCheckedNodes:function(c){if(c===false){c="leaf"}var a=[];var b={};this.cascadeChild(this.root,function(n){if(n.checked==true){var g=this.isLeafNode(n);if(c===true){if(!b[n._id]){b[n._id]=n;a.push(n)}var f=this.getAncestors(n);for(var j=0,d=f.length;j<d;j++){var k=f[j];if(!b[k._id]){b[k._id]=k;a.push(k)}}}else{if(c==="parent"){if(!g){if(!b[n._id]){b[n._id]=n;a.push(n)}}}else{if(c==="leaf"){if(g){if(!b[n._id]){b[n._id]=n;a.push(n)}}}else{if(!b[n._id]){b[n._id]=n;a.push(n)}}}}}},this);return a},getCheckedNodesId:function(d,b){var a=this.getCheckedNodes(d);var c=this.getValueAndText(a,b);return c[0]},getCheckedNodesText:function(d,b){var a=this.getCheckedNodes(d);var c=this.getValueAndText(a,b);return c[1]},isChecked:function(a){a=this.getRecord(a);if(!a){return null}return a.checked===true||a.checked===1},getCheckState:function(d){d=this.getRecord(d);if(!d){return null}if(d.checked===true){return"checked"}if(!d[this.nodesField]){return"unchecked"}var c=this.getChildNodes(d,true);for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d.checked===true){return"indeterminate"}}return"unchecked"},getUnCheckableNodes:function(){var a=[];this.cascadeChild(this.root,function(c){var b=this.getCheckable(c);if(b==false){a.push(c)}},this);return a},setCheckable:function(b,a){if(!b){return}if(!mini.isArray(b)){b=[b]}b=b.clone();a=!!a;for(var c=b.length-1;c>=0;c--){var d=this.getRecord(b[c]);if(!d){continue}d.checkable=checked}},getCheckable:function(a){a=this.getRecord(a);if(!a){return false}if(a.checkable===true){return true}if(a.checkable===false){return false}return this.isLeafNode(a)?true:!this.onlyLeafCheckable},showNodeCheckbox:function(b,a){},reload:function(c,b,a){this._loadingNode=null;this.load(this.loadParams,c,b,a)},_isNodeLoading:function(){return !!this._loadingNode},loadNode:function(c,a){this._loadingNode=c;var f={node:c};this.fire("beforeloadnode",f);var d=new Date();var b=this;b._doLoadAjax(b.loadParams,null,null,null,function(j){var g=new Date()-d;if(g<60){g=60-g}setTimeout(function(){j.node=c;b._OnPreLoad(j);j.node=b._loadingNode;b._loadingNode=null;if(b.loadParams){delete b.loadParams[b.idField]}var r=c[b.nodesField];b.removeNodes(r);var n=j.data;if(n&&n.length>0){b.addNodes(n,c);var p=b.getAllChildNodes(c);for(var o=0,k=p.length;o<k;o++){var q=p[o];b.acceptRecord(q)}if(a!==false){b.expand(c,true)}else{b.collapse(c,true)}}else{delete c[b.leafField];b.expand(c,true)}b.fire("loadnode",j);b.fire("load",j)},g)},true)}});mini.regClass(mini.DataTree,"datatree");mini._DataTableApplys={idField:"id",textField:"text",setAjaxData:function(a){this._dataSource.ajaxData=a},getby_id:function(a){return this._dataSource.getby_id(a)},getValueAndText:function(b,a){return this._dataSource.getValueAndText(b,a)},setIdField:function(a){this._dataSource.setIdField(a);this.idField=a},getIdField:function(){return this._dataSource.idField},setTextField:function(a){this._dataSource.setTextField(a);this.textField=a},getTextField:function(){return this._dataSource.textField},clearData:function(){this._dataSource.clearData()},loadData:function(a){this._dataSource.loadData(a)},setData:function(a){this._dataSource.loadData(a)},getData:function(){return this._dataSource.getSource().clone()},getList:function(){return this._dataSource.getList()},getDataView:function(){return this._dataSource.getDataView()},getVisibleRows:function(){if(this._useEmptyView){return[]}return this._dataSource.getVisibleRows()},toArray:function(){return this._dataSource.toArray()},getRecord:function(a){return this._dataSource.getRecord(a)},getRow:function(a){return this._dataSource.getRow(a)},getRange:function(b,a){if(mini.isNull(b)||mini.isNull(a)){return}return this._dataSource.getRange(b,a)},getAt:function(a){return this._dataSource.getAt(a)},indexOf:function(a){return this._dataSource.indexOf(a)},getRowByUID:function(a){return this._dataSource.getby_id(a)},getRowById:function(a){return this._dataSource.getbyId(a)},clearRows:function(){this._dataSource.clearData()},updateRow:function(a,c,b){this._dataSource.updateRecord(a,c,b)},addRow:function(a,b){return this._dataSource.insert(b,a)},removeRow:function(a,b){return this._dataSource.remove(a,b)},removeRows:function(a,b){return this._dataSource.removeRange(a,b)},removeRowAt:function(b,a){return this._dataSource.removeAt(b,a)},moveRow:function(b,a){this._dataSource.move(b,a)},addRows:function(a,b){return this._dataSource.insertRange(b,a)},findRows:function(b,a){return this._dataSource.findRecords(b,a)},findRow:function(b,a){return this._dataSource.findRecord(b,a)},multiSelect:false,setMultiSelect:function(a){this._dataSource.setMultiSelect(a);this.multiSelect=a},getMultiSelect:function(){return this._dataSource.getMultiSelect()},setCurrent:function(a){this._dataSource.setCurrent(a)},getCurrent:function(){return this._dataSource.getCurrent()},isSelected:function(a){return this._dataSource.isSelected(a)},setSelected:function(a){this._dataSource.setSelected(a)},getSelected:function(){return this._dataSource.getSelected()},getSelecteds:function(){return this._dataSource.getSelecteds()},select:function(a,b){this._dataSource.select(a,b)},selects:function(a,b){this._dataSource.selects(a,b)},deselect:function(a,b){this._dataSource.deselect(a,b)},deselects:function(a,b){this._dataSource.deselects(a,b)},selectAll:function(a){this._dataSource.selectAll(a)},deselectAll:function(a){this._dataSource.deselectAll(a)},clearSelect:function(a){this.deselectAll(a)},selectPrev:function(){this._dataSource.selectPrev()},selectNext:function(){this._dataSource.selectNext()},selectFirst:function(){this._dataSource.selectFirst()},selectLast:function(){this._dataSource.selectLast()},selectRange:function(b,a){this._dataSource.selectRange(b,a)},filter:function(b,a){this._dataSource.filter(b,a)},clearFilter:function(){this._dataSource.clearFilter()},sort:function(b,a){this._dataSource.sort(b,a)},clearSort:function(){this._dataSource.clearSort()},findItems:function(f,d,g){return this._dataSource.findRecords(g,d,g)},getResultObject:function(){return this._dataSource._resultObject||{}},isChanged:function(){return this._dataSource.isChanged()},getChanges:function(b,a){return this._dataSource.getChanges(b,a)},accept:function(){this._dataSource.accept()},reject:function(){this._dataSource.reject()},acceptRecord:function(a){this._dataSource.acceptRecord(a)},rejectRecord:function(a){this._dataSource.rejectRecord(a)}};mini._DataTreeApplys={addRow:null,removeRow:null,removeRows:null,removeRowAt:null,moveRow:null,setExpandOnLoad:function(a){this._dataSource.setExpandOnLoad(a)},getExpandOnLoad:function(){return this._dataSource.getExpandOnLoad()},isSelectedNode:function(a){a=this.getNode(a);return this.getSelectedNode()===a},selectNode:function(b,a){if(b){this._dataSource.select(b,a)}else{this._dataSource.deselect(this.getSelectedNode(),a)}},getSelectedNode:function(){return this.getSelected()},getSelectedNodes:function(){return this.getSelecteds()},updateNode:function(a,c,b){this._dataSource.updateRecord(a,c,b)},addNode:function(b,c,a){return this._dataSource.insertNode(b,c,a)},removeNodeAt:function(b,a){return this._dataSource.removeNodeAt(b,a);this._changed=true},removeNode:function(a){return this._dataSource.removeNode(a)},moveNode:function(a,b,c){this._dataSource.moveNode(a,b,c)},addNodes:function(b,a,c){return this._dataSource.addNodes(b,a,c)},insertNodes:function(b,c,a){return this._dataSource.insertNodes(c,b,a)},moveNodes:function(a,c,b){this._dataSource.moveNodes(a,c,b)},removeNodes:function(a){return this._dataSource.removeNodes(a)},expandOnLoad:false,checkRecursive:true,autoCheckParent:false,showFolderCheckBox:true,idField:"id",textField:"text",parentField:"pid",nodesField:"children",checkedField:"checked",leafField:"isLeaf",resultAsTree:true,setShowFolderCheckBox:function(a){this._dataSource.setShowFolderCheckBox(a);if(this.doUpdate){this.doUpdate()}this.showFolderCheckBox=a},getShowFolderCheckBox:function(){return this._dataSource.getShowFolderCheckBox()},setCheckRecursive:function(a){this._dataSource.setCheckRecursive(a);this.checkRecursive=a},getCheckRecursive:function(){return this._dataSource.getCheckRecursive()},setResultAsTree:function(a){this._dataSource.setResultAsTree(a)},getResultAsTree:function(a){return this._dataSource.resultAsTree},setParentField:function(a){this._dataSource.setParentField(a);this.parentField=a},getParentField:function(){return this._dataSource.parentField},setLeafField:function(a){this._dataSource.leafField=a;this.leafField=a},getLeafField:function(){return this._dataSource.leafField},setNodesField:function(a){this._dataSource.setNodesField(a);this.nodesField=a},getNodesField:function(){return this._dataSource.nodesField},setCheckedField:function(a){this._dataSource.checkedField=a;this.checkedField=a},getCheckedField:function(){return this.checkedField},findNodes:function(b,a){return this._dataSource.findRecords(b,a)},getLevel:function(a){return this._dataSource.getLevel(a)},isVisibleNode:function(a){return this._dataSource.isVisibleNode(a)},isEnabledNode:function(a){return this._dataSource.isEnabledNode(a)},isExpandedNode:function(a){return this._dataSource.isExpandedNode(a)},isCheckedNode:function(a){return this._dataSource.isCheckedNode(a)},isLeaf:function(a){return this._dataSource.isLeafNode(a)},hasChildren:function(a){return this._dataSource.hasChildren(a)},isAncestor:function(b,a){return this._dataSource.isAncestor(b,a)},getNode:function(a){return this._dataSource.getRecord(a)},getRootNode:function(){return this._dataSource.getRootNode()},getParentNode:function(a){return this._dataSource.getParentNode.apply(this._dataSource,arguments)},getAncestors:function(a){return this._dataSource.getAncestors(a)},getAllChildNodes:function(a){return this._dataSource.getAllChildNodes.apply(this._dataSource,arguments)},getChildNodes:function(b,a){return this._dataSource.getChildNodes.apply(this._dataSource,arguments)},getChildNodeAt:function(a,b){return this._dataSource.getChildNodeAt.apply(this._dataSource,arguments)},indexOfNode:function(a){return this._dataSource.indexOfNode.apply(this._dataSource,arguments)},hasChildNodes:function(a){return this._dataSource.hasChildNodes.apply(this._dataSource,arguments)},isFirstNode:function(a){return this._dataSource.isFirstNode.apply(this._dataSource,arguments)},isLastNode:function(a){return this._dataSource.isLastNode.apply(this._dataSource,arguments)},getNextNode:function(a){return this._dataSource.getNextNode.apply(this._dataSource,arguments)},getPrevNode:function(a){return this._dataSource.getPrevNode.apply(this._dataSource,arguments)},getFirstNode:function(a){return this._dataSource.getFirstNode.apply(this._dataSource,arguments)},getLastNode:function(a){return this._dataSource.getLastNode.apply(this._dataSource,arguments)},toggleNode:function(a){this._dataSource.toggle(a)},collapseNode:function(b,a){this._dataSource.collapse(b,a)},expandNode:function(b,a){this._dataSource.expand(b,a)},collapseAll:function(){this.useAnimation=false;this._dataSource.collapseAll();this.useAnimation=true},expandAll:function(){this.useAnimation=false;this._dataSource.expandAll();this.useAnimation=true},expandLevel:function(a){this.useAnimation=false;this._dataSource.expandLevel(a);this.useAnimation=true},collapseLevel:function(a){this.useAnimation=false;this._dataSource.collapseLevel(a);this.useAnimation=true},expandPath:function(a){this.useAnimation=false;this._dataSource.expandPath(a);this.useAnimation=true},collapsePath:function(a){this.useAnimation=false;this._dataSource.collapsePath(a);this.useAnimation=true},loadNode:function(b,a){this._dataSource.loadNode(b,a)},setCheckModel:function(a){this._dataSource.setCheckModel(a)},getCheckModel:function(){return this._dataSource.getCheckModel()},setOnlyLeafCheckable:function(a){this._dataSource.setOnlyLeafCheckable(a)},getOnlyLeafCheckable:function(){return this._dataSource.getOnlyLeafCheckable()},setAutoCheckParent:function(a){this._dataSource.setAutoCheckParent(a)},getAutoCheckParent:function(){return this._dataSource.getAutoCheckParent()},checkNode:function(b,a){this._dataSource.checkNode(b,a)},uncheckNode:function(b,a){this._dataSource.uncheckNode(b,a)},checkNodes:function(b,a){this._dataSource.checkNodes(b,a)},uncheckNodes:function(b,a){this._dataSource.uncheckNodes(b,a)},checkAllNodes:function(){this._dataSource.checkAllNodes()},uncheckAllNodes:function(){this._dataSource.uncheckAllNodes()},getCheckedNodes:function(){return this._dataSource.getCheckedNodes.apply(this._dataSource,arguments)},getCheckedNodesId:function(){return this._dataSource.getCheckedNodesId.apply(this._dataSource,arguments)},getCheckedNodesText:function(){return this._dataSource.getCheckedNodesText.apply(this._dataSource,arguments)},getNodesByValue:function(g){if(mini.isNull(g)){g=""}g=String(g);var b=[];var d=String(g).split(",");for(var c=0,a=d.length;c<a;c++){var f=this.getNode(d[c]);if(f){b.push(f)}}return b},isChecked:function(a){return this._dataSource.isChecked.apply(this._dataSource,arguments)},getCheckState:function(a){return this._dataSource.getCheckState.apply(this._dataSource,arguments)},setCheckable:function(b,a){this._dataSource.setCheckable.apply(this._dataSource,arguments)},getCheckable:function(a){return this._dataSource.getCheckable.apply(this._dataSource,arguments)},bubbleParent:function(c,b,a){this._dataSource.bubbleParent.apply(this._dataSource,arguments)},cascadeChild:function(c,b,a){this._dataSource.cascadeChild.apply(this._dataSource,arguments)},eachChild:function(c,b,a){this._dataSource.eachChild.apply(this._dataSource,arguments)}};mini.ColumnModel=function(a){this.owner=a;mini.ColumnModel.superclass.constructor.apply(this,arguments);this._init()};mini.ColumnModel_ColumnID=1;mini.extend(mini.ColumnModel,mini.Component,{_defaultColumnWidth:100,_init:function(){this.columns=[];this._columnsRow=[];this._visibleColumnsRow=[];this._bottomColumns=[];this._visibleColumns=[];this._idColumns={};this._nameColumns={};this._fieldColumns={}},getColumns:function(){return this.columns},getAllColumns:function(){var a=[];for(var c in this._idColumns){var b=this._idColumns[c];a.push(b)}return a},getColumnsRow:function(){return this._columnsRow},getVisibleColumnsRow:function(){return this._visibleColumnsRow},getBottomColumns:function(){return this._bottomColumns},getVisibleColumns:function(){return this._visibleColumns},_getBottomColumnsByColumn:function(g){g=this.getColumn(g);var d=this._bottomColumns;var f=[];for(var b=0,a=d.length;b<a;b++){var j=d[b];if(this.isAncestorColumn(g,j)){f.push(j)}}return f},_getVisibleColumnsByColumn:function(g){g=this.getColumn(g);var d=this._visibleColumns;var f=[];for(var b=0,a=d.length;b<a;b++){var j=d[b];if(this.isAncestorColumn(g,j)){f.push(j)}}return f},setColumns:function(a){if(!mini.isArray(a)){a=[]}this._init();this.columns=a;this._columnsChanged()},_columnsChanged:function(){this._updateColumnsView();this.fire("columnschanged")},_updateColumnsView:function(){this._maxColumnLevel=0;var level=0;function init(column,index,parentColumn){if(column.type){if(!mini.isNull(column.header)&&typeof column.header!=="function"){if(column.header.trim()==""){delete column.header}}var col=mini._getColumn(column.type);if(col){var _column=mini.copyTo({},column);mini.copyTo(column,col);mini.copyTo(column,_column)}}if(!column._id){column._id=mini.ColumnModel_ColumnID++}column._pid=parentColumn==this?-1:parentColumn._id;this._idColumns[column._id]=column;if(column.name){this._nameColumns[column.name]=column}column._level=level;level+=1;this.eachColumns(column,init,this);level-=1;if(column._level>this._maxColumnLevel){this._maxColumnLevel=column._level}var width=parseInt(column.width);if(mini.isNumber(width)&&String(width)==column.width){column.width=width+"px"}if(mini.isNull(column.width)){column.width=this._defaultColumnWidth+"px"}column.visible=column.visible!==false;column.allowResize=column.allowResize!==false;column.allowMove=column.allowMove!==false;column.allowSort=column.allowSort===true;column.allowDrag=!!column.allowDrag;column.readOnly=!!column.readOnly;column.autoEscape=!!column.autoEscape;column.enabled=column.enabled!==false;column.showCellTip=column.showCellTip!==false;column.vtype=column.vtype||"";if(typeof column.filter=="string"){column.filter=eval("("+column.filter+")")}if(column.filter&&!column.filter.el){column.filter=mini.create(column.filter)}if(typeof column.init=="function"&&column.inited!=true){column.init(this.owner)}column.inited=true;column._gridUID=this.owner.uid;column._rowIdField=this.owner._rowIdField}this.eachColumns(this,init,this);this._createColumnsRow();var index=0;var view=this._visibleColumns=[];var bottoms=this._bottomColumns=[];this.cascadeColumns(this,function(column){if(!column.columns||column.columns.length==0){bottoms.push(column);if(this.isVisibleColumn(column)){view.push(column);column._index=index++}}},this);this._fieldColumns={};var columns=this.getAllColumns();for(var i=0,l=columns.length;i<l;i++){var column=columns[i];if(column.field&&!this._fieldColumns[column.field]){this._fieldColumns[column.field]=column}}this._createFrozenColSpan()},_frozenStartColumn:-1,_frozenEndColumn:-1,isFrozen:function(){return this._frozenStartColumn>=0&&this._frozenEndColumn>=this._frozenStartColumn},isFrozenColumn:function(b){if(!this.isFrozen()){return false}b=this.getColumn(b);if(!b){return false}var a=this.getVisibleColumns().indexOf(b);return this._frozenStartColumn<=a&&a<=this._frozenEndColumn},frozen:function(b,c){b=this.getColumn(b);c=this.getColumn(c);var a=this.getVisibleColumns();this._frozenStartColumn=a.indexOf(b);this._frozenEndColumn=a.indexOf(c);if(b&&c){this._columnsChanged()}},unFrozen:function(){this._frozenStartColumn=-1;this._frozenEndColumn=-1;this._columnsChanged()},setFrozenStartColumn:function(a){this.frozen(a,this._frozenEndColumn)},setFrozenEndColumn:function(a){this.frozen(this._frozenStartColumn,a)},getFrozenColumns:function(){var c=[],d=this.isFrozen();for(var b=0,a=this._visibleColumns.length;b<a;b++){if(d&&this._frozenStartColumn<=b&&b<=this._frozenEndColumn){c.push(this._visibleColumns[b])}}return c},getUnFrozenColumns:function(){var c=[],d=this.isFrozen();for(var b=0,a=this._visibleColumns.length;b<a;b++){if((d&&b>this._frozenEndColumn)||!d){c.push(this._visibleColumns[b])}}return c},getFrozenColumnsRow:function(){return this.isFrozen()?this._columnsRow1:[]},getUnFrozenColumnsRow:function(){return this.isFrozen()?this._columnsRow2:this.getVisibleColumnsRow()},_createFrozenColSpan:function(){var v=this;var x=this.getVisibleColumns();var a=this._frozenStartColumn,o=this._frozenEndColumn;function w(C,z){var B=v.isBottomColumn(C)?[C]:v._getVisibleColumnsByColumn(C);for(var A=0,j=B.length;A<j;A++){var D=B[A];var k=x.indexOf(D);if(z==0&&k<a){return true}if(z==1&&a<=k&&k<=o){return true}if(z==2&&k>o){return true}}return false}function b(A,z){var j=mini.treeToList(A.columns,"columns");var C=0;for(var B=0,k=j.length;B<k;B++){var D=j[B];if(v.isVisibleColumn(D)==false||w(D,z)==false){continue}if(!D.columns||D.columns.length==0){C+=1}}return C}var r=mini.treeToList(this.columns,"columns");for(var q=0,g=r.length;q<g;q++){var f=r[q];delete f.colspan0;delete f.colspan1;delete f.colspan2;delete f.viewIndex0;delete f.viewIndex1;delete f.viewIndex2;if(this.isFrozen()){if(f.columns&&f.columns.length>0){f.colspan1=b(f,1);f.colspan2=b(f,2);f.colspan0=b(f,0)}else{f.colspan1=1;f.colspan2=1;f.colspan0=1}if(w(f,0)){f["viewIndex"+0]=true}if(w(f,1)){f["viewIndex"+1]=true}if(w(f,2)){f["viewIndex"+2]=true}}}var y=this._getMaxColumnLevel();this._columnsRow1=[];this._columnsRow2=[];for(var q=0,g=this._visibleColumnsRow.length;q<g;q++){var d=this._visibleColumnsRow[q];var u=[];var s=[];this._columnsRow1.push(u);this._columnsRow2.push(s);for(var p=0,n=d.length;p<n;p++){var t=d[p];if(t.viewIndex1){u.push(t)}if(t.viewIndex2){s.push(t)}}}},_createColumnsRow:function(){var p=this._getMaxColumnLevel();var o=[];var a=[];for(var f=0,d=p;f<=d;f++){o.push([]);a.push([])}var k=this;function b(s){var q=mini.treeToList(s.columns,"columns");var u=0;for(var t=0,r=q.length;t<r;t++){var v=q[t];if(k.isVisibleColumn(v)==false){continue}if(!v.columns||v.columns.length==0){u+=1}}return u}var j=mini.treeToList(this.columns,"columns");for(var f=0,d=j.length;f<d;f++){var c=j[f];var n=o[c._level];var g=a[c._level];delete c.rowspan;delete c.colspan;if(c.columns&&c.columns.length>0){c.colspan=b(c)}if((!c.columns||c.columns.length==0)&&c._level<p){c.rowspan=p-c._level+1}n.push(c);if(this.isVisibleColumn(c)){g.push(c)}}this._columnsRow=o;this._visibleColumnsRow=a},_getMaxColumnLevel:function(){return this._maxColumnLevel},cascadeColumns:function(j,g,f){if(!g){return}var b=j.columns;if(b){b=b.clone();for(var d=0,a=b.length;d<a;d++){var k=b[d];if(g.call(f||this,k,d,j)===false){return}this.cascadeColumns(k,g,f)}}},eachColumns:function(g,f,d){var c=g.columns;if(c){var j=c.clone();for(var b=0,a=j.length;b<a;b++){var k=j[b];if(f.call(d,k,b,g)===false){break}}}},getColumn:function(a){var b=typeof a;if(b=="number"){return this._bottomColumns[a]}else{if(b=="object"){return a}else{return this._nameColumns[a]}}},getColumnByField:function(a){if(!a){return null}return this._fieldColumns[a]},_getColumnById:function(a){return this._idColumns[a]},_getDataTypeByField:function(f){var g="string";var c=this.getBottomColumns();for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d.field==f){if(d.sortType){g=d.sortType.toLowerCase()}else{if(d.dataType){g=d.dataType.toLowerCase()}}break}}return g},getParentColumn:function(b){b=this.getColumn(b);var a=b._pid;if(a==-1){return this}return this._idColumns[a]},getAncestorColumns:function(c){var b=[c];while(1){var a=this.getParentColumn(c);if(!a||a==this){break}b[b.length]=a;c=a}b.reverse();return b},isAncestorColumn:function(a,f){if(a==f){return true}if(!a||!f){return false}var c=this.getAncestorColumns(f);for(var d=0,b=c.length;d<b;d++){if(c[d]==a){return true}}return false},isVisibleColumn:function(g){g=this.getColumn(g);if(g.visible==false){return false}var f=this.getAncestorColumns(g);for(var d=0,a=f.length;d<a;d++){if(f[d].visible==false){return false}}var b=g.columns;if(b){var c=true;for(var d=0,a=b.length;d<a;d++){var j=b[d];if(this.isVisibleColumn(j)){c=false;break}}if(c){return false}}return true},isBottomColumn:function(a){a=this.getColumn(a);return !(a.columns&&a.columns.length>0)},updateColumn:function(b,a){b=this.getColumn(b);if(!b){return}mini.copyTo(b,a);this._columnsChanged()},moveColumn:function(d,c,f){d=this.getColumn(d);c=this.getColumn(c);if(!d||!c||!f||d==c){return}if(this.isAncestorColumn(d,c)){return}var a=this.getParentColumn(d);if(a){a.columns.remove(d)}var g=c;var b=f;if(b=="before"){g=this.getParentColumn(c);b=g.columns.indexOf(c)}else{if(b=="after"){g=this.getParentColumn(c);b=g.columns.indexOf(c)+1}else{if(b=="add"||b=="append"){if(!g.columns){g.columns=[]}b=g.columns.length}else{if(!mini.isNumber(b)){return}}}}g.columns.insert(b,d);this._columnsChanged()},addColumn:function(a){if(!a){return}delete a._id;this._columnsChanged()},removeColumn:function(){this._columnsChanged()}});mini.GridView=function(){this._createTime=new Date();this._createColumnModel();this._bindColumnModel();this.data=[];this._createSource();this._bindSource();this._initData();mini.GridView.superclass.constructor.apply(this,arguments);this._doUpdateFilterRow();this._doUpdateSummaryRow();this.doUpdate()};mini.extend(mini.GridView,mini.Panel,{_displayStyle:"block",_rowIdField:"_id",width:"100%",showColumns:true,showFilterRow:false,showSummaryRow:false,showPager:false,allowCellWrap:false,allowHeaderWrap:false,showModified:true,showNewRow:true,showEmptyText:false,emptyText:"No data returned.",showHGridLines:true,showVGridLines:true,allowAlternating:false,_alternatingCls:"mini-grid-row-alt",_rowCls:"mini-grid-row",_cellCls:"mini-grid-cell",_headerCellCls:"mini-grid-headerCell",_rowSelectedCls:"mini-grid-row-selected",_rowHoverCls:"mini-grid-row-hover",_cellSelectedCls:"mini-grid-cell-selected",defaultRowHeight:21,fixedRowHeight:false,isFixedRowHeight:function(){return this.fixedRowHeight},fitColumns:true,isFitColumns:function(){return this.fitColumns},uiCls:"mini-gridview",_create:function(){mini.GridView.superclass._create.call(this);var g=this.el;mini.addClass(g,"mini-grid");mini.addClass(this._borderEl,"mini-grid-border");mini.addClass(this._viewportEl,"mini-grid-viewport");var a='<div class="mini-grid-pager"></div>';var f='<div class="mini-grid-filterRow"><div class="mini-grid-filterRow-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>';var b='<div class="mini-grid-summaryRow"><div class="mini-grid-summaryRow-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>';var c='<div class="mini-grid-columns"><div class="mini-grid-columns-view"></div><div class="mini-grid-scrollHeaderCell"></div></div>';this._columnsEl=mini.after(this._toolbarEl,c);this._filterEl=mini.after(this._columnsEl,f);this._rowsEl=this._bodyEl;mini.addClass(this._rowsEl,"mini-grid-rows");this._summaryEl=mini.after(this._rowsEl,b);this._bottomPagerEl=mini.after(this._summaryEl,a);this._columnsViewEl=this._columnsEl.childNodes[0];this._topRightCellEl=this._columnsEl.childNodes[1];this._rowsViewEl=mini.append(this._rowsEl,'<div class="mini-grid-rows-view"><div class="mini-grid-rows-content"></div></div>');this._rowsViewContentEl=this._rowsViewEl.firstChild;this._filterViewEl=this._filterEl.childNodes[0];this._summaryViewEl=this._summaryEl.childNodes[0];var d='<a href="#" class="mini-grid-focus" style="position:absolute;left:0px;top:0px;width:0px;height:0px;outline:none;" hideFocus onclick="return false" ></a>';this._focusEl=mini.append(this._borderEl,d)},destroy:function(c){if(this._dataSource){this._dataSource.destroy();this._dataSource=null}if(this._columnModel){this._columnModel.destroy();this._columnModel=null}if(this._pagers){var d=this._pagers.clone();for(var b=0,a=d.length;b<a;b++){d[b].destroy(c)}this._pagers=null}if(this._viewportEl){mini.clearEvent(this._viewportEl)}if(this._rowsViewEl){mini.clearEvent(this._rowsViewEl)}this._columnsEl=this._rowsEl=this._filterEl=this._summaryEl=this._bottomPagerEl=null;this._columnsViewEl=this._topRightCellEl=this._rowsViewEl=this._rowsViewContentEl=null;this._filterViewEl=this._summaryViewEl=this._focusEl=null;this._viewportEl=null;mini.GridView.superclass.destroy.call(this,c)},_initEvents:function(){mini.GridView.superclass._initEvents.call(this);mini.on(this._rowsViewEl,"scroll",this.__OnRowViewScroll,this)},_sizeChanged:function(){mini.GridView.superclass._sizeChanged.call(this);var a=this.isAutoHeight();if(mini.isIE){if(a){mini.addClass(this._rowsViewEl,"mini-grid-hidden-y")}else{mini.removeClass(this._rowsViewEl,"mini-grid-hidden-y")}}},_setBodyWidth:false,doLayout:function(){var g=this;if(!this.canLayout()){return}mini.GridView.superclass.doLayout.call(this);this._stopLayout();var c=this.isAutoHeight();var k=this._columnsViewEl.firstChild;var b=this._rowsViewContentEl.firstChild;var j=this._filterViewEl.firstChild;var a=this._summaryViewEl.firstChild;function f(l){if(this.isFitColumns()){b.style.width="100%";if(mini.isSafari||mini.isChrome||mini.isIE6){l.style.width=b.offsetWidth+"px"}else{if(this._rowsViewEl.scrollHeight>this._rowsViewEl.clientHeight+1){l.style.width="100%";l.parentNode.style.width="auto";l.parentNode.style.paddingRight="17px";if(mini.isIE8){mini.removeClass(this._rowsViewEl,"mini-grid-hidden-y")}}else{l.style.width="100%";l.parentNode.style.width="auto";l.parentNode.style.paddingRight="0px";if(mini.isIE8){mini.addClass(this._rowsViewEl,"mini-grid-hidden-y")}}}}else{b.style.width="0px";l.style.width="0px";if(mini.isSafari||mini.isChrome||mini.isIE6){}else{l.parentNode.style.width="100%";l.parentNode.style.paddingRight="0px"}}}f.call(this,k);f.call(this,j);f.call(this,a);this._syncScroll();var d=this;setTimeout(function(){mini.layout(d._filterEl);mini.layout(d._summaryEl)},10);if(mini.isIE6){setTimeout(function(){f.call(g,k)},1)}if(mini.isIE10){setTimeout(function(){if(d.isFitColumns()){k.style.width="auto";k.offsetWidth;k.style.width="100%"}else{k.style.width="0px"}},0);mini.repaint(b)}},setBody:function(){},_createTopRowHTML:function(c){var g="";if(mini.isIE){if(mini.isIE6||mini.isIE7||!mini.boxModel){g+='<tr style="display:none;height:0px;">'}else{g+='<tr style="height:0px;">'}}else{g+='<tr style="height:0px;">'}g+='<td style="height:0px;width:0;"></td>';for(var b=0,a=c.length;b<a;b++){var f=c[b];var d=f.width;var j=f._id;g+='<td id="'+j+'" style="padding:0;border:0;margin:0;height:0px;';if(f.width){g+="width:"+f.width}g+='" ></td>'}g+='<td style="width:0px;"></td>';g+="</tr>";return g},_createColumnsHTML:function(p,o,x){var x=x?x:this.getVisibleColumns();var b=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];b.push(this._createTopRowHTML(x));var y=this.getSortField();var r=this.getSortOrder();for(var u=0,t=p.length;u<t;u++){var f=p[u];b[b.length]="<tr>";b[b.length]='<td style="width:0;"></td>';for(var v=0,s=f.length;v<s;v++){var g=f[v];var w=g.sortField||g.field;var d=this._createHeaderText(g,o);var a=this._createHeaderCellId(g,o);var n="";if(y&&y==w){n=r=="asc"?"mini-grid-asc":"mini-grid-desc"}var c="";if(this.allowHeaderWrap==false){c=" mini-grid-headerCell-nowrap "}b[b.length]='<td id="';b[b.length]=a;b[b.length]='" class="mini-grid-headerCell '+n+" "+(g.headerCls||"")+" ";var q=!(g.columns&&g.columns.length>0);if(q){b[b.length]=" mini-grid-bottomCell "}if(v==s-1){b[b.length]=" mini-grid-rightCell "}b[b.length]='" style="';if(g.headerStyle){b[b.length]=g.headerStyle+";"}if(g.headerAlign){b[b.length]="text-align:"+g.headerAlign+";"}b[b.length]='" ';if(g.rowspan){b[b.length]='rowspan="'+g.rowspan+'" '}this._createColumnColSpan(g,b,o);b[b.length]='><div class="mini-grid-headerCell-outer"><div class="mini-grid-headerCell-inner '+c+'">';b[b.length]=d;if(n){b[b.length]='<span class="mini-grid-sortIcon"></span>'}b[b.length]='</div><div id="'+g._id+'" class="mini-grid-column-splitter"></div>';b[b.length]="</div></td>"}if(this.isFrozen()&&o==1){b[b.length]='<td class="mini-grid-headerCell" style="width:0;"><div class="mini-grid-headerCell-inner" style="';b[b.length]='">0</div></td>'}b[b.length]="</tr>"}b.push("</table>");return b.join("")},_createHeaderText:function(b,a){var c=b.header;if(typeof c=="function"){c=c.call(this,b)}if(mini.isNull(c)||c===""){c="&nbsp;"}return c},_createColumnColSpan:function(b,c,a){if(b.colspan){c[c.length]='colspan="'+b.colspan+'" '}},doUpdateColumns:function(){var d=this._columnsViewEl.scrollLeft;var c=this.getVisibleColumnsRow();var a=this._createColumnsHTML(c,2);var b='<div class="mini-grid-topRightCell"></div>';a+=b;this._columnsViewEl.innerHTML=a;this._columnsViewEl.scrollLeft=d},doUpdate:function(){if(this.canUpdate()==false){return}var c=this;var f=this._isCreating();var b=new Date();this._doUpdateSummaryRow();var a=this;var d=this.getScrollLeft();function g(){if(!a.el){return}a.doUpdateColumns();a.doUpdateRows();a.doLayout();a._doUpdateTimer=null}a.doUpdateColumns();if(f){this._useEmptyView=true}if(this._rowsViewContentEl&&this._rowsViewContentEl.firstChild){this._rowsViewContentEl.removeChild(this._rowsViewContentEl.firstChild)}if(this._rowsLockContentEl&&this._rowsLockContentEl.firstChild){this._rowsLockContentEl.removeChild(this._rowsLockContentEl.firstChild)}a.doUpdateRows();if(d>0&&a.isVirtualScroll()){a.setScrollLeft(d)}if(f){this._useEmptyView=false}a.doLayout();if(f&&!this._doUpdateTimer){this._doUpdateTimer=setTimeout(g,15)}this.unmask();if(c._fireUpdateTimer){clearTimeout(c._fireUpdateTimer);c._fireUpdateTimer=null}c._fireUpdateTimer=setTimeout(function(){c._fireUpdateTimer=null;c.fire("update")},100)},_isCreating:function(){return(new Date()-this._createTime)<1000},deferUpdate:function(b){if(!b){b=5}if(this._updateTimer||this._doUpdateTimer){return}var a=this;this._updateTimer=setTimeout(function(){a._updateTimer=null;a.doUpdate()},b)},_pushUpdateCallback:function(c,b,a){var d=0;if(this._doUpdateTimer||this._updateTimer){d=20}if(d==0){c.apply(b,a)}else{setTimeout(function(){c.apply(b,a)},d)}},_updateCount:0,beginUpdate:function(){this._updateCount++},endUpdate:function(a){this._updateCount--;if(this._updateCount==0||a===true){this._updateCount=0;this.doUpdate()}},canUpdate:function(){return this._updateCount==0},setDefaultRowHeight:function(a){this.defaultRowHeight=a},getDefaultRowHeight:function(){return this.defaultRowHeight},_getRowHeight:function(a){var b=this.defaultRowHeight;if(a._height){b=parseInt(a._height);if(isNaN(parseInt(a._height))){b=rowHeight}}b-=4;b-=1;return b},_createGroupingHTML:function(g,v){var f=this.getGroupingView();var b=this._showGroupSummary;var q=this.isFrozen();var t=0;var r=this;function p(z,A){s.push('<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">');if(g.length>0){s.push(r._createTopRowHTML(g));for(var y=0,x=z.length;y<x;y++){var B=z[y];r._createRowHTML(B,t++,g,v,s)}}if(b){}s.push("</table>")}var s=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];s.push(this._createTopRowHTML(g));for(var n=0,l=f.length;n<l;n++){if(v==1&&!this.isFrozen()){continue}var u=f[n];var d=this._createRowGroupId(u,v);var c=this._createRowGroupRowsId(u,v);var o=this._OnDrawGroup(u);var w=u.expanded?"":" mini-grid-group-collapse ";s[s.length]='<tr id="';s[s.length]=d;s[s.length]='" class="mini-grid-groupRow';s[s.length]=w;s[s.length]='"><td style="width:0;"></td><td class="mini-grid-groupCell ';s[s.length]=o.cls;s[s.length]='" style="';s[s.length]=o.style;s[s.length]='" colspan="';s[s.length]=g.length;s[s.length]='"><div class="mini-grid-groupHeader">';if(!q||(q&&v==1)){s[s.length]='<div class="mini-grid-group-ecicon"></div>';s[s.length]='<div class="mini-grid-groupTitle">'+o.cellHtml+"</div>"}else{s[s.length]="&nbsp;"}s[s.length]="</div></td></tr>";var a=u.expanded?"":"display:none";s[s.length]='<tr class="mini-grid-groupRows-tr" style="';s[s.length]='"><td style="width:0;"></td><td class="mini-grid-groupRows-td" colspan="';s[s.length]=g.length;s[s.length]='"><div id="';s[s.length]=c;s[s.length]='" class="mini-grid-groupRows" style="';s[s.length]=a;s[s.length]='">';p(u.rows,u);s[s.length]="</div></td></tr>"}s.push("</table>");return s.join("")},_isFastCreating:function(){var a=this.getVisibleRows();if(a.length>50){return this._isCreating()||this.getScrollTop()<50*this._defaultRowHeight}return false},isShowRowDetail:function(a){return false},isCellValid:function(a,b){return true},_createRowHTML:function(g,t,d,q,a){var p=!a;if(!a){a=[]}var f="";var x=this.isFixedRowHeight();if(x){f=this._getRowHeight(g)}var n=-1;var v=" ";var k=-1;var A=" ";a[a.length]='<tr class="mini-grid-row ';if(g._state=="added"&&this.showNewRow){a[a.length]="mini-grid-newRow "}if(this.isShowRowDetail(g)){a[a.length]="mini-grid-expandRow "}if(this.allowAlternating&&t%2==1){a[a.length]=this._alternatingCls;a[a.length]=" "}var r=this._dataSource.isSelected(g);if(r){a[a.length]=this._rowSelectedCls;a[a.length]=" "}n=a.length;a[a.length]=v;a[a.length]='" style="';k=a.length;a[a.length]=A;if(g.visible===false){a[a.length]=";display:none;"}a[a.length]='" id="';a[a.length]=this._createRowId(g,q);a[a.length]='">';a[a.length]='<td style="width:0;"></td>';var C=this._currentCell;for(var y=0,w=d.length;y<w;y++){var j=d[y];var B=this._createCellId(g,j);var c="";var z=this._OnDrawCell(g,j,t,j._index);if(z.cellHtml===null||z.cellHtml===undefined||z.cellHtml===""){z.cellHtml="&nbsp;"}a[a.length]="<td ";if(z.rowSpan){a[a.length]='rowspan="'+z.rowSpan+'"'}if(z.colSpan){a[a.length]='colspan="'+z.colSpan+'"'}a[a.length]=' id="';a[a.length]=B;a[a.length]='" class="mini-grid-cell ';if(!this.isCellValid(g,j)){a[a.length]=" mini-grid-cell-error "}if(y==w-1){a[a.length]=" mini-grid-rightCell "}if(z.cellCls){a[a.length]=" "+z.cellCls+" "}if(c){a[a.length]=c}if(C&&C[0]==g&&C[1]==j){a[a.length]=" ";a[a.length]=this._cellSelectedCls}a[a.length]='" style="';if(z.showHGridLines==false){a[a.length]="border-bottom:0;"}if(z.showVGridLines==false){a[a.length]="border-right:0;"}if(!z.visible){a[a.length]="display:none;"}if(j.align){a[a.length]="text-align:";a[a.length]=j.align;a[a.length]=";"}if(z.cellStyle){a[a.length]=z.cellStyle}a[a.length]='">';a[a.length]='<div class="mini-grid-cell-inner ';if(!z.allowCellWrap){a[a.length]=" mini-grid-cell-nowrap "}if(z.cellInnerCls){a[a.length]=z.cellInnerCls}var b=j.field?this._dataSource.isModified(g,j.field):false;if(b&&this.showModified){a[a.length]=" mini-grid-cell-dirty"}a[a.length]='" style="';if(x){a[a.length]="height:";a[a.length]=f;a[a.length]="px;";a[a.length]="line-height:";a[a.length]=f;a[a.length]="px;"}if(z.cellInnerStyle){a[a.length]=z.cellInnerStyle}a[a.length]='">';a[a.length]=z.cellHtml;a[a.length]="</div>";a[a.length]="</td>";if(z.rowCls){v=z.rowCls}if(z.rowStyle){A=z.rowStyle}}if(this.isFrozen()&&q==1){a[a.length]='<td class="mini-grid-cell" style="width:0;';if(this.showHGridLines==false){a[a.length]="border-bottom:0;"}a[a.length]='"><div class="mini-grid-cell-inner" style="';if(x){a[a.length]="height:";a[a.length]=f;a[a.length]="px;"}a[a.length]='">0</div></td>'}a[n]=v;a[k]=A;a[a.length]="</tr>";if(p){var u=a.join("");var o=/(<script(.*)<\/script(\s*)>)/i;u=u.replace(o,"");return u}},_createRowsHTML:function(b,s,f,p){f=f||this.getVisibleRows();var o=['<table class="mini-grid-table mini-grid-rowstable" cellspacing="0" cellpadding="0" border="0">'];o.push(this._createTopRowHTML(b,true));var q=this.uid+"$emptytext"+s;if(s==2&&this._dataSource.loaded){var a=(this.showEmptyText&&f.length==0)?"":"display:none;";o.push('<tr id="'+q+'" style="'+a+'"><td style="width:0"></td><td class="mini-grid-emptyText" colspan="'+b.length+'">'+this.emptyText+"</td></tr>")}var r=0;if(f.length>0){var l=f[0];r=this.getVisibleRows().indexOf(l)}for(var d=0,c=f.length;d<c;d++){var n=r+d;var g=f[d];this._createRowHTML(g,n,b,s,o)}if(p){o.push(p)}o.push("</table>");return o.join("")},doUpdateRows:function(){var d=this.getVisibleRows();var c=new Date();var b=this.getVisibleColumns();if(this.isGrouping()){var a=this._createGroupingHTML(b,2);this._rowsViewContentEl.innerHTML=a}else{var a=this._createRowsHTML(b,2,d);this._rowsViewContentEl.innerHTML=a}},_createFilterRowHTML:function(d,b){var k=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];k.push(this._createTopRowHTML(d));k[k.length]="<tr>";k[k.length]='<td style="width:0;"></td>';for(var c=0,a=d.length;c<a;c++){var g=d[c];var j=this._createFilterCellId(g);k[k.length]='<td id="';k[k.length]=j;k[k.length]='" class="mini-grid-filterCell" style="';k[k.length]='">&nbsp;</td>'}k[k.length]='</tr></table><div class="mini-grid-scrollHeaderCell"></div>';var f=k.join("");return f},_doRenderFilters:function(){var d=this.getVisibleColumns();for(var c=0,a=d.length;c<a;c++){var f=d[c];if(f.filter){var b=this.getFilterCellEl(f);if(b){b.innerHTML="";f.filter.render(b)}}}},_doUpdateFilterRow:function(){if(this._filterViewEl.firstChild){this._filterViewEl.removeChild(this._filterViewEl.firstChild)}var c=this.isFrozen();var b=this.getVisibleColumns();var a=this._createFilterRowHTML(b,2);this._filterViewEl.innerHTML=a;this._doRenderFilters()},_createSummaryRowHTML:function(d,n){var b=this.getDataView();var k=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];k.push(this._createTopRowHTML(d));k[k.length]="<tr>";k[k.length]='<td style="width:0;"></td>';for(var g=0,f=d.length;g<f;g++){var c=d[g];var a=this._createSummaryCellId(c);var j=this._OnDrawSummaryCell(b,c);k[k.length]='<td id="';k[k.length]=a;k[k.length]='" class="mini-grid-summaryCell '+j.cellCls+'" style="'+j.cellStyle+";";k[k.length]='">';k[k.length]=j.cellHtml;k[k.length]="</td>"}k[k.length]='</tr></table><div class="mini-grid-scrollHeaderCell"></div>';var o=k.join("");return o},_doUpdateSummaryRow:function(){var b=this.getVisibleColumns();var a=this._createSummaryRowHTML(b,2);this._summaryViewEl.innerHTML=a},_doSortByField:function(b,c){if(!b){return null}var a=this._columnModel._getDataTypeByField(b);this._dataSource._doClientSortField(b,c,a)},_expandGroupOnLoad:true,_GroupID:1,_groupField:"",_groupDir:"",groupBy:function(b,a){if(!b){return}this._groupField=b;if(typeof a=="string"){a=a.toLowerCase()}this._groupDir=a;this._createGroupingView();this.deferUpdate()},clearGroup:function(){this._groupField="";this._groupDir="";this._groupDataView=null;this.deferUpdate()},setGroupField:function(a){this.groupBy(a)},setGroupDir:function(a){this._groupDir=field;this.groupBy(this._groupField,a)},isGrouping:function(){return this._groupField!=""},getGroupingView:function(){return this._groupDataView},enableGroupOrder:true,_createGroupingView:function(){if(this.isGrouping()==false){return}this._groupDataView=null;var a=this._dataSource;var u=this._groupField,g=this._groupDir;if(this.enableGroupOrder){this._doSortByField(u,g)}var k=this.getVisibleRows();var f=[];var q={};for(var n=0,j=k.length;n<j;n++){var d=k[n];var x=d[u];var b=mini.isDate(x)?x.getTime():x;var w=q[b];if(!w){w=q[b]={};w.field=u,w.dir=g;w.value=x;w.rows=[];f.push(w);w.id="g"+this._GroupID++;w.expanded=this._expandGroupOnLoad}w.rows.push(d)}var s=a.sortField,c=a.sortOrder;if(s){var t=this._columnModel._getDataTypeByField(s);var y=a._getSortFnByField(s,t);if(y){var r=c=="desc";for(var n=0,j=f.length;n<j;n++){var w=f[n];mini.sort(w.rows,y);if(r){w.rows.reverse()}}}}this._groupDataView=f},_OnDrawGroup:function(b){var a={group:b,rows:b.rows,field:b.field,dir:b.dir,value:b.value,cls:"",style:"",cellHtml:b.field+" ("+b.rows.length+" Items)"};this.fire("drawgroup",a);return a},getRowGroup:function(b){var a=typeof b;if(a=="number"){return this.getGroupingView()[b]}if(a=="string"){return this._getRowGroupById(b)}return b},_getRowGroupByEvent:function(c){var a=mini.findParent(c.target,"mini-grid-groupRow");if(a){var b=a.id.split("$");if(b[0]!=this._id){return null}var d=b[b.length-1];return this._getRowGroupById(d)}return null},_getRowGroupById:function(f){var a=this.getGroupingView();for(var c=0,b=a.length;c<b;c++){var d=a[c];if(d.id==f){return d}}return null},_createRowGroupId:function(b,a){return this._id+"$group"+a+"$"+b.id},_createRowGroupRowsId:function(b,a){return this._id+"$grouprows"+a+"$"+b.id},_createRowId:function(b,a){var c=this._id+"$row"+a+"$"+b._id;return c},_createHeaderCellId:function(b,a){var c=this._id+"$headerCell"+a+"$"+b._id;return c},_createCellId:function(b,a){var c=b._id+"$cell$"+a._id;return c},_createFilterCellId:function(a){return this._id+"$filter$"+a._id},_createSummaryCellId:function(a){return this._id+"$summary$"+a._id},getFilterCellEl:function(a){a=this.getColumn(a);if(!a){return null}return document.getElementById(this._createFilterCellId(a))},getSummaryCellEl:function(a){a=this.getColumn(a);if(!a){return null}return document.getElementById(this._createSummaryCellId(a))},_doVisibleEls:function(){mini.GridView.superclass._doVisibleEls.call(this);this._columnsEl.style.display=this.showColumns?"block":"none";this._filterEl.style.display=this.showFilterRow?"block":"none";this._summaryEl.style.display=this.showSummaryRow?"block":"none";this._bottomPagerEl.style.display=this.showPager?"block":"none"},setShowColumns:function(a){this.showColumns=a;this._doVisibleEls();this.deferLayout()},setShowFilterRow:function(a){this.showFilterRow=a;this._doVisibleEls();this.deferLayout()},setShowSummaryRow:function(a){this.showSummaryRow=a;this._doVisibleEls();this.deferLayout()},setShowPager:function(a){this.showPager=a;this._doVisibleEls();this.deferLayout()},setFitColumns:function(a){this.fitColumns=a;mini.removeClass(this.el,"mini-grid-fixwidth");if(this.fitColumns==false){mini.addClass(this.el,"mini-grid-fixwidth")}this.deferLayout()},getBodyHeight:function(b){var a=mini.GridView.superclass.getBodyHeight.call(this,b);a=a-this.getColumnsHeight()-this.getFilterHeight()-this.getSummaryHeight()-this.getPagerHeight();return a},getColumnsHeight:function(){if(!this.showColumns){return 0}var a=mini.getHeight(this._columnsEl);return a},getFilterHeight:function(){return this.showFilterRow?mini.getHeight(this._filterEl):0},getSummaryHeight:function(){return this.showSummaryRow?mini.getHeight(this._summaryEl):0},getPagerHeight:function(){return this.showPager?mini.getHeight(this._bottomPagerEl):0},getGridViewBox:function(c){var b=mini.getBox(this._columnsEl);var a=mini.getBox(this._bodyEl);b.height=a.bottom-b.top;b.bottom=b.top+b.height;return b},getSortField:function(a){return this._dataSource.sortField},getSortOrder:function(a){return this._dataSource.sortOrder},_createSource:function(){this._dataSource=new mini.DataTable()},_bindSource:function(){var a=this._dataSource;a.on("loaddata",this.__OnSourceLoadData,this);a.on("cleardata",this.__OnSourceClearData,this)},__OnSourceLoadData:function(a){this._initData();this.doUpdate()},__OnSourceClearData:function(a){this._initData();this.doUpdate()},_initData:function(){},isFrozen:function(){var b=this._columnModel._frozenStartColumn,a=this._columnModel._frozenEndColumn;return this._columnModel.isFrozen()},_createColumnModel:function(){this._columnModel=new mini.ColumnModel(this)},_bindColumnModel:function(){this._columnModel.on("columnschanged",this.__OnColumnsChanged,this)},__OnColumnsChanged:function(a){this.columns=this._columnModel.columns;this._doUpdateFilterRow();this._doUpdateSummaryRow();this.doUpdate();this.fire("columnschanged")},setColumns:function(a){this._columnModel.setColumns(a);this.columns=this._columnModel.columns},getColumns:function(){return this._columnModel.getColumns()},getBottomColumns:function(){return this._columnModel.getBottomColumns()},getVisibleColumnsRow:function(){var a=this._columnModel.getVisibleColumnsRow().clone();return a},getVisibleColumns:function(){var a=this._columnModel.getVisibleColumns().clone();return a},getFrozenColumns:function(){var a=this._columnModel.getFrozenColumns().clone();return a},getUnFrozenColumns:function(){var a=this._columnModel.getUnFrozenColumns().clone();return a},getColumn:function(a){return this._columnModel.getColumn(a)},updateColumn:function(b,a){this._columnModel.updateColumn(b,a)},showColumns:function(c){for(var b=0,a=c.length;b<a;b++){var d=this.getColumn(c[b]);if(!d){continue}d.visible=true}this._columnModel._columnsChanged()},hideColumns:function(c){for(var b=0,a=c.length;b<a;b++){var d=this.getColumn(c[b]);if(!d){continue}d.visible=false}this._columnModel._columnsChanged()},showColumn:function(a){this.updateColumn(a,{visible:true})},hideColumn:function(a){this.updateColumn(a,{visible:false})},moveColumn:function(b,a,c){this._columnModel.moveColumn(b,a,c)},removeColumn:function(b){b=this.getColumn(b);if(!b){return}var a=this.getParentColumn(b);if(b&&a){a.columns.remove(b);this._columnModel._columnsChanged()}return b},setDefaultColumnWidth:function(a){this._columnModel._defaultColumnWidth=a},getDefaultColumnWidth:function(){return this._columnModel._defaultColumnWidth},setColumnWidth:function(b,a){this.updateColumn(b,{width:a})},getColumnWidth:function(a){var b=this.getColumnBox(a);return b.width},getParentColumn:function(a){return this._columnModel.getParentColumn(a)},getMaxColumnLevel:function(){return this._columnModel._getMaxColumnLevel()},_isCellVisible:function(b,a){return true},_createDrawCellEvent:function(b,d,j,c){var f=mini._getMap(d.field,b);var g={sender:this,rowIndex:j,columnIndex:c,record:b,row:b,column:d,field:d.field,value:f,cellHtml:f,rowCls:"",rowStyle:null,cellCls:d.cellCls||"",cellStyle:d.cellStyle||"",allowCellWrap:this.allowCellWrap,showHGridLines:this.showHGridLines,showVGridLines:this.showVGridLines,cellInnerCls:"",cellInnnerStyle:"",autoEscape:d.autoEscape};g.visible=this._isCellVisible(j,c);if(g.visible==true&&this._mergedCellMaps){var a=this._mergedCellMaps[j+":"+c];if(a){g.rowSpan=a.rowSpan;g.colSpan=a.colSpan}}return g},_OnDrawCell:function(c,a,k,f){var d=this._createDrawCellEvent(c,a,k,f);var l=d.value;if(a.dateFormat){if(mini.isDate(d.value)){d.cellHtml=mini.formatDate(l,a.dateFormat)}else{d.cellHtml=l}}if(a.dataType=="float"){var l=parseFloat(d.value);if(!isNaN(l)){decimalPlaces=parseInt(a.decimalPlaces);if(isNaN(decimalPlaces)){decimalPlaces=2}d.cellHtml=l.toFixed(decimalPlaces)}}if(a.dataType=="currency"){d.cellHtml=mini.formatCurrency(d.value,a.currencyUnit)}if(a.displayField){d.cellHtml=mini._getMap(a.displayField,c)}if(a.numberFormat){var b=parseFloat(d.cellHtml);if(!isNaN(b)){d.cellHtml=mini.formatNumber(b,a.numberFormat)}}if(d.autoEscape==true){d.cellHtml=mini.htmlEncode(d.cellHtml)}var g=a.renderer;if(g){var j=typeof g=="function"?g:mini._getFunctoin(g);if(j){d.cellHtml=j.call(a,d)}}d.cellHtml=d.cellHtml?String(d.cellHtml).trim():"";this.fire("drawcell",d);if(d.cellHtml&&!!d.cellHtml.unshift&&d.cellHtml.length==0){d.cellHtml="&nbsp;"}if(d.cellHtml===null||d.cellHtml===undefined||d.cellHtml===""){d.cellHtml="&nbsp;"}return d},_OnDrawSummaryCell:function(a,c){var g={result:this.getResultObject(),sender:this,data:a,column:c,field:c.field,value:"",cellHtml:"",cellCls:c.cellCls||"",cellStyle:c.cellStyle||"",allowCellWrap:this.allowCellWrap};if(c.summaryType){var b=mini.summaryTypes[c.summaryType];if(b){g.value=b(a,c.field)}}var f=g.value;g.cellHtml=g.value;if(g.value&&parseInt(g.value)!=g.value&&g.value.toFixed){decimalPlaces=parseInt(c.decimalPlaces);if(isNaN(decimalPlaces)){decimalPlaces=2}g.cellHtml=parseFloat(g.value.toFixed(decimalPlaces))}if(c.dateFormat){if(mini.isDate(g.value)){g.cellHtml=mini.formatDate(f,c.dateFormat)}else{g.cellHtml=f}}if(g.cellHtml){if(c.dataType=="currency"){g.cellHtml=mini.formatCurrency(g.cellHtml,c.currencyUnit)}}var d=c.summaryRenderer;if(d){b=typeof d=="function"?d:window[d];if(b){g.cellHtml=b.call(c,g)}}c.summaryValue=g.value;this.fire("drawsummarycell",g);if(g.cellHtml===null||g.cellHtml===undefined||g.cellHtml===""){g.cellHtml="&nbsp;"}return g},getScrollTop:function(){return this._rowsViewEl.scrollTop},setScrollTop:function(a){this._rowsViewEl.scrollTop=a},getScrollLeft:function(){return this._rowsViewEl.scrollLeft},setScrollLeft:function(a){this._rowsViewEl.scrollLeft=a},_syncScroll:function(){var a=this._rowsViewEl.scrollLeft;this._filterViewEl.scrollLeft=a;this._summaryViewEl.scrollLeft=a;this._columnsViewEl.scrollLeft=a},__OnRowViewScroll:function(a){this._syncScroll()},_pagers:[],_createPagers:function(){this._pagers=[];var a=new mini.Pager();this._setBottomPager(a)},_setBottomPager:function(a){a=mini.create(a);if(!a){return}if(this._bottomPager){this.unbindPager(this._bottomPager);this._bottomPagerEl.removeChild(this._bottomPager.el)}this._bottomPager=a;a.render(this._bottomPagerEl);this.bindPager(a)},bindPager:function(a){this._pagers.add(a)},unbindPager:function(a){this._pagers.remove(a)},setShowEmptyText:function(a){this.showEmptyText=a;if(this.data.length==0){this.deferUpdate()}},getShowEmptyText:function(){return this.showEmptyText},setEmptyText:function(a){this.emptyText=a},getEmptyText:function(){return this.emptyText},setShowModified:function(a){this.showModified=a},getShowModified:function(){return this.showModified},setShowNewRow:function(a){this.showNewRow=a},getShowNewRow:function(){return this.showNewRow},setAllowCellWrap:function(a){this.allowCellWrap=a},getAllowCellWrap:function(){return this.allowCellWrap},setAllowHeaderWrap:function(a){this.allowHeaderWrap=a},getAllowHeaderWrap:function(){return this.allowHeaderWrap},setEnableGroupOrder:function(a){this.enableGroupOrder=a},getEnableGroupOrder:function(){return this.enableGroupOrder},setShowHGridLines:function(a){if(this.showHGridLines!=a){this.showHGridLines=a;this.deferUpdate()}},getShowHGridLines:function(){return this.showHGridLines},setShowVGridLines:function(a){if(this.showVGridLines!=a){this.showVGridLines=a;this.deferUpdate()}},getShowVGridLines:function(){return this.showVGridLines}});mini.copyTo(mini.GridView.prototype,mini._DataTableApplys);mini.regClass(mini.GridView,"gridview");mini.FrozenGridView=function(){mini.FrozenGridView.superclass.constructor.apply(this,arguments)};mini.extend(mini.FrozenGridView,mini.GridView,{isFixedRowHeight:function(){return this.fixedRowHeight},frozenPosition:"left",isRightFrozen:function(){return this.frozenPosition=="right"},_create:function(){mini.FrozenGridView.superclass._create.call(this);var c=this.el;var b='<div class="mini-grid-columns-lock"></div>';var f='<div class="mini-grid-rows-lock"><div class="mini-grid-rows-content"></div></div>';this._columnsLockEl=mini.before(this._columnsViewEl,b);this._rowsLockEl=mini.before(this._rowsViewEl,f);this._rowsLockContentEl=this._rowsLockEl.firstChild;var d='<div class="mini-grid-filterRow-lock"></div>';this._filterLockEl=mini.before(this._filterViewEl,d);var a='<div class="mini-grid-summaryRow-lock"></div>';this._summaryLockEl=mini.before(this._summaryViewEl,a)},_initEvents:function(){mini.FrozenGridView.superclass._initEvents.call(this);mini.on(this._rowsEl,"mousewheel",this.__OnMouseWheel,this)},_createHeaderText:function(b,a){var c=b.header;if(typeof c=="function"){c=c.call(this,b)}if(mini.isNull(c)||c===""){c="&nbsp;"}if(this.isFrozen()&&a==2){if(b.viewIndex1){c="&nbsp;"}}return c},_createColumnColSpan:function(b,d,a){if(this.isFrozen()){var c=b["colspan"+a];if(c){d[d.length]='colspan="'+c+'" '}}else{if(b.colspan){d[d.length]='colspan="'+b.colspan+'" '}}},doUpdateColumns:function(){var d=this._columnsViewEl.scrollLeft;var k=this.isFrozen()?this.getFrozenColumnsRow():[];var g=this.isFrozen()?this.getUnFrozenColumnsRow():this.getVisibleColumnsRow();var b=this.isFrozen()?this.getFrozenColumns():[];var c=this.isFrozen()?this.getUnFrozenColumns():this.getVisibleColumns();var j=this._createColumnsHTML(k,1,b);var f=this._createColumnsHTML(g,2,c);var l='<div class="mini-grid-topRightCell"></div>';j+=l;f+=l;this._columnsLockEl.innerHTML=j;this._columnsViewEl.innerHTML=f;var a=this._columnsLockEl.firstChild;a.style.width="0px";this._columnsViewEl.scrollLeft=d},doUpdateRows:function(){var d=this.getVisibleRows();var g=this.getFrozenColumns();var f=this.getUnFrozenColumns();if(this.isGrouping()){var b=this._createGroupingHTML(g,1);var a=this._createGroupingHTML(f,2);this._rowsLockContentEl.innerHTML=b;this._rowsViewContentEl.innerHTML=a}else{var b=this._createRowsHTML(g,1,this.isFrozen()?d:[]);var a=this._createRowsHTML(f,2,d);this._rowsLockContentEl.innerHTML=b;this._rowsViewContentEl.innerHTML=a}var c=this._rowsLockContentEl.firstChild;c.style.width="0px"},_doUpdateFilterRow:function(){if(this._filterLockEl.firstChild){this._filterLockEl.removeChild(this._filterLockEl.firstChild)}if(this._filterViewEl.firstChild){this._filterViewEl.removeChild(this._filterViewEl.firstChild)}var d=this.getFrozenColumns();var c=this.getUnFrozenColumns();var b=this._createFilterRowHTML(d,1);var a=this._createFilterRowHTML(c,2);this._filterLockEl.innerHTML=b;this._filterViewEl.innerHTML=a;this._doRenderFilters()},_doUpdateSummaryRow:function(){var d=this.getFrozenColumns();var c=this.getUnFrozenColumns();var b=this._createSummaryRowHTML(d,1);var a=this._createSummaryRowHTML(c,2);this._summaryLockEl.innerHTML=b;this._summaryViewEl.innerHTML=a},_syncRowsHeightTimer:null,syncRowDetail:function(c){var b=this._getRowDetailEl(c,1);var a=this._getRowDetailEl(c,2);if(b&&a){this._doSyncRowHeight(b,a)}},_doSyncRowHeight:function(d,c){d.style.height=c.style.height="auto";var b=d.offsetHeight;var a=c.offsetHeight;if(b<a){b=a}d.style.height=c.style.height=b+"px"},_syncRowsHeight:function(){var a=this;function b(){var o=document;var k=a.getDataView();for(var f=0,c=k.length;f<c;f++){var n=k[f];var j=a._getRowEl(n,1);var g=a._getRowEl(n,2);if(!j||!g){continue}a._doSyncRowHeight(j,g)}a._syncRowsHeightTimer=null}if(this.isFrozen()&&this.isFixedRowHeight()==false){if(this._syncRowsHeightTimer){clearTimeout(this._syncRowsHeightTimer)}this._syncRowsHeightTimer=setTimeout(b,2)}},_syncColumnHeight:function(){var c=this._columnsLockEl,a=this._columnsViewEl;c.style.height=a.style.height="auto";if(this.isFrozen()){var d=c.offsetHeight;var b=a.offsetHeight;d=d>b?d:b;c.style.height=a.style.height=d+"px"}var c=this._summaryLockEl,a=this._summaryViewEl;c.style.height=a.style.height="auto";if(this.isFrozen()){var d=c.offsetHeight;var b=a.offsetHeight;d=d>b?d:b;c.style.height=a.style.height=d+"px"}},_layoutColumns:function(){function f(l){return l.offsetHeight}function a(x){var w=[];for(var v=0,u=x.cells.length;v<u;v++){var y=x.cells[v];if(y.style.width=="0px"){continue}w.push(y)}return w}function p(x){var w=a(x);for(var v=0,u=w.length;v<u;v++){var y=w[v];y.style.height="auto"}}function o(){r.style.height=r.style.height="auto";for(var v=0,u=r.rows.length;v<u;v++){var x=r.rows[v];var w=q.rows[v];p(x);p(w)}}function g(B,C){var A=0;var y=a(B);for(var z=0,w=y.length;z<w;z++){var v=y[z];var x=parseInt(v.rowSpan)>1;if(x&&C){continue}var u=v.offsetHeight;if(u>A){A=u}}return A}if(!this.isFrozen()){return}var r=this._columnsLockEl.firstChild,q=this._columnsViewEl.firstChild;function b(y,B){var x=g(B,true);var w=a(y);for(var v=0,u=w.length;v<u;v++){var A=w[v];var z=parseInt(A.rowSpan)>1;if(z){}else{mini.setHeight(A,x)}}}function n(y,B){var x=g(B);var w=a(y);for(var v=0,u=w.length;v<u;v++){var A=w[v];var z=parseInt(A.rowSpan)>1;if(z){mini.setHeight(A,x)}else{}}}o();for(var d=0,c=r.rows.length;d<c;d++){var t=r.rows[d];var s=q.rows[d];var k=g(t),j=g(s);if(k==j){}else{if(k<j){b(t,s);n(t,s)}else{if(k>j){b(s,t);n(s,t)}}}}var k=f(r),j=f(q);if(k<j){mini.setHeight(r,j)}else{if(k>j){mini.setHeight(q,k)}}},doLayout:function(){if(this.canLayout()==false){return}this._doLayoutScroll=false;var c=this.isAutoHeight();var f=this.isFrozen();var a=this.getViewportWidth(true);var b=this.getLockedWidth();var d=a-b;this._doEmptyText();var j=this.isRightFrozen()?"marginRight":"marginLeft";var g=this.isRightFrozen()?"right":"left";if(f){this._filterViewEl.style[j]=b+"px";this._summaryViewEl.style[j]=b+"px";this._columnsViewEl.style[j]=b+"px";this._rowsViewEl.style[j]=b+"px";if(mini.isSafari||mini.isChrome||mini.isIE6){this._filterViewEl.style.width=d+"px";this._summaryViewEl.style.width=d+"px";this._columnsViewEl.style.width=d+"px"}else{this._filterViewEl.style.width="auto";this._summaryViewEl.style.width="auto";this._columnsViewEl.style.width="auto"}if(mini.isSafari||mini.isChrome||mini.isIE6){this._rowsViewEl.style.width=d+"px"}mini.setWidth(this._filterLockEl,b);mini.setWidth(this._summaryLockEl,b);mini.setWidth(this._columnsLockEl,b);mini.setWidth(this._rowsLockEl,b);this._filterLockEl.style[g]="0px";this._summaryLockEl.style[g]="0px";this._columnsLockEl.style[g]="0px";this._rowsLockEl.style[g]="0px"}else{this._doClearFrozen()}this._layoutColumns();this._syncColumnHeight();mini.FrozenGridView.superclass.doLayout.call(this);if(f){if(mini.isChrome||mini.isIE6){this._layoutColumns();this._syncColumnHeight();mini.FrozenGridView.superclass.doLayout.call(this)}}if(c){this._rowsLockEl.style.height="auto"}else{this._rowsLockEl.style.height="100%"}this._syncRowsHeight()},_doEmptyText:function(){},_getRowEl:function(c,a){c=this.getRecord(c);var d=this._createRowId(c,a);var b=document.getElementById(d);return b},_doClearFrozen:function(){var b=this.isRightFrozen()?"marginRight":"marginLeft";var a=this.isRightFrozen()?"right":"left";this._filterLockEl.style.left="-10px";this._summaryLockEl.style.left="-10px";this._columnsLockEl.style.left="-10px";this._rowsLockEl.style.left="-10px";this._filterLockEl.style.width="0px";this._summaryLockEl.style.width="0px";this._columnsLockEl.style.width="0px";this._rowsLockEl.style.width="0px";this._filterViewEl.style.marginLeft="0px";this._summaryViewEl.style.marginLeft="0px";this._columnsViewEl.style.marginLeft="0px";this._rowsViewEl.style.marginLeft="0px";this._filterViewEl.style.width="auto";this._summaryViewEl.style.width="auto";this._columnsViewEl.style.width="auto";this._rowsViewEl.style.width="auto";if(mini.isSafari||mini.isChrome||mini.isIE6){this._filterViewEl.style.width="100%";this._summaryViewEl.style.width="100%";this._columnsViewEl.style.width="100%";this._rowsViewEl.style.width="100%"}},frozenColumns:function(a,b){this.frozen(a,b)},unFrozenColumns:function(){this.unFrozen()},frozen:function(a,b){this._doClearFrozen();this._columnModel.frozen(a,b)},unFrozen:function(){this._doClearFrozen();this._columnModel.unFrozen()},setFrozenStartColumn:function(a){this._columnModel.setFrozenStartColumn(a)},setFrozenEndColumn:function(a){return this._columnModel.setFrozenEndColumn(a)},getFrozenStartColumn:function(a){return this._columnModel._frozenStartColumn},getFrozenEndColumn:function(a){return this._columnModel._frozenEndColumn},getFrozenColumnsRow:function(){return this._columnModel.getFrozenColumnsRow()},getUnFrozenColumnsRow:function(){return this._columnModel.getUnFrozenColumnsRow()},getLockedWidth:function(){if(!this.isFrozen()){return 0}var b=this._columnsLockEl.firstChild.firstChild;var a=b?b.offsetWidth:0;return a},_canDeferSyncScroll:function(){return this.isFrozen()},_syncScroll:function(){var c=this._rowsViewEl.scrollLeft;this._filterViewEl.scrollLeft=c;this._summaryViewEl.scrollLeft=c;this._columnsViewEl.scrollLeft=c;var a=this;var b=a._rowsViewEl.scrollTop;a._rowsLockEl.scrollTop=b;if(this._canDeferSyncScroll()){setTimeout(function(){a._rowsViewEl.scrollTop=a._rowsLockEl.scrollTop},50)}},__OnMouseWheel:function(c){var b=this.getScrollTop()-c.wheelDelta;var a=this.getScrollTop();this.setScrollTop(b);if(a!=this.getScrollTop()){c.preventDefault()}}});mini.regClass(mini.FrozenGridView,"FrozenGridView");mini.ScrollGridView=function(){mini.ScrollGridView.superclass.constructor.apply(this,arguments)};mini.extend(mini.ScrollGridView,mini.FrozenGridView,{virtualScroll:true,virtualRows:25,defaultRowHeight:23,_canDeferSyncScroll:function(){return this.isFrozen()&&!this.isVirtualScroll()},setVirtualScroll:function(a){this.virtualScroll=a;this.doUpdate()},getVirtualScroll:function(a){return this.virtualScroll},isFixedRowHeight:function(){return this.fixedRowHeight||this.isVirtualScroll()},isVirtualScroll:function(){if(this.virtualScroll){return this.isAutoHeight()==false&&this.isGrouping()==false}return false},_getScrollView:function(){var a=this.getVisibleRows();return a},_getScrollViewCount:function(){return this._getScrollView().length},_getScrollRowHeight:function(a,c){if(c&&c._height){var b=parseInt(c._height);if(!isNaN(b)){return b}}return this.defaultRowHeight},_getRangeHeight:function(j,b){var a=0;var f=this._getScrollView();for(var c=j;c<b;c++){var g=f[c];var d=this._getScrollRowHeight(c,g);a+=d}return a},_getIndexByScrollTop:function(j){var a=0;var g=this._getScrollView();var f=this._getScrollViewCount();for(var c=0,b=f;c<b;c++){var k=g[c];var d=this._getScrollRowHeight(c,k);a+=d;if(a>=j){return c}}return f},__getScrollViewRange:function(c,a){var b=this._getScrollView();return b.getRange(c,a)},_getViewRegion:function(){var o=this._getScrollView();if(this.isVirtualScroll()==false){var r={top:0,bottom:0,rows:o,start:0,end:0};return r}var b=this.defaultRowHeight;var c=this._getViewNowRegion();var f=this.getScrollTop();var s=this._vscrollEl.offsetHeight;var p=this._getScrollViewCount();var d=c.start,k=c.end;for(var n=0,j=p;n<j;n+=this.virtualRows){var g=n+this.virtualRows;if(n<=d&&d<g){d=n}if(n<k&&k<=g){k=g}}if(k>p){k=p}if(k==0){k=this.virtualRows}var q=this._getRangeHeight(0,d);var a=this._getRangeHeight(k,this._getScrollViewCount());var o=this.__getScrollViewRange(d,k);var r={top:q,bottom:a,rows:o,start:d,end:k,viewStart:d,viewEnd:k};r.viewTop=this._getRangeHeight(0,r.viewStart);r.viewBottom=this._getRangeHeight(r.viewEnd,this._getScrollViewCount());return r},_getViewNowRegion:function(){var d=this.defaultRowHeight;var g=this.getScrollTop();var j=this._rowsViewEl.offsetHeight;var b=this._getIndexByScrollTop(g);var a=this._getIndexByScrollTop(g+j+30);var c=this._getScrollViewCount();if(a>c){a=c}var f={start:b,end:a};return f},_canVirtualUpdate:function(){if(!this._viewRegion){return true}var a=this._getViewNowRegion();if(this._viewRegion.start<=a.start&&a.end<=this._viewRegion.end){return false}return true},__OnColumnsChanged:function(b){var a=this;this.columns=this._columnModel.columns;this._doUpdateFilterRow();this._doUpdateSummaryRow();if(this.getVisibleRows().length==0){this.doUpdate()}else{this.deferUpdate()}if(this.isVirtualScroll()){this.__OnVScroll()}this.fire("columnschanged")},doLayout:function(){if(this.canLayout()==false){return}mini.ScrollGridView.superclass.doLayout.call(this);this._layoutScroll();if(mini.isNumber(this._scrollTop)&&this._vscrollEl.scrollTop!=this._scrollTop){this._vscrollEl.scrollTop=this._scrollTop}},_createRowsHTML:function(d,s,l,q,a,p){var c=this.isVirtualScroll();if(!c){return mini.ScrollGridView.superclass._createRowsHTML.apply(this,arguments)}var r=c?this._getViewRegion():null;var o=['<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">'];o.push(this._createTopRowHTML(d));if(this.isVirtualScroll()){var b=q==0?"display:none;":"";o.push('<tr class="mini-grid-virtualscroll-top" style="padding:0;border:0;'+b+'"><td colspan="'+d.length+'" style="height:'+q+"px;padding:0;border:0;"+b+'"></td></tr>')}if(s==1&&this.isFrozen()==false){}else{for(var g=0,f=l.length;g<f;g++){var n=l[g];this._createRowHTML(n,p,d,s,o);p++}}if(this.isVirtualScroll()){o.push('<tr class="mini-grid-virtualscroll-bottom" style="padding:0;border:0;"><td colspan="'+d.length+'" style="height:'+a+'px;padding:0;border:0;"></td></tr>')}o.push("</table>");return o.join("")},doUpdateRows:function(){if(this.isVirtualScroll()==false){mini.ScrollGridView.superclass.doUpdateRows.call(this);return}var n=this._getViewRegion();this._viewRegion=n;var k=this.getFrozenColumns();var j=this.getUnFrozenColumns();var l=n.viewStart;var b=n.start;var c=n.viewEnd;if(this._scrollPaging){var f=this.getPageIndex()*this.getPageSize();l-=f;b-=f;c-=f}var o=new Date();var g=this._createRowsHTML(k,1,n.rows,n.viewTop,n.viewBottom,l);var d=this._createRowsHTML(j,2,n.rows,n.viewTop,n.viewBottom,l);this._rowsLockContentEl.innerHTML=g;this._rowsViewContentEl.innerHTML=d;var a=this.getScrollTop();if(this._rowsViewEl.scrollTop!=a){this._rowsViewEl.scrollTop=a}},_create:function(){mini.ScrollGridView.superclass._create.call(this);this._vscrollEl=mini.append(this._rowsEl,'<div class="mini-grid-vscroll"><div class="mini-grid-vscroll-content"></div></div>');this._vscrollContentEl=this._vscrollEl.firstChild},_initEvents:function(){mini.ScrollGridView.superclass._initEvents.call(this);var a=this;mini.on(this._vscrollEl,"scroll",this.__OnVScroll,this);mini._onScrollDownUp(this._vscrollEl,function(b){a._VScrollMouseDown=true},function(b){a._VScrollMouseDown=false})},_layoutScroll:function(){var d=this.isVirtualScroll();if(d){var b=this.getScrollHeight();var c=b>this._rowsViewEl.offsetHeight;if(d&&c){this._vscrollEl.style.display="block";this._vscrollContentEl.style.height=b+"px"}else{this._vscrollEl.style.display="none"}if(this._rowsViewEl.scrollWidth>this._rowsViewEl.clientWidth+1){var a=this.getBodyHeight(true)-18;if(a<0){a=0}this._vscrollEl.style.height=a+"px"}else{this._vscrollEl.style.height="100%"}}else{this._vscrollEl.style.display="none"}},getScrollHeight:function(){var a=this.getVisibleRows();return this._getRangeHeight(0,a.length)},setScrollTop:function(a){if(this.isVirtualScroll()){this._vscrollEl.scrollTop=a}else{this._rowsViewEl.scrollTop=a}},getScrollTop:function(){if(this.isVirtualScroll()){return this._vscrollEl.scrollTop}else{return this._rowsViewEl.scrollTop}},__OnVScroll:function(b){var c=this.isVirtualScroll();if(c){this._scrollTop=this._vscrollEl.scrollTop;var a=this;setTimeout(function(){a._rowsViewEl.scrollTop=a._scrollTop;a.__scrollTimer=null},8);if(this._scrollTopTimer){clearTimeout(this._scrollTopTimer)}this._scrollTopTimer=setTimeout(function(){a._scrollTopTimer=null;a._tryUpdateScroll();a._rowsViewEl.scrollTop=a._scrollTop},80)}},__OnMouseWheel:function(f){var b=f.wheelDelta?f:f.originalEvent;var a=b.wheelDelta||-b.detail*24;var d=this.getScrollTop()-a;var c=this.getScrollTop();this.setScrollTop(d);if(c!=this.getScrollTop()||this.isVirtualScroll()){f.preventDefault()}},_tryUpdateScroll:function(){var c=this._canVirtualUpdate();if(c){if(this._scrollPaging){var b=this;this.reload(null,null,function(d){})}else{var a=new Date();this.doUpdateRows()}}else{}}});mini.regClass(mini.ScrollGridView,"ScrollGridView");mini._onScrollDownUp=function(f,d,g){function a(j){if(mini.isFirefox){mini.on(document,"mouseup",b)}else{mini.on(document,"mousemove",c)}d(j)}function c(j){mini.un(document,"mousemove",c);g(j)}function b(j){mini.un(document,"mouseup",b);g(j)}mini.on(f,"mousedown",a)};mini._Grid_Select=function(a){this.owner=a,el=a.el;a.on("rowmousemove",this.__OnRowMouseMove,this);mini.on(a._viewportEl,"mouseout",this.__OnMouseOut,this);mini.on(a._viewportEl,"mousewheel",this.__OnMouseWheel,this);a.on("cellmousedown",this.__OnCellMouseDown,this);a.on("cellclick",this.__OnGridCellClick,this);a.on("celldblclick",this.__OnGridCellClick,this);mini.on(a.el,"keydown",this.__OnGridKeyDown,this);$(a._columnsEl).on("mouseenter",".mini-grid-headerCell",function(b){$(b.currentTarget).addClass("mini-grid-header-over")});$(a._columnsEl).on("mouseleave",".mini-grid-headerCell",function(b){$(b.currentTarget).removeClass("mini-grid-header-over")})};mini._Grid_Select.prototype={__OnGridKeyDown:function(o){var b=this.owner;var d=mini.findParent(o.target,"mini-grid-detailRow");var a=d?mini.isAncestor(b.el,d):false;if(mini.isAncestor(b._filterEl,o.target)||mini.isAncestor(b._summaryEl,o.target)||mini.isAncestor(b._toolbarEl,o.target)||mini.isAncestor(b._footerEl,o.target)||(mini.findParent(o.target,"mini-grid-detailRow")&&a)||mini.findParent(o.target,"mini-grid-rowEdit")||mini.findParent(o.target,"mini-tree-editinput")){return}var r=b.getCurrentCell();if(o.shiftKey||o.ctrlKey||o.altKey){return}if(o.keyCode==37||o.keyCode==38||o.keyCode==39||o.keyCode==40){o.preventDefault()}var j=b.getVisibleColumns();function f(p){return b.getVisibleRows()[p]}function s(p){return b.getVisibleRows().indexOf(p)}function c(){return b.getVisibleRows().length}var g=r?r[1]:null,k=r?r[0]:null;if(!r){k=b.getCurrent()}var n=j.indexOf(g);var q=s(k);var l=c();switch(o.keyCode){case 9:if(b.allowCellEdit&&b.editOnTabKey){o.preventDefault();b._beginEditNextCell(o.shiftKey==false,true);return}break;case 27:break;case 13:if(b.allowCellEdit&&b.editNextOnEnterKey){if(b.isEditingCell(r)||!g.editor){b._beginEditNextCell(o.shiftKey==false);return}}if(b.allowCellEdit&&r&&!g.readOnly&&!b.isReadOnly()){b.beginEditCell()}break;case 37:if(g){if(n>0){n-=1}}else{n=0}break;case 38:if(k){if(q>0){q-=1}}else{q=0}if(q!=0&&b.isVirtualScroll()){if(b._viewRegion.start>q){return}}break;case 39:if(g){if(n<j.length-1){n+=1}}else{n=0}break;case 40:if(k){if(q<l-1){q+=1}}else{q=0}if(b.isVirtualScroll()){if(b._viewRegion.end<q){return;b.setScrollTop(b.getScrollTop()+b.defaultRowHeight)}}break;default:return;break}g=j[n];k=f(q);if(g&&k&&b.allowCellSelect){var r=[k,g];b.setCurrentCell(r);b.scrollIntoView(k,g)}if(!b.onlyCheckSelection){if(o.keyCode!=37&&o.keyCode!=39){if(k&&b.allowRowSelect){b.deselectAll();b.setCurrent(k);if(k){b.scrollIntoView(k)}}}}},__OnMouseWheel:function(b){var a=this.owner;if(a.allowCellEdit){a.commitEdit()}},__OnGridCellClick:function(d){var b=this.owner;if(b.allowCellEdit==false){return}if(b.cellEditAction!=d.type){return}var a=d.record,c=d.column;if(!c.readOnly&&!b.isReadOnly()){if(d.htmlEvent.shiftKey||d.htmlEvent.ctrlKey){}else{b.beginEditCell()}}},__OnCellMouseDown:function(b){var a=this;setTimeout(function(){a.__doSelect(b)},30)},__OnRowMouseMove:function(c){var b=this.owner;var a=c.record;if(!b.enabled||b.enableHotTrack==false){return}b.focusRow(a)},__OnMouseOut:function(a){if(this.owner.allowHotTrackOut){this.owner.focusRow(null)}},__doSelect:function(j){var b=j.record,f=j.column;var d=this.owner;if(b.enabled===false){return}if(d.allowCellSelect){var a=[b,f];d.setCurrentCell(a)}if(d.onlyCheckSelection&&!f._multiRowSelect){return}if(d.allowRowSelect){var c={record:b,selected:b,cancel:false};if(b){d.fire("beforerowselect",c);d.fire("beforeselect",c)}if(c.cancel){return}if(d.getMultiSelect()){d.el.onselectstart=function(){};if(j.htmlEvent.shiftKey){d.el.onselectstart=function(){return false};try{j.htmlEvent.preventDefault()}catch(c){}var g=d.getCurrent();if(g){d.deselectAll();d.selectRange(g,b);d.setCurrent(g)}else{d.select(b);d.setCurrent(b)}}else{d.el.onselectstart=function(){};if(j.htmlEvent.ctrlKey){d.el.onselectstart=function(){return false};try{j.htmlEvent.preventDefault()}catch(c){}}if(j.column._multiRowSelect===true||j.htmlEvent.ctrlKey||d.allowUnselect){if(d.isSelected(b)){d.deselect(b)}else{d.select(b);d.setCurrent(b)}}else{if(d.isSelected(b)){}else{d.deselectAll();d.select(b);d.setCurrent(b)}}}}else{if(!d.isSelected(b)){d.deselectAll();d.select(b)}else{if(j.htmlEvent.ctrlKey||d.allowUnselect){d.deselectAll()}}}}}};mini._Grid_RowGroup=function(a){this.owner=a,el=a.el;mini.on(a._bodyEl,"click",this.__OnClick,this)};mini._Grid_RowGroup.prototype={__OnClick:function(d){var a=this.owner;var c=a._getRowGroupByEvent(d);if(c){var b={htmlEvent:d,cancel:false,group:c};a.fire("beforegroupclick",b);if(b.cancel===true){return}a.toggleRowGroup(c)}}};mini._Grid_ColumnsMenu=function(a){this.owner=a;this.menu=this.createMenu();mini.on(a.el,"contextmenu",this.__OnContextMenu,this);a.on("destroy",this.__OnGridDestroy,this)};mini._Grid_ColumnsMenu.prototype={__OnGridDestroy:function(a){if(this.menu){this.menu.destroy()}this.menu=null},createMenu:function(){var a=mini.create({type:"menu",hideOnClick:false});a.on("itemclick",this.__OnItemClick,this);return a},updateMenu:function(){var f=this.owner,k=this.menu;var d=f.getBottomColumns();var b=[];for(var c=0,a=d.length;c<a;c++){var g=d[c];if(g.hideable){continue}var j={};j.checked=g.visible;j.checkOnClick=true;j.text=f._createHeaderText(g);if(j.text=="&nbsp;"){if(g.type=="indexcolumn"){j.text=""}if(g.type=="checkcolumn"){j.text=""}}b.push(j);j.enabled=g.enabled;j._column=g}k.setItems(b)},__OnContextMenu:function(b){var a=this.owner;if(a.showColumnsMenu==false){return}if(mini.isAncestor(a._columnsEl,b.target)==false){return}this.updateMenu();this.menu.showAtPos(b.pageX,b.pageY);return false},__OnItemClick:function(n){var a=this.owner,b=this.menu;var f=a.getBottomColumns();var o=b.getItems();var q=n.item,d=q._column;var g=0;for(var k=0,c=o.length;k<c;k++){var j=o[k];if(j.getChecked()){g++}}if(g<1){q.setChecked(true)}var p=q.getChecked();if(p){a.showColumn(d)}else{a.hideColumn(d)}}};mini._Grid_CellToolTip=function(a){this.owner=a;mini.on(this.owner.el,"mousemove",this.__OnGridMouseMove,this)};mini._Grid_CellToolTip.prototype={__OnGridMouseMove:function(g){var d=this.owner;if(mini.hasClass(g.target,"mini-grid-headerCell-inner")){var b=g.target;if(b.scrollWidth>b.clientWidth){var f=b.innerText||b.textContent||"";b.title=f.trim()}else{b.title=""}return}var a=d._getCellByEvent(g);var b=d._getCellEl(a[0],a[1]);var c=d.getCellError(a[0],a[1]);if(b){if(c){setTimeout(function(){b.title=c.errorText},10);return}setTimeout(function(){var k=b;if(b.firstChild){if(mini.hasClass(b.firstChild,"mini-grid-cell-inner")){k=b.firstChild}if(mini.hasClass(b.firstChild,"mini-tree-nodetitle")){k=b.firstChild}}if(k.scrollWidth>k.clientWidth&&d.getShowCellTip()&&a[1].showCellTip){var j=k.innerText||k.textContent||"";b.title=j.trim()}else{b.title=""}},10)}}};mini._Grid_Sorter=function(a){this.owner=a;this.owner.on("headercellclick",this.__OnGridHeaderCellClick,this);mini.on(a._headerEl,"mousemove",this.__OnGridHeaderMouseMove,this);mini.on(a._headerEl,"mouseout",this.__OnGridHeaderMouseOut,this)};mini._Grid_Sorter.prototype={__OnGridHeaderMouseOut:function(a){if(this._focusedColumnEl){mini.removeClass(this._focusedColumnEl,"mini-grid-headerCell-hover")}},__OnGridHeaderMouseMove:function(b){var a=mini.findParent(b.target,"mini-grid-headerCell");if(a){mini.addClass(a,"mini-grid-headerCell-hover");this._focusedColumnEl=a}},__OnGridHeaderCellClick:function(f){var b=this.owner;if(!mini.hasClass(f.htmlEvent.target,"mini-grid-column-splitter")){if(b.allowSortColumn&&b.isEditing()==false){var d=f.column;if(!d.columns||d.columns.length==0){var a=d.sortField||d.field;if(a&&d.allowSort!==false){var c="asc";if(b.getSortField()==a){c=b.getSortOrder()=="asc"?"desc":"asc"}b.sortBy(a,c)}}}}}};mini._Grid_ColumnMove=function(a){this.owner=a;mini.on(this.owner.el,"mousedown",this.__onGridMouseDown,this)};mini._Grid_ColumnMove.prototype={__onGridMouseDown:function(d){var b=this.owner;if(b.isEditing()){return}if(mini.hasClass(d.target,"mini-grid-column-splitter")){return}if(d.button==mini.MouseButton.Right){return}var a=mini.findParent(d.target,b._headerCellCls);if(a){this._remove();var c=b._getColumnByEvent(d);if(b.allowMoveColumn&&c&&c.allowMove){this.dragColumn=c;this._columnEl=a;this.getDrag().start(d)}}},getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:false,onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this.drag},_OnDragStart:function(b){function c(d){var f=d.header;if(typeof f=="function"){f=f.call(a,d)}if(mini.isNull(f)||f===""){f="&nbsp;"}return f}var a=this.owner;this._dragProxy=mini.append(document.body,'<div class="mini-grid-columnproxy"></div>');this._dragProxy.innerHTML='<div class="mini-grid-columnproxy-inner" style="height:26px;">'+c(this.dragColumn)+"</div>";mini.setXY(this._dragProxy,b.now[0]+15,b.now[1]+18);mini.addClass(this._dragProxy,"mini-grid-no");this.moveTop=mini.append(document.body,'<div class="mini-grid-movetop"></div>');this.moveBottom=mini.append(document.body,'<div class="mini-grid-movebottom"></div>')},_OnDragMove:function(d){var a=this.owner;var f=d.now[0];mini.setXY(this._dragProxy,f+15,d.now[1]+18);this.targetColumn=this.insertAction=null;var l=mini.findParent(d.event.target,a._headerCellCls);if(l){var b=a._getColumnByEvent(d.event);if(b&&b!=this.dragColumn){var k=a.getParentColumn(this.dragColumn);var g=a.getParentColumn(b);if(k==g){this.targetColumn=b;this.insertAction="before";var j=a.getColumnBox(this.targetColumn);if(f>j.x+j.width/2){this.insertAction="after"}}}}if(this.targetColumn){mini.addClass(this._dragProxy,"mini-grid-ok");mini.removeClass(this._dragProxy,"mini-grid-no");var c=a.getColumnBox(this.targetColumn);this.moveTop.style.display="block";this.moveBottom.style.display="block";if(this.insertAction=="before"){mini.setXY(this.moveTop,c.x-4,c.y-9);mini.setXY(this.moveBottom,c.x-4,c.bottom)}else{mini.setXY(this.moveTop,c.right-4,c.y-9);mini.setXY(this.moveBottom,c.right-4,c.bottom)}}else{mini.removeClass(this._dragProxy,"mini-grid-ok");mini.addClass(this._dragProxy,"mini-grid-no");this.moveTop.style.display="none";this.moveBottom.style.display="none"}},_remove:function(){var a=this.owner;mini.removeNode(this._dragProxy);mini.removeNode(this.moveTop);mini.removeNode(this.moveBottom);this._dragProxy=this.moveTop=this.moveBottom=this.dragColumn=this.targetColumn=null},_OnDragStop:function(b){var a=this.owner;a.moveColumn(this.dragColumn,this.targetColumn,this.insertAction);this._remove()}};mini._Grid_ColumnSplitter=function(a){this.owner=a;mini.on(a.el,"mousedown",this.__OnMouseDown,this)};mini._Grid_ColumnSplitter.prototype={__OnMouseDown:function(d){var b=this.owner;var a=d.target;if(mini.hasClass(a,"mini-grid-column-splitter")){var c=b._getColumnById(a.id);if(b.isEditing()){return}if(b.allowResizeColumn&&c&&c.allowResize){this.splitterColumn=c;this.getDrag().start(d)}}},getDrag:function(){if(!this.drag){this.drag=new mini.Drag({capture:true,onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this.drag},_OnDragStart:function(c){var b=this.owner;var a=b.getColumnBox(this.splitterColumn);this.columnBox=a;this._dragProxy=mini.append(document.body,'<div class="mini-grid-proxy"></div>');var d=b.getGridViewBox();d.x=a.x;d.width=a.width;d.right=a.right;mini.setBox(this._dragProxy,d)},_OnDragMove:function(c){var a=this.owner;var d=mini.copyTo({},this.columnBox);var b=d.width+(c.now[0]-c.init[0]);if(b<a.columnMinWidth){b=a.columnMinWidth}if(b>a.columnMaxWidth){b=a.columnMaxWidth}mini.setWidth(this._dragProxy,b)},_OnDragStop:function(g){var a=this.owner;var f=mini.getBox(this._dragProxy);var j=this;var k=a.allowSortColumn;a.allowSortColumn=false;setTimeout(function(){jQuery(j._dragProxy).remove();j._dragProxy=null;a.allowSortColumn=k},10);var d=this.splitterColumn;var c=parseInt(d.width);if(c+"%"!=d.width){var b=a.getColumnWidth(d);var l=parseInt(c/b*f.width);if(l<a.columnMinWidth){l=a.columnMinWidth}a.setColumnWidth(d,l)}}};mini._Grid_DragDrop=function(a){this.owner=a;this.owner.on("CellMouseDown",this.__OnGridCellMouseDown,this)};mini._Grid_DragDrop.prototype={__OnGridCellMouseDown:function(f){if(f.htmlEvent.button==mini.MouseButton.Right){return}var c=this.owner;if(c._dragging){return}this.dropObj=c;if(mini.findParent(f.htmlEvent.target,"mini-tree-editinput")){return}if(c.isReadOnly()||c.isAllowDrag(f.record,f.column)==false){return}var b=c._OnDragStart(f.record,f.column);if(b.cancel){return}this.dragText=b.dragText;var a=f.record;this.isTree=!!c.isTree;this.beginRecord=a;var d=this._getDrag();d.start(f.htmlEvent)},_OnDragStart:function(c){var b=this.owner;b._dragging=true;var a=this.beginRecord;this.dragData=b._getDragData();if(this.dragData.indexOf(a)==-1){this.dragData.push(a)}this.feedbackEl=mini.append(document.body,'<div class="mini-feedback"></div>');this.feedbackEl.innerHTML=this.dragText;this.lastFeedbackClass="";this.enableHotTrack=b.getEnableHotTrack();b.setEnableHotTrack(false)},_getDropTargetObj:function(a){var b=mini.findParent(a.target,"mini-grid",500);if(b){return mini.get(b)}},_OnDragMove:function(d){var c=this.owner;var f=this._getDropTargetObj(d.event);this.dropObj=f;var a=d.now[0],g=d.now[1];mini.setXY(this.feedbackEl,a+15,g+18);if(f&&f.allowDrop){this.isTree=f.isTree;var b=f._getRecordByEvent(d.event);this.dropRecord=b;if(b){if(this.isTree){this.dragAction=this.getFeedback(b,g,3)}else{this.dragAction=this.getFeedback(b,g,2)}}else{this.dragAction="no"}}else{this.dragAction="no"}if(f&&f.allowDrop&&!b&&f.getData().length==0){this.dragAction="add"}this.lastFeedbackClass="mini-feedback-"+this.dragAction;this.feedbackEl.className="mini-feedback "+this.lastFeedbackClass;if(this.dragAction=="no"){b=null}this.setRowFeedback(b,this.dragAction)},_OnDragStop:function(q){var a=this.owner;var u=this.dropObj;a._dragging=false;mini.removeNode(this.feedbackEl);a.setEnableHotTrack(this.enableHotTrack);this.feedbackEl=null;this.setRowFeedback(null);if(this.isTree){var c=[];for(var p=0,f=this.dragData.length;p<f;p++){var s=this.dragData[p];var v=false;for(var o=0,n=this.dragData.length;o<n;o++){var d=this.dragData[o];if(d!=s){v=a.isAncestor(d,s);if(v){break}}}if(!v){c.push(s)}}this.dragData=c}if(this.dragAction=="add"&&!this.dropRecord){this.dropRecord=u.getRootNode?u.getRootNode():{__root:true}}if(this.dropRecord&&u&&this.dragAction!="no"){var t=a._OnDragDrop(this.dragData,this.dropRecord,this.dragAction);if(!t.cancel){var c=t.dragNodes,b=t.targetNode,g=t.action;if(u.isTree){if(a==u){u.moveNodes(c,b,g)}else{a.removeNodes(c);u.addNodes(c,b,g)}}else{var r=u.indexOf(b);if(g=="after"){r+=1}if(a==u){u.moveRow(c,r)}else{a.removeRows(c);if(this.dragAction=="add"){u.addRows(c)}else{u.addRows(c,r)}}}var t={dragNode:t.dragNodes[0],dropNode:t.targetNode,dragAction:t.action,dragNodes:t.dragNodes,targetNode:t.targetNode};u.fire("drop",t)}}this.dropRecord=null;this.dragData=null},setRowFeedback:function(d,c){var f=this.owner;var j=this.dropObj;if(this.lastAddDomRow&&j){j.removeRowCls(this.lastAddDomRow,"mini-tree-feedback-add")}if(d==null||this.dragAction=="add"){mini.removeNode(this.feedbackLine);this.feedbackLine=null}this.lastRowFeedback=d;if(d!=null){if(c=="before"||c=="after"){if(!this.feedbackLine){this.feedbackLine=mini.append(document.body,"<div class='mini-feedback-line'></div>")}this.feedbackLine.style.display="block";var b=j.getRowBox(d);var a=b.x,k=b.y-1;if(c=="after"){k+=b.height}mini.setXY(this.feedbackLine,a,k);var g=j.getBox(true);mini.setWidth(this.feedbackLine,g.width)}else{j.addRowCls(d,"mini-tree-feedback-add");this.lastAddDomRow=d}}},getFeedback:function(r,n,q){var a=this.owner;var o=this.dropObj;var p=o.getRowBox(r);var g=p.height;var s=n-p.y;var u=null;if(this.dragData.indexOf(r)!=-1){return"no"}var f=false;if(q==3){f=o.isLeaf(r);for(var d=0,c=this.dragData.length;d<c;d++){var j=this.dragData[d];var b=o.isAncestor(j,r);if(b){u="no";break}}}if(u==null){if(q==2){if(s>g/2){u="after"}else{u="before"}}else{if(f&&o.allowLeafDropIn===false){if(s>g/2){u="after"}else{u="before"}}else{if(s>(g/3)*2){u="after"}else{if(g/3<=s&&s<=(g/3*2)){u="add"}else{u="before"}}}}}var k=o._OnGiveFeedback(u,this.dragData,r,a);return k.effect},_getDrag:function(){if(!this.drag){this.drag=new mini.Drag({onStart:mini.createDelegate(this._OnDragStart,this),onMove:mini.createDelegate(this._OnDragMove,this),onStop:mini.createDelegate(this._OnDragStop,this)})}return this.drag}};mini._Grid_Events=function(a){this.owner=a,el=a.el;mini.on(el,"click",this.__OnClick,this);mini.on(el,"dblclick",this.__OnDblClick,this);mini.on(el,"mousedown",this.__OnMouseDown,this);mini.on(el,"mouseup",this.__OnMouseUp,this);mini.on(el,"mousemove",this.__OnMouseMove,this);mini.on(el,"mouseover",this.__OnMouseOver,this);mini.on(el,"mouseout",this.__OnMouseOut,this);mini.on(el,"keydown",this.__OnKeyDown,this);mini.on(el,"keyup",this.__OnKeyUp,this);mini.on(el,"contextmenu",this.__OnContextMenu,this);a.on("rowmousemove",this.__OnRowMouseMove,this);mini.on(window,"resize",this.__windowResize,this)};mini._Grid_Events.prototype={__windowResize:function(){var a=this.owner;function b(){var d=a._getEditingControl();if(d){var f=a.getCurrentCell();var c=a.getCellBox(f[0],f[1]);a._getEditWrap(c,d);a._setEdiorBox(d,c)}}setTimeout(function(){b()},100)},_row:null,__OnRowMouseMove:function(b){var a=this.owner;var c=b.record;if(this._row!=c){b.record=c;b.row=c;a.fire("rowmouseenter",b)}this._row=c},__OnClick:function(a){this._fireEvent(a,"Click")},__OnDblClick:function(a){this._fireEvent(a,"Dblclick")},__OnMouseDown:function(b){var a=this.owner;if(mini.findParent(b.target,"mini-tree-editinput")){return}this._fireEvent(b,"MouseDown");var c=300;if(b.target.tagName.toLowerCase()=="a"&&b.target.href){c=10}setTimeout(function(){var d=mini.findParent(b.target,"mini-grid-detailRow");if(mini.isAncestor(a.el,d)){return}if(!!a._editingCell){return}a._tryFocus(b)},c)},__OnMouseUp:function(b){if(mini.findParent(b.target,"mini-tree-editinput")){return}var a=this.owner;if(mini.isAncestor(a.el,b.target)){this._fireEvent(b,"MouseUp")}},__OnMouseMove:function(a){this._fireEvent(a,"MouseMove")},__OnMouseOver:function(a){this._fireEvent(a,"MouseOver")},__OnMouseOut:function(a){this._fireEvent(a,"MouseOut")},__OnKeyDown:function(a){this._fireEvent(a,"KeyDown")},__OnKeyUp:function(a){this._fireEvent(a,"KeyUp")},__OnContextMenu:function(a){this._fireEvent(a,"ContextMenu")},_fireEvent:function(j,b){var a=this.owner;var l=a._getCellByEvent(j);var f=l[0],d=l[1];if(f){var g={record:f,row:f,htmlEvent:j};var k=a["_OnRow"+b];if(k){k.call(a,g)}else{a.fire("row"+b,g)}}if(d){var g={column:d,field:d.field,htmlEvent:j};var k=a["_OnColumn"+b];if(k){k.call(a,g)}else{a.fire("column"+b,g)}}if(f&&d){var g={sender:a,record:f,row:f,column:d,field:d.field,htmlEvent:j};var k=a["_OnCell"+b];if(k){k.call(a,g)}else{a.fire("cell"+b,g)}if(d["onCell"+b]){d["onCell"+b].call(d,g)}}if(!f&&d&&mini.findParent(j.target,"mini-grid-headerCell")){var g={column:d,htmlEvent:j};var k=a["_OnHeaderCell"+b];if(k){k.call(a,g)}else{var c="onheadercell"+b.toLowerCase();if(d[c]){g.sender=a;d[c](g)}a.fire("headercell"+b,g)}}}};mini.DataGrid=function(a){mini.DataGrid.superclass.constructor.call(this,null);this._Events=new mini._Grid_Events(this);this._Select=new mini._Grid_Select(this);this._DragDrop=new mini._Grid_DragDrop(this);this._RowGroup=new mini._Grid_RowGroup(this);this._Splitter=new mini._Grid_ColumnSplitter(this);this._ColumnMove=new mini._Grid_ColumnMove(this);this._Sorter=new mini._Grid_Sorter(this);this._CellToolTip=new mini._Grid_CellToolTip(this);this._ColumnsMenu=new mini._Grid_ColumnsMenu(this);this._createPagers();if(a){mini.applyTo.call(this,a)}};mini.extend(mini.DataGrid,mini.ScrollGridView,{uiCls:"mini-datagrid",selectOnLoad:false,showHeader:false,showPager:true,onlyCheckSelection:false,_$onlyCheckSelection:true,allowUnselect:false,allowRowSelect:true,allowCellSelect:false,allowCellEdit:false,cellEditAction:"cellclick",allowCellValid:false,allowResizeColumn:true,allowSortColumn:true,allowMoveColumn:true,showColumnsMenu:false,virtualScroll:false,enableHotTrack:true,allowHotTrackOut:true,showLoading:true,columnMinWidth:8,set:function(f){if(typeof f=="string"){return this}var d=f.value;delete f.value;var a=f.url;delete f.url;var c=f.data;delete f.data;var b=f.columns;delete f.columns;var g=f.defaultColumnWidth;delete f.defaultColumnWidth;if(g){this.setDefaultColumnWidth(g)}if(!mini.isNull(b)){this.setColumns(b)}mini.DataGrid.superclass.set.call(this,f);if(!mini.isNull(c)){this.setData(c)}if(!mini.isNull(a)){this.setUrl(a)}if(!mini.isNull(d)){this.setValue(d)}return this},doUpdate:function(){this._destroyEditors();mini.DataGrid.superclass.doUpdate.apply(this,arguments)},_destroyEditors:function(){var b=mini.getChildControls(this);var d=[];for(var c=0,a=b.length;c<a;c++){var f=b[c];if(f.el&&mini.findParent(f.el,this._rowCls)){d.push(f);f.destroy()}}},_OnDrawCell:function(){var a=mini.DataGrid.superclass._OnDrawCell.apply(this,arguments);return a},_bindSource:function(){var a=this._dataSource;a.on("beforeload",this.__OnSourceBeforeLoad,this);a.on("preload",this.__OnSourcePreLoad,this);a.on("load",this.__OnSourceLoadSuccess,this);a.on("loaderror",this.__OnSourceLoadError,this);a.on("loaddata",this.__OnSourceLoadData,this);a.on("cleardata",this.__OnSourceClearData,this);a.on("sort",this.__OnSourceSort,this);a.on("filter",this.__OnSourceFilter,this);a.on("pageinfochanged",this.__OnPageInfoChanged,this);a.on("selectionchanged",this.__OnSelectionChanged,this);a.on("currentchanged",function(b){this.fire("currentchanged",b)},this);a.on("add",this.__OnSourceAdd,this);a.on("update",this.__OnSourceUpdate,this);a.on("remove",this.__OnSourceRemove,this);a.on("move",this.__OnSourceMove,this);a.on("beforeadd",function(b){this.fire("beforeaddrow",b)},this);a.on("beforeupdate",function(b){this.fire("beforeupdaterow",b)},this);a.on("beforeremove",function(b){this.fire("beforeremoverow",b)},this);a.on("beforemove",function(b){this.fire("beforemoverow",b)},this);a.on("beforeselect",function(b){this.fire("beforeselect",b)},this);a.on("beforedeselect",function(b){this.fire("beforedeselect",b)},this);a.on("select",function(b){this.fire("select",b)},this);a.on("deselect",function(b){this.fire("deselect",b)},this)},_getMaskWrapEl:function(){return this.el},_initData:function(){this.data=this._dataSource.getSource();this.pageIndex=this.getPageIndex();this.pageSize=this.getPageSize();this.totalCount=this.getTotalCount();this.totalPage=this.getTotalPage();this.sortField=this.getSortField();this.sortOrder=this.getSortOrder();this.url=this.getUrl();this._mergedCellMaps={};this._mergedCells={};this._cellErrors=[];this._cellMapErrors={};if(this.isGrouping()){this.groupBy(this._groupField,this._groupDir);if(this.collapseGroupOnLoad){this.collapseGroups()}}},__OnSourceBeforeLoad:function(a){this.fire("beforeload",a);if(a.cancel==true){return}if(this.showLoading){this.loading()}},__OnSourcePreLoad:function(a){this.fire("preload",a)},__OnSourceLoadSuccess:function(a){this.fire("load",a);this.unmask()},__OnSourceLoadError:function(a){this.fire("loaderror",a);this.unmask()},__OnSourceSort:function(a){this.deferUpdate();this.fire("sort",a)},__OnSourceFilter:function(a){this.deferUpdate();this.fire("filter",a)},__OnSourceAdd:function(a){this._doAddRowEl(a.record);this._doUpdateSummaryRow();this._viewRegion=this._getViewRegion();this.fire("addrow",a)},__OnSourceUpdate:function(a){this._doUpdateRowEl(a.record);this._doUpdateSummaryRow();this.fire("updaterow",a)},__OnSourceRemove:function(a){this._doRemoveRowEl(a.record);this._doUpdateSummaryRow();this.fire("removerow",a);if(this.isVirtualScroll()){this.deferUpdate()}},__OnSourceMove:function(a){this._doMoveRowEl(a.record,a.index);this._doUpdateSummaryRow();this.fire("moverow",a)},__OnSelectionChanged:function(c){if(c.fireEvent!==false){if(c.select){this.fire("rowselect",c)}else{this.fire("rowdeselect",c)}}var b=this;if(this._selectionTimer){clearTimeout(this._selectionTimer);this._selectionTimer=null}this._selectionTimer=setTimeout(function(){b._selectionTimer=null;if(c.fireEvent!==false){b.fire("SelectionChanged",c)}},1);var a=new Date();this._doRowSelect(c._records,c.select)},__OnPageInfoChanged:function(a){this._updatePagesInfo()},_updatePagesInfo:function(){var a=this.getPageIndex();var f=this.getPageSize();var d=this.getTotalCount();var k=this.getTotalPage();var g=this._pagers;for(var j=0,c=g.length;j<c;j++){var b=g[j];b.update(a,f,d);this._dataSource.totalPage=b.totalPage}},setPagerButtons:function(a){this._bottomPager.setButtons(a)},setPager:function(b){if(typeof b=="string"){var a=mini.byId(b);if(!a){return}mini.parse(b);b=mini.get(b)}if(b){this.bindPager(b)}},bindPager:function(a){if(!a){return}this.unbindPager(a);this._pagers.add(a);a.on("beforepagechanged",this.__OnPageChanged,this)},unbindPager:function(a){if(!a){return}this._pagers.remove(a);a.un("pagechanged",this.__OnPageChanged,this)},__OnPageChanged:function(a){a.cancel=true;this.gotoPage(a.pageIndex,a.pageSize)},_canUpdateRowEl:true,_doUpdateRowEl:function(d){var g=this.getFrozenColumns();var c=this.getUnFrozenColumns();var f=this.indexOf(d);var b=this._createRowHTML(d,f,c,2);var a=this._getRowEl(d,2);if(!a){return}jQuery(a).before(b);if(a){a.parentNode.removeChild(a)}if(this.isFrozen()){var b=this._createRowHTML(d,f,g,1);var a=this._getRowEl(d,1);jQuery(a).before(b);a.parentNode.removeChild(a)}this.deferLayout()},_doAddRowEl:function(l){var d=this.getFrozenColumns();var c=this.getUnFrozenColumns();var j=this._rowsLockContentEl.firstChild;var f=this._rowsViewContentEl.firstChild;var g=this.indexOf(l);var k=this.getAt(g+1);function b(t,p,q,o){var r=this._createRowHTML(t,g,q,p);if(k){var n=this._getRowEl(k,p);jQuery(n).before(r)}else{mini.append(o,r)}}b.call(this,l,2,c,f);if(this.isFrozen()){b.call(this,l,1,d,j)}this.deferLayout();var a=jQuery(".mini-grid-emptyText",this._bodyEl)[0];if(a){a.style.display="none";a.parentNode.style.display="none"}},_doRemoveRowEl:function(f){var a=this._getRowEl(f,1);var d=this._getRowEl(f,2);if(a){a.parentNode.removeChild(a)}if(d){d.parentNode.removeChild(d)}if(!d){return}var c=this._getRowDetailEl(f,1);var g=this._getRowDetailEl(f,2);if(c){c.parentNode.removeChild(c)}if(g){g.parentNode.removeChild(g)}this.deferLayout();if(this.showEmptyText&&this.getVisibleRows().length==0){var b=jQuery(".mini-grid-emptyText",this._bodyEl)[0];if(b){b.style.display="";b.parentNode.style.display=""}}},_doMoveRowEl:function(b,a){this._doRemoveRowEl(b);this._doAddRowEl(b)},_getRowGroupEl:function(c,a){if(a==1&&!this.isFrozen()){return null}var d=this._createRowGroupId(c,a);var b=mini.byId(d,this.el);return b},_getRowGroupRowsEl:function(c,a){if(a==1&&!this.isFrozen()){return null}var d=this._createRowGroupRowsId(c,a);var b=mini.byId(d,this.el);return b},_getRowEl:function(c,a){if(a==1&&!this.isFrozen()){return null}c=this.getRecord(c);var d=this._createRowId(c,a);var b=mini.byId(d,this.el);return b},_getHeaderCellEl:function(c,a){if(a==1&&!this.isFrozen()){return null}c=this.getColumn(c);var d=this._createHeaderCellId(c,a);var b=mini.byId(d,this.el);return b},_getCellEl:function(c,b){c=this.getRecord(c);b=this.getColumn(b);if(!c||!b){return null}var d=this._createCellId(c,b);var a=mini.byId(d,this.el);return a},getRecordByEvent:function(a){return this._getRecordByEvent(a)},_getRecordByEvent:function(d){var b=mini.findParent(d.target,this._rowCls);if(!b){return null}var c=b.id.split("$");var a=c[c.length-1];return this._getRowByID(a)},getColumnByEvent:function(a){if(!a){return null}return this._getColumnByEvent(a)},_getColumnByEvent:function(c){var a=mini.findParent(c.target,this._cellCls);if(!a){a=mini.findParent(c.target,this._headerCellCls)}if(a){var b=a.id.split("$");var d=b[b.length-1];return this._getColumnById(d)}return null},_getCellByEvent:function(c){var a=this._getRecordByEvent(c);var b=this._getColumnByEvent(c);return[a,b]},_getRowByID:function(a){return this._dataSource.getby_id(a)},_getColumnById:function(a){return this._columnModel._getColumnById(a)},addRowCls:function(d,a){var c=this._getRowEl(d,1);var b=this._getRowEl(d,2);if(c){mini.addClass(c,a)}if(b){mini.addClass(b,a)}},removeRowCls:function(d,a){var c=this._getRowEl(d,1);var b=this._getRowEl(d,2);if(c){mini.removeClass(c,a)}if(b){mini.removeClass(b,a)}},getCellBox:function(c,b){c=this.getRow(c);b=this.getColumn(b);if(!c||!b){return null}var a=this._getCellEl(c,b);if(!a){return null}return mini.getBox(a)},getColumnBox:function(b){var d=this._createHeaderCellId(b,2);var a=document.getElementById(d);if(!a){d=this._createHeaderCellId(b,1);a=document.getElementById(d)}if(a){var c=mini.getBox(a);c.x-=1;c.left=c.x;c.right=c.x+c.width;return c}},getRowBox:function(f){var b=this._getRowEl(f,1);var d=this._getRowEl(f,2);if(!d){return null}var c=mini.getBox(d);if(b){var a=mini.getBox(b);c.x=c.left=a.left;c.width=c.right-c.x}return c},_doRowSelect:function(r,o){var c=this.isVirtualScroll(),n=this._viewRegion,b=c?n.start:-1,f=c?n.end:-1,a={};if(b!=-1){var j=this.getVisibleRows();for(var g=b,d=f;g<d;g++){var q=j[g];if(q){a[q._id]=true}}}var p=new Date();for(var g=0,d=r.length;g<d;g++){var k=r[g];if(b!=-1){if(!a[k._id]){continue}}if(o){this.addRowCls(k,this._rowSelectedCls)}else{this.removeRowCls(k,this._rowSelectedCls)}}},_tryFocus:function(c){try{var b=c.target.tagName.toLowerCase();if(b=="input"||b=="textarea"||b=="select"){return}if(mini.hasClass(c.target,"mini-placeholder-label")){return}if(mini.findParent(c.target,"mini-grid-rows-content")){mini.setXY(this._focusEl,c.pageX,c.pageY);this.focus(false)}}catch(a){}},focus:function(d){try{var g=this;var a=this.getCurrentCell();if(a&&d!==false){var f=this.getCellBox(a[0],a[1]);mini.setX(this._focusEl,f.x)}var k=this.getCurrent();if(k){var c=this._getRowEl(k,2);if(c){if(d!==false){var b=mini.getBox(c);mini.setY(g._focusEl,b.top)}if(mini.isIE||mini.isIE11){g._focusEl.focus()}else{g.el.focus()}}}else{if(mini.isIE||mini.isIE11){g._focusEl.focus()}else{g.el.focus()}}}catch(j){}},focusRow:function(a){if(this._focusRow==a){return}if(this._focusRow){this.removeRowCls(this._focusRow,this._rowHoverCls)}this._focusRow=a;if(a){this.addRowCls(a,this._rowHoverCls)}},scrollIntoView:function(k,d){k=this.getRow(k);if(!k){return}try{if(d){if(this._columnModel.isFrozenColumn(d)){d=null}}if(d){var a=this._getCellEl(k,d);mini.scrollIntoView(a,this._rowsViewEl,true)}else{if(this.isVirtualScroll()){var g=this._getViewRegion();var c=this.indexOf(k);if(g.start<=c&&c<=g.end){}else{var j=this._getRangeHeight(0,c);this.setScrollTop(j)}}else{var b=this._getRowEl(k,2);mini.scrollIntoView(b,this._rowsViewEl,false)}}}catch(f){}},setShowLoading:function(a){this.showLoading=a},getShowLoading:function(){return this.showLoading},setEnableHotTrack:function(a){this.enableHotTrack=a},getEnableHotTrack:function(){return this.enableHotTrack},setAllowHotTrackOut:function(a){this.allowHotTrackOut=a},getAllowHotTrackOut:function(){return this.allowHotTrackOut},setOnlyCheckSelection:function(a){this.onlyCheckSelection=a},getOnlyCheckSelection:function(){return this.onlyCheckSelection},setAllowUnselect:function(a){this.allowUnselect=a},getAllowUnselect:function(){return this.allowUnselect},setAllowRowSelect:function(a){this.allowRowSelect=a},getAllowRowSelect:function(){return this.allowRowSelect},setAllowCellSelect:function(a){this.allowCellSelect=a},getAllowCellSelect:function(){return this.allowCellSelect},setAllowCellEdit:function(a){this.allowCellEdit=a},getAllowCellEdit:function(){return this.allowCellEdit},setCellEditAction:function(a){this.cellEditAction=a},getCellEditAction:function(){return this.cellEditAction},setAllowCellValid:function(a){this.allowCellValid=a},getAllowCellValid:function(){return this.allowCellValid},setAllowResizeColumn:function(a){this.allowResizeColumn=a;mini.removeClass(this.el,"mini-grid-resizeColumns-no");if(!a){mini.addClass(this.el,"mini-grid-resizeColumns-no")}},getAllowResizeColumn:function(){return this.allowResizeColumn},setAllowSortColumn:function(a){this.allowSortColumn=a},getAllowSortColumn:function(){return this.allowSortColumn},setAllowMoveColumn:function(a){this.allowMoveColumn=a},getAllowMoveColumn:function(){return this.allowMoveColumn},setShowColumnsMenu:function(a){this.showColumnsMenu=a},getShowColumnsMenu:function(){return this.showColumnsMenu},setEditNextRowCell:function(a){this.editNextRowCell=a},getEditNextRowCell:function(){return this.editNextRowCell},setEditNextOnEnterKey:function(a){this.editNextOnEnterKey=a},getEditNextOnEnterKey:function(){return this.editNextOnEnterKey},setEditOnTabKey:function(a){this.editOnTabKey=a},getEditOnTabKey:function(){return this.editOnTabKey},setCreateOnEnter:function(a){this.createOnEnter=a},getCreateOnEnter:function(){return this.createOnEnter},_currentCell:null,_doCurrentCell:function(a){if(this._currentCell){var b=this._currentCell[0],d=this._currentCell[1];var c=this._getCellEl(b,d);if(c){if(a){mini.addClass(c,this._cellSelectedCls)}else{mini.removeClass(c,this._cellSelectedCls)}}}},setCurrentCell:function(a){if(this._currentCell!=a){this._doCurrentCell(false);this._currentCell=a;if(a){var d=this.getRow(a[0]);var b=this.getColumn(a[1]);if(d&&b){this._currentCell=[d,b]}else{this._currentCell=null}}this._doCurrentCell(true);if(a){var c=this._getAnchorCell(a[0],a[1]);if(!c){if(this.isFrozen()){this.scrollIntoView(a[0])}else{this.scrollIntoView(a[0],a[1])}}}this.fire("currentcellchanged")}},getCurrentCell:function(){var a=this._currentCell;if(a){if(this.indexOf(a[0])==-1){this._currentCell=null;a=null}}return a},_editingCell:null,isEditingCell:function(a){return this._editingCell&&this._editingCell[0]==a[0]&&this._editingCell[1]==a[1]},beginEditCell:function(c,a){function b(j,g){j=this.getRow(j);g=this.getColumn(g);var d=[j,g];if(j&&g){this.setCurrentCell(d)}var d=this.getCurrentCell();if(this._editingCell&&d){if(this._editingCell[0]==d[0]&&this._editingCell[1]==d[1]){return}}if(this._editingCell){this.commitEdit()}if(d){var j=d[0],g=d[1];if(g.editMode!="inline"){var f=this._OnCellBeginEdit(j,g,this.getCellEditor(g));if(f!==false){this.scrollIntoView(j,g);this._editingCell=d;this._OnCellShowingEdit(j,g)}}}}this._pushUpdateCallback(b,this,[c,a])},cancelEdit:function(){if(this.allowCellEdit){if(this._editingCell){this._OnCellEndEdit()}}else{if(this.isEditing()){this._allowLayout=false;var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d._editing==true){this.cancelEditRow(b)}}this._allowLayout=true;this.doLayout()}}},commitEdit:function(){if(this.allowCellEdit){if(this._editingCell){this._OnCellCommitEdit(this._editingCell[0],this._editingCell[1]);this._OnCellEndEdit()}}else{if(this.isEditing()){this._allowLayout=false;var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d._editing==true){this.commitEditRow(b)}}this._allowLayout=true;this.doLayout()}}},getCellEditor:function(b,c){b=this.getColumn(b);if(!b){return}if(this.allowCellEdit){var a=b.__editor;if(!a){a=mini.getAndCreate(b.editor)}if(a&&a!=b.editor){b.editor=a}return a}else{c=this.getRow(c);b=this.getColumn(b);if(!c){c=this.getEditingRow()}if(!c||!b){return null}var d=this.uid+"$"+c._uid+"$"+b._id+"$editor";return mini.get(d)}},_OnCellBeginEdit:function(d,a,f,b){var k=mini._getMap(a.field,d);var g={sender:this,rowIndex:this.indexOf(d),row:d,record:d,column:a,field:a.field,editor:f,value:k,cancel:false};this.fire("cellbeginedit",g);if(!mini.isNull(a.defaultValue)&&(mini.isNull(g.value)||g.value==="")){var j=a.defaultValue;var c=mini.clone({d:j});g.value=c.d}var f=g.editor;k=g.value;if(g.cancel){return false}if(!f&&a.editMode!="inline"){return false}if(a.readOnly===true){return false}if(b===false){return true}if(a.editMode!="inline"){if(mini.isNull(k)){k=""}if(f.setValue){f.setValue(k)}f.ownerRowID=d._uid;if(a.displayField&&f.setText){var l=mini._getMap(a.displayField,d);if(!mini.isNull(a.defaultText)&&(mini.isNull(l)||l==="")){var c=mini.clone({d:a.defaultText});l=c.d}f.setText(l)}if(this.allowCellEdit){this._editingControl=g.editor}}return true},_OnCellCommitEdit:function(f,d,l,g){var j={sender:this,rowIndex:this.indexOf(f),record:f,row:f,column:d,field:d.field,editor:g?g:this.getCellEditor(d),value:mini.isNull(l)?"":l,text:"",cancel:false};if(j.editor&&j.editor.getValue){try{j.editor.blur()}catch(k){}j.value=j.editor.getValue()}if(j.editor&&j.editor.getText){j.text=j.editor.getText()}var a=mini._getMap(d.field,f),b=j.value;j.oldValue=a;if(mini.isEquals(a,b)){return j}this.fire("cellcommitedit",j);if(j.cancel==false){if(this.allowCellEdit){var c={};c[d.field]=j.value;if(d.displayField){c[d.displayField]=j.text}this.updateRow(f,c)}}return j},_OnCellEndEdit:function(a,f){if(!this._editingCell&&!a){return}if(!a){a=this._editingCell[0]}if(!f){f=this._editingCell[1]}var g={sender:this,rowIndex:this.indexOf(a),record:a,row:a,column:f,field:f.field,editor:this._editingControl,value:a[f.field]};this.fire("cellendedit",g);if(this.allowCellEdit&&g.editor){var d=g.editor;if(d&&d.setIsValid){d.setIsValid(true)}if(this._editWrap){this._editWrap.style.display="none"}var j=this._editWrap.childNodes;for(var b=j.length-1;b>=0;b--){var c=j[b];this._editWrap.removeChild(c)}if(d&&d.hidePopup){d.hidePopup()}if(d&&d.setValue){d.setValue("")}this._editingControl=null;this._editingCell=null;if(this.allowCellValid){this.validateCell(a,f)}}},_OnCellShowingEdit:function(b,g){if(!this._editingControl){return false}var a=this.getCellBox(b,g);var f=document.body.scrollWidth;if(a.right>f){a.width=f-a.left;if(a.width<10){a.width=10}a.right=a.left+a.width}var j={sender:this,rowIndex:this.indexOf(b),record:b,row:b,column:g,field:g.field,cellBox:a,editor:this._editingControl};this.fire("cellshowingedit",j);var d=j.editor;if(d&&d.setIsValid){d.setIsValid(true)}var c=this._getEditWrap(a,d);this._editWrap.style.zIndex=mini.getMaxZIndex();if(d.render){d.render(this._editWrap);setTimeout(function(){d.focus();if(d.selectText){d.selectText()}},50);if(d.setVisible){d.setVisible(true)}}else{if(d.el){this._editWrap.appendChild(d.el);setTimeout(function(){try{d.el.focus()}catch(k){}},50)}}this._setEdiorBox(d,a);mini.on(document,"mousedown",this.__OnBodyMouseDown,this);if(g.autoShowPopup&&d.showPopup){d.showPopup()}},_getEditingControl:function(){return this._editingControl},_setEdiorBox:function(d,b){if(d.setWidth){var c=b.width;if(c<20){c=20}d.setWidth(c)}if(d.setHeight&&d.type=="textarea"){var a=b.height-1;if(d.minHeight&&a<d.minHeight){a=d.minHeight}d.setHeight(a)}if(d.setWidth){var c=b.width-1;if(d.minWidth&&c<d.minWidth){c=d.minWidth}d.setWidth(c)}},__OnBodyMouseDown:function(f){if(this._editingControl){var a=this._getCellByEvent(f);if(this._editingCell&&a){if(this._editingCell[0]==a.record&&this._editingCell[1]==a.column){return false}}var b=false;if(this._editingControl.within){b=this._editingControl.within(f)}else{b=mini.isAncestor(this._editWrap,f.target)}if(b==false){var d=this;if(mini.isAncestor(this._bodyEl,f.target)==false){setTimeout(function(){d.commitEdit()},1)}else{var c=d._editingCell;setTimeout(function(){var g=d._editingCell;if(c==g){d.commitEdit()}},70)}mini.un(document,"mousedown",this.__OnBodyMouseDown,this)}}},_getEditWrap:function(c,b){if(!this._editWrap){this._editWrap=mini.append(document.body,'<div class="mini-grid-editwrap" style="position:absolute;"></div>');mini.on(this._editWrap,"keydown",this.___OnEditControlKeyDown,this)}this._editWrap.style.zIndex=1000000000;this._editWrap.style.display="block";var d=c.y;if(b.type!="textarea"){d=c.y+c.height/2-22/2}mini.setXY(this._editWrap,c.x,d);mini.setWidth(this._editWrap,c.width);var a=document.body.scrollWidth;if(c.x>a){mini.setX(this._editWrap,-1000)}return this._editWrap},___OnEditControlKeyDown:function(c){var b=this._editingControl;if(c.keyCode==13&&b&&b.type=="textarea"){return}if(c.keyCode==13){var a=this._editingCell;if(a&&a[1]&&a[1].enterCommit===false){return}this.commitEdit();this.focus();if(this.editNextOnEnterKey){this.fire("celleditenter",{record:a[0]});this._beginEditNextCell(c.shiftKey==false)}else{}}else{if(c.keyCode==27){this.cancelEdit();this.focus()}else{if(c.keyCode==9){this.commitEdit();if(this.editOnTabKey){c.preventDefault();this.commitEdit();this._beginEditNextCell(c.shiftKey==false,true)}else{}}}}},editNextRowCell:false,editNextOnEnterKey:false,editOnTabKey:true,createOnEnter:false,skipReadOnlyCell:false,setSkipReadOnlyCell:function(a){this.skipReadOnlyCell=a},getSkipReadOnlyCell:function(){return this.skipReadOnlyCell},isCellCanEdit:function(c,b){var a=this._OnCellBeginEdit(c,b,this.getCellEditor(b),false);return a},_beginEditNextCell:function(r,d){var a=this;var p=this.getCurrentCell();if(!p){return}this.focus();var c=a.getVisibleColumns();var g=p?p[1]:null,f=p?p[0]:null;function k(l){return a.getVisibleRows()[l]}function b(l){return a.getVisibleRows().indexOf(l)}function u(){return a.getVisibleRows().length}var y=c.indexOf(g);var n=b(f);var j=u();if(r===false){if(this.skipReadOnlyCell){var z=this;var q=x();function x(){var B=0;var C=(y-1===0)?c.length:y-1;for(;C>B;C--){g=c[C];var A=z.isCellCanEdit(f,g);if(A){return g}}}if(!q||y==0){y=c.length;var o=x();w()}}else{y-=1;g=c[y];if(!g){g=c[c.length-1];w()}}function w(){f=k(n-1);if(!f){return}}}else{if(this.editNextRowCell&&!d){if(n+1<j){f=k(n+1)}}else{if(this.skipReadOnlyCell){var z=this;var s=c.length;var q=t();function t(){var A=(y+1==s)?0:(y+1);for(;A<s;A++){g=c[A];var l=z.isCellCanEdit(f,g);if(l){return g}}}if(!q||y+1==s){y=0;var o=t();v()}}else{y+=1;g=c[y];if(!g){g=c[0];v()}}function v(){f=a.getAt(n+1);if(!f){if(this.createOnEnter){f={};this.addRow(f)}else{return}}}}}var p=[f,g];a.setCurrentCell(p);if(!a.onlyCheckSelection){if(a.getCurrent()!=f){a.deselectAll();a.setCurrent(f)}}a.scrollIntoView(f,g);if(a.isReadOnly()||g.readOnly){return false}a.beginEditCell()},getEditorOwnerRow:function(b){var a=b.ownerRowID;return this.getRowByUID(a)},beginEditRow:function(row){if(this.allowCellEdit){return}function beginEdit(row){var sss=new Date();row=this.getRow(row);if(!row){return}var rowEl=this._getRowEl(row,2);if(!rowEl){return}row._editing=true;this._doUpdateRowEl(row);var rowEl=this._getRowEl(row,2);mini.addClass(rowEl,"mini-grid-rowEdit");var columns=this.getVisibleColumns();for(var i=0,l=columns.length;i<l;i++){var column=columns[i];var value=row[column.field];var cellEl=this._getCellEl(row,column);if(!cellEl){continue}if(typeof column.editor=="string"){column.editor=eval("("+column.editor+")")}var editorConfig=mini.copyTo({},column.editor);editorConfig.id=this.uid+"$"+row._uid+"$"+column._id+"$editor";var editor=mini.create(editorConfig);if(this._OnCellBeginEdit(row,column,editor)){if(editor){mini.addClass(cellEl,"mini-grid-cellEdit");cellEl.innerHTML="";cellEl.appendChild(editor.el);mini.addClass(editor.el,"mini-grid-editor")}}}this.doLayout()}this._pushUpdateCallback(beginEdit,this,[row])},cancelEditRow:function(o){if(this.allowCellEdit){return}o=this.getRow(o);if(!o||!o._editing){return}delete o._editing;var g=this._getRowEl(o);var f=this.getVisibleColumns();for(var k=0,j=f.length;k<j;k++){var d=f[k];var a=this._createCellId(o,f[k]);var b=document.getElementById(a);if(!b){continue}var c=b.firstChild;var n=mini.get(c);if(!n){continue}n.destroy()}this._doUpdateRowEl(o);this.doLayout()},commitEditRow:function(b){if(this.allowCellEdit){return}b=this.getRow(b);if(!b||!b._editing){return}var a=this.getEditRowData(b,false,false);this._canUpdateRowEl=false;this.updateRow(b,a);this._canUpdateRowEl=true;this.cancelEditRow(b)},isEditing:function(){var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var d=c[b];if(d._editing==true){return true}}return false},isEditingRow:function(a){a=this.getRow(a);if(!a){return false}return !!a._editing},isNewRow:function(a){return a._state=="added"},getEditingRows:function(){var d=[];var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var f=c[b];if(f._editing==true){d.push(f)}}return d},getEditingRow:function(){var a=this.getEditingRows();return a[0]},getEditData:function(c){var f=[];var f=this.getDataView();for(var b=0,a=f.length;b<a;b++){var g=f[b];if(g._editing==true){var d=this.getEditRowData(b,c);d._index=b;f.push(d)}}return f},getEditRowData:function(j,b,u){j=this.getRow(j);if(!j||!j._editing){return null}var g=this.getIdField();var t=this.getParentField?this.getParentField():null;var k={};var a=this.getVisibleColumns();for(var v=0,s=a.length;v<s;v++){var c=a[v];var x=this._createCellId(j,a[v]);var p=document.getElementById(x);if(!p){continue}var w=null;if(c.type=="checkboxcolumn"||c.type=="radiobuttoncolumn"){var n=c.getCheckBoxEl(j,c);var r=n.checked?c.trueValue:c.falseValue;w=this._OnCellCommitEdit(j,c,r)}else{var f=p.firstChild;var d=mini.get(f);if(!d){continue}w=this._OnCellCommitEdit(j,c,null,d)}if(u!==false){mini._setMap(c.field,w.value,k);if(c.displayField){mini._setMap(c.displayField,w.text,k)}}else{k[c.field]=w.value;if(c.displayField){k[c.displayField]=w.text}}}k[g]=j[g];if(t){k[t]=j[t]}if(b){var q=mini.copyTo({},j);k=mini.copyTo(q,k)}return k},collapseGroups:function(){if(!this.isGrouping()){return}this._allowLayout=false;var a=this.getGroupingView();for(var c=0,b=a.length;c<b;c++){var d=a[c];this.collapseRowGroup(d)}this._allowLayout=true;this.doLayout()},expandGroups:function(){if(!this.isGrouping()){return}this._allowLayout=false;var a=this.getGroupingView();for(var c=0,b=a.length;c<b;c++){var d=a[c];this.expandRowGroup(d)}this._allowLayout=true;this.doLayout()},toggleRowGroup:function(a){if(a.expanded){this.collapseRowGroup(a)}else{this.expandRowGroup(a)}},collapseRowGroup:function(d){d=this.getRowGroup(d);if(!d){return}d.expanded=false;var b=this._getRowGroupEl(d,1);var c=this._getRowGroupRowsEl(d,1);var a=this._getRowGroupEl(d,2);var f=this._getRowGroupRowsEl(d,2);if(c){c.style.display="none"}if(f){f.style.display="none"}if(b){mini.addClass(b,"mini-grid-group-collapse")}if(a){mini.addClass(a,"mini-grid-group-collapse")}this.doLayout()},expandRowGroup:function(d){d=this.getRowGroup(d);if(!d){return}d.expanded=true;var b=this._getRowGroupEl(d,1);var c=this._getRowGroupRowsEl(d,1);var a=this._getRowGroupEl(d,2);var f=this._getRowGroupRowsEl(d,2);if(c){c.style.display=""}if(f){f.style.display=""}if(b){mini.removeClass(b,"mini-grid-group-collapse")}if(a){mini.removeClass(a,"mini-grid-group-collapse")}this.doLayout()},showAllRowDetail:function(){this._allowLayout=false;var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var d=c[b];this.showRowDetail(d)}this._allowLayout=true;this.doLayout()},hideAllRowDetail:function(){this._allowLayout=false;var c=this.getDataView();for(var b=0,a=c.length;b<a;b++){var d=c[b];this.hideRowDetail(d)}this._allowLayout=true;this.doLayout()},isShowRowDetail:function(a){a=this.getRow(a);if(!a){return false}return !!a._showDetail},toggleRowDetail:function(a){a=this.getRow(a);if(!a){return}if(grid.isShowRowDetail(a)){grid.hideRowDetail(a)}else{grid.showRowDetail(a)}},showRowDetail:function(f){f=this.getRow(f);if(!f||f._showDetail==true){return}f._showDetail=true;var c=this._getRowDetailEl(f,1,true);var g=this._getRowDetailEl(f,2,true);if(c){c.style.display=""}if(g){g.style.display=""}var b=this._getRowEl(f,1);var d=this._getRowEl(f,2);if(b){mini.addClass(b,"mini-grid-expandRow")}if(d){mini.addClass(d,"mini-grid-expandRow")}this.fire("showrowdetail",{record:f});var a=this;if(this.isFrozen()){a.syncRowDetail(f)}this.doLayout()},hideRowDetail:function(d){d=this.getRow(d);if(!d||d._showDetail!==true){return}d._showDetail=false;var b=this._getRowDetailEl(d,1);var f=this._getRowDetailEl(d,2);if(b){b.style.display="none"}if(f){f.style.display="none"}var a=this._getRowEl(d,1);var c=this._getRowEl(d,2);if(a){mini.removeClass(a,"mini-grid-expandRow")}if(c){mini.removeClass(c,"mini-grid-expandRow")}this.fire("hiderowdetail",{record:d});this.doLayout()},_getRowDetailEl:function(d,a,c){d=this.getRow(d);if(!d){return null}var f=this._createRowDetailId(d,a);var b=document.getElementById(f);if(!b&&c===true){b=this._createRowDetail(d,a)}return b},_createRowDetail:function(f,a){var k=this.getFrozenColumns();var d=this.getUnFrozenColumns();var j=k.length;if(a==2){j=d.length}var c=this._getRowEl(f,a);if(!c){return null}var g=this._createRowDetailId(f,a);var b='<tr id="'+g+'" class="mini-grid-detailRow"><td style="width:0"></td><td class="mini-grid-detailCell" colspan="'+j+'"></td></tr>';jQuery(c).after(b);return document.getElementById(g)},_createRowDetailId:function(b,a){return this._id+"$detail"+a+"$"+b._id},getRowDetailCellEl:function(c,a){if(!a){a=2}var b=this._getRowDetailEl(c,a);if(b){return b.cells[1]}},autoHideRowDetail:true,setAutoHideRowDetail:function(a){this.autoHideRowDetail=a},getAutoHideRowDetail:function(){return this.autoHideRowDetail},mergeColumns:function(d){if(d&&mini.isArray(d)==false){d=[d]}var a=this;var b=a.getVisibleColumns();if(!d){d=b}var g=a.getDataView();g.push({});var k=[];for(var j=0,f=d.length;j<f;j++){var c=d[j];c=a.getColumn(c);if(!c){continue}var o=n(c);k.addRange(o)}function n(p){if(!p.field){return}var y=[];var u=-1,t=1,s=b.indexOf(p);var x=null;for(var r=0,q=g.length;r<q;r++){var z=g[r];var v=mini._getMap(p.field,z);if(u==-1||!mini.isEquals(v,x)){if(t>1){var w={rowIndex:u,columnIndex:s,rowSpan:t,colSpan:1};y.push(w)}u=r;t=1;x=v}else{t++}}return y}a.mergeCells(k)},mergeCells:function(c){if(!mini.isArray(c)){return}this._mergedCells=c;var f=this._mergedCellMaps={};function g(u,s,t,r,v){for(var q=u,n=u+t;q<n;q++){for(var p=s,o=s+r;p<o;p++){if(q==u&&p==s){f[q+":"+p]=v}else{f[q+":"+p]=true}}}}var c=this._mergedCells;if(c){for(var d=0,b=c.length;d<b;d++){var a=c[d];if(!a.rowSpan){a.rowSpan=1}if(!a.colSpan){a.colSpan=1}g(a.rowIndex,a.columnIndex,a.rowSpan,a.colSpan,a)}}this.deferUpdate()},margeCells:function(a){this.mergeCells(a)},_isCellVisible:function(c,b){if(!this._mergedCellMaps){return true}var a=this._mergedCellMaps[c+":"+b];return !(a===true)},_getAnchorCell:function(c,b){if(!this._mergedCellMaps){return null}var d=this.indexOf(c),a=this.getBottomColumns().indexOf(b);return this._mergedCellMaps[d+":"+a]},_getCellEls:function(q,o,p,n){var s=[];if(!mini.isNumber(q)){return[]}if(!mini.isNumber(o)){return[]}var b=this.getVisibleColumns();var f=this.getDataView();for(var g=q,a=q+p;g<a;g++){for(var d=o,c=o+n;d<c;d++){var r=this._getCellEl(g,d);if(r){s.push(r)}}}return s},_getDragData:function(){var b=this.getSelecteds().clone();var a=this;mini.sort(b,function(d,c){var g=a.indexOf(d);var f=a.indexOf(c);if(g>f){return 1}if(g<f){return -1}return 0},this);return b},_getDragText:function(a){return"Records "+a.length},allowDrag:false,allowDrop:false,allowLeafDropIn:false,setAllowLeafDropIn:function(a){this.allowLeafDropIn=a},getAllowLeafDropIn:function(){return this.allowLeafDropIn},setAllowDrag:function(a){this.allowDrag=a},getAllowDrag:function(){return this.allowDrag},setAllowDrop:function(a){this.allowDrop=a},getAllowDrop:function(){return this.allowDrop},isAllowDrag:function(b,a){if(this.isReadOnly()||this.enabled==false){return false}if(!this.allowDrag||!a.allowDrag){return false}if(b.allowDrag===false){return false}return true},_OnDragStart:function(b,a){var c={node:b,nodes:this._getDragData(),column:a,cancel:false};c.record=c.node;c.records=c.nodes;c.dragText=this._getDragText(c.nodes);this.fire("dragstart",c);return c},_OnGiveFeedback:function(c,b,a,f){var d={};d.from=f;d.effect=c;d.nodes=b;d.node=d.nodes[0];d.targetNode=a;d.dragNodes=b;d.dragNode=d.dragNodes[0];d.dropNode=d.targetNode;d.dragAction=d.action;this.fire("givefeedback",d);return d},_OnDragDrop:function(c,b,a){c=c.clone();var d={dragNodes:c,targetNode:b,action:a,cancel:false};d.dragNode=d.dragNodes[0];d.dropNode=d.targetNode;d.dragAction=d.action;this.fire("beforedrop",d);this.fire("dragdrop",d);return d},moveUp:function(b){if(!mini.isArray(b)){return}var g=this;b=b.sort(function(k,j){var n=g.indexOf(k);var l=g.indexOf(j);if(n>l){return 1}return -1});for(var d=0,a=b.length;d<a;d++){var f=b[d];var c=this.indexOf(f);this.moveRow(f,c-1)}},moveDown:function(b){if(!mini.isArray(b)){return}var g=this;b=b.sort(function(k,j){var n=g.indexOf(k);var l=g.indexOf(j);if(n>l){return 1}return -1});b.reverse();for(var d=0,a=b.length;d<a;d++){var f=b[d];var c=this.indexOf(f);this.moveRow(f,c+2)}},pageSize:20,pageIndex:0,totalCount:0,totalPage:0,sortField:"",sortOrder:"",url:"",setAjaxAsync:function(a){this._dataSource.ajaxAsync=a;this.ajaxAsync=a},getAjaxAsync:function(){return this._dataSource.ajaxAsync},setAjaxMethod:function(a){this._dataSource.ajaxMethod=a;this.ajaxMethod=a},getAjaxMethod:function(){return this._dataSource.ajaxMethod},setAjaxType:function(a){this._dataSource.ajaxType=a;this.ajaxType=a},getAjaxType:function(){return this._dataSource.ajaxType},setAjaxOptions:function(a){this._dataSource.setAjaxOptions(a)},getAjaxOptions:function(){return this._dataSource.getAjaxOptions()},setAutoLoad:function(a){this._dataSource.setAutoLoad(a)},getAutoLoad:function(){return this._dataSource.getAutoLoad()},setUrl:function(a){this._dataSource.setUrl(a);this.url=a},getUrl:function(){return this._dataSource.getUrl()},load:function(d,c,b,a){this._dataSource.load(d,c,b,a)},reload:function(c,b,a){this.accept();this._dataSource.reload(c,b,a)},gotoPage:function(a,b){this._dataSource.gotoPage(a,b)},sortBy:function(b,c){if(!b){return null}var d=this._dataSource;this.sortField=d.sortField=b;this.sortOrder=d.sortOrder=c;if(this._dataSource.sortMode=="server"){this._dataSource.sortBy(b,c)}else{var a=this._columnModel._getDataTypeByField(b);this._dataSource._doClientSortField(b,c,a)}},showCellTip:true,setShowCellTip:function(a){this.showCellTip=a},getShowCellTip:function(){return this.showCellTip},setCheckSelectOnLoad:function(a){this._dataSource.setCheckSelectOnLoad(a);this.checkSelectOnLoad=a},getCheckSelectOnLoad:function(){return this._dataSource.getCheckSelectOnLoad()},setSelectOnLoad:function(a){this._dataSource.setSelectOnLoad(a);this.selectOnLoad=a},getSelectOnLoad:function(){return this._dataSource.getSelectOnLoad()},setSortMode:function(a){this._dataSource.setSortMode(a);this.sortMode=a},getSortMode:function(){return this._dataSource.getSortMode()},setPageIndex:function(a){this._dataSource.setPageIndex(a);this.pageIndex=a},getPageIndex:function(){return this._dataSource.getPageIndex()},setPageSize:function(a){this._dataSource.setPageSize(a);this._virtualRows=a;this.pageSize=a},getPageSize:function(){return this._dataSource.getPageSize()},setTotalCount:function(a){this._dataSource.setTotalCount(a);this.totalCount=a},getTotalCount:function(){return this._dataSource.getTotalCount()},getTotalPage:function(){return this._dataSource.getTotalPage()},setSortField:function(a){this._dataSource.setSortField(a);this.sortField=a},getSortField:function(){return this._dataSource.sortField},setSortOrder:function(a){this._dataSource.setSortOrder(a);this.sortOrder=a},getSortOrder:function(){return this._dataSource.sortOrder},setPageIndexField:function(a){this._dataSource.pageIndexField=a;this.pageIndexField=a},getPageIndexField:function(){return this._dataSource.pageIndexField},setPageSizeField:function(a){this._dataSource.pageSizeField=a;this.pageSizeField=a},getPageSizeField:function(){return this._dataSource.pageSizeField},setStartField:function(a){this._dataSource.startField=a;this.startField=a},getStartField:function(){return this._dataSource.startField},setLimitField:function(a){this._dataSource.limitField=a;this.limitField=a},getLimitField:function(){return this._dataSource.limitField},setSortFieldField:function(a){this._dataSource.sortFieldField=a;this.sortFieldField=a},getSortFieldField:function(){return this._dataSource.sortFieldField},setSortOrderField:function(a){this._dataSource.sortOrderField=a;this.sortOrderField=a},getSortOrderField:function(){return this._dataSource.sortOrderField},setTotalField:function(a){this._dataSource.totalField=a;this.totalField=a},getTotalField:function(){return this._dataSource.totalField},setDataField:function(a){this._dataSource.dataField=a;this.dataField=a},getDataField:function(){return this._dataSource.dataField},setErrorField:function(a){this._dataSource.errorField=a;this.errorField=a},getErrorField:function(){return this._dataSource.errorField},setErrorMsgField:function(a){this._dataSource.errorMsgField=a;this.errorMsgField=a},getErrorMsgField:function(){return this._dataSource.errorMsgField},setStackTraceField:function(a){this._dataSource.stackTraceField=a;this.stackTraceField=a},getStackTraceField:function(){return this._dataSource.stackTraceField},setPageSizeWidth:function(a){this._bottomPager.setPageSizeWidth(a)},getPageSizeWidth:function(){return this._bottomPager.getPageSizeWidth()},setShowReloadButton:function(a){this._bottomPager.setShowReloadButton(a)},getShowReloadButton:function(){return this._bottomPager.getShowReloadButton()},setShowPageInfo:function(a){this._bottomPager.setShowPageInfo(a)},getShowPageInfo:function(){return this._bottomPager.getShowPageInfo()},setSizeList:function(a){if(!mini.isArray(a)){return}this._bottomPager.setSizeList(a)},getSizeList:function(){return this._bottomPager.getSizeList()},setShowPageSize:function(a){this._bottomPager.setShowPageSize(a)},getShowPageSize:function(){return this._bottomPager.getShowPageSize()},setShowPageIndex:function(a){this.showPageIndex=a;this._bottomPager.setShowPageIndex(a)},getShowPageIndex:function(){return this._bottomPager.getShowPageIndex()},setShowTotalCount:function(a){this._bottomPager.setShowTotalCount(a)},getShowTotalCount:function(){return this._bottomPager.getShowTotalCount()},setPagerStyle:function(a){this.pagerStyle=a;mini.setStyle(this._bottomPager.el,a)},setPagerCls:function(a){this.pagerCls=a;mini.addClass(this._bottomPager.el,a)},_beforeOpenContentMenu:function(c,b){var a=mini.isAncestor(this._bodyEl,b.htmlEvent.target);if(a){c.fire("BeforeOpen",b)}else{b.cancel=true}},__OnHtmlContextMenu:function(b){var a={popupEl:this.el,htmlEvent:b,cancel:false};if(mini.isAncestor(this._columnsEl,b.target)){if(this.headerContextMenu){this.headerContextMenu.fire("BeforeOpen",a);if(a.cancel==true){return}this.headerContextMenu.fire("opening",a);if(a.cancel==true){return}this.headerContextMenu.showAtPos(b.pageX,b.pageY);this.headerContextMenu.fire("Open",a)}}else{var c=mini.findParent(b.target,"mini-grid-detailRow");if(c&&mini.isAncestor(this.el,c)){return}if(this.contextMenu){this._beforeOpenContentMenu(this.contextMenu,a);if(a.cancel==true){return}this.contextMenu.fire("opening",a);if(a.cancel==true){return}this.contextMenu.showAtPos(b.pageX,b.pageY);this.contextMenu.fire("Open",a)}}return false},headerContextMenu:null,setHeaderContextMenu:function(b){var a=this._getContextMenu(b);if(!a){return}if(this.headerContextMenu!==a){this.headerContextMenu=a;this.headerContextMenu.owner=this;mini.on(this.el,"contextmenu",this.__OnHtmlContextMenu,this)}},getHeaderContextMenu:function(){return this.headerContextMenu},_get_originals:function(){return this._dataSource._originals},_set_originals:function(a){this._dataSource._originals=a},_set_clearOriginals:function(a){this._dataSource._clearOriginals=a},_set_originalIdField:function(a){this._dataSource._originalIdField=a},_set_autoCreateNewID:function(a){this._dataSource._autoCreateNewID=a},getAttrs:function(el){var attrs=mini.DataGrid.superclass.getAttrs.call(this,el);var cs=mini.getChildNodes(el);for(var i=0,l=cs.length;i<l;i++){var node=cs[i];var property=jQuery(node).attr("property");if(!property){continue}property=property.toLowerCase();if(property=="columns"){attrs.columns=mini._ParseColumns(node);mini.removeNode(node)}else{if(property=="data"){attrs.data=node.innerHTML;mini.removeNode(node)}}}mini._ParseString(el,attrs,["oncelleditenter","onselect","ondeselect","onbeforeselect","onbeforedeselect","url","sizeList","bodyCls","bodyStyle","footerCls","footerStyle","pagerCls","pagerStyle","onheadercellclick","onheadercellmousedown","onheadercellcontextmenu","onrowdblclick","onrowclick","onrowmousedown","onrowcontextmenu","onrowmouseenter","onrowmouseleave","oncellclick","oncellmousedown","oncellcontextmenu","oncelldblclick","onbeforeload","onpreload","onloaderror","onload","onupdate","ondrawcell","oncellbeginedit","onselectionchanged","ondrawgroup","onbeforeshowrowdetail","onbeforehiderowdetail","onshowrowdetail","onhiderowdetail","idField","valueField","pager","oncellcommitedit","oncellendedit","headerContextMenu","loadingMsg","emptyText","cellEditAction","sortMode","oncellvalidation","onsort","ondrawsummarycell","ondrawgroupsummarycell","onresize","oncolumnschanged","ajaxMethod","ajaxOptions","onaddrow","onupdaterow","onremoverow","onmoverow","onbeforeaddrow","onbeforeupdaterow","onbeforeremoverow","onbeforemoverow","pageIndexField","pageSizeField","sortFieldField","sortOrderField","startField","limitField","totalField","dataField","sortField","sortOrder","stackTraceField","errorField","errorMsgField","pagerButtons","onbeforegroupclick"]);mini._ParseBool(el,attrs,["showColumns","showFilterRow","showSummaryRow","showPager","showFooter","enableGroupOrder","showHGridLines","showVGridLines","allowSortColumn","allowMoveColumn","allowResizeColumn","fitColumns","showLoading","multiSelect","allowAlternating","resultAsData","allowRowSelect","allowUnselect","onlyCheckSelection","allowHotTrackOut","enableHotTrack","showPageIndex","showPageSize","showTotalCount","checkSelectOnLoad","allowResize","autoLoad","autoHideRowDetail","allowCellSelect","allowCellEdit","allowCellWrap","allowHeaderWrap","selectOnLoad","virtualScroll","collapseGroupOnLoad","showGroupSummary","showEmptyText","allowCellValid","showModified","showColumnsMenu","showPageInfo","showReloadButton","showNewRow","editNextOnEnterKey","createOnEnter","skipReadOnlyCell","ajaxAsync","allowDrag","allowDrop","allowLeafDropIn","editNextRowCell","fixedRowHeight","showCellTip"]);mini._ParseInt(el,attrs,["frozenStartColumn","frozenEndColumn","pageSizeWidth","pageIndex","pageSize","defaultRowHeight","defaultColumnWidth"]);if(typeof attrs.ajaxOptions=="string"){attrs.ajaxOptions=eval("("+attrs.ajaxOptions+")")}if(typeof attrs.sizeList=="string"){attrs.sizeList=eval("("+attrs.sizeList+")")}if(!attrs.idField&&attrs.valueField){attrs.idField=attrs.valueField}if(attrs.pagerButtons){attrs.pagerButtons=mini.byId(attrs.pagerButtons)}return attrs}});mini.regClass(mini.DataGrid,"datagrid");mini_DataGrid_CellValidator_Prototype={getCellErrors:function(){var k=this._cellErrors.clone();var f=this.getDataView();for(var c=0,a=k.length;c<a;c++){var b=k[c];var g=b.record;var d=b.column;if(f.indexOf(g)==-1){var j=g[this._rowIdField]+"$"+d._id;delete this._cellMapErrors[j];this._cellErrors.remove(b)}}return this._cellErrors},getCellError:function(b,a){b=this.getNode?this.getNode(b):this.getRow(b);a=this.getColumn(a);if(!b||!a){return}var c=b[this._rowIdField]+"$"+a._id;return this._cellMapErrors?this._cellMapErrors[c]:null},isValid:function(){return this.getCellErrors().length==0},isCellValid:function(a,b){if(!this._cellMapErrors){return true}var c=a[this._rowIdField]+"$"+b._id;return !this._cellMapErrors[c]},validate:function(c){c=c||this.getDataView();if(!mini.isArray(c)){c=[]}for(var b=0,a=c.length;b<a;b++){var d=c[b];this.validateRow(d)}},validateRow:function(f){var c=this.getBottomColumns();for(var b=0,a=c.length;b<a;b++){var d=c[b];this.validateCell(f,d)}},validateCell:function(r,d){r=this.getNode?this.getNode(r):this.getRow(r);d=this.getColumn(d);if(!r||!d||d.visible==false){return}var p=mini._getMap(d.field,r);var j={record:r,row:r,node:r,column:d,field:d.field,value:p,isValid:true,errorText:""};if(d.vtype){mini._ValidateVType(d.vtype,j.value,j,d)}if(j.isValid==true&&d.unique&&d.field){var k={};var f=this.data,n=d.field;for(var g=0,c=f.length;g<c;g++){var a=f[g];var q=a[n];if(mini.isNull(q)||q===""){}else{var b=k[q];if(b&&a==r){j.isValid=false;j.errorText=mini._getErrorText(d,"uniqueErrorText");this.setCellIsValid(b,d,j.isValid,j.errorText);break}k[q]=a}}}this.fire("cellvalidation",j);this.setCellIsValid(r,d,j.isValid,j.errorText)},setIsValid:function(d){if(d){var f=this._cellErrors.clone();for(var c=0,a=f.length;c<a;c++){var b=f[c];this.setCellIsValid(b.record,b.column,true)}}},_removeRowError:function(g){var d=this.getColumns();for(var c=0,a=d.length;c<a;c++){var f=d[c];var j=g[this._rowIdField]+"$"+f._id;var b=this._cellMapErrors[j];if(b){delete this._cellMapErrors[j];this._cellErrors.remove(b)}}},setCellIsValid:function(g,d,f,a){g=this.getRow(g);d=this.getColumn(d);if(!g||!d){return}var j=g[this._rowIdField]+"$"+d._id;var b=this._getCellEl(g,d);var c=this._cellMapErrors[j];delete this._cellMapErrors[j];this._cellErrors.remove(c);if(f===true){if(b&&c){mini.removeClass(b,"mini-grid-cell-error")}}else{c={record:g,column:d,isValid:f,errorText:a};this._cellMapErrors[j]=c;this._cellErrors.add(c);if(b){mini.addClass(b,"mini-grid-cell-error")}}}};mini.copyTo(mini.DataGrid.prototype,mini_DataGrid_CellValidator_Prototype);mini.TreeGrid=function(){mini.TreeGrid.superclass.constructor.apply(this,arguments);mini.addClass(this.el,"mini-tree");this.setAjaxAsync(false);this.setAutoLoad(true);if(this.showTreeLines==true){mini.addClass(this.el,"mini-tree-treeLine")}this._AsyncLoader=new mini._Tree_AsyncLoader(this);this._Expander=new mini._Tree_Expander(this)};mini.copyTo(mini.TreeGrid.prototype,mini._DataTreeApplys);mini.extend(mini.TreeGrid,mini.DataGrid,{isTree:true,uiCls:"mini-treegrid",showPager:false,showNewRow:false,showCheckBox:false,showRadioButton:false,showTreeIcon:true,showExpandButtons:true,showTreeLines:false,showArrow:false,expandOnDblClick:true,expandOnNodeClick:false,loadOnExpand:true,_checkBoxType:"checkbox",iconField:"iconCls",_treeColumn:null,leafIconCls:"mini-tree-leaf",folderIconCls:"mini-tree-folder",fixedRowHeight:false,_checkBoxCls:"mini-tree-checkbox",_expandNodeCls:"mini-tree-expand",_collapseNodeCls:"mini-tree-collapse",_eciconCls:"mini-tree-node-ecicon",_inNodeCls:"mini-tree-nodeshow",indexOf:function(a){return this._dataSource.indexOfList(a)},_getDragText:function(a){return"Nodes "+a.length},_initEvents:function(){mini.TreeGrid.superclass._initEvents.call(this);this.on("nodedblclick",this.__OnNodeDblClick,this);this.on("nodeclick",this.__OnNodeClick,this);this.on("cellclick",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodeclick",a)},this);this.on("cellmousedown",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodemousedown",a)},this);this.on("celldblclick",function(a){a.node=a.record;a.isLeaf=this.isLeaf(a.node);this.fire("nodedblclick",a)},this);this.on("beforerowselect",function(a){a.node=a.selected;a.isLeaf=this.isLeaf(a.node);this.fire("beforenodeselect",a)},this);this.on("rowselect",function(a){a.node=a.selected;a.isLeaf=this.isLeaf(a.node);this.fire("nodeselect",a)},this)},setValue:function(d,b){if(mini.isNull(d)){d=""}d=String(d);if(this.getValue()!=d){var a=this.getCheckedNodes();this.uncheckNodes(a);this.value=d;if(this.showCheckBox){var c=String(d).split(",");this._dataSource.doCheckNodes(c,true,b!==false)}else{this.selectNode(d,false)}}},getValue:function(a){if(this.showCheckBox){if(a===false){a="leaf"}return this._dataSource.getCheckedNodesId(a)}else{return this._dataSource.getSelectedsId()}},getText:function(){var c=[];if(this.showCheckBox){c=this.getCheckedNodes()}else{var f=this.getSelectedNode();if(f){c.push(f)}}var g=[],b=this.getTextField();for(var d=0,a=c.length;d<a;d++){var f=c[d];g.push(f[b])}return g.join(",")},isGrouping:function(){return false},_createSource:function(){this._dataSource=new mini.DataTree()},_bindSource:function(){mini.TreeGrid.superclass._bindSource.call(this);var a=this._dataSource;a.on("expand",this.__OnTreeExpand,this);a.on("collapse",this.__OnTreeCollapse,this);a.on("checkchanged",this.__OnCheckChanged,this);a.on("addnode",this.__OnSourceAddNode,this);a.on("removenode",this.__OnSourceRemoveNode,this);a.on("movenode",this.__OnSourceMoveNode,this);a.on("beforeloadnode",this.__OnBeforeLoadNode,this);a.on("loadnode",this.__OnLoadNode,this)},__OnBeforeLoadNode:function(a){this.__showLoading=this.showLoading;this.showLoading=false;this.addNodeCls(a.node,"mini-tree-loading");this.fire("beforeloadnode",a)},__OnLoadNode:function(a){this.showLoading=this.__showLoading;this.removeNodeCls(a.node,"mini-tree-loading");this.fire("loadnode",a)},_virtualUpdate:function(){var a=this;if(a._updateNodeTimer){clearTimeout(a._updateNodeTimer);a._updateNodeTimer=null}a._updateNodeTimer=setTimeout(function(){a._updateNodeTimer=null;a.doUpdateRows();a.deferLayout(50)},5)},__OnSourceAddNode:function(b){var a=new Date();if(this.isVirtualScroll()==true){this._virtualUpdate()}else{this._doAddNodeEl(b.node)}this.fire("addnode",b)},__OnSourceRemoveNode:function(c){if(this.isVirtualScroll()==true){this._virtualUpdate()}else{this._doRemoveNodeEl(c.node);var a=this.getParentNode(c.node);var b=this.getChildNodes(a);if(b.length==0){this._doUpdateTreeNodeEl(a)}}this.fire("removenode",c)},__OnSourceMoveNode:function(a){this._doMoveNodeEl(a.node);this.fire("movenode",a)},_doAddNodeEl:function(c){var j=this.getFrozenColumns();var f=this.getUnFrozenColumns();var a=this.getParentNode(c);var g=this.indexOf(c);var b=false;function d(q,o,n){var p=this._createRowHTML(q,g,o,n);var l=this.indexOfNode(q)+1;var r=this.getChildNodeAt(l,a);if(r){var t=this._getNodeEl(r,n);jQuery(t).before(p)}else{var k=this._getNodesEl(a,n);if(k){mini.append(k.firstChild,p)}else{b=true}}}d.call(this,c,f,2);d.call(this,c,j,1);if(b){this._doUpdateTreeNodeEl(a)}},_doRemoveNodeEl:function(c){this._doRemoveRowEl(c);var a=this._getNodesEl(c,1);var b=this._getNodesEl(c,2);if(a){a.parentNode.removeChild(a)}if(b){b.parentNode.removeChild(b)}},_doMoveNodeEl:function(b){if(this.isVirtualScroll()==true){this._virtualUpdate()}else{this._doRemoveNodeEl(b);var a=this.getParentNode(b);this._doUpdateTreeNodeEl(a)}},_doUpdateNodeTitle:function(a){this._doUpdateTreeNodeEl(a,false)},_doUpdateTreeNodeEl:function(f,g){g=g!==false;var d=this.getRootNode();if(d==f){this.doUpdate();return}if(!this.isVisibleNode(f)){return}var p=f;var a=this.getFrozenColumns();var c=this.getUnFrozenColumns();var n=this._createNodeHTML(f,a,1,null,g);var k=this._createNodeHTML(f,c,2,null,g);var s=this._getNodeEl(f,1);var q=this._getNodeEl(f,2);var o=this._getNodesTr(f,1);var l=this._getNodesTr(f,2);var t=this._getRowDetailEl(f,1);var r=this._getRowDetailEl(f,2);var j=mini.createElements(n);var f=j[0];var b=j[1];if(s){mini.before(s,f);if(g){if(t){mini.after(t,b)}else{mini.before(s,b)}}mini.removeNode(s);if(g){mini.removeNode(o)}}var j=mini.createElements(k);var f=j[0];var b=j[1];if(q){mini.before(q,f);if(g){if(r){mini.after(r,b)}else{mini.before(q,b)}}mini.removeNode(q);if(g){mini.removeNode(l)}}if(f.checked!=true&&!this.isLeaf(f)){this._doCheckNodeEl(p)}},addNodeCls:function(b,a){this.addRowCls(b,a)},removeNodeCls:function(b,a){this.removeRowCls(b,a)},doUpdate:function(){mini.TreeGrid.superclass.doUpdate.apply(this,arguments)},setData:function(a){if(!a){a=[]}this._dataSource.setData(a)},loadList:function(c,b,d){b=b||this.getIdField();d=d||this.getParentField();var a=mini.listToTree(c,this.getNodesField(),b,d);this.setData(a)},_createDrawCellEvent:function(a,c,f,b){var d=mini.TreeGrid.superclass._createDrawCellEvent.call(this,a,c,f,b);d.node=d.record;d.isLeaf=this.isLeaf(d.node);if(this._treeColumn&&this._treeColumn==c.name){d.isTreeCell=true;d.img=a[this.imgField];d.iconCls=this._getNodeIcon(a);d.nodeCls="";d.nodeStyle="";d.nodeHtml="";d.showTreeIcon=this.showTreeIcon;d.checkBoxType=this._checkBoxType;d.showCheckBox=this.showCheckBox;d.showRadioButton=this.showRadioButton;if(d.showCheckBox&&!d.isLeaf){d.showCheckBox=this.showFolderCheckBox}if(d.showRadioButton&&!d.isLeaf){d.showRadioButton=this.showFolderCheckBox}d.checkable=this.getCheckable(d.node)}return d},_OnDrawCell:function(a,c,f,b){var d=mini.TreeGrid.superclass._OnDrawCell.call(this,a,c,f,b);if(this._treeColumn&&this._treeColumn==c.name){this.fire("drawnode",d);if(d.nodeStyle){d.cellStyle=d.nodeStyle}if(d.nodeCls){d.cellCls=d.nodeCls}if(d.nodeHtml){d.cellHtml=d.nodeHtml}this._createTreeColumn(d)}return d},_isViewFirstNode:function(b){if(this._viewNodes){var c=this.getParentNode(b);var a=this._getViewChildNodes(c);return a[0]===b}else{return this.isFirstNode(b)}},_isViewLastNode:function(b){if(this._viewNodes){var c=this.getParentNode(b);var a=this._getViewChildNodes(c);return a[a.length-1]===b}else{return this.isLastNode(b)}},_isInViewLastNode:function(g,k){if(this._viewNodes){var j=null;var d=this.getAncestors(g);for(var f=0,c=d.length;f<c;f++){var b=d[f];if(this.getLevel(b)==k){j=b}}if(!j||j==this.root){return false}return this._isViewLastNode(j)}else{return this.isInLastNode(g,k)}},isInLastNode:function(g,k){var j=null;var d=this.getAncestors(g);for(var f=0,c=d.length;f<c;f++){var b=d[f];if(this.getLevel(b)==k){j=b}}if(!j||j==this.root){return false}return this.isLastNode(j)},_createNodeTitle:function(s,b,v){var f=!b;if(!b){b=[]}var w=this.isLeaf(s);var a=this.getLevel(s);var c=v.nodeCls;if(!w){c=this.isExpandedNode(s)?this._expandNodeCls:this._collapseNodeCls}if(s.enabled===false){c+=" mini-disabled"}if(!w){c+=" mini-tree-parentNode"}var d=this.getChildNodes(s);var t=d&&d.length>0;b[b.length]='<div class="mini-tree-nodetitle '+c+'" style="'+v.nodeStyle+'">';var j=this.getParentNode(s);var o=0;for(var u=o;u<=a;u++){if(u==a){continue}if(w){if(u>a-1){continue}}var l="";if(this._isInViewLastNode(s,u)){l="background:none"}b[b.length]='<span class="mini-tree-indent " style="'+l+'"></span>'}var n="";if(this._isViewFirstNode(s)&&a==0){n="mini-tree-node-ecicon-first"}else{if(this._isViewLastNode(s)){n="mini-tree-node-ecicon-last"}}if(this._isViewFirstNode(s)&&this._isViewLastNode(s)){n="mini-tree-node-ecicon-last";if(j==this.root){n="mini-tree-node-ecicon-firstLast"}}if(!w){b[b.length]='<a class="'+this._eciconCls+" "+n+'" style="'+(this.showExpandButtons?"":"display:none")+'" href="javascript:void(0);" onclick="return false;" hidefocus></a>'}else{b[b.length]='<span class="'+this._eciconCls+" "+n+'" style="'+(this.showExpandButtons?"":"display:none")+'"></span>'}b[b.length]='<span class="mini-tree-nodeshow">';if(v.showTreeIcon){if(v.img){var x=this.imgPath+v.img;b[b.length]='<span class="mini-tree-icon" style="background-image:url('+x+');"></span>'}else{b[b.length]='<span class="'+v.iconCls+' mini-tree-icon"></span>'}}if(v.showRadioButton&&!v.showCheckBox){b[b.length]='<span class="mini-tree-radio" ></span>'}if(v.showCheckBox){var q=this._createCheckNodeId(s);var g=this.isCheckedNode(s);var k=v.enabled===false?"disabled":"";if(v.enabled!==false){k=v.checkable===false?"disabled":""}b[b.length]='<input type="checkbox" id="'+q+'" class="'+this._checkBoxCls+'" hidefocus '+(g?"checked":"")+" "+(k)+' onclick="return false;"/>'}b[b.length]='<span class="mini-tree-nodetext">';if(this._editingNode==s){var r=this._id+"$edit$"+s._id;var p=v.value;b[b.length]='<input id="'+r+'" type="text" class="mini-tree-editinput" value="'+p+'"/>'}else{b[b.length]=v.cellHtml}b[b.length]="</span>";b[b.length]="</span>";b[b.length]="</div>";if(f){return b.join("")}},_createTreeColumn:function(f){var d=f.record,c=f.column;f.headerCls+=" mini-tree-treecolumn";f.cellCls+=" mini-tree-treecell";f.cellStyle+=";padding:0;";var a=this.isLeaf(d);f.cellHtml=this._createNodeTitle(d,null,f);if(d.checked!=true&&!a){var b=this.getCheckState(d);if(b=="indeterminate"){this._renderCheckState(d)}}},_createCheckNodeId:function(a){return this._id+"$checkbox$"+a._id},_renderCheckState:function(b){if(!this._renderCheckStateNodes){this._renderCheckStateNodes=[]}this._renderCheckStateNodes.push(b);if(this._renderCheckStateTimer){return}var a=this;this._renderCheckStateTimer=setTimeout(function(){a._renderCheckStateTimer=null;var d=a._renderCheckStateNodes;a._renderCheckStateNodes=null;for(var f=0,c=d.length;f<c;f++){a._doCheckNodeEl(d[f])}},1)},_createNodeHTML:function(c,f,q,n,d){var l=!n;if(!n){n=[]}var a=this._dataSource;var o=a.getDataView().indexOf(c);this._createRowHTML(c,o,f,q,n);if(d!==false){var k=a.getChildNodes(c);var j=this.isVisibleNode(c);if(k&&k.length>0){var g=this.isExpandedNode(c);if(g==true){var b=(g&&j)?"":"display:none";var p=this._createNodesId(c,q);n[n.length]='<tr class="mini-tree-nodes-tr" style="';if(mini.isIE){n[n.length]=b}n[n.length]='" ><td style="width:0;"></td><td class="mini-tree-nodes-td" colspan="';n[n.length]=f.length;n[n.length]='" >';n[n.length]='<div class="mini-tree-nodes" id="';n[n.length]=p;n[n.length]='" style="';n[n.length]=b;n[n.length]='">';this._createNodesHTML(k,f,q,n);n[n.length]="</div>";n[n.length]="</td></tr>"}}}if(l){return n.join("")}},_createNodesHTML:function(c,g,f,n){if(!c){return""}var a=!n;if(!n){n=[]}n.push('<table class="mini-grid-table" cellspacing="0" cellpadding="0" border="0">');n.push(this._createTopRowHTML(g,true));if(g.length>0){for(var d=0,b=c.length;d<b;d++){var l=c[d];this._createNodeHTML(l,g,f,n)}}n.push("</table>");if(a){return n.join("")}},_createRowsHTML:function(f,d){if(this.isVirtualScroll()){return mini.TreeGrid.superclass._createRowsHTML.apply(this,arguments)}var j=this._dataSource,g=this;var k=[];var c=[];var b=j.getRootNode();if(this._useEmptyView!==true){c=j.getChildNodes(b)}var a=d==2?this._rowsViewEl.firstChild:this._rowsLockEl.firstChild;a.id=this._createNodesId(b,d);this._createNodesHTML(c,f,d,k);return k.join("")},_createNodesId:function(b,a){var c=this._id+"$nodes"+a+"$"+b._id;return c},_getNodeEl:function(b,a){return this._getRowEl(b,a)},_getNodesEl:function(b,a){b=this.getNode(b);var c=this._createNodesId(b,a);return document.getElementById(c)},_getNodesTr:function(c,a){var b=this._getNodesEl(c,a);if(b){return b.parentNode.parentNode}},setTreeColumn:function(a){this._treeColumn=a;this.deferUpdate()},getTreeColumn:function(){return this._treeColumn},setShowTreeIcon:function(a){this.showTreeIcon=a;this.deferUpdate()},getShowTreeIcon:function(){return this.showTreeIcon},setShowCheckBox:function(a){this.showCheckBox=a;this.deferUpdate()},getShowCheckBox:function(){return this.showCheckBox},setShowRadioButton:function(a){this.showRadioButton=a;this.deferUpdate()},getShowRadioButton:function(){return this.showRadioButton},setCheckBoxType:function(a){this._checkBoxType=a;this._doUpdateCheckState()},getCheckBoxType:function(){return this._checkBoxType},setIconsField:function(a){this._iconsField=a},getIconsField:function(){return this._iconsField},_getNodeIcon:function(b){var a=b[this.iconField];if(!a){if(this.isLeaf(b)){a=this.leafIconCls}else{a=this.folderIconCls}}return a},_getCheckBoxEl:function(a){if(this.isVisibleNode(a)==false){return null}var b=this._id+"$checkbox$"+a._id;return mini.byId(b,this.el)},useAnimation:true,_updateNodeTimer:null,_doExpandCollapseNode:function(g){var f=this;if(f._updateNodeTimer){clearTimeout(f._updateNodeTimer);f._updateNodeTimer=null}var d=new Date();if(this.isVirtualScroll()==true){f._updateNodeTimer=setTimeout(function(){f._updateNodeTimer=null;f.doUpdateRows();f.deferLayout(50)},5);return}function c(){this._doUpdateTreeNodeEl(g);this.deferLayout(20)}if(false||mini.isIE6||!this.useAnimation||this.isFrozen()){c.call(this)}else{var a=this.isExpandedNode(g);function j(r,n,q){var k=this._getNodesEl(r,n);if(k){var o=mini.getHeight(k);k.style.overflow="hidden";k.style.height="0px";var l={height:o+"px"};var p=this;p._inAniming=true;var s=jQuery(k);s.animate(l,250,function(){k.style.height="auto";p._inAniming=false;p.doLayout();mini.repaint(k)})}else{}}function b(r,n,q){var k=this._getNodesEl(r,n);if(k){var o=mini.getHeight(k);var l={height:0+"px"};var p=this;p._inAniming=true;var s=jQuery(k);s.animate(l,180,function(){k.style.height="auto";p._inAniming=false;if(q){q.call(p)}p.doLayout();mini.repaint(k)})}else{if(q){q.call(this)}}}var f=this;if(a){c.call(this);j.call(this,g,2);j.call(this,g,1)}else{b.call(this,g,2,c);b.call(this,g,1)}}},__OnTreeCollapse:function(a){this._doExpandCollapseNode(a.node)},__OnTreeExpand:function(a){this._doExpandCollapseNode(a.node)},_doCheckNodeEl:function(d){var b=this._getCheckBoxEl(d);if(b){var a=this.getCheckModel();b.checked=d.checked;b.indeterminate=false;if(a=="cascade"){var c=this.getCheckState(d);if(c=="indeterminate"){b.indeterminate=true}else{b.indeterminate=false}}}},__OnCheckChanged:function(f){for(var b=0,a=f._nodes.length;b<a;b++){var d=f._nodes[b];this._doCheckNodeEl(d)}if(this._checkChangedTimer){clearTimeout(this._checkChangedTimer);this._checkChangedTimer=null}var c=this;this._checkChangedTimer=setTimeout(function(){c._checkChangedTimer=null;c.fire("checkchanged")},1)},_tryToggleCheckNode:function(c){var a=this.getCheckable(c);if(a==false){return}var b=this.isCheckedNode(c);var d={node:c,cancel:false,checked:b,isLeaf:this.isLeaf(c)};this.fire("beforenodecheck",d);if(d.cancel){return}this._dataSource.doCheckNodes(c,!b,true);this.fire("nodecheck",d)},_tryToggleNode:function(a){var c=this.isExpandedNode(a);var b={node:a,cancel:false};if(c){this.fire("beforecollapse",b);if(b.cancel==true){return}this.collapseNode(a);b.type="collapse";this.fire("collapse",b)}else{this.fire("beforeexpand",b);if(b.cancel==true){return}this.expandNode(a);b.type="expand";this.fire("expand",b)}},_OnCellMouseDown:function(a){if(mini.findParent(a.htmlEvent.target,this._eciconCls)){}else{if(mini.findParent(a.htmlEvent.target,"mini-tree-checkbox")){}else{this.fire("cellmousedown",a)}}},_OnCellClick:function(a){if(mini.findParent(a.htmlEvent.target,this._eciconCls)){return}if(mini.findParent(a.htmlEvent.target,"mini-tree-checkbox")){this._tryToggleCheckNode(a.record)}else{this.fire("cellclick",a)}},__OnNodeDblClick:function(a){},__OnNodeClick:function(a){},setNodeText:function(a,c){a=this.getNode(a);if(!a){return}var b={};b[this.getTextField()]=c;this.updateNode(a,b)},setNodeIconCls:function(b,a){b=this.getNode(b);if(!b){return}var c={};c[this.iconField]=a;this.updateNode(b,c)},setIconField:function(a){this.iconField=a},getIconField:function(){return this.iconField},setAllowSelect:function(a){this.setAllowRowSelect(a)},getAllowSelect:function(){return this.getAllowRowSelect()},setShowExpandButtons:function(a){if(this.showExpandButtons!=a){this.showExpandButtons=a;this.doUpdate()}},getShowExpandButtons:function(){return this.showExpandButtons},setShowTreeLines:function(a){this.showTreeLines=a;if(a==true){mini.addClass(this.el,"mini-tree-treeLine")}else{mini.removeClass(this.el,"mini-tree-treeLine")}},getShowTreeLines:function(){return this.showTreeLines},setShowArrow:function(a){this.showArrow=a;if(a==true){mini.addClass(this.el,"mini-tree-showArrows")}else{mini.removeClass(this.el,"mini-tree-showArrows")}},getShowArrow:function(){return this.showArrow},setLeafIcon:function(a){this.leafIcon=a},getLeafIcon:function(){return this.leafIcon},setFolderIcon:function(a){this.folderIcon=a},getFolderIcon:function(){return this.folderIcon},getExpandOnDblClick:function(){return this.expandOnDblClick},setExpandOnNodeClick:function(a){this.expandOnNodeClick=a;if(a){mini.addClass(this.el,"mini-tree-nodeclick")}else{mini.removeClass(this.el,"mini-tree-nodeclick")}},getExpandOnNodeClick:function(){return this.expandOnNodeClick},setLoadOnExpand:function(a){this.loadOnExpand=a},getLoadOnExpand:function(){return this.loadOnExpand},hideNode:function(c){c=this.getNode(c);if(!c){return}c.visible=false;this._doUpdateTreeNodeEl(c);var b=this._getNodeEl(c,1);var a=this._getNodeEl(c,2);if(b){b.style.display="none"}if(a){a.style.display="none"}},showNode:function(a){a=this.getNode(a);if(!a){return}a.visible=true;this._doUpdateTreeNodeEl(a)},enableNode:function(d){d=this.getNode(d);if(!d){return}d.enabled=true;var c=this._getNodeEl(d,1);var b=this._getNodeEl(d,2);if(c){mini.removeClass(c,"mini-disabled")}if(b){mini.removeClass(b,"mini-disabled")}var a=this._getCheckBoxEl(d);if(a){a.disabled=false}},disableNode:function(d){d=this.getNode(d);if(!d){return}d.enabled=false;var c=this._getNodeEl(d,1);var b=this._getNodeEl(d,2);if(c){mini.addClass(c,"mini-disabled")}if(b){mini.addClass(b,"mini-disabled")}var a=this._getCheckBoxEl(d);if(a){a.disabled=true}},imgPath:"",setImgPath:function(a){this.imgPath=a},getImgPath:function(){return this.imgPath},imgField:"img",setImgField:function(a){this.imgField=a},getImgField:function(){return this.imgField},getAttrs:function(c){var l=mini.TreeGrid.superclass.getAttrs.call(this,c);mini._ParseString(c,l,["value","url","idField","textField","iconField","nodesField","parentField","valueField","checkedField","leafIcon","folderIcon","leafField","ondrawnode","onbeforenodeselect","onnodeselect","onnodemousedown","onnodeclick","onnodedblclick","onbeforenodecheck","onnodecheck","onbeforeexpand","onexpand","onbeforecollapse","oncollapse","dragGroupName","dropGroupName","onendedit","expandOnLoad","ondragstart","onbeforedrop","ondrop","ongivefeedback","treeColumn","onaddnode","onremovenode","onmovenode","imgPath","imgField"]);mini._ParseBool(c,l,["allowSelect","showCheckBox","showRadioButton","showExpandButtons","showTreeIcon","showTreeLines","checkRecursive","enableHotTrack","showFolderCheckBox","resultAsTree","allowDrag","allowDrop","showArrow","expandOnDblClick","removeOnCollapse","autoCheckParent","loadOnExpand","expandOnNodeClick"]);if(l.expandOnLoad){var a=parseInt(l.expandOnLoad);if(mini.isNumber(a)){l.expandOnLoad=a}else{l.expandOnLoad=l.expandOnLoad=="true"?true:false}}var b=l.idField||this.getIdField();var f=l.textField||this.getTextField();var d=l.iconField||this.getIconField();var k=l.nodesField||this.getNodesField();function j(n){var u=[];for(var v=0,t=n.length;v<t;v++){var r=n[v];var w=mini.getChildNodes(r);var x=w[0];var C=w[1];if(!x||!C){x=r}var A=jQuery(x);var q={};var p=q[b]=x.getAttribute("value");q[d]=A.attr("iconCls");q[f]=x.innerHTML;u.add(q);var z=A.attr("expanded");if(z){q.expanded=z=="false"?false:true}var s=A.attr("allowSelect");if(s){q.allowSelect=s=="false"?false:true}if(!C){continue}var y=mini.getChildNodes(C);var B=j(y);if(B.length>0){q[k]=B}}return u}var g=j(mini.getChildNodes(c));if(g.length>0){l.data=g}if(!l.idField&&l.valueField){l.idField=l.valueField}return l}});mini.regClass(mini.TreeGrid,"TreeGrid");mini.Tree=function(){mini.Tree.superclass.constructor.apply(this,arguments);var a=[{name:"node",header:"",field:this.getTextField(),width:"auto",allowDrag:true,editor:{type:"textbox"}}];this._columnModel.setColumns(a);this._column=this._columnModel.getColumn("node");mini.removeClass(this.el,"mini-treegrid");mini.addClass(this.el,"mini-tree-nowrap");this.setBorderStyle("border:0")};mini.extend(mini.Tree,mini.TreeGrid,{setTextField:function(a){this._dataSource.setTextField(a);this._columnModel.updateColumn("node",{field:a});this.textField=a},uiCls:"mini-tree",_rowHoverCls:"mini-tree-node-hover",_rowSelectedCls:"mini-tree-selectedNode",_getRecordByEvent:function(a,c){var b=mini.Tree.superclass._getRecordByEvent.call(this,a);if(c===false){return b}if(b&&mini.findParent(a.target,"mini-tree-nodeshow")){return b}return null},_treeColumn:"node",defaultRowHeight:22,_getRowHeight:function(a){var b=this.defaultRowHeight;if(a._height){b=parseInt(a._height);if(isNaN(parseInt(a._height))){b=rowHeight}}return b},showHeader:false,showTopbar:false,showFooter:false,showColumns:false,showHGridLines:false,showVGridLines:false,showTreeLines:true,setTreeColumn:null,setColumns:null,getColumns:null,frozen:null,unFrozen:null,showModified:false,_OnCellMouseDown:function(a){if(this._editInput){this._editInput.blur()}this.fire("cellmousedown",a)},isEditingNode:function(a){return this._editingNode==a},beginEdit:function(c){c=this.getNode(c);if(!c){return}var a=this.getColumn(0);var d=mini._getMap(a.field,c);var f={record:c,node:c,column:a,field:a.field,value:d,cancel:false};this.fire("cellbeginedit",f);if(f.cancel==true){return}this._editingNode=c;this._doUpdateNodeTitle(c);var b=this;function g(){var j=b._id+"$edit$"+c._id;b._editInput=document.getElementById(j);b._editInput.focus();mini.selectRange(b._editInput,0,1000);mini.on(b._editInput,"keydown",b.__OnEditInputKeyDown,b);mini.on(b._editInput,"blur",b.__OnEditInputBlur,b)}setTimeout(function(){g()},100);g()},cancelEdit:function(b){var a=this._editingNode;this._editingNode=null;if(a){if(b!==false){this._doUpdateNodeTitle(a)}mini.un(this._editInput,"keydown",this.__OnEditInputKeyDown,this);mini.un(this._editInput,"blur",this.__OnEditInputBlur,this)}this._editInput=null},__OnEditInputKeyDown:function(b){if(b.keyCode==13){var a=this._editingNode;var c=this._editInput.value;this._editingNode=null;this.setNodeText(a,c);this.cancelEdit(false);this.fire("endedit",{node:a,text:c})}else{if(b.keyCode==27){this.cancelEdit()}}},__OnEditInputBlur:function(b){var a=this._editingNode;if(a){var c=this._editInput.value;this.cancelEdit();this.setNodeText(a,c);this.fire("endedit",{node:a,text:c})}},addRowCls:function(d,a){var c=this._getRowEl(d,1);var b=this._getRowEl(d,2);if(c){mini.addClass(c,a)}if(b){mini.addClass(b,a)}},removeRowCls:function(d,a){var c=this._getRowEl(d,1);var b=this._getRowEl(d,2);if(c){mini.removeClass(c,a);mini.removeClass(c,a)}if(b){mini.removeClass(b,a);mini.removeClass(b,a)}},scrollIntoView:function(b){b=this.getNode(b);if(!b){return}if(!this.isVisibleNode(b)){this.expandPath(b)}var a=this;setTimeout(function(){var c=a._getNodeEl(b,2);mini.scrollIntoView(c,a._rowsViewEl,false)},10)}});mini.regClass(mini.Tree,"Tree");mini._Tree_Expander=function(a){this.owner=a;mini.on(a.el,"click",this.__OnClick,this);mini.on(a.el,"dblclick",this.__OnDblClick,this)};mini._Tree_Expander.prototype={_canToggle:function(){return !this.owner._dataSource._isNodeLoading()},__OnClick:function(d){var a=this.owner;var c=a._getRecordByEvent(d,false);if(!c||c.enabled===false){return}if(mini.findParent(d.target,"mini-tree-checkbox")){return}var b=a.isLeaf(c);if(mini.findParent(d.target,a._eciconCls)){if(this._canToggle()==false){return}a._tryToggleNode(c)}else{if(a.expandOnNodeClick&&!b&&!a._inAniming){if(this._canToggle()==false){return}a._tryToggleNode(c)}}},__OnDblClick:function(d){var a=this.owner;var c=a._getRecordByEvent(d,false);if(!c||c.enabled===false){return}var b=a.isLeaf(c);if(a._inAniming){return}if(mini.findParent(d.target,a._eciconCls)){return}if(a.expandOnNodeClick){return}if(a.expandOnDblClick&&!b){if(this._canToggle()==false){return}d.preventDefault();a._tryToggleNode(c)}}};mini._Tree_AsyncLoader=function(a){this.owner=a;a.on("beforeexpand",this.__OnBeforeNodeExpand,this)};mini._Tree_AsyncLoader.prototype={__OnBeforeNodeExpand:function(f){var a=this.owner;var d=f.node;var b=a.isLeaf(d);var c=d[a.getNodesField()];if(!b&&(!c||c.length==0)){if(a.loadOnExpand&&d.asyncLoad!==false){f.cancel=true;a.loadNode(d)}}}};mini.locale="zh_CN";mini.dateInfo={monthsLong:["","","","","","","","","","","",""],monthsShort:["1","2","3","4","5","6","7","8","9","10","11","12"],daysLong:["","","","","","",""],daysShort:["","","","","","",""],quarterLong:["","","",""],quarterShort:["Q1","Q2","Q2","Q4"],halfYearLong:["",""],patterns:{d:"yyyy-M-d",D:"yyyyMd",f:"yyyyMd H:mm",F:"yyyyMd H:mm:ss",g:"yyyy-M-d H:mm",G:"yyyy-M-d H:mm:ss",m:"MMMd",o:"yyyy-MM-ddTHH:mm:ss.fff",s:"yyyy-MM-ddTHH:mm:ss",t:"H:mm",T:"H:mm:ss",U:"yyyyMd HH:mm:ss",y:"yyyyMM"},tt:{AM:"",PM:""},ten:{Early:"",Mid:"",Late:""},today:"",clockType:24};mini.cultures["zh-CN"]={name:"zh-CN",numberFormat:{number:{pattern:["n","-n"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3]},percent:{pattern:["n%","-n%"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:"%"},currency:{pattern:["$n","$-n"],decimals:2,decimalsSeparator:".",groupSeparator:",",groupSize:[3],symbol:""}}};mini.culture("zh-CN");if(mini.MessageBox){mini.copyTo(mini.MessageBox,{alertTitle:"",confirmTitle:"",prompTitle:"",prompMessage:"",buttonText:{ok:"",cancel:"",yes:"",no:""}})}if(mini.Calendar){mini.copyTo(mini.Calendar.prototype,{firstDayOfWeek:0,yesterdayText:"",todayText:"",clearText:"",okText:"",cancelText:"",daysShort:["","","","","","",""],format:"yyyyMM",timeFormat:"H:mm"})}for(var id in mini){var clazz=mini[id];if(clazz&&clazz.prototype&&clazz.prototype.isControl){clazz.prototype.requiredErrorText="";clazz.prototype.loadingMsg="Loading..."}}if(mini.VTypes){mini.copyTo(mini.VTypes,{minDateErrorText:" {0}",maxDateErrorText:" {0}",uniqueErrorText:"",requiredErrorText:"",emailErrorText:"",urlErrorText:"URL",floatErrorText:"",intErrorText:"",dateErrorText:" {0}",maxLengthErrorText:" {0} ",minLengthErrorText:" {0} ",maxErrorText:" {0} ",minErrorText:" {0} ",rangeLengthErrorText:" {0}  {1} ",rangeCharErrorText:" {0}  {1} ",rangeErrorText:" {0}  {1} "})}if(mini.Pager){mini.copyTo(mini.Pager.prototype,{firstText:"",prevText:"",nextText:"",lastText:"",reloadText:"",pageInfoText:" {0} ,  {1} "})}if(mini.DataGrid){mini.copyTo(mini.DataGrid.prototype,{emptyText:""})}if(mini.FileUpload){mini.FileUpload.prototype.buttonText="..."}if(mini.HtmlFile){mini.HtmlFile.prototype.buttonText="..."}if(window.mini.Gantt){mini.GanttView.ShortWeeks=["","","","","","",""];mini.GanttView.LongWeeks=["","","","","","",""];mini.Gantt.PredecessorLinkType=[{ID:0,Name:"-(FF)",Short:"FF"},{ID:1,Name:"-(FS)",Short:"FS"},{ID:2,Name:"-(SF)",Short:"SF"},{ID:3,Name:"-(SS)",Short:"SS"}];mini.Gantt.ConstraintType=[{ID:0,Name:""},{ID:1,Name:""},{ID:2,Name:""},{ID:3,Name:""},{ID:4,Name:"..."},{ID:5,Name:"..."},{ID:6,Name:"..."},{ID:7,Name:"..."}];mini.copyTo(mini.Gantt,{ID_Text:"",Name_Text:"",PercentComplete_Text:"",Duration_Text:"",Start_Text:"",Finish_Text:"",Critical_Text:"",PredecessorLink_Text:"",Work_Text:"",Priority_Text:"",Weight_Text:"",OutlineNumber_Text:"",OutlineLevel_Text:"",ActualStart_Text:"",ActualFinish_Text:"",WBS_Text:"WBS",ConstraintType_Text:"",ConstraintDate_Text:"",Department_Text:"",Principal_Text:"",Assignments_Text:"",Summary_Text:"",Task_Text:"",Baseline_Text:"",LinkType_Text:"",LinkLag_Text:"",From_Text:"",To_Text:"",Goto_Text:"",UpGrade_Text:"",DownGrade_Text:"",Add_Text:"",Edit_Text:"",Remove_Text:"",Move_Text:"",ZoomIn_Text:"",ZoomOut_Text:"",Deselect_Text:"",Split_Text:""})}mini.FileBoxList=function(a){mini.FileBoxList.superclass.constructor.call(this,null);this.data=[];this.doUpdate();if(a){mini.applyTo.call(this,a)}};mini.extend(mini.FileBoxList,mini.ValidatorBase,{formField:true,value:"",text:"",valueField:"id",textField:"text",data:"",tableId:"",url:"",delay:150,allowInput:true,editIndex:0,_focusCls:"mini-textboxlist-focus",_itemHoverClass:"mini-textboxlist-item-hover",_itemSelectedClass:"mini-textboxlist-item-selected",_closeHoverClass:"mini-textboxlist-close-hover",_buttonCls:"mini-buttonedit-button",_buttonHoverCls:"mini-buttonedit-button-hover",_buttonPressedCls:"mini-buttonedit-button-pressed",textName:"",setTextName:function(a){this.textName=a},getTextName:function(){return this.textName},uiCls:"mini-fileboxlist",_getButtonsHTML:function(){var a='<span class="mini-buttonedit-close"></span>'+this._getButtonHtml();return'<span class="mini-buttonedit-buttons">'+a+"</span>"},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-buttonedit-icon"></span></span>'},_create:function(){var b=this._getButtonsHTML();var a='<table class="mini-textboxlist" cellpadding="0" cellspacing="0"><tr ><td class="mini-textboxlist-border"><ul></ul><a href="#"></a><input type="hidden"/>'+b+"</td></tr></table>";var c=document.createElement("div");c.innerHTML=a;this.el=c.firstChild;var f=this.el.getElementsByTagName("td")[0];this.ulEl=f.firstChild;this._valueEl=f.getElementsByTagName("input")[0];this._buttonsEl=f.lastChild;this._buttonEl=this._buttonsEl.lastChild;this.focusEl=f.childNodes[1]},destroy:function(a){if(this.isShowPopup){this.hidePopup()}mini.un(document,"mousedown",this.__OnDocMouseDown,this);mini.FileBoxList.superclass.destroy.call(this,a)},_initEvents:function(){mini.FileBoxList.superclass._initEvents.call(this);mini.on(this.el,"mousemove",this.__OnMouseMove,this);mini.on(this.el,"mouseout",this.__OnMouseOut,this);mini.on(this.el,"mousedown",this.__OnMouseDown,this);mini.on(this.el,"click",this.__OnClick,this);mini.on(this.el,"keydown",this.__OnKeyDown,this);mini.on(document,"mousedown",this.__OnDocMouseDown,this)},__OnDocMouseDown:function(a){if(this.isReadOnly()){return}if(this.isShowPopup){if(!mini.isAncestor(this.popup.el,a.target)){this.hidePopup()}}if(this._focused){if(this.within(a)==false){this.select(null,false);this.showInput(false);this.removeCls(this._focusCls);this._focused=false}}},errorIconEl:null,onButtonClick:function(b,a){this.on("buttonclick",b,a)},_OnButtonClick:function(a){var b={htmlEvent:a,cancel:false};this.fire("beforebuttonclick",b);if(b.cancel==true){return}this.fire("buttonclick",b)},getErrorIconEl:function(){if(!this._errorIconEl){var a=this.el.rows[0];var b=a.insertCell(1);b.style.cssText="width:18px;vertical-align:top;";b.innerHTML='<div class="mini-errorIcon"></div>';this._errorIconEl=b.firstChild}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){jQuery(this._errorIconEl.parentNode).remove()}this._errorIconEl=null},doLayout:function(){if(this.canLayout()==false){return}mini.FileBoxList.superclass.doLayout.call(this);if(this.isReadOnly()||this.allowInput==false){this._inputEl.readOnly=true}else{this._inputEl.readOnly=false}},doUpdate:function(){if(this._ValueChangeTimer){clearInterval(this._ValueChangeTimer)}if(this._inputEl){mini.un(this._inputEl,"keydown",this.__OnInputKeyDown,this)}var j=[];var a=this.uid;for(var d=0,c=this.data.length;d<c;d++){var b=this.data[d];var n=a+"$text$"+d;var k=mini._getMap(this.textField,b);if(mini.isNull(k)){k=""}j[j.length]='<li id="'+n+'" class="mini-textboxlist-item">';j[j.length]=k;j[j.length]="</li>"}var g=a+"$input";j[j.length]='<li id="'+g+'" class="mini-textboxlist-inputLi"><input class="mini-textboxlist-input" type="text" autocomplete="off"></li>';this.ulEl.innerHTML=j.join("");this.editIndex=this.data.length;if(this.editIndex<0){this.editIndex=0}this.inputLi=this.ulEl.lastChild;this._inputEl=this.inputLi.firstChild;mini.on(this._inputEl,"keydown",this.__OnInputKeyDown,this);var f=this;this._inputEl.onkeyup=function(){f._syncInputSize()};f._ValueChangeTimer=null;f._LastInputText=f._inputEl.value;this._inputEl.onfocus=function(){f._ValueChangeTimer=setInterval(function(){if(f._LastInputText!=f._inputEl.value){f._startQuery();f._LastInputText=f._inputEl.value}},10);f.addCls(f._focusCls);f._focused=true;f.fire("focus")};this._inputEl.onblur=function(){clearInterval(f._ValueChangeTimer);f.fire("blur")}},getItemByEvent:function(c){var b=mini.findParent(c.target,"mini-textboxlist-item");if(b){var a=b.id.split("$");var d=a[a.length-1];return this.data[d]}},getItem:function(a){if(typeof a=="number"){return this.data[a]}if(typeof a=="object"){return a}},getItemEl:function(c){var a=this.data.indexOf(c);var b=this.uid+"$text$"+a;return document.getElementById(b)},hoverItem:function(b,c){if(this.isReadOnly()||this.enabled==false){return}this.blurItem();var a=this.getItemEl(b);mini.addClass(a,this._itemHoverClass);if(c&&mini.hasClass(c.target,"mini-textboxlist-close")){mini.addClass(c.target,this._closeHoverClass)}},blurItem:function(){var b=this.data.length;for(var d=0,c=b;d<c;d++){var f=this.data[d];var a=this.getItemEl(f);if(a){mini.removeClass(a,this._itemHoverClass);mini.removeClass(a.lastChild,this._closeHoverClass)}}},showInput:function(b){this.select(null);if(mini.isNumber(b)){this.editIndex=b}else{this.editIndex=this.data.length}if(this.editIndex<0){this.editIndex=0}if(this.editIndex>this.data.length){this.editIndex=this.data.length}var a=this.inputLi;a.style.display="block";if(mini.isNumber(b)&&b<this.data.length){var d=this.data[b];var c=this.getItemEl(d);jQuery(c).before(a)}else{this.ulEl.appendChild(a)}if(b!==false){setTimeout(function(){try{a.firstChild.focus();mini.selectRange(a.firstChild,100)}catch(f){}},10)}else{this.lastInputText="";this._inputEl.value=""}return a},select:function(d){d=this.getItem(d);if(this._selected){var a=this.getItemEl(this._selected);mini.removeClass(a,this._itemSelectedClass)}this._selected=d;if(this._selected){var a=this.getItemEl(this._selected);mini.addClass(a,this._itemSelectedClass)}var c=this;if(this._selected){this.focusEl.focus();var b=this;setTimeout(function(){try{b.focusEl.focus()}catch(f){}},50)}if(this._selected){c.addCls(c._focusCls);c._focused=true}},_doInsertSelectValue:function(){var b=this._listbox.getSelected();var a=this.editIndex;if(b){b=mini.clone(b);this.insertItem(a,b)}},insertItem:function(a,b){this.data.insert(a,b);var d=this.getText();var c=this.getValue();this.setValue(c,false);this.setText(d,false);this._createData();this.doUpdate();this.showInput(a+1);this._OnValueChanged()},removeItem:function(b){if(!b){return}var a=this.getItemEl(b);mini.removeNode(a);this.data.remove(b);var d=this.getText();var c=this.getValue();this.setValue(c,false);this.setText(d,false);this._OnValueChanged()},_createData:function(){var g=(this.text?this.text:"").split(",");var c=(this.value?this.value:"").split(",");if(c[0]==""){c=[]}var a=c.length;this.data.length=a;for(var d=0,b=a;d<b;d++){var k=this.data[d];if(!k){k={};this.data[d]=k}var j=!mini.isNull(g[d])?g[d]:"";var f=!mini.isNull(c[d])?c[d]:"";mini._setMap(this.textField,j,k);mini._setMap(this.valueField,f,k)}this.value=this.getValue();this.text=this.getText()},getInputText:function(){return this._inputEl?this._inputEl.value:""},getText:function(){var f=[];for(var c=0,a=this.data.length;c<a;c++){var d=this.data[c];var b=mini._getMap(this.textField,d);if(mini.isNull(b)){b=""}b=b.replace(",","");f.push(b)}return f.join(",")},getValue:function(){var f=[];for(var c=0,a=this.data.length;c<a;c++){var d=this.data[c];var b=mini._getMap(this.valueField,d);f.push(b)}return f.join(",")},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},setTableId:function(a){this.tableId=a},getTableId:function(){return this.tableId},setName:function(a){if(this.name!=a){this.name=a;this._valueEl.name=a}},setValue:function(a){if(mini.isNull(a)){a=""}if(this.value!=a){this.value=a;this._valueEl.value=a;this._createData();this.doUpdate()}},setText:function(a){if(mini.isNull(a)){a=""}if(this.text!==a){this.text=a;this._createData();this.doUpdate()}},setValueField:function(a){this.valueField=a;this._createData()},getValueField:function(){return this.valueField},setTextField:function(a){this.textField=a;this._createData()},getTextField:function(){return this.textField},setAllowInput:function(a){this.allowInput=a;this.doLayout()},getAllowInput:function(){return this.allowInput},setUrl:function(a){this.url=a},getUrl:function(){return this.url},setPopupHeight:function(a){this.popupHeight=a},getPopupHeight:function(){return this.popupHeight},setPopupMinHeight:function(a){this.popupMinHeight=a},getPopupMinHeight:function(){return this.popupMinHeight},setPopupMaxHeight:function(a){this.popupMaxHeight=a},getPopupMaxHeight:function(){return this.popupMaxHeight},doQuery:function(){this._startQuery(true)},_syncInputSize:function(){if(this.isDisplay()==false){return}var d=this.getInputText();var b=mini.measureText(this._inputEl,d);var c=b.width>20?b.width+4:20;var a=mini.getWidth(this.el,true);if(c>a-15){c=a-15}this._inputEl.style.width=c+"px"},_startQuery:function(a){var b=this;setTimeout(function(){b._syncInputSize()},1);this.showPopup("loading");this._stopQuery();this._loading=true;this.delayTimer=setTimeout(function(){var c=b._inputEl.value;b._doQuery()},this.delay)},ajaxDataType:"text",ajaxContentType:"application/x-www-form-urlencoded; charset=UTF-8",_doQuery:function(){if(this.isDisplay()==false){return}var l=this.getInputText();var d=this;var a=this._listbox.getData();var c={value:this.getValue(),text:this.getText()};c[this.searchField]=l;var b=this.url;var k=typeof b=="function"?b:window[b];if(typeof k=="function"){b=k(this)}if(!b){return}var g="post";if(b){if(b.indexOf(".txt")!=-1||b.indexOf(".json")!=-1){g="get"}}var f={url:b,async:true,params:c,data:c,type:this.ajaxType?this.ajaxType:g,cache:false,cancel:false};this.fire("beforeload",f);if(f.cancel){return}var j=this;mini.copyTo(f,{success:function(r,s,q){delete f.params;var p={text:r,result:null,sender:j,options:f,xhr:q};var n=null;try{mini_doload(p);n=p.result;if(!n){n=mini.decode(r)}}catch(o){if(mini_debugger==true){throw new Error("textboxlist json is error")}}if(mini.isArray(n)){n={data:n}}if(j.dataField){n.data=mini._getMap(j.dataField,n)}if(!n.data){n.data=[]}d._listbox.setData(n.data);d.showPopup();d._listbox._focusItem(0,true);d.fire("load",{data:n.data,result:n});d._loading=false;if(d._selectOnLoad){d.__doSelectValue();d._selectOnLoad=null}},error:function(n,p,o){d.showPopup("error")}});d._ajaxer=mini.ajax(f)},_stopQuery:function(){if(this.delayTimer){clearTimeout(this.delayTimer);this.delayTimer=null}if(this._ajaxer){this._ajaxer.abort()}this._loading=false},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this.showPopup&&this.popup&&this.popup.within(a)){return true}return false},popupLoadingText:"<span class='mini-textboxlist-popup-loading'>Loading...</span>",popupErrorText:"<span class='mini-textboxlist-popup-error'>Error</span>",popupEmptyText:"<span class='mini-textboxlist-popup-noresult'>No Result</span>",isShowPopup:false,popupHeight:"",popupMinHeight:30,popupMaxHeight:150,_createPopup:function(){if(!this.popup){this.popup=new mini.ListBox();this.popup.addCls("mini-textboxlist-popup");this.popup.setStyle("position:absolute;left:0;top:0;");this.popup.showEmpty=true;this.popup.setValueField(this.valueField);this.popup.setTextField(this.textField);this.popup.render(document.body);this.popup.on("itemclick",function(a){this.hidePopup();this._doInsertSelectValue()},this)}this._listbox=this.popup;return this.popup},showPopup:function(d){if(this.isDisplay()==false){return}this.isShowPopup=true;var b=this._createPopup();b.el.style.zIndex=mini.getMaxZIndex();var f=this._listbox;f.emptyText=this.popupEmptyText;if(d=="loading"){f.emptyText=this.popupLoadingText;this._listbox.setData([])}else{if(d=="error"){f.emptyText=this.popupLoadingText;this._listbox.setData([])}}this._listbox.doUpdate();var c=this.getBox();var a=c.x,g=c.y+c.height;this.popup.el.style.display="block";mini.setXY(b.el,-1000,-1000);this.popup.setWidth(c.width);this.popup.setHeight(this.popupHeight);if(this.popup.getHeight()<this.popupMinHeight){this.popup.setHeight(this.popupMinHeight)}if(this.popup.getHeight()>this.popupMaxHeight){this.popup.setHeight(this.popupMaxHeight)}mini.setXY(b.el,a,g)},hidePopup:function(){this.isShowPopup=false;if(this.popup){this.popup.el.style.display="none"}},__OnMouseMove:function(b){if(this.enabled==false){return}var a=this.getItemByEvent(b);if(!a){this.blurItem();return}this.hoverItem(a,b)},__OnMouseOut:function(a){this.blurItem()},__OnClick:function(c){if(this.isReadOnly()||this.enabled==false){return}if(this.enabled==false){return}if(mini.isAncestor(this._buttonEl,c.target)){this._OnButtonClick(c)}var b=this.getItemByEvent(c);if(!b){if(mini.findParent(c.target,"mini-textboxlist-input")){}else{this.showInput()}return}this.focusEl.focus();this.select(b);if(c&&mini.hasClass(c.target,"mini-textboxlist-close")){this.removeItem(b)}if(c&&mini.hasClass(c.target,"mini-textboxlist-item")){var a=getRootPath()+"/tbp/fileUpLoadAction.do?attach_id="+b.id+"&method=outFile";window.open(a,"_self")}},__OnKeyDown:function(d){if(this.isReadOnly()||this.allowInput==false){return false}var b=this.data.indexOf(this._selected);var c=this;function a(){var f=c.data[b];c.removeItem(f);f=c.data[b];if(!f){f=c.data[b-1]}c.select(f);if(!f){c.showInput()}}switch(d.keyCode){case 8:d.preventDefault();a();break;case 37:case 38:this.select(null);this.showInput(b);break;case 39:case 40:b+=1;this.select(null);this.showInput(b);break;case 46:a();break}},__doSelectValue:function(){var a=this._listbox.getFocusedItem();if(a){this._listbox.setSelected(a)}this.lastInputText=this.text;this.hidePopup();this._doInsertSelectValue()},__OnInputKeyDown:function(j){this._selectOnLoad=null;if(this.isReadOnly()||this.allowInput==false){return false}j.stopPropagation();if(this.isReadOnly()||this.allowInput==false){return}var f=mini.getSelectRange(this._inputEl);var a=f[0],b=f[1],k=this._inputEl.value.length;var c=a==b&&a==0;var d=a==b&&b==k;if(this.isReadOnly()||this.allowInput==false){j.preventDefault()}if(j.keyCode==9){this.hidePopup();return}if(j.keyCode==16||j.keyCode==17||j.keyCode==18){return}switch(j.keyCode){case 13:if(this.isShowPopup){j.preventDefault();if(this._loading){this._selectOnLoad=true;return}this.__doSelectValue()}break;case 27:j.preventDefault();this.hidePopup();break;case 8:if(c){j.preventDefault()}case 37:if(c){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex>0){var g=this.editIndex-1;if(g<0){g=0}if(g>=this.data.length){g=this.data.length-1}this.showInput(false);this.select(g)}}}break;case 39:if(d){if(this.isShowPopup){this.hidePopup()}else{if(this.editIndex<=this.data.length-1){var g=this.editIndex;this.showInput(false);this.select(g)}}}break;case 38:j.preventDefault();if(this.isShowPopup){var g=-1;var l=this._listbox.getFocusedItem();if(l){g=this._listbox.indexOf(l)}g--;if(g<0){g=0}this._listbox._focusItem(g,true)}break;case 40:j.preventDefault();if(this.isShowPopup){var g=-1;var l=this._listbox.getFocusedItem();if(l){g=this._listbox.indexOf(l)}g++;if(g<0){g=0}if(g>=this._listbox.getCount()){g=this._listbox.getCount()-1}this._listbox._focusItem(g,true)}else{this._startQuery(true)}break;default:break}},focus:function(){try{this._inputEl.focus()}catch(a){}},blur:function(){try{this._inputEl.blur()}catch(a){}},searchField:"key",setSearchField:function(a){this.searchField=a},getSearchField:function(){return this.searchField},getAttrs:function(b){var a=mini.TextBox.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["value","text","valueField","textField","url","popupHeight","textName","onfocus","onbeforeload","onload","searchField","onbuttonclick","tableId"]);mini._ParseBool(b,a,["allowInput"]);mini._ParseInt(b,a,["popupMinHeight","popupMaxHeight"]);return a}});mini.regClass(mini.FileBoxList,"fileboxlist");mini.CKEditor=function(){mini.CKEditor.superclass.constructor.call(this)};mini.extend(mini.CKEditor,mini.ValidatorBase,{uiCls:"mini-ckeditor",_InputType:"text",allowInput:false,formField:true,vtype:"",setVtype:function(a){this.vtype=a},getVtype:function(){return this.vtype},_create:function(){this.el=document.createElement("span");this.el.className="mini-ckeditor"},initEditor:function(c){var b=window.navigator.userAgent.toLowerCase();var a=$.browser.version;this._valueEl=CKEDITOR.replace(c);if(this._valueEl!=null){CKEDITOR.config.readOnly=this.allowInput}},setEmptyText:function(a){this.emptyText=""},getValue:function(){return this._valueEl.getData()},setValue:function(a){var b=this.id;CKEDITOR.on("instanceReady",function(c){c.editor.setData(a)})},setAllowInput:function(a){if(a=="true"){this.allowInput=false}else{this.allowInput=true}},getAllowInput:function(){return this.allowInput},getAttrs:function(b){var a=mini.CKEditor.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["allowInput","value","vtype"]);return a},destroy:function(a){if(this._valueEl!=null){this._valueEl.destroy()}mini.CKEditor.superclass.destroy.call(this,a)}});mini.regClass(mini.CKEditor,"ckeditor");mini.DoubleDatePicker=function(){this._doubleDateValue=[];mini.DoubleDatePicker.superclass.constructor.call(this);mini.addClass(this.el,"mini-doubledatepicker");this.on("validation",this.__OnValidation,this)};mini.extend(mini.DoubleDatePicker,mini.PopupEdit,{valueFormat:"",format:"yyyy-MM-dd",maxDate:null,minDate:null,popupWidth:"",_doubleDateValue:[],viewDate:new Date(),showTime:false,timeFormat:"H:mm",showTodayButton:true,showClearButton:true,showOkButton:false,uiCls:"mini-doubledatepicker",_createCalendar:function(){if(!mini.DoubleDatePicker._Calendar){var a=mini.DoubleDatePicker._Calendar=new mini.Calendar();a.setStyle("border:0;float:left")}if(!mini.DoubleDatePicker._Calendar2){var b=mini.DoubleDatePicker._Calendar2=new mini.Calendar();b.setStyle("border-left:1;float:left;border-right:0;border-top:0;border-bottom:0")}},_getCalendar:function(){if(!mini.DoubleDatePicker._Calendar){this._createCalendar()}return mini.DoubleDatePicker._Calendar},_getCalendar2:function(){if(!mini.DoubleDatePicker._Calendar2){this._createCalendar()}return mini.DoubleDatePicker._Calendar2},destroy:function(a){if(this._destroyPopup){mini.DoubleDatePicker._Calendar=null;mini.DoubleDatePicker._Calendar2=null}mini.DoubleDatePicker.superclass.destroy.call(this,a)},_createPopup:function(){mini.DoubleDatePicker.superclass._createPopup.call(this);this._calendar=this._getCalendar();this._calendar2=this._getCalendar2()},showPopup:function(){var a={cancel:false};this.fire("beforeshowpopup",a);if(a.cancel==true){return}this._calendar=this._getCalendar();this._calendar.beginUpdate();this._calendar._allowLayout=false;if(this._calendar.el.parentNode!=this.popup._contentEl){this._calendar.render(this.popup._contentEl)}this._calendar2=this._getCalendar2();this._calendar2.beginUpdate();this._calendar2._allowLayout=false;if(this._calendar2.el.parentNode!=this.popup._contentEl){this._calendar2.render(this.popup._contentEl)}this._calendar.set({showTime:this.showTime,timeFormat:this.timeFormat,showClearButton:this.showClearButton,showTodayButton:this.showTodayButton,showOkButton:this.showOkButton});this._calendar2.set({showTime:this.showTime,timeFormat:this.timeFormat,showClearButton:this.showClearButton,showTodayButton:this.showTodayButton,showOkButton:this.showOkButton});this._calendar.setValue(this.value.split(",")[0]);this._calendar2.setValue(this.value.split(",")[1]);if(this.value){this._calendar.setViewDate(this.value.split(",")[0]);this._calendar2.setViewDate(this.value.split(",")[1])}else{this._calendar.setViewDate(this.viewDate);this._calendar2.setViewDate(this.viewDate)}mini.DoubleDatePicker.superclass.showPopup.call(this);function c(){if(this._calendar._target){var d=this._calendar._target;this._calendar.un("timechanged",d.__OnTimeChanged,d);this._calendar.un("dateclick",d.__OnDateClick,d);this._calendar.un("drawdate",d.__OnDrawDate,d)}this._calendar.on("timechanged",this.__OnTimeChanged,this);this._calendar.on("dateclick",this.__OnDateClick,this);this._calendar.on("drawdate",this.__OnDrawDate,this);this._calendar.endUpdate();this._calendar._allowLayout=true;this._calendar.doLayout();this._calendar.focus();this._calendar._target=this;if(this._calendar2._target){var d=this._calendar2._target;this._calendar2.un("timechanged",d.__OnTimeChanged2,d);this._calendar2.un("dateclick",d.__OnDateClick2,d);this._calendar2.un("drawdate",d.__OnDrawDate2,d)}this._calendar2.on("timechanged",this.__OnTimeChanged2,this);this._calendar2.on("dateclick",this.__OnDateClick2,this);this._calendar2.on("drawdate",this.__OnDrawDate2,this);this._calendar2.endUpdate();this._calendar2._allowLayout=true;this._calendar2.doLayout();this._calendar2.focus();this._calendar2._target=this}var b=this;c.call(b)},update:function(){if(this._calendar._target){var a=this._calendar._target;this._calendar.un("timechanged",a.__OnTimeChanged,a);this._calendar.un("dateclick",a.__OnDateClick,a);this._calendar.un("drawdate",a.__OnDrawDate,a)}this._calendar.on("timechanged",this.__OnTimeChanged,this);this._calendar.on("dateclick",this.__OnDateClick,this);this._calendar.on("drawdate",this.__OnDrawDate,this);this._calendar.endUpdate();this._calendar._allowLayout=true;this._calendar.doLayout();this._calendar.focus();this._calendar._target=this;if(this._calendar2._target){var a=this._calendar2._target;this._calendar2.un("timechanged",a.__OnTimeChanged2,a);this._calendar2.un("dateclick",a.__OnDateClick2,a);this._calendar2.un("drawdate",a.__OnDrawDate2,a)}this._calendar2.on("timechanged",this.__OnTimeChanged2,this);this._calendar2.on("dateclick",this.__OnDateClick2,this);this._calendar2.on("drawdate",this.__OnDrawDate2,this);this._calendar2.endUpdate();this._calendar2._allowLayout=true;this._calendar2.doLayout();this._calendar2.focus();this._calendar2._target=this},hidePopup:function(){mini.DoubleDatePicker.superclass.hidePopup.call(this);this._calendar.un("timechanged",this.__OnTimeChanged,this);this._calendar.un("dateclick",this.__OnDateClick,this);this._calendar.un("drawdate",this.__OnDrawDate,this);this._calendar2.un("timechanged",this.__OnTimeChanged2,this);this._calendar2.un("dateclick",this.__OnDateClick2,this);this._calendar2.un("drawdate",this.__OnDrawDate2,this)},within:function(a){if(mini.isAncestor(this.el,a.target)){return true}if(this._calendar.within(a)){return true}if(this._calendar2.within(a)){return true}return false},__OnPopupKeyDown:function(a){if(a.keyCode==13){this.__OnDateClick()}if(a.keyCode==27){this.hidePopup();this.focus()}},minDateErrorText:"",maxDateErrorText:"",__OnValidation:function(d){if(d.isValid==false){return}var b=this.value;if(!mini.isDate(b)){return}var g=mini.parseDate(this.maxDate);var c=mini.parseDate(this.minDate);var a=this.maxDateErrorText||mini.VTypes.maxDateErrorText;var f=this.minDateErrorText||mini.VTypes.minDateErrorText;if(mini.isDate(g)){if(b.getTime()>g.getTime()){d.isValid=false;d.errorText=String.format(a,mini.formatDate(g,this.format))}}if(mini.isDate(c)){if(b.getTime()<c.getTime()){d.isValid=false;d.errorText=String.format(f,mini.formatDate(c,this.format))}}},__OnDrawDate:function(b){var a=b.date;var c=mini.parseDate(this.maxDate);if(mini.isDate(c)){if(a.getTime()>c.getTime()){b.allowSelect=false}}this.fire("drawdate",b)},__OnDrawDate2:function(c){var a=c.date;var b=mini.parseDate(this.minDate);if(mini.isDate(b)){if(a.getTime()<b.getTime()){c.allowSelect=false}}this.fire("drawdate",c)},__OnDateClick:function(b){if(this.showOkButton&&b.action!="ok"){return}var a=this._calendar.getValue();this.setDateValue(a,1);this.focus()},__OnDateClick2:function(b){if(this.showOkButton&&b.action!="ok"){return}var a=this._calendar2.getValue();this.setDateValue(a,2);this.focus()},__OnTimeChanged:function(b){if(this.showOkButton){return}var a=this._calendar.getValue();this.setDateValue(a,1);this._OnValueChanged()},__OnTimeChanged2:function(b){if(this.showOkButton){return}var a=this._calendar2.getValue();this.setDateValue(a,2);this._OnValueChanged()},setFormat:function(a){if(typeof a!="string"){return}if(this.format!=a){this.format=a;this._textEl.value=this._valueEl.value=this.getFormValue()}},getFormat:function(){return this.format},setValueFormat:function(a){if(typeof a!="string"){return}if(this.valueFormat!=a){this.valueFormat=a}},getValueFormat:function(){return this.valueFormat},setValue:function(a){v1=mini.parseDate(a.split(",")[0]);v2=mini.parseDate(a.split(",")[1]);if(mini.isNull(v1)){v1=""}if(mini.isDate(v1)){v1=new Date(v1.getTime())}if(mini.isNull(v2)){v2=""}if(mini.isDate(v2)){v2=new Date(v2.getTime())}this._doubleDateValue[0]=v1;this._doubleDateValue[1]=v2;this.text=this._textEl.value=this._valueEl.value=this.getFormValue()},setDateValue:function(d,a){d=mini.parseDate(d);if(mini.isNull(d)){d=""}if(mini.isDate(d)){d=new Date(d.getTime())}if(a===1&&this._doubleDateValue[0]!=d){this._doubleDateValue[0]=d;var c=mini.isDate(d)?mini.formatDate(d,this.format):"";if(!(""==c)){this.minDate=c;this.update()}this.text=this._textEl.value=this._valueEl.value=this.getFormValue()}else{if(a===2&&this._doubleDateValue[1]!=d){this._doubleDateValue[1]=d;var b=mini.isDate(d)?mini.formatDate(d,this.format):"";if(!(""==b)){this.maxDate=b;this.update()}this.text=this._textEl.value=this._valueEl.value=this.getFormValue()}}},nullValue:"",setNullValue:function(a){if(a=="null"){a=null}this.nullValue=a},getNullValue:function(){return this.nullValue},getValue:function(){if(!mini.isDate(this._doubleDateValue[0])||!mini.isDate(this._doubleDateValue[1])){return this.nullValue}var f=this._doubleDateValue[0];var c=this._doubleDateValue[1];if(this.valueFormat){f=mini.formatDate(f,this.valueFormat);c=mini.formatDate(c,this.valueFormat)}var d;var b="";var a="";b+=f.getFullYear();b+="-";d=f.getMonth()+1;b+=d<10?"0"+d:d;b+="-";d=f.getDate();b+=d<10?"0"+d:d;a+=c.getFullYear();a+="-";d=c.getMonth()+1;a+=d<10?"0"+d:d;a+="-";d=c.getDate();a+=d<10?"0"+d:d;if(this.format=="yyyy-MM-dd HH:mm:ss"){b+=" ";d=f.getHours();b+=d<10?"0"+d:d;b+=":";d=f.getMinutes();b+=d<10?"0"+d:d;b+=":";d=f.getSeconds();b+=d<10?"0"+d:d;a+=" ";d=f.getHours();a+=d<10?"0"+d:d;a+=":";d=c.getMinutes();a+=d<10?"0"+d:d;a+=":";d=c.getSeconds();a+=d<10?"0"+d:d}return b+","+a},getFormValue:function(c){if(!mini.isDate(this._doubleDateValue[0])&&!mini.isDate(this._doubleDateValue[1])){return""}c=c||this.format;var b=mini.isDate(this._doubleDateValue[0])?mini.formatDate(this._doubleDateValue[0],c):"";var a=mini.isDate(this._doubleDateValue[1])?mini.formatDate(this._doubleDateValue[1],c):"";return b+","+a},setViewDate:function(a){a=mini.parseDate(a);if(!mini.isDate(a)){return}this.viewDate=a},getViewDate:function(){return this._calendar.getViewDate()},setShowTime:function(a){if(this.showTime!=a){this.showTime=a}},getShowTime:function(){return this.showTime},setTimeFormat:function(a){if(this.timeFormat!=a){this.timeFormat=a}},getTimeFormat:function(){return this.timeFormat},setShowTodayButton:function(a){this.showTodayButton=a},getShowTodayButton:function(){return this.showTodayButton},setShowClearButton:function(a){this.showClearButton=a},getShowClearButton:function(){return this.showClearButton},setShowOkButton:function(a){this.showOkButton=a},getShowOkButton:function(){return this.showOkButton},setMaxDate:function(a){this.maxDate=a},getMaxDate:function(){return this.maxDate},setMinDate:function(a){this.minDate=a},getMinDate:function(){return this.minDate},setMaxDateErrorText:function(a){this.maxDateErrorText=a},getMaxDateErrorText:function(){return this.maxDateErrorText},setMinDateErrorText:function(a){this.minDateErrorText=a},getMinDateErrorText:function(){return this.minDateErrorText},__OnInputTextChanged:function(f){var a=this._textEl.value;var d=mini.parseDate(a.split(",")[0]);var b=mini.parseDate(a.split(",")[1]);if(!d||isNaN(d)||d.getFullYear()==1970){d=null}if(!b||isNaN(b)||b.getFullYear()==1970){b=null}var c=this.getFormValue("U");this.setDateValue(d,1);this.setDateValue(b,2);if(d==null&&b==null){this._textEl.value=""}if(c!==this.getFormValue("U")){this._OnValueChanged()}},__OnInputKeyDown:function(c){var a={htmlEvent:c};this.fire("keydown",a);if(c.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(c.keyCode==9){if(this.isShowPopup()){this.hidePopup()}return}if(this.isReadOnly()){return}switch(c.keyCode){case 27:c.preventDefault();if(this.isShowPopup()){c.stopPropagation()}this.hidePopup();break;case 9:case 13:if(this.isShowPopup()){c.preventDefault();c.stopPropagation();this.hidePopup()}else{this.__OnInputTextChanged(null);var b=this;setTimeout(function(){b.fire("enter",a)},10)}break;case 37:break;case 38:c.preventDefault();break;case 39:break;case 40:c.preventDefault();this.showPopup();break;default:break}},getAttrs:function(b){var a=mini.DoubleDatePicker.superclass.getAttrs.call(this,b);mini._ParseString(b,a,["format","viewDate","timeFormat","ondrawdate","minDate","maxDate","valueFormat","nullValue","minDateErrorText","maxDateErrorText"]);mini._ParseBool(b,a,["showTime","showTodayButton","showClearButton","showOkButton"]);return a}});mini.regClass(mini.DoubleDatePicker,"doubledatepicker");mini.EompButton=function(){mini.EompButton.superclass.constructor.call(this)};mini.extend(mini.EompButton,mini.Control,{text:"",iconCls:"",iconStyle:"",background:"",plain:false,checkOnClick:false,checked:false,groupName:"",_plainCls:"mini-button-plain",_hoverCls:"mini-button-hover",_pressedCls:"mini-button-pressed",_checkedCls:"mini-button-checked",_disabledCls:"mini-button-disabled",allowCls:"",_clearBorder:false,set:function(a){if(typeof a=="string"){return this}this._allowUpdate=a.text||a.iconStyle||a.iconCls||a.iconPosition;mini.Button.superclass.set.call(this,a);if(this._allowUpdate===false){this._allowUpdate=true;this.doUpdate()}return this},uiCls:"mini-eompbutton",_create:function(){this.el=document.createElement("a");this.el.className="mini-button";this.el.hideFocus=true;this.el.href="javascript:void(0)";this.doUpdate()},destroy:function(a){if(this.el){this.el.onclick=null;this.el.onmousedown=null}if(this.menu){this.menu.owner=null}this.menu=null;mini.EompButton.superclass.destroy.call(this,a)},doUpdate:function(){if(this._allowUpdate===false){return}var b="",f=this.text;var a=this.iconStyle||this.iconCls||this.img;if(a&&f){b=" mini-button-icon "+this.iconCls}else{if(a&&f===""){b=" mini-button-iconOnly "+this.iconCls;f="&nbsp;"}else{if(f==""){f="&nbsp;"}}}var d=this.iconStyle||"";if(!d&&this.img){d="background-image:url("+this.img+")"}var c='<span class="mini-button-text '+b+'" style="'+d+'">'+f+"</span>";if(this.allowCls){c=c+'<span class="mini-button-allow '+this.allowCls+'"></span>'}this.el.innerHTML=c},href:"",setHref:function(b){this.href=b;this.el.href=b;var a=this.el;setTimeout(function(){a.onclick=null},100)},getHref:function(){return this.href},target:"",setTarget:function(a){this.target=a;this.el.target=a},getTarget:function(){return this.target},setText:function(a){if(this.text!=a){this.text=a;this.doUpdate()}},getText:function(){return this.text},setbackground:function(a){this.background=a;this.doUpdate()},getbackground:function(){return this.background},setIconCls:function(a){this.iconCls=a;this.doUpdate()},getIconCls:function(){return this.iconCls},setIconStyle:function(a){this.iconStyle=a;this.doUpdate()},getIconStyle:function(){return this.iconStyle},img:"",setImg:function(a){this.img=a;this.doUpdate()},getImg:function(){return this.img},setIconPosition:function(a){this.iconPosition="left";this.doUpdate()},getIconPosition:function(){return this.iconPosition},setPlain:function(a){this.plain=a;if(a){this.addCls(this._plainCls)}else{this.removeCls(this._plainCls)}},getPlain:function(){return this.plain},setGroupName:function(a){this.groupName=a},getGroupName:function(){return this.groupName},setCheckOnClick:function(a){this.checkOnClick=a},getCheckOnClick:function(){return this.checkOnClick},setChecked:function(b){var a=this.checked!=b;this.checked=b;if(b){this.addCls(this._checkedCls)}else{this.removeCls(this._checkedCls)}if(a){this.fire("CheckedChanged")}},getChecked:function(){return this.checked},doClick:function(){this.__OnClick(null)},__OnClick:function(f){if(!this.href&&f){f.preventDefault()}if(this.readOnly||this.enabled==false){return}this.focus();if(this.checkOnClick){if(this.groupName){var g=this.groupName;var d=mini.findControls(function(j){if(j.type=="button"&&j.groupName==g){return true}});if(d.length>0){for(var c=0,a=d.length;c<a;c++){var b=d[c];if(b!=this){b.setChecked(false)}}this.setChecked(true)}else{this.setChecked(!this.checked)}}else{this.setChecked(!this.checked)}}this.fire("click",{htmlEvent:f})},__OnMouseDown:function(a){if(this.isReadOnly()){return}this.addCls(this._pressedCls);mini.on(document,"mouseup",this.__OnDocMouseUp,this)},__OnDocMouseUp:function(a){this.removeCls(this._pressedCls);mini.un(document,"mouseup",this.__OnDocMouseUp,this)},onClick:function(b,a){this.on("click",b,a)},getAttrs:function(b){var a=mini.EompButton.superclass.getAttrs.call(this,b);a.text=b.innerHTML;mini._ParseString(b,a,["text","href","background","iconCls","iconStyle","iconPosition","groupName","menu","onclick","oncheckedchanged","target","img"]);mini._ParseBool(b,a,["plain","checkOnClick","checked"]);return a}});mini.regClass(mini.EompButton,"eompbutton");mini.Chart=function(){mini.Chart.superclass.constructor.call(this);this.el.className+=" mini-chart"};mini.extend(mini.Chart,mini.ValidatorBase,{uiCls:"mini-chart",_InputType:"text",url:"",ajaxData:null,_attrs:null,_create:function(){this.el=document.createElement("span")},_doLoad:function(params){try{var url=eval(this.url);if(url!=undefined){this.url=url}}catch(e){}var url=this.url;var ajaxMethod="get";var e={url:this.url,async:false,type:this.ajaxType?this.ajaxType:ajaxMethod,data:params,params:params,cache:false,cancel:false};if(e.data!=e.params&&e.params!=params){e.data=e.params}var sf=this;var url=e.url;mini.copyTo(e,{success:function(text){var data=null;try{data=mini.decode(text)}catch(ex){data=[];if(mini_debugger==true){alert(url+"\njson is error.")}}if(sf.dataField){data=mini._getMap(sf.dataField,data)}if(!data){data=[]}var ex={data:data,cancel:false};sf.fire("preload",ex);if(ex.cancel==true){return}sf.setData(ex.data);sf.fire("load");setTimeout(function(){sf.doLayout()},100)},error:function(jqXHR,textStatus,errorThrown){var e={xmlHttp:jqXHR,errorMsg:jqXHR.responseText,errorCode:jqXHR.status};if(mini_debugger==true){alert(url+"\n"+e.errorCode+"\n"+e.errorMsg)}sf.fire("loaderror",e)}});if(url.indexOf(".txt")!=-1||url.indexOf(".json")!=-1||url.indexOf(".xml")!=-1){this.ajaxData=mini.ajax(e).responseText}else{this.ajaxData=eval("("+mini.ajax(e).responseText+")")}return this.ajaxData},setUrl:function(b){this.url=b},getUrl:function(){return this.url},setAttrs:function(b){this._attrs=b},getAttrs:function(){return this._attrs},setAjaxData:function(b){this.ajaxData=b},getAjaxData:function(){return this.ajaxData},getAttrs:function(c){var d=mini.Chart.superclass.getAttrs.call(this,c);return d},createXML:function(l){var k="";var o="";$(this._attrs).each(function(a){if($(this)[0].specified){o+=$(this)[0].nodeName+"='"+$(this)[0].nodeValue+"' "}});k+="<chart "+o+">";for(var n=0;n<l.length;n++){var g=l[n].name=null?"":l[n].name;var j=l[n].color=null?"":l[n].color;k+="<set name='"+g+"' value='"+l[n].value+"' color='"+j+"'/>"}k+="</chart>";return k},createMultiXML:function(k){var n="";var j="";$(this._attrs).each(function(a){if($(this)[0].specified){j+=$(this)[0].nodeName+"='"+$(this)[0].nodeValue+"' "}});n+="<chart "+j+">";for(var p=0;p<k.length;p++){var t=k[p].name=null?"":k[p].name;var r=k[p].color=null?"":k[p].color;var o=k[p].dataset;if(o.length>0&&p===0){n+="<categories>";for(var q=0;q<o.length;q++){n+="<category label='"+o[q].name+"'/>"}n+="</categories>"}n+="<dataset seriesName='"+t+"' color='"+r+"'>";for(var s=0;s<o.length;s++){n+="<set value='"+o[s].value+"'/>"}n+="</dataset>"}n+="</chart>";return n},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Chart.superclass.destroy.call(this,b)}});mini.regClass(mini.Chart,"chart");mini.Pie3D=function(){mini.Pie3D.superclass.constructor.call(this)};mini.extend(mini.Pie3D,mini.Chart,{uiCls:"mini-pie3d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,f){this.el.id=g;var d=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Pie3D.swf","chart_"+g,this.width,this.height);if(typeof f=="string"){d.setDataXML(f)}else{d.setDataXML(mini.Pie3D.superclass.createXML(f))}d.render(g)},setUrl:function(b){mini.Pie3D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Pie3D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Pie3D.superclass.setUrl(b);this.ajaxData=mini.Pie3D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Pie3D.superclass.setAttrs(d.attributes);var f=mini.Pie3D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Pie3D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Pie3D.superclass.destroy.call(this,b)}});mini.regClass(mini.Pie3D,"pie3d");mini.Pie2D=function(){mini.Pie2D.superclass.constructor.call(this)};mini.extend(mini.Pie2D,mini.Chart,{uiCls:"mini-pie2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Pie2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Pie2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Pie2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Pie2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Pie2D.superclass.setUrl(b);this.ajaxData=mini.Pie2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Pie2D.superclass.setAttrs(d.attributes);var f=mini.Pie2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Pie2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Pie2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Pie2D,"pie2d");mini.Column3D=function(){mini.Column3D.superclass.constructor.call(this)};mini.extend(mini.Column3D,mini.Chart,{uiCls:"mini-column3d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Column3D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Column3D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Column3D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Column3D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Column3D.superclass.setUrl(b);this.ajaxData=mini.Column3D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Column3D.superclass.setAttrs(d.attributes);var f=mini.Column3D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Column3D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Column3D.superclass.destroy.call(this,b)}});mini.regClass(mini.Column3D,"column3d");mini.Column2D=function(){mini.Column2D.superclass.constructor.call(this)};mini.extend(mini.Column2D,mini.Chart,{uiCls:"mini-column2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Column2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Column2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Column2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Column2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Column2D.superclass.setUrl(b);this.ajaxData=mini.Column2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Column2D.superclass.setAttrs(d.attributes);var f=mini.Column2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Column2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Column2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Column2D,"column2d");mini.Line2D=function(){mini.Line2D.superclass.constructor.call(this)};mini.extend(mini.Line2D,mini.Chart,{uiCls:"mini-line2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Line.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Line2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Line2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Line2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Line2D.superclass.setUrl(b);this.ajaxData=mini.Line2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Line2D.superclass.setAttrs(d.attributes);var f=mini.Line2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Line2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Line2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Line2D,"line2d");mini.Area2D=function(){mini.Area2D.superclass.constructor.call(this)};mini.extend(mini.Area2D,mini.Chart,{uiCls:"mini-area2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Area2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Area2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Area2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Area2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Area2D.superclass.setUrl(b);this.ajaxData=mini.Area2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Area2D.superclass.setAttrs(d.attributes);var f=mini.Area2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Area2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Area2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Area2D,"area2d");mini.Bar2D=function(){mini.Bar2D.superclass.constructor.call(this)};mini.extend(mini.Bar2D,mini.Chart,{uiCls:"mini-bar2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Bar2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Bar2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Bar2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Bar2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Bar2D.superclass.setUrl(b);this.ajaxData=mini.Bar2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Bar2D.superclass.setAttrs(d.attributes);var f=mini.Bar2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Bar2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Bar2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Bar2D,"bar2d");mini.Doughnut2D=function(){mini.Doughnut2D.superclass.constructor.call(this)};mini.extend(mini.Doughnut2D,mini.Chart,{uiCls:"mini-doughnut2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/Doughnut2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.Doughnut2D.superclass.createXML(d))}f.render(g)},setUrl:function(b){mini.Doughnut2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.Doughnut2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.Doughnut2D.superclass.setUrl(b);this.ajaxData=mini.Doughnut2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.Doughnut2D.superclass.setAttrs(d.attributes);var f=mini.Doughnut2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.Doughnut2D.superclass.createXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.Doughnut2D.superclass.destroy.call(this,b)}});mini.regClass(mini.Doughnut2D,"doughnut2d");mini.MSLine=function(){mini.MSLine.superclass.constructor.call(this)};mini.extend(mini.MSLine,mini.Chart,{uiCls:"mini-msline",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSLine.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSLine.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSLine.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSLine.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSLine.superclass.setUrl(b);this.ajaxData=mini.MSLine.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSLine.superclass.setAttrs(d.attributes);var f=mini.MSLine.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSLine.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSLine.superclass.destroy.call(this,b)}});mini.regClass(mini.MSLine,"msline");mini.MSColumn2D=function(){mini.MSColumn2D.superclass.constructor.call(this)};mini.extend(mini.MSColumn2D,mini.Chart,{uiCls:"mini-mscolumn2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSColumn2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSColumn2D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSColumn2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSColumn2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSColumn2D.superclass.setUrl(b);this.ajaxData=mini.MSColumn2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSColumn2D.superclass.setAttrs(d.attributes);var f=mini.MSColumn2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSColumn2D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSColumn2D.superclass.destroy.call(this,b)}});mini.regClass(mini.MSColumn2D,"mscolumn2d");mini.MSColumn3D=function(){mini.MSColumn3D.superclass.constructor.call(this)};mini.extend(mini.MSColumn3D,mini.Chart,{uiCls:"mini-mscolumn3d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSColumn3D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSColumn3D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSColumn3D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSColumn3D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSColumn3D.superclass.setUrl(b);this.ajaxData=mini.MSColumn3D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSColumn3D.superclass.setAttrs(d.attributes);var f=mini.MSColumn3D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSColumn3D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSColumn3D.superclass.destroy.call(this,b)}});mini.regClass(mini.MSColumn3D,"mscolumn3d");mini.MSArea=function(){mini.MSArea.superclass.constructor.call(this)};mini.extend(mini.MSArea,mini.Chart,{uiCls:"mini-msarea",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSArea.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSArea.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSArea.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSArea.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSArea.superclass.setUrl(b);this.ajaxData=mini.MSArea.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSArea.superclass.setAttrs(d.attributes);var f=mini.MSArea.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSArea.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSArea.superclass.destroy.call(this,b)}});mini.regClass(mini.MSArea,"msarea");mini.MSBar2D=function(){mini.MSBar2D.superclass.constructor.call(this)};mini.extend(mini.MSBar2D,mini.Chart,{uiCls:"mini-msbar2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSBar2D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSBar2D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSBar2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSBar2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSBar2D.superclass.setUrl(b);this.ajaxData=mini.MSBar2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSBar2D.superclass.setAttrs(d.attributes);var f=mini.MSBar2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSBar2D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSBar2D.superclass.destroy.call(this,b)}});mini.regClass(mini.MSBar2D,"msbar2d");mini.MSBar3D=function(){mini.MSBar3D.superclass.constructor.call(this)};mini.extend(mini.MSBar3D,mini.Chart,{uiCls:"mini-msbar3d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/MSBar3D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.MSBar3D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.MSBar3D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.MSBar3D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.MSBar3D.superclass.setUrl(b);this.ajaxData=mini.MSBar3D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.MSBar3D.superclass.setAttrs(d.attributes);var f=mini.MSBar3D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.MSBar3D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.MSBar3D.superclass.destroy.call(this,b)}});mini.regClass(mini.MSBar3D,"msbar3d");mini.StackedColumn3D=function(){mini.StackedColumn3D.superclass.constructor.call(this)};mini.extend(mini.StackedColumn3D,mini.Chart,{uiCls:"mini-stackedcolumn3d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/StackedColumn3D.swf","chart_"+g,this.width,this.height);if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.StackedColumn3D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.StackedColumn3D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.StackedColumn3D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.StackedColumn3D.superclass.setUrl(b);this.ajaxData=mini.StackedColumn3D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.StackedColumn3D.superclass.setAttrs(d.attributes);var f=mini.StackedColumn3D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.StackedColumn3D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.StackedColumn3D.superclass.destroy.call(this,b)}});mini.regClass(mini.StackedColumn3D,"stackedcolumn3d");mini.StackedColumn2D=function(){mini.StackedColumn2D.superclass.constructor.call(this)};mini.extend(mini.StackedColumn2D,mini.Chart,{uiCls:"mini-stackedcolumn2d",_InputType:"text",_attrs:null,url:"",ajaxData:null,width:800,height:600,_create:function(){this.el=document.createElement("span")},initChart:function(g,d){this.el.id=g;var f=new FusionCharts("/TBPWeb/tbp/chart/FusionChartsXT/StackedColumn2D.swf","chart_"+g,this.width,this.height,"0","1");if(typeof d=="string"){f.setDataXML(d)}else{f.setDataXML(mini.StackedColumn2D.superclass.createMultiXML(d))}f.render(g)},setUrl:function(b){mini.StackedColumn2D.superclass.setUrl(b);if(!(b===null||b===undefined)){this.load(b)}},getUrl:function(){return mini.StackedColumn2D.superclass.getUrl()},setWidth:function(b){this.width=b},getWidth:function(){return this.width},setHeight:function(b){this.height=b},getHeight:function(){return this.height},load:function(b){mini.StackedColumn2D.superclass.setUrl(b);this.ajaxData=mini.StackedColumn2D.superclass._doLoad({});this.initChart(this.id,this.ajaxData)},getAttrs:function(d){mini.StackedColumn2D.superclass.setAttrs(d.attributes);var f=mini.StackedColumn2D.superclass.getAttrs.call(this,d);var g=jQuery(d);mini._ParseString(d,f,["width","height","url"]);return f},createXML:function(b){return mini.StackedColumn2D.superclass.createMultiXML(b)},destroy:function(b){if(this._valueEl!=null){this._valueEl.destroy()}mini.StackedColumn2D.superclass.destroy.call(this,b)}});mini.regClass(mini.StackedColumn2D,"stackedcolumn2d");mini.AttachUpload=function(){mini.AttachUpload.superclass.constructor.call(this)};mini.extend(mini.AttachUpload,mini.ValidatorBase,{uiCls:"mini-attachupload",_InputType:"file",controlName:"",tableObjectId:"",fieldName:"",limitType:"",limitContent:"",allowInput:"",fieldCnName:"",verifyFieldId:"",tableId:"",actionType:"",formField:true,_create:function(){this.el=document.createElement("span");this.el.className="mini-attachupload"},initAttachUpload:function(){this._valueEl.id=this.verifyFieldId;this._valueEl.tableobject_id=this.tableObjectId;this._valueEl.cnName=this.fieldCnName;this.el.childNodes[1].id=this.fieldName+"_field_upload";this.el.childNodes[2].id=this.fieldName+"_attachlist_fileQueue";this.el.childNodes[2].name=this.fieldName+"_attachlist_fileQueue";this.el.childNodes[3].value=this.tableId;this.el.childNodes[4].id=this.fieldName+"_attachlist_attach_id";this.el.childNodes[5].id=this.fieldName+"_attachmentList"},getTableObjectId:function(){return this.tableObjectId},setTableObjectId:function(a){this.tableObjectId=a},setAllowInput:function(b){this.allowInput=b;if(this.allowInput=="true"&&this.actionType!="3"){var a={limitType:this.limitType,limitContent:this.limitContent};loadUploadFiles("fieldUploadFiles",this.fieldName,a)}},getAllowInput:function(){return this.allowInput},getFieldName:function(){return this.fieldName},setFieldName:function(a){this.fieldName=a},setLimitType:function(a){this.limitType=a},getLimitType:function(){return this.limitType},setLimitContent:function(a){this.limitContent=a},getLimitContent:function(){return this.limitContent},getFieldCnName:function(){return this.fieldCnName},setFieldCnName:function(a){this.fieldCnName=a},getVerifyFieldId:function(){return this.verifyFieldId},setVerifyFieldId:function(a){this.verifyFieldId=a},getControlName:function(){return this.controlName},setControlName:function(b){this.controlName=b;var a="<input type='hidden' name='"+this.controlName+"'>";a+='<input type="'+this._InputType+'" style="display:none">';a+='<span></span><input type ="hidden" id="field_upload_table_id"><input type = "hidden"><div></div>';this.el.innerHTML=a;this._valueEl=this.el.firstChild},getTableId:function(){return this.tableId},setTableId:function(a){this.tableId=a;this.initAttachUpload()},getValue:function(){return this._valueEl.value},setValue:function(a){this.value=a;this.setFileValue()},setActionType:function(a){this.actionType=a},getActionType:function(){return this.actionType},setFileValue:function(){var tt=bootPATH;var attachmentListStr="";var isManager=true;var allowInput=this.allowInput;var actionType=this.actionType;if(this.value==null||this.value==""){this._valueEl.value=""}else{this._valueEl.value=this.value;var fieldName=this.fieldName;var url=getRootPath()+"/tbp/tableAttachNameAjaxAction.do?method=getAttachmentMessage&file_no="+this.value;jQuery.ajax({type:"get",cache:false,url:url,data:{},success:function(data){if(data!=null&&data!=""){jQuery("#"+fieldName+"_attachmentList").empty();attachmentList=eval("("+data+")");var attachmentDBVOs="";for(var i=0,j=attachmentList.length;i<j;i++){attachmentDBVOs=attachmentList[i];var url=getRootPath()+"/tbp/fileUpLoadAction.do?attach_id="+attachmentDBVOs.attach_id+"&method=outFile";attachmentListStr="<div id='"+attachmentDBVOs.attach_id+"'>";attachmentListStr+="<span class='hrefName'>";attachmentListStr+="&nbsp;&nbsp;&nbsp;&nbsp;<A href='"+url+"' class='imgpreview'  target='_self'><span title = '"+attachmentDBVOs.fileName+"'>"+attachmentDBVOs.fileName+"</span></A></span>";attachmentListStr+="<span class='upload_date'>("+attachmentDBVOs.upload_date+")";attachmentListStr+="&nbsp;&nbsp;("+attachmentDBVOs.upload_employeename+")&nbsp;&nbsp;</span>";if(allowInput=="true"&&actionType!="3"){attachmentListStr+="<span class='opotions' id='options'>";attachmentListStr+="<a href='"+url+"' class='userOption' target='_self' onclick=changeDownloads('"+attachmentDBVOs.attach_id+"')></a>";if(isManager){attachmentListStr+="<span id='delete_data' name='delete_data' class='delete_data'>||<a href='javascript:;' class='userOption' onclick=delFileAjax('"+attachmentDBVOs.attach_id+"','"+fieldName+"')></a></span>"}}attachmentListStr+="<span id='downloadcounts'>&nbsp;&nbsp;&nbsp;<a onclick=openDownloads('"+attachmentDBVOs.attach_id+"');>"+attachmentDBVOs.downloads+"</a></span>";attachmentListStr+="</span></div>";jQuery("#"+fieldName+"_attachmentList").prepend(attachmentListStr);jQuery("#"+fieldName+"_attachlist_attach_id").val(this.value)}}},error:function(html){}})}},getAttrs:function(b){var a=mini.AttachUpload.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["controlName","actionType","limitType","limitContent","tableObjectId","fieldName","allowInput","fieldCnName","verifyFieldId","tableId","value"]);return a},destroy:function(a){mini.AttachUpload.superclass.destroy.call(this,a)}});mini.regClass(mini.AttachUpload,"attachupload");mini.AttachUploadForTable=function(){mini.AttachUploadForTable.superclass.constructor.call(this)};mini.extend(mini.AttachUploadForTable,mini.ValidatorBase,{uiCls:"mini-attachuploadfortable",_InputType:"file",ownerCode:"",allowInput:"",value:"",actionUrl:"",actionType:"",isExtend:"",formField:true,_create:function(){var a="<a href='javascript:displayOrHiddenMiniAttachement();'><img id='down' src="+getRootPath()+"'/miniui/themes/icons/collapsebutton.gif' style='margin-right: 2px;' border='0'/>";a+="(<span id='form_atttachlist_size' name='form_atttachlist_size'>0</span>)</a>";a+="<input type = 'hidden' id = 'form_attachlist_owner_code' name = 'form_attachlist_owner_code'/>";a+="<input type = 'hidden' id = 'form_attachlist_attach_id' name = 'form_attachlist_attach_id'/>";a+="<input type = 'hidden' id = 'form_attachlist_pk_values_owner_code' name = 'form_attachlist_pk_values_owner_code'/>";a+="<div id='uploadDiv' class='uploadDiv'>";a+="<input type='file' id='form_attachlist_addFiles' />";a+="<div class='uploadifyQueue' id='form_attachlist_fileQueue' name='form_attachlist_fileQueue'/>";a+="<div id='fileQueue' class='fileQueue'></div>";a+="</div>";a+="<DIV id='displayAttachement'></DIV>";this.el=document.createElement("div");this.el.className="mini-attachuploadfortable";this.el.style.margin="7px auto 0px";this.el.innerHTML=a;this._valueEl=jQuery("#form_attachlist_attach_id")[0]},setIsExtend:function(a){this.isExtend=a},getIsExtend:function(){return this.isExtend},setAllowInput:function(a){if(this.allowInput!=a){this.allowInput=a}},getAllowInput:function(){return this.allowInput},setActionType:function(a){this.actionType=a},getActionType:function(){return this.actionType},setActionUrl:function(a){this.actionUrl=a},getActionUrl:function(){return this.actionUrl},getOwnerCode:function(){return this.ownerCode},setOwnerCode:function(a){if(this.ownerCode!=a){this.ownerCode=a}this.setOwnerCodeValue()},setOwnerCodeValue:function(){jQuery("#form_attachlist_owner_code").val(this.ownerCode);$("#fileQueue").empty();if(this.value!=null&&this.value!=""){allowInput=this.allowInput;if(allowInput=="true"&&this.actionType!="3"){loadUploadFiles("true")}else{$("#form_attachlist_addFiles").hide();$("#form_attachlist_addFiles").empty()}jQuery("#form_attachlist_pk_values_owner_code").val(this.ownerCode+";"+this.value);var attachmentListStr="";var isManager=true;var url=getRootPath()+"/tbp/tableAttachNameAjaxAction.do?method=getAttachmentForTableMessage&pk_values="+this.value+"&owner_code="+this.ownerCode;if(this.actionUrl!=""){url=this.actionUrl}jQuery.ajax({type:"get",cache:false,url:url,data:{},success:function(data){if(data!=null&&data!=""){$("#fileQueue").empty();var attachmentList=eval("("+data+")");var attachmentDBVOs="";$("#form_atttachlist_size").each(function(){$(this).html(attachmentList.length)});for(var i=0,j=attachmentList.length;i<j;i++){attachmentDBVOs=attachmentList[i];var url=getRootPath()+"/tbp/fileUpLoadAction.do?attach_id="+attachmentDBVOs.attach_id+"&method=outFile";attachmentListStr="<div id='"+attachmentDBVOs.attach_id+"'>";attachmentListStr+="<span class='hrefName'>";attachmentListStr+="&nbsp;&nbsp;&nbsp;&nbsp;<A href='"+url+"' target='_self'><span title = '"+attachmentDBVOs.fileName+"'>"+attachmentDBVOs.fileName+"</span></A></span>&nbsp;&nbsp;";attachmentListStr+="<span class='upload_date'>("+attachmentDBVOs.upload_date+")";attachmentListStr+="&nbsp;&nbsp;("+attachmentDBVOs.upload_employeename+")&nbsp;&nbsp;</span>";if(allowInput=="true"&&this.actionType!="3"){attachmentListStr+="<span class='opotions' id='options'>";attachmentListStr+="<a href='"+url+"' class='userOption' target='_self' onclick=changeDownloads('"+attachmentDBVOs.attach_id+"')></a>";if(isManager){attachmentListStr+="<span id='delete_data' name='delete_data' class='delete_data'>||<a href='javascript:;' class='userOption' onclick=delFileAjax('"+attachmentDBVOs.attach_id+"','')></a></span>"}}attachmentListStr+="<span id='downloadcounts'>&nbsp;&nbsp;&nbsp;<a onclick=openDownloads('"+attachmentDBVOs.attach_id+"');>"+attachmentDBVOs.downloads+"</a></span>";attachmentListStr+="</span></div>";jQuery("#fileQueue").prepend(attachmentListStr)}}},error:function(html){}})}displayOrHiddenMiniAttachement();if(this.isExtend=="true"){displayOrHiddenMiniAttachement()}},getValue:function(){},setValue:function(a){this.value=a},getAttrs:function(b){var a=mini.AttachUploadForTable.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["isExtend","actionType","allowInput","actionUrl","ownerCode","value"]);return a},destroy:function(a){mini.AttachUploadForTable.superclass.destroy.call(this,a)}});mini.regClass(mini.AttachUploadForTable,"attachuploadfortable");mini.WebOffice=function(){mini.WebOffice.superclass.constructor.call(this)};mini.extend(mini.WebOffice,mini.ValidatorBase,{uiCls:"mini-weboffice",formField:true,officeUrl:getRootPath()+"/control/weboffice/office.jsp",tableObjectId:"",controlName:"",fieldName:"",fieldCnName:"",verifyFieldId:"word",fileType:"",controlWidth:"",controlHeight:"",relationControlName:"",attachId:"",_create:function(){this.el=document.createElement("span");this.el.className="mini-weboffice"},initEditor:function(){this._valueEl.tableobject_id=this.tableObjectId;this._valueEl.cnName=this.fieldCnName;this._valueEl.relationControl=this.relationControlName;this._valueEl.id=this.verifyFieldId;this._officeEl.src=this.officeUrl+"?attach_id="+this.attachId+"&tableobject_id="+this.tableObjectId+"&field_name="+this.fieldName+"&file_type="+this.fileType;this._officeEl.style.width=this.controlWidth;this._officeEl.style.height=this.controlHeight},getValue:function(){window.frames[this.relationControlName].save();var a=getRootPath()+"/tbp/tableWebOfficeValueAjaxAction.do?fieldName="+this.fieldName+"&tableobjectId="+this.tableObjectId+"&attach_id="+this.attachId;var b="";$.ajax({type:"get",cache:false,url:a,data:{},async:false,success:function(c){if(c!=null){b=c.toString()}},error:function(c){alert("")}});this._valueEl.value=b;this.attachId=b;setOfficeFieldValue(getRootPath(),this.tableObjectId,this.fieldName,this.attachId,this.enabled);return this._valueEl.value},setValue:function(b){this._valueEl.value=b;this.attachId=b;var a=this.enabled;setOfficeFieldValue(getRootPath(),this.tableObjectId,this.fieldName,this.attachId,a)},setTableObjectId:function(a){this.tableObjectId=a},getTableObjectId:function(){return this.tableObjectId},setControlName:function(b){this.controlName=b;this.relationControlName=b+"__text";var a='<input type = "hidden" name = "'+b+'">';a+='<iframe name = "'+this.relationControlName+'" id = "'+this.relationControlName+'"></iframe>';this.el.innerHTML=a;this._valueEl=this.el.firstChild;this._officeEl=this.el.lastChild},getControlName:function(){return this.controlName},setFieldName:function(a){this.fieldName=a},getFieldName:function(){return this.fieldName},setFieldCnName:function(a){this.fieldCnName=a},getFieldCnName:function(){return this.fieldCnName},setFileType:function(a){this.fileType=a},getFieldType:function(){return this.fileType},setControlWidth:function(a){this.controlWidth=a},getControlWidth:function(){return this.controlWidth},setControlHeight:function(a){this.controlHeight=a;this.initEditor()},getControlHeight:function(){return this.controlHeight},getAttrs:function(b){var a=mini.WebOffice.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["fieldName","tableObjectId","fileType","controlName","fieldCnName","controlWidth","controlHeight","value"]);return a},destroy:function(a){mini.WebOffice.superclass.destroy.call(this,a)}});mini.regClass(mini.WebOffice,"weboffice");mini.TreeSelectColumn=function(a){return mini.copyTo({renderer:function(r){var s=!mini.isNull(r.value)?String(r.value):"";var t=s.split(",");var v="id",g="text";var j={};var q=r.column.editor;if(q&&(q.type=="treeselect"||q.type=="treepopupedit")){var w=this.__editor;if(!w){if(mini.isControl(q)){w=q}else{q=mini.clone(q);w=mini.create(q)}this.__editor=w}v=w.getValueField();g=w.getTextField();j=this._valueMaps;var p=[];if(!j){j={};var n=w.getData();for(var k=0;k<n.length;k++){p.push(n[k])}while(p.length>0){var c=p.pop();j[c[v]]=c;for(var k=0;!(c.children===undefined)&&k<c.children.length;k++){p.push(c.children[k])}}this._valueMaps=j}}var f=[];for(var k=0,d=t.length;k<d;k++){var b=t[k];var c=j[b];if(c){var u=c[g];if(u===null||u===undefined){u=""}f.push(u)}}return f.join(",")}},a)};mini._Columns.treeselectcolumn=mini.TreeSelectColumn;mini.BindButtonEditColumn=function(a){return mini.copyTo({renderer:function(r){var s=!mini.isNull(r.value)?String(r.value):"";var t=s.split(",");var v="id",j="text";var k={};var q=r.column.editor;if(q&&q.type=="bindbuttonedit"){var d=this.__editor;if(!d){if(mini.isControl(q)){d=q}else{q=mini.clone(q);d=mini.create(q)}this.__editor=d}k=this._valueMaps;if(!k){k={};var p=d.getData();for(var n=0,g=p.length;n<g;n++){var c=p[n];k[c[v]]=c}this._valueMaps=k}}var f=[];for(var n=0,g=t.length;n<g;n++){var b=t[n];var c=k[b];if(c){var u=c[j];if(u===null||u===undefined){u=""}f.push(u)}}return f.join(",")}},a)};mini._Columns.bindbuttoneditcolumn=mini.BindButtonEditColumn;mini.OpinionExpandColumn=function(a){return mini.copyTo({width:30,headerAlign:"center",align:"center",draggable:false,cellStyle:"padding:0",cellCls:"mini-grid-expandCell",hideable:true,renderer:function(g){var j=g.record;var c="opinion_"+j.step_id+"_form";var f=g.sender.data;var d=new mini.Form("#"+c);var b=d.getFields();if(b.length<1){return""}return'<a class="mini-grid-ecIcon" href="javascript:#" onclick="return false"></a>'},init:function(b){b.on("cellclick",this.__OnCellClick,this)},__OnCellClick:function(d){var c=d.sender;if(d.column==this&&c.isShowRowDetail){if(mini.findParent(d.htmlEvent.target,"mini-grid-ecIcon")){var b=c.isShowRowDetail(d.record);if(!b){d.cancel=false;c.fire("beforeshowrowdetail",d);if(d.cancel===true){return}}else{d.cancel=false;c.fire("beforehiderowdetail",d);if(d.cancel===true){return}}if(c.autoHideRowDetail){c.hideAllRowDetail()}if(b){c.hideRowDetail(d.record)}else{c.showRowDetail(d.record)}}}}},a)};mini._Columns.opinionexpandcolumn=mini.OpinionExpandColumn;mini.BindButtonEdit=function(){this.data=[];mini.BindButtonEdit.superclass.constructor.call(this);var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}if(this.enabled==false){this.addCls(this._disabledCls)}if(a){this.addCls(this._readOnlyCls)}if(this.required){this.addCls(this._requiredCls)}};mini.extend(mini.BindButtonEdit,mini.PopupEdit,{name:"",formField:true,selectOnFocus:false,showClose:false,data:[],url:"",emptyText:"",openWindowWidth:"",openWindowHeight:"",defaultValue:"",defaultText:"",value:"",text:"",tableId:"",maxLength:1000,minLength:0,openUrl:"",height:21,inputAsValue:false,allowInput:true,_noInputCls:"mini-buttonedit-noInput",_readOnlyCls:"mini-buttonedit-readOnly",_disabledCls:"mini-buttonedit-disabled",_emptyCls:"mini-buttonedit-empty",_focusCls:"mini-buttonedit-focus",_buttonCls:"mini-buttonedit-button",_buttonHoverCls:"mini-buttonedit-button-hover",_buttonPressedCls:"mini-buttonedit-button-pressed",_closeCls:"mini-buttonedit-close",set:function(c){if(typeof c=="string"){return this}var b=c.value;delete c.value;var d=c.text;delete c.text;var a=c.url;delete c.url;this._allowUpdate=!(c.enabled==false||c.allowInput==false||c.readOnly);mini.BindButtonEdit.superclass.set.call(this,c);if(this._allowUpdate===false){this._allowUpdate=true;this.doUpdate()}if(!mini.isNull(d)){this.setText(d)}if(!mini.isNull(a)){this.setUrl(a);c.url=a}if(!mini.isNull(b)){this.setValue(b)}return this},uiCls:"mini-bindbuttonedit",setData:function(b){if(typeof b=="string"){b=this._eval(b)}if(!mini.isArray(b)){b=[]}this._listbox.setData(b);this.data=this._listbox.data;var a=this._listbox.getValueAndText(this.value);this.text=this._textEl.value=a[1]},getData:function(){return this.data},_createPopup:function(){mini.BindButtonEdit.superclass._createPopup.call(this);this._listbox=new mini.ListBox();this._listbox.setBorderStyle("border:0;");this._listbox.setStyle("width:100%;height:auto;");this._listbox.render(this.popup._contentEl);this._listbox.on("itemclick",this.__OnItemClick,this);this._listbox.on("drawcell",this.__OnItemDrawCell,this);var a=this;this._listbox.on("beforeload",function(b){a.fire("beforeload",b)},this);this._listbox.on("preload",function(b){a.fire("preload",b)},this);this._listbox.on("load",function(b){a.fire("load",b)},this);this._listbox.on("loaderror",function(b){a.fire("loaderror",b)},this)},_getButtonsHTML:function(){var a='<span class="mini-buttonedit-close"></span>'+this._getButtonHtml();return'<span class="mini-buttonedit-buttons">'+a+"</span>"},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-bindbuttonedit-icon"></span></span>'},setUrl:function(a){this.getPopup();this._listbox.setUrl(a);this.url=this._listbox.url;this.data=this._listbox.data;var b=this._listbox.getValueAndText(this.value);this.text=this._textEl.value=b[1]},setTableId:function(a){this.tableId=a},getTableId:function(){return this.tableId},getUrl:function(){return this.url},setOpenUrl:function(a){this.openUrl=a},getOpenUrl:function(){return this.openUrl},setOpenWindowWidth:function(a){this.openWindowWidth=a},getOpenWindowWidth:function(){return this.openWindowWidth},setOpenWindowHeight:function(a){this.openWindowHeight=a},getOpenWindowHeight:function(){return this.openWindowHeight},_create:function(){this.el=document.createElement("span");this.el.className="mini-buttonedit";var a=this._getButtonsHTML();this.el.innerHTML='<span class="mini-buttonedit-border"><input type="input" class="mini-buttonedit-input" autocomplete="off"/>'+a+'</span><input name="'+this.name+'" type="hidden"/>';this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this.el.lastChild;this._buttonsEl=this._borderEl.lastChild;this._buttonEl=this._buttonsEl.lastChild;this._closeEl=this._buttonEl.previousSibling;this._doEmpty()},destroy:function(a){if(this.el){this.el.onmousedown=null;this.el.onmousewheel=null;this.el.onmouseover=null;this.el.onmouseout=null}if(this._textEl){this._textEl.onchange=null;this._textEl.onfocus=null;mini.clearEvent(this._textEl);this._textEl=null}mini.ButtonEdit.superclass.destroy.call(this,a)},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);mini_onOne(this._textEl,"focus",this.__OnFocus,this);mini_onOne(this._textEl,"change",this.__OnInputTextChanged,this);var a=this.text;this.text=null;if(this.el){this.setText(a)}},this)},_inputEventsInited:false,_initInputEvents:function(){if(this._inputEventsInited){return}this._inputEventsInited=true;mini.on(this.el,"click",this.__OnClick,this);mini.on(this._textEl,"blur",this.__OnBlur,this);mini.on(this._textEl,"keydown",this.__OnInputKeyDown,this);mini.on(this._textEl,"keyup",this.__OnInputKeyUp,this);mini.on(this._textEl,"keypress",this.__OnInputKeyPress,this)},_buttonWidth:20,_closeWidth:20,_doInputLayout:function(b){if(this._closeEl){this._closeEl.style.display=this.showClose?"inline-block":"none"}var a=this._buttonsEl.offsetWidth+2;if(a==2){this._noLayout=true}else{this._noLayout=false}this._borderEl.style.paddingRight=a+"px";if(b!==false){this.doLayout()}},doLayout:function(){if(this._noLayout){this._doInputLayout(false)}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a},focus:function(){try{this._textEl.focus();var a=this;setTimeout(function(){if(a._focused){a._textEl.focus()}},10)}catch(b){}},blur:function(){try{this._textEl.blur()}catch(a){}},selectText:function(){this._textEl.select()},getTextEl:function(){return this._textEl},setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},setText:function(b){if(b===null||b===undefined){b=""}var a=this.text!==b;this.text=b;this._textEl.value=b;this._doEmpty()},getText:function(){var a=this._textEl.value;return a},setValue:function(b){if(this.value!==b){var a=this._listbox.getValueAndText(b);this.value=b;this._valueEl.value=this.value;this.text=this._textEl.value=a[1];this._doEmpty()}else{var a=this._listbox.getValueAndText(b);this.text=this._textEl.value=a[1]}},getValue:function(){return this.value},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},_doEmpty:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){mini._placeholder(this._textEl)}},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this._doEmpty()}},getEmptyText:function(){return this.emptyText},setMaxLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.maxLength=a;this._textEl.maxLength=a},getMaxLength:function(){return this.maxLength},setMinLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.minLength=a},getMinLength:function(){return this.minLength},setEnabled:function(a){mini.ButtonEdit.superclass.setEnabled.call(this,a);this._tryValidate()},_doReadOnly:function(){var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}else{this._textEl.readOnly=false}if(a){this.addCls(this._readOnlyCls)}else{this.removeCls(this._readOnlyCls)}if(this.allowInput){this.removeCls(this._noInputCls)}else{this.addCls(this._noInputCls)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},setAllowInput:function(a){this.allowInput=a;this._doReadOnly()},getAllowInput:function(){return this.allowInput},setInputAsValue:function(a){this.inputAsValue=a},getInputAsValue:function(){return this.inputAsValue},_errorIconEl:null,getErrorIconEl:function(){if(!this._errorIconEl){this._errorIconEl=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){var a=this._errorIconEl;jQuery(a).remove()}this._errorIconEl=null},__OnClick:function(b){if(this.isReadOnly()||this.enabled==false){return}if(!mini.isAncestor(this._borderEl,b.target)){return}var a=new Date();if(mini.isAncestor(this._buttonEl,b.target)){this._OnButtonClick(b)}if(mini.findParent(b.target,this._closeCls)){this.fire("closeclick",{htmlEvent:b})}},__OnMouseDown:function(c){if(this.isReadOnly()||this.enabled==false){return}if(!mini.isAncestor(this._borderEl,c.target)){return}if(!mini.isAncestor(this._textEl,c.target)){this._clickTarget=c.target;var b=this;setTimeout(function(){b.focus();mini.selectRange(b._textEl,1000,1000)},1);if(mini.isAncestor(this._buttonEl,c.target)){var a=mini.findParent(c.target,"mini-buttonedit-up");var d=mini.findParent(c.target,"mini-buttonedit-down");if(a){mini.addClass(a,this._buttonPressedCls);this._OnButtonMouseDown(c,"up")}else{if(d){mini.addClass(d,this._buttonPressedCls);this._OnButtonMouseDown(c,"down")}else{mini.addClass(this._buttonEl,this._buttonPressedCls);this._OnButtonMouseDown(c)}}mini.on(document,"mouseup",this.__OnDocMouseUp,this)}}},__OnDocMouseUp:function(b){this._clickTarget=null;var a=this;setTimeout(function(){var f=a._buttonEl.getElementsByTagName("*");for(var d=0,c=f.length;d<c;d++){mini.removeClass(f[d],a._buttonPressedCls)}mini.removeClass(a._buttonEl,a._buttonPressedCls);mini.removeClass(a.el,a._pressedCls)},80);mini.un(document,"mouseup",this.__OnDocMouseUp,this)},__OnFocus:function(a){this.doUpdate();this._initInputEvents();if(this.isReadOnly()){return}this._focused=true;this.addCls(this._focusCls);if(this.selectOnFocus){this.selectText()}this.fire("focus",{htmlEvent:a})},__doFocusCls:function(){if(this._focused==false){this.removeCls(this._focusCls)}},__fireBlur:function(c){var a=this;function b(){if(a._focused==false){a.removeCls(a._focusCls);if(a.validateOnLeave&&a.isEditable()){a._tryValidate()}this.fire("blur",{htmlEvent:c})}}setTimeout(function(){b.call(a)},2)},__OnBlur:function(b){var a=this;a._focused=false;setTimeout(function(){a.__fireBlur(b)},10)},__OnInputKeyDown:function(d){var a={htmlEvent:d};this.fire("keydown",a);if(d.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(d.keyCode==27||d.keyCode==13||d.keyCode==9){var c=this;c.__OnInputTextChanged(null);if(d.keyCode==13){var b=this;b.fire("enter",a)}}if(d.keyCode==27){d.preventDefault()}},__OnInputTextChanged:function(){var a=this._textEl.value;if(a==this.text){return}var b=this.getValue();this.setText(a);this.setValue(a);if(b!==this.getFormValue()){this._OnValueChanged()}},__OnInputKeyUp:function(a){this.fire("keyup",{htmlEvent:a})},__OnInputKeyPress:function(a){this.fire("keypress",{htmlEvent:a})},_OnButtonClick:function(a){var b={htmlEvent:a,cancel:false};this.fire("beforebuttonclick",b);if(b.cancel==true){return}this.fire("buttonclick",b)},_OnButtonMouseDown:function(a,b){this.focus();this.addCls(this._focusCls);this.fire("buttonmousedown",{htmlEvent:a,spinType:b})},onButtonClick:function(b,a){this.on("buttonclick",b,a)},onButtonMouseDown:function(b,a){this.on("buttonmousedown",b,a)},onTextChanged:function(b,a){this.on("textchanged",b,a)},textName:"",setTextName:function(a){this.textName=a;if(this._textEl){mini.setAttr(this._textEl,"name",this.textName)}},getTextName:function(){return this.textName},setSelectOnFocus:function(a){this.selectOnFocus=a},getSelectOnFocus:function(a){return this.selectOnFocus},setShowClose:function(a){this.showClose=a;this._doInputLayout()},getShowClose:function(a){return this.showClose},inputStyle:"",setInputStyle:function(a){this.inputStyle=a;mini.setStyle(this._textEl,a)},getAttrs:function(b){var a=mini.ButtonEdit.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["value","text","openUrl","textName","url","data","emptyText","tableId","inputStyle","defaultText","openWindowWidth","openWindowHeight","onenter","onkeydown","onkeyup","onkeypress","onbuttonclick","onbuttonmousedown","ontextchanged","onfocus","onblur","oncloseclick"]);mini._ParseBool(b,a,["allowInput","inputAsValue","selectOnFocus","showClose"]);mini._ParseInt(b,a,["maxLength","minLength"]);return a}});mini.regClass(mini.BindButtonEdit,"bindbuttonedit");mini.TreePopupEdit=function(){this.data=[];mini.TreePopupEdit.superclass.constructor.call(this);var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}if(this.enabled==false){this.addCls(this._disabledCls)}if(a){this.addCls(this._readOnlyCls)}if(this.required){this.addCls(this._requiredCls)}};mini.extend(mini.TreePopupEdit,mini.PopupEdit,{name:"",formField:true,selectOnFocus:false,showClose:false,data:[],url:"",emptyText:"",openWindowWidth:"",openWindowHeight:"",defaultValue:"",defaultText:"",value:"",text:"",maxLength:1000,minLength:0,height:21,inputAsValue:false,allowInput:true,_noInputCls:"mini-buttonedit-noInput",_readOnlyCls:"mini-buttonedit-readOnly",_disabledCls:"mini-buttonedit-disabled",_emptyCls:"mini-buttonedit-empty",_focusCls:"mini-buttonedit-focus",_buttonCls:"mini-buttonedit-button",_buttonHoverCls:"mini-buttonedit-button-hover",_buttonPressedCls:"mini-buttonedit-button-pressed",_closeCls:"mini-buttonedit-close",set:function(c){if(typeof c=="string"){return this}var b=c.value;delete c.value;var d=c.text;delete c.text;var a=c.url;delete c.url;this._allowUpdate=!(c.enabled==false||c.allowInput==false||c.readOnly);mini.TreePopupEdit.superclass.set.call(this,c);if(this._allowUpdate===false){this._allowUpdate=true;this.doUpdate()}if(!mini.isNull(d)){this.setText(d)}if(!mini.isNull(a)){this.setUrl(a);c.url=a}if(!mini.isNull(b)){this.setValue(b)}return this},uiCls:"mini-treepopupedit",setData:function(a){if(typeof a=="string"){a=this._eval(a)}if(!mini.isArray(a)){a=[]}this.tree.setData(a);this.data=this.tree.data},getData:function(){return this.data},_createPopup:function(){mini.TreePopupEdit.superclass._createPopup.call(this);this.tree=new mini.Tree()},_getButtonsHTML:function(){var a='<span class="mini-buttonedit-close"></span>'+this._getButtonHtml();return'<span class="mini-buttonedit-buttons">'+a+"</span>"},_getButtonHtml:function(){var a="onmouseover=\"mini.addClass(this, '"+this._buttonHoverCls+"');\" onmouseout=\"mini.removeClass(this, '"+this._buttonHoverCls+"');\"";return'<span class="mini-buttonedit-button" '+a+'><span class="mini-bindbuttonedit-icon"></span></span>'},setUrl:function(a){this.getPopup();this.tree.setUrl(a);this.tree.setIdField(this.idField);this.tree.setTextField(this.textField);this.url=this.tree.url;this.data=this.tree.data},getUrl:function(){return this.url},setOpenWindowWidth:function(a){this.openWindowWidth=a},getOpenWindowWidth:function(){return this.openWindowWidth},setOpenWindowHeight:function(a){this.openWindowHeight=a},getOpenWindowHeight:function(){return this.openWindowHeight},_create:function(){this.el=document.createElement("span");this.el.className="mini-buttonedit";var a=this._getButtonsHTML();this.el.innerHTML='<span class="mini-buttonedit-border"><input type="input" class="mini-buttonedit-input" autocomplete="off"/>'+a+'</span><input name="'+this.name+'" type="hidden"/>';this._borderEl=this.el.firstChild;this._textEl=this._borderEl.firstChild;this._valueEl=this.el.lastChild;this._buttonsEl=this._borderEl.lastChild;this._buttonEl=this._buttonsEl.lastChild;this._closeEl=this._buttonEl.previousSibling;this._doEmpty()},destroy:function(a){if(this.el){this.el.onmousedown=null;this.el.onmousewheel=null;this.el.onmouseover=null;this.el.onmouseout=null}if(this._textEl){this._textEl.onchange=null;this._textEl.onfocus=null;mini.clearEvent(this._textEl);this._textEl=null}mini.TreePopupEdit.superclass.destroy.call(this,a)},_initEvents:function(){mini._BindEvents(function(){mini_onOne(this.el,"mousedown",this.__OnMouseDown,this);mini_onOne(this._textEl,"focus",this.__OnFocus,this);mini_onOne(this._textEl,"change",this.__OnInputTextChanged,this);var a=this.text;this.text=null;if(this.el){this.setText(a)}},this)},_inputEventsInited:false,_initInputEvents:function(){if(this._inputEventsInited){return}this._inputEventsInited=true;mini.on(this.el,"click",this.__OnClick,this);mini.on(this._textEl,"blur",this.__OnBlur,this);mini.on(this._textEl,"keydown",this.__OnInputKeyDown,this);mini.on(this._textEl,"keyup",this.__OnInputKeyUp,this);mini.on(this._textEl,"keypress",this.__OnInputKeyPress,this)},_buttonWidth:20,_closeWidth:20,_doInputLayout:function(b){if(this._closeEl){this._closeEl.style.display=this.showClose?"inline-block":"none"}var a=this._buttonsEl.offsetWidth+2;if(a==2){this._noLayout=true}else{this._noLayout=false}this._borderEl.style.paddingRight=a+"px";if(b!==false){this.doLayout()}},doLayout:function(){if(this._noLayout){this._doInputLayout(false)}},setHeight:function(a){if(parseInt(a)==a){a+="px"}this.height=a},focus:function(){try{this._textEl.focus();var a=this;setTimeout(function(){if(a._focused){a._textEl.focus()}},10)}catch(b){}},blur:function(){try{this._textEl.blur()}catch(a){}},selectText:function(){this._textEl.select()},getTextEl:function(){return this._textEl},setName:function(a){this.name=a;if(this._valueEl){mini.setAttr(this._valueEl,"name",this.name)}},setText:function(b){if(b===null||b===undefined){b=""}var a=this.text!==b;this.text=b;this._textEl.value=b;this._doEmpty()},getText:function(){var a=this._textEl.value;return a},setValue:function(b){var a=this.tree.getValueAndText(b);if(a[1]==""&&!this.valueFromSelect){a[0]=b;a[1]=b}this.value=b;this._valueEl.value=b;this.text=this._textEl.value=a[1];this._doEmpty()},getValue:function(){return this.value},getFormValue:function(){var a=this.value;if(a===null||a===undefined){a=""}return String(a)},_doEmpty:function(){this._textEl.placeholder=this.emptyText;if(this.emptyText){mini._placeholder(this._textEl)}},setEmptyText:function(a){if(this.emptyText!=a){this.emptyText=a;this._doEmpty()}},getEmptyText:function(){return this.emptyText},setMaxLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.maxLength=a;this._textEl.maxLength=a},getMaxLength:function(){return this.maxLength},setMinLength:function(a){a=parseInt(a);if(isNaN(a)){return}this.minLength=a},getMinLength:function(){return this.minLength},setEnabled:function(a){mini.TreePopupEdit.superclass.setEnabled.call(this,a);this._tryValidate()},_doReadOnly:function(){var a=this.isReadOnly();if(a||this.allowInput==false){this._textEl.readOnly=true}else{this._textEl.readOnly=false}if(a){this.addCls(this._readOnlyCls)}else{this.removeCls(this._readOnlyCls)}if(this.allowInput){this.removeCls(this._noInputCls)}else{this.addCls(this._noInputCls)}if(this.enabled){this._textEl.disabled=false}else{this._textEl.disabled=true}},setAllowInput:function(a){this.allowInput=a;this._doReadOnly()},getAllowInput:function(){return this.allowInput},setInputAsValue:function(a){this.inputAsValue=a},getInputAsValue:function(){return this.inputAsValue},_errorIconEl:null,getErrorIconEl:function(){if(!this._errorIconEl){this._errorIconEl=mini.append(this.el,'<span class="mini-errorIcon"></span>')}return this._errorIconEl},_RemoveErrorIcon:function(){if(this._errorIconEl){var a=this._errorIconEl;jQuery(a).remove()}this._errorIconEl=null},__OnClick:function(b){if(this.isReadOnly()||this.enabled==false){return}if(!mini.isAncestor(this._borderEl,b.target)){return}var a=new Date();if(mini.isAncestor(this._buttonEl,b.target)){this._OnButtonClick(b)}if(mini.findParent(b.target,this._closeCls)){this.fire("closeclick",{htmlEvent:b})}},__OnMouseDown:function(c){if(this.isReadOnly()||this.enabled==false){return}if(!mini.isAncestor(this._borderEl,c.target)){return}if(!mini.isAncestor(this._textEl,c.target)){this._clickTarget=c.target;var b=this;setTimeout(function(){b.focus();mini.selectRange(b._textEl,1000,1000)},1);if(mini.isAncestor(this._buttonEl,c.target)){var a=mini.findParent(c.target,"mini-buttonedit-up");var d=mini.findParent(c.target,"mini-buttonedit-down");if(a){mini.addClass(a,this._buttonPressedCls);this._OnButtonMouseDown(c,"up")}else{if(d){mini.addClass(d,this._buttonPressedCls);this._OnButtonMouseDown(c,"down")}else{mini.addClass(this._buttonEl,this._buttonPressedCls);this._OnButtonMouseDown(c)}}mini.on(document,"mouseup",this.__OnDocMouseUp,this)}}},__OnDocMouseUp:function(b){this._clickTarget=null;var a=this;setTimeout(function(){var f=a._buttonEl.getElementsByTagName("*");for(var d=0,c=f.length;d<c;d++){mini.removeClass(f[d],a._buttonPressedCls)}mini.removeClass(a._buttonEl,a._buttonPressedCls);mini.removeClass(a.el,a._pressedCls)},80);mini.un(document,"mouseup",this.__OnDocMouseUp,this)},__OnFocus:function(a){this.doUpdate();this._initInputEvents();if(this.isReadOnly()){return}this._focused=true;this.addCls(this._focusCls);if(this.selectOnFocus){this.selectText()}this.fire("focus",{htmlEvent:a})},__doFocusCls:function(){if(this._focused==false){this.removeCls(this._focusCls)}},__fireBlur:function(c){var a=this;function b(){if(a._focused==false){a.removeCls(a._focusCls);if(a.validateOnLeave&&a.isEditable()){a._tryValidate()}this.fire("blur",{htmlEvent:c})}}setTimeout(function(){b.call(a)},2)},__OnBlur:function(b){var a=this;a._focused=false;setTimeout(function(){a.__fireBlur(b)},10)},__OnInputKeyDown:function(d){var a={htmlEvent:d};this.fire("keydown",a);if(d.keyCode==8&&(this.isReadOnly()||this.allowInput==false)){return false}if(d.keyCode==27||d.keyCode==13||d.keyCode==9){var c=this;c.__OnInputTextChanged(null);if(d.keyCode==13){var b=this;b.fire("enter",a)}}if(d.keyCode==27){d.preventDefault()}},__OnInputTextChanged:function(){var a=this._textEl.value;if(a==this.text){return}var b=this.getValue();this.setText(a);this.setValue(a);if(b!==this.getFormValue()){this._OnValueChanged()}},__OnInputKeyUp:function(a){this.fire("keyup",{htmlEvent:a})},__OnInputKeyPress:function(a){this.fire("keypress",{htmlEvent:a})},_OnButtonClick:function(a){var b={htmlEvent:a,cancel:false};this.fire("beforebuttonclick",b);if(b.cancel==true){return}this.fire("buttonclick",b)},_OnButtonMouseDown:function(a,b){this.focus();this.addCls(this._focusCls);this.fire("buttonmousedown",{htmlEvent:a,spinType:b})},onButtonClick:function(b,a){this.on("buttonclick",b,a)},onButtonMouseDown:function(b,a){this.on("buttonmousedown",b,a)},onTextChanged:function(b,a){this.on("textchanged",b,a)},textName:"",setTextName:function(a){this.textName=a;if(this._textEl){mini.setAttr(this._textEl,"name",this.textName)}},getTextName:function(){return this.textName},setSelectOnFocus:function(a){this.selectOnFocus=a},getSelectOnFocus:function(a){return this.selectOnFocus},setShowClose:function(a){this.showClose=a;this._doInputLayout()},getShowClose:function(a){return this.showClose},inputStyle:"",setInputStyle:function(a){this.inputStyle=a;mini.setStyle(this._textEl,a)},idField:"",textField:"",setValueField:function(a){this.idField=a},getValueField:function(){return this.idField},setTextField:function(a){this.textField=a},getTextField:function(){return this.textField},getAttrs:function(b){var a=mini.TreePopupEdit.superclass.getAttrs.call(this,b);var c=jQuery(b);mini._ParseString(b,a,["valueField","textField","url","value","text","textName","data","emptyText","inputStyle","defaultText","openWindowWidth","openWindowHeight","onenter","onkeydown","onkeyup","onkeypress","onbuttonclick","onbuttonmousedown","ontextchanged","onfocus","onblur","oncloseclick"]);mini._ParseBool(b,a,["allowInput","inputAsValue","selectOnFocus","showClose"]);mini._ParseInt(b,a,["maxLength","minLength"]);return a}});mini.regClass(mini.TreePopupEdit,"treepopupedit");function showMiniWorkStandard(b){var c="";var d=jQuery("table",jQuery("#step_id_"+b).children().eq(0));if(d!=null&&d.size()>0){d.toggle()}else{addMiniWorkStandard(workflowEntryId,workflowName,workflowVersion,b,c)}var a=jQuery("img",jQuery("#step_id_"+b).children().eq(0));if(typeof(a.attr("src"))=="undefined"){return false}if(a.attr("src").indexOf("expandbutton")>0){a.attr("src",getRootPath()+"/miniui/themes/icons/collapsebutton.gif")}else{a.attr("src",getRootPath()+"/miniui/themes/icons/expandbutton.gif")}}var miniWorkstandards=new Array();function addMiniWorkStandard(b,d,a,c,f){if(b==""&&d==""&&a==""){return false}var g="<table id='tab' border='1' cellspacing='0' style='width:100%;border-collapse:collapse;border-color: #000;'>";g=g.concat("<tr style='height: 25px;background-color: #666'>");g=g.concat("<td align='center' width='5%' style='border-color: #000;color:#fff;'><b></b></td>");g=g.concat("<td align='center' colspan='2' style='border-color: #000;color:#fff;'><b></b></td>");g=g.concat("<td align='center' width='40%' style='border-color: #000;color:#fff;'><b></b></td>");g=g.concat("</tr>");jQuery.ajax({type:"get",cache:false,url:getRootPath()+"/tbp/workflow/monitor/workStandardNewAction.do?method=buildHtml&entryId="+b+"&stepId="+c+"&workflowName="+d+"&version="+a+"&bizKey="+f,dataType:"json",data:{},success:function(k){miniWorkstandards.push(k);var j="";var l=0;$(k).each(function(q,r){var t=buildMiniControl(r);var p='<tr><td align="center" width="40px" style="border-color: #000;">'+(l+1)+'</td><td align="left" colspan="2" style="border-color: #000;word-wrap:break-word;word-break:break-all;"><a href="#">'+r.workContent+'</a></td><td width="400px" style="border-color: #000;">'+t+"</td></tr>";var o='<tr><th align="center" width="40px" rowspan='+r.groupsize+' style="border-color: #000;font-weight:normal;">'+(l+1)+'</th><th align="center" width=20% colspan="1" rowspan='+r.groupsize+' style="border-color: #000;font-weight:normal;">'+r.groupname+'</th><td align="left" colspan="1" style="border-color: #000;word-wrap:break-word;word-break:break-all;"><a href="#">'+r.workContent+'</a></td><td width="400px" style="border-color: #000;">'+t+"</td></tr>";if($.trim(r.groupname)!=""){if(r.groupname==j){var s='<tr><td align="left" colspan="1" style="border-color: #000;word-wrap:break-word;word-break:break-all;"><a href="#">'+r.workContent+'</a></td><td width="400px" style="border-color: #000;">'+t+"</td></tr>";g=g.concat(s)}if(r.groupname!=j){j=r.groupname;g=g.concat(o);l++}}else{if(r.groupname==null||r.groupname==""){g=g.concat(p);l++}}});g=g.concat("</table>");var n=jQuery("#step_id_"+c).children().eq(0);n.append(g);if(typeof(workStandardEx)!="undefined"){workStandardEx(c)}},error:function(j){alert(":"+j.status+"")}})}var workStandardIds="";function buildMiniControl(u){var s=workflowStepId;if(workStandardIds==""){workStandardIds=u.id+""}else{workStandardIds=workStandardIds+","+u.id}var k;k='<input id="message'+u.id+'" type="hidden" value="'+u.message+'"/>';var c='disabled="true"';var n="readonly";var g=String(u.stepId);var d="";flag=false;var v=false;if($.trim(u.otherstep)!=""){var l=u.otherstep.split("$");for(f=0;f<l.length;f++){if(s!=""&&s==l[f]){v=true}}}if(g==s||v){c="";n=""}else{d="$"}if(g==s||v){flag=true}if(typeof(workStandardExDefaultContent)!="undefined"){workStandardExDefaultContent(u)}if(u.showType=="0"){if(u.workMeasureContent!=""){k=k+'<textarea name="text'+d+"#"+u.id+'" rows="2" cols="1" style="width:98%" id="text'+d+"#"+u.id+'" onBlur="saveMiniWorkStandardForAjax()" '+n+">"+u.workMeasureContent+"</textarea>"}else{if(u.showDefaultContent.toUpperCase()=="Y"&&flag){k=k+'<textarea name="text'+d+"#"+u.id+'" rows="2" cols="1" style="width:98%" id="text'+d+"#"+u.id+'" onBlur="saveMiniWorkStandardForAjax()" '+n+">"+u.defaultContent+"</textarea>"}else{k=k+'<textarea name="text'+d+"#"+u.id+'" rows="2" cols="1" style="width:98%" id="text'+d+"#"+u.id+'" onBlur="saveMiniWorkStandardForAjax()" '+n+"></textarea>"}}}else{if(u.showType=="1"){var p=u.showConent.split("$");var r=u.workMeasureContent;for(var f=0;f<p.length;f++){if((r!=""&&p[f]==r)){k=k+'<input type="hidden" name="radioID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="radio" name="radioButton'+d+"#"+u.id+'" id="radioButton#'+u.id+"#"+f+'" checked="checked" value="'+p[f]+'" onclick="radioClick(this)" onBlur="saveMiniWorkStandardForAjax()" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp"}else{if(r==""&&(u.defaultContent!=""&&p[f]==u.defaultContent)&&u.showDefaultContent.toUpperCase()=="Y"&&flag){k=k+'<input type="hidden" name="radioID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="radio" name="radioButton'+d+"#"+u.id+'" id="radioButton#'+u.id+"#"+f+'" checked="checked" value="'+p[f]+'" onclick="radioClick(this)" onBlur="saveMiniWorkStandardForAjax()" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp"}else{k=k+'<input type="hidden" name="radioID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="radio" name="radioButton'+d+"#"+u.id+'" id="radioButton#'+u.id+"#"+f+'" value="'+p[f]+'" onclick="radioClick(this)" onBlur="saveMiniWorkStandardForAjax()" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp"}}}if(c==""){var q=u.showMessage.split("$");for(var f=0;f<q.length;f++){k=k+'<span id="spanRadio#'+u.id+"#"+f+'" style="display: none"><font color="red">'+q[f]+"</font></span>"}}if(u.opinionOption!=""&&u.opinionContent!=""){k=k+'<div><textarea name="opinion'+d+"#"+u.id+'" rows="2" cols="1" style="width:98%" id="opinion#'+u.id+'" '+c+">"+u.opinionContent+"</textarea></div>"}else{if(u.opinionOption!=""){k=k+'<div><textarea name="opinion'+d+"#"+u.id+'" rows="2" cols="1" style="width:98%;display: none" id="opinion#'+u.id+'" '+c+"></textarea></div>"}}}else{if(u.showType=="2"){var p=u.showConent.split("$");var t=u.defaultContent.split("$");for(var f=0;f<p.length;f++){var o=false;if(u.workMeasureContent!=""){var a=u.workMeasureContent.split("$");for(var b=0;b<a.length;b++){if(p[f]==a[b]){k=k+'<input type="hidden" name="checkID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="checkbox" name="checkBox'+d+"#"+u.id+'" id="checkBox#'+u.id+"#"+f+'" checked="checked" value="'+p[f]+'" onclick="checkClick(this)" onBlur="saveMiniWorkStandardForAjax(this)" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp";o=true;break}}}else{if(t.length>0&&u.showDefaultContent.toUpperCase()=="Y"&&flag){for(var b=0;b<t.length;b++){if(p[f]==t[b]){k=k+'<input type="hidden" name="checkID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="checkbox" name="checkBox'+d+"#"+u.id+'" id="checkBox#'+u.id+"#"+f+'" checked="checked" value="'+p[f]+'" onclick="checkClick(this)" onBlur="saveMiniWorkStandardForAjax(this)" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp";o=true;break}}}}if(o==false){k=k+'<input type="hidden" name="checkID'+d+"#"+u.id+'" value="'+u.id+'"/><input type="checkbox" name="checkBox'+d+"#"+u.id+'" id="checkBox#'+u.id+"#"+f+'" value="'+p[f]+'" onclick="checkClick(this)" onBlur="saveMiniWorkStandardForAjax(this)" '+c+">"+p[f]+"</input>&nbsp;&nbsp;&nbsp;&nbsp"}}}}}return k}function saveMiniWorkStandardForAjax(){var l=workflowStepId;var f=workflowEntryId;var a="";var o;if(workStandardIds.indexOf(",",0)>0){o=workStandardIds.split(",")}else{o=new Array([workStandardIds])}for(var n=0;n<o.length;n++){var r=o[n];if(document.getElementById("text#"+r)){var s=document.getElementById("text#"+r).value;if(a==""){a=r+"%23"+s}else{a=a+"@"+r+"%23"+s}}if(document.getElementsByName("radioButton#"+r).length>0){var q="";var b=document.getElementsByName("radioButton#"+r).length;for(var g=0;g<b;g++){var c=document.getElementsByName("radioButton#"+r)[g];if(c.checked==true){q=c.value}}if(a==""){a=r+"%23"+q}else{a=a+"@"+r+"%23"+q}}if(document.getElementsByName("checkBox#"+r).length>0){var q="";var b=document.getElementsByName("checkBox#"+r).length;for(var d=0;d<b;d++){var p=document.getElementsByName("checkBox#"+r)[d];if(p.checked==true){if(q==""){q=p.value}else{q=q+"$"+p.value}}}if(a==""){a=r+"%23"+q}else{a=a+"@"+r+"%23"+q}}}if(a!=""){saveMiniWorkStandard(f,l,a);return a}}function saveMiniWorkStandard(a,b,c){jQuery.ajax({type:"GET",cache:false,url:getRootPath()+"/tbp/workflow/monitor/workStandardNewAction.do?method=saveOrUpdateWorkMeasures&entryId="+a+"&stepId="+b+"&workContents="+c,dataType:"text",data:{},success:function(d){},error:function(d){alert(":"+d.status+"")}})}var minirelatestep="";function showMiniOtherStep(b,a,c){jQuery.ajax({type:"get",cache:false,url:getRootPath()+"/tbp/workflow/monitor/workStandardNewAction.do?method=showOtherStep&entryId="+b+"&version="+a+"&stepId="+c,dataType:"text",data:{},success:function(d){if($.trim(d)!=0&&d.length!=0){datas=d.split("$");minirelatestep=datas;for(i=0;i<datas.length;i++){showMiniWorkStandard(datas[i])}}},error:function(d){}})}function showMiniCheckMessage(b){var a=b.id.split("_")[1];if(b.checked==true){document.getElementById("spanCheck"+a).style.display=""}else{document.getElementById("spanCheck"+a).style.display="none"}}function showMiniRadioMessage(d){var a=d.id.split("#");var c=a[1];var b=a[2];if(d.checked==true){if(document.getElementById("spanRadio#"+c+"#"+b)!=null){document.getElementById("spanRadio#"+c+"#"+b).style.display="";for(var f=0;f<miniWorkstandards.length;f++){$(miniWorkstandards[f]).each(function(g,j){if(j.id==c){var k=j.showMessage.split("$");for(var g=0;g<k.length;g++){if(b!=g){document.getElementById("spanRadio#"+c+"#"+g).style.display="none"}}}})}}}}var opinionIndex=-1;var opinionContentArray=new Array();function writeMiniOpinion(d){var b=d.id.split("#");var c=b[1];var a=false;for(var f=0;f<miniWorkstandards.length;f++){$(miniWorkstandards[f]).each(function(l,o){if(o.id==c){var q=o.opinionOption.split("$");for(var n=0;n<q.length;n++){if(d.value==q[n]){if(opinionIndex==-1){var p=o.workMeasureContent;for(var g=0;g<q.length;g++){if(q[g]==p){opinionContentArray[g]=document.getElementById("opinion#"+c).value}}document.getElementById("opinion#"+c).value=""}if(opinionIndex!=-1){opinionContentArray[opinionIndex]=document.getElementById("opinion#"+c).value;if(typeof(opinionContentArray[n])!="undefined"){document.getElementById("opinion#"+c).value=opinionContentArray[n]}else{document.getElementById("opinion#"+c).value=""}}document.getElementById("opinion#"+c).style.display="";opinionIndex=n;a=true;break}}if(a==false){if(document.getElementById("opinion#"+c)!=null){document.getElementById("opinion#"+c).style.display="none"}}}})}}function validateWorkStandard(){if(getUrlQuery("method")=="getAddPage"){return true}var d;var g=new Array();var j=true;var b="${step_id}";for(var k=0;k<miniWorkstandards.length;k++){$(miniWorkstandards[k]).each(function(s,v){if(v.stepId==b){var l=document.getElementById("message"+v.id);if(l!=null&&typeof(l)!=undefined){g=l.value.split("$")}if(document.getElementById("text#"+v.id)){d=document.getElementById("text#"+v.id).value;if(d.replace(/(^\s*)|(\s*$)/g,"")==""&&g!=""){alert(""+(s+1)+""+g);j=false}}if(document.getElementsByName("radioButton#"+v.id).length>0){var w="";var u="";var o=document.getElementsByName("radioButton#"+v.id).length;var n=false;for(var r=0;r<o;r++){var p=document.getElementsByName("radioButton#"+v.id)[r];if(g!=null&&g!=""){w=g[r]}if(p.checked==false&&w!=""&&typeof(w)!="undefined"){alert(""+(s+1)+""+w);j=false}if(p.checked==true){n=true}}if(n==false&&j==true){alert(""+(s+1)+"");j=false}}if(document.getElementsByName("checkBox#"+v.id).length>0){var w="";var u="";var o=document.getElementsByName("checkBox#"+v.id).length;var n=false;for(var q=0;q<o;q++){var t=document.getElementsByName("checkBox#"+v.id)[q];if(g!=null&&g!=""){w=g[q]}if(t.checked==false&&w!=""&&typeof(w)!="undefined"){alert(""+(s+1)+""+w);j=false}if(t.checked==true){n=true}}if(n==false&&j==true){alert(""+(s+1)+"");j=false}}}})}var a=saveMiniWorkStandardForAjax();if(minirelatestep!=""){var f=workflowEntryId;for(var c=0;c<minirelatestep.length;c++){saveMiniWorkStandard(f,minirelatestep[c],a)}minirelatestep=""}return j}function getUrlQuery(d){var a=new Array();var b=document.location.search.substr(1).split("&");for(i=0;i<b.length;i++){var c=b[i].split("=");a[c[0]]=c[1]}return a[d]};